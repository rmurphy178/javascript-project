{"version":3,"sources":["webpack:///webpack/bootstrap f99c6869c1ceb4088756","webpack:///./lib/js/main.js","webpack:///./lib/js/NexusUI.js","webpack:///(webpack)/buildin/module.js","webpack:///./lib/js/sequencer.js","webpack:///./lib/js/piano.js","webpack:///./lib/js/button.js","webpack:///./lib/js/sounds.js","webpack:///./lib/js/jsfx.js"],"names":["Nexus","document","addEventListener","board","piano","button","on","v","sequencer","start","play","console","log","webpackUniversalModuleDefinition","root","factory","exports","module","modules","installedModules","__webpack_require__","moduleId","id","loaded","call","m","c","p","NexusUI","window","_interopRequireWildcard","obj","__esModule","_interopRequire","_createClass","defineProperties","target","props","key","prop","configurable","value","writable","Object","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Interfaces","math","Rack","Tune","Transform","Counter","Radio","Drunk","Sequence","Matrix","WAAClock","Interval","context","_key","Core","Models","_key2","_key3","DefaultContext","AudioContext","webkitAudioContext","_context","tune","note","bind","clock","colors","accent","fill","light","dark","mediumLight","mediumDark","transform","add","get","set","ctx","stop","Position","Slider","Toggle","Button","TextButton","RadioButton","Number","Select","Dial","Piano","Sequencer","Pan2D","Tilt","Multislider","Pan","Envelope","Spectrogram","Meter","Oscilloscope","_get","object","property","receiver","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","_inherits","subClass","superClass","create","constructor","enumerable","__proto__","svg","Interface","Step","Interaction","_Interface","options","defaults","size","mode","minX","maxX","stepX","x","minY","maxY","stepY","y","arguments","_x","settings","_y","position","Handle","width","height","normalized","init","render","buildInterface","knob","element","appendChild","sizeInterface","resize","_minDimension","Math","min","knobRadius","off","setAttribute","colorInterface","style","backgroundColor","clicked","knobCoordinates","click","anchor","mouse","move","update","updateNormal","emit","release","max","step","type","createElementNS","arc","radius","startAngle","endAngle","toCartesian","end","largeArcFlag","d","join","radialGradient","defs","numberOfStops","ri","stops","gradient","i","_stop","push","clip","normalize","scale","inNum","inMin","inMax","outMin","outMax","toPolar","r","sqrt","theta","atan2","PI","angle","cos","sin","prune","data","parseFloat","toFixed","invert","mtof","midi","pow","interp","loc","pick","random","length","octave","num","bound1","bound2","low","high","floor","rf","cycle","input","average","total","distance","x1","y1","x2","y2","a","b","gainToDB","gain","log10","coin","odds","dom","util","touch","EventEmitter","_EventEmitter","args","name","parseSettings","wait","defaultColors","unshift","defaultSize","splice","body","snapWithParent","event","component","setting","isObject","parseElement","HTMLElement","hasAttribute","Array","isArray","indexOf","getComputedStyle","getPropertyValue","replace","buildFrame","attachListeners","finalTouches","_this","interactionTarget","exists","evt","preTouch","preTouchMove","preTouchRelease","boundPreMove","preMove","boundPreRelease","preRelease","preClick","cursor","e","offset","findPosition","locateMouse","moveEvent","releaseEvent","preventDefault","stopPropagation","setTimeout","removeEventListener","locateTouch","touchMove","touchRelease","empty","lastChild","removeChild","destroy","removeAllListeners","instrument","customDestroy","colorize","color","el","viewportOffset","getBoundingClientRect","top","scrollY","left","scrollX","getElementById","SVGElement","pageX","pageY","targetTouches","SmartCanvas","createElement","getContext","w","h","documentElement","_events","_maxListeners","defaultMaxListeners","setMaxListeners","n","isNumber","isNaN","er","handler","len","listeners","error","Error","err","isUndefined","isFunction","slice","apply","addListener","listener","newListener","warned","trace","once","fired","g","removeListener","list","ret","listenerCount","evlistener","emitter","arg","changed","oldValue","round","defineProperty","ToggleModel","direction","xbound","ybound","previous","sensitivity","boundary","center","_anchor","convertPositionToValue","increment","abs","current","state","paintbrush","timeout","clearTimeout","turnOn","flip","turnOff","orientation","_value","bar","fillbar","barOffset","cornerRadius","knobData","level","thickness","_state","knobSize","ButtonTemplate","_ButtonTemplate","pad","down","bend","up","emitting","text","alternate","_text","_alternateText","textElement","innerHTML","textsize","textsize2","alternateText","textsize3","styles","cssText","numberOfButtons","active","buttons","_numberOfButtons","container","buttonWidth","buttonHeight","index","select","deselect","decimalPlaces","actual","which","blur","hasMoved","readOnly","initial","changeFactor","newvalue","focus","setSelectionRange","link","destination","passiveUpdate","_selectedIndex","_options","fontSize","outline","highlight","boundRender","defineOptions","border","selectedIndex","remove","Option","interaction","previousAngle","background","screw","handle","handle2","handleFill","handle2Fill","handleLine","diameter","handlePoints","handle2Points","handlePath","handle2Path","arcEndingA","arcEndingX","arcEndingY","realValue","PianoKey","interacting","lowNote","highNote","keyPattern","range","keys","toggleTo","borderRadius","display","scaleIndex","keyChange","addTouchListeners","keyX","keyPositions","nextScaleIndex","keysWide","padding","zIndex","currentElement","elementFromPoint","clientX","clientY","pastKey","setRange","toggleKey","toggleIndex","MatrixModel","CounterModel","MatrixCell","row","column","matrix","rows","columns","interval","ui","stepper","cells","_location","locate","cell","cellWidth","cellHeight","iterate","pattern","ms","next","reverse","pastCell","toggle","all","values","forEach","rotate","amount","cut","concat","proxy","populate","oddsSequence","erase","arr","f","f2","formatAsText","patternString","_row","_rowWrapper","toString","_column","_columnWrapper","_x2","sequence","_mode","drunkWalk","startValues","drunk","first","loop","speakers","levels","calculateLevels","speakerElements","speakerElement","speaker","s","moveSource","location","moveSpeaker","_active","boundUpdate","DeviceOrientationEvent","orientationListener","title","circleX","circleY","circleZ","barX","barY","barZ","barX2","barY2","barZ2","textContent","beta","gamma","z","alpha","cx","baseVal","cy","SliderTemplate","SingleSlider","_SliderTemplate","hasKnob","multislider","interpolation","lowValue","sliders","highValue","slide","customStyle","numberOfSliders","_numberOfSliders","slider","sliderWidth","sliderHeight","pastslider","setSlider","setAllSliders","L","R","Point","point","envelope","nodes","prevIndex","nextIndex","prevNode","nextNode","lowX","highX","getCoordinates","points","selected","node","sortPoints","line","calculatePath","calculatePoints","findNearestNode","scaleNode","nearestIndex","nearestDist","before","getIndexFromX","clippedX","clippedY","sort","addPoint","scan","priorIndex","priorPoint","nextPoint","movePoint","adjustPoint","xOffset","yOffset","destroyPoint","setPoints","allPoints","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","source","canvas","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","barWidth","barHeight","definition","subarray","connect","disconnect","channels","splitter","createChannelSplitter","analysers","smoothingTimeConstant","Float32Array","db","Infinity","meterWidth","getFloatTimeDomainData","rms","_i","linear","exp","channelCount","getByteTimeDomainData","lineWidth","strokeStyle","beginPath","sliceWidth","moveTo","lineTo","stroke","meta","attribute","open","boxSizing","userSelect","mozUserSelect","webkitUserSelect","contents","childNodes","titleBar","fontFamily","right","lineHeight","hide","show","section","createInterfaceID","widget","interfaceIDs","attributes","att","nodeName","nodeValue","toUpperCase","keyword","htmlElements","getElementsByTagName","elements","getAttribute","formattedType","toLowerCase","output","etmajor","createScale","frequency","ratio","MIDI","stepIn","octaveIn","scaleDegree","freq","newScale","loadScaleFromFrequencies","createJIScale","freqs","loadScale","scales","frequencies","search","letters","possible","chord","midis","_len","onVals","array","warn","process","isBrowser","CLOCK_DEFAULTS","toleranceLate","toleranceEarly","Event","deadline","func","_cleared","_latestTime","_earliestTime","repeatTime","schedule","clear","_removeEvent","repeat","time","_hasEvent","tolerance","late","early","_refreshEarlyLateDates","_insertEvent","isRepeated","currentTime","_execute","timeStretch","tRef","_started","onexpired","opts","self","tickMethod","delay","_createEvent","_absTime","callbackAtTime","events","bufferSize","_clockNode","createScriptProcessor","onaudioprocess","nextTick","_tick","shift","_indexByTime","ind","mid","relTime","_relTime","absTime","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","Item","browser","env","argv","version","versions","noop","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","rate","_event","newrate","audio","Audio","jsfx","Sounds","library","sfx","chr","String","fromCharCode","TAU","bitsPerSample","numChannels","EPSILON","SampleRate","Sec","SetSampleRate","sampleRate","getDefaultSampleRate","Sound","params","processor","Processor","DefaultModules","block","createFloatArray","getSamplesLeft","generate","CreateAudio","ondone","onprogress","player","_audio","toLoad","map_object","_","sounds","SoundsImmediate","FloatBuffer","Node","audioContext","stayConnected","gen","ev","outputBuffer","getChannelData","finished","AudioBuffer","buffer","createBuffer","Live","BufferSize","volume","createGain","_volume","_close","close","_play","Module","G","stage","PhaseSpeed","PhaseSpeedMod","Generator","SampleMod","Volume","byStage","InitDefaultParams","M","P","def","D","JSON","parse","stringify","setup","$","N","samples","envelopes","Frequency","Start","H","Min","Max","Slide","DeltaSlide","RepeatSpeed","ChangeAmount","ChangeSpeed","SR","phaseParams","phaseSpeed","phaseSpeedMax","phaseSpeedMin","phaseSlide","phaseDeltaSlide","repeatLimit","arpeggiatorTime","arpeggiatorLimit","arpeggiatorMod","speed","deltaSlide","arpTime","arpLimit","arpMod","Vibrato","Depth","DepthSlide","FrequencySlide","vibratoPhase","vibratoDepth","vibratoPhaseSpeed","vibratoPhaseSpeedSlide","vibratoDepthSlide","phase","depth","depthSlide","clamp1","Func","C","A","B","ASlide","BSlide","generatorPhase","generator","assert","generatorA","generatorASlide","generatorB","generatorBSlide","GuitarBufferSize","Guitar","guitarA","guitarB","guitarC","guitarBuffer","guitarHead","BS","BM","T","t","Filter","LP","LPSlide","LPResonance","HP","HPSlide","FilterEnabled","LPEnabled","LPPos","LPPosSlide","LPDamping","HPPos","enabled","lp","lpPos","lpPosSlide","lpSlide","lpDamping","lpEnabled","hp","hpPos","hpSlide","lpPos_","sample","PhaserBufferSize","Phaser","Offset","Sweep","phaserBuffer","phaserPos","phaserOffset","phaserOffsetSlide","pos","offsetSlide","Master","Attack","Sustain","Punch","Decay","V","VP","S","E","vol","grad","clamp","EmptyParams","_RemoveEmptyParams","RemoveEmptyParams","Object_keys","Preset","Reset","Coin","runif","Laser","rchoose","Explosion","Powerup","Hit","Jump","Lucky","out","moduleName","unoise","newGenerator","sine","saw","triangle","square","synth","__noiseLast","noise","string","head","buf","Function","CreateWave","blockAlign","byteRate","createByteArray","charCodeAt","nBytes","CopyFToU8","wave","U8ToB64","DownloadAsFile","href","src","Util","into","floats","k","CHUNK","result","btoa","condition","message","fn","hasOwnProperty","gens","_createFloatArray"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;AC7DA;;IAAYA,K;;AAEZ;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEAC,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAU;;AAEpD,MAAMC,QAAQ,yBAAd;AACA,MAAMC,QAAQ,qBAAd;AACA,MAAMC,SAAS,sBAAf;;AAGAA,SAAOA,MAAP,CAAcC,EAAd,CAAiB,QAAjB,EAA0B,UAASC,CAAT,EAAY;AACpCJ,UAAMK,SAAN,CAAgBC,KAAhB;AACAJ,WAAOK,IAAP;AACF,GAHA;;AAMAP,QAAMK,SAAN,CAAgBF,EAAhB,CAAmB,MAAnB,EAA0B,UAASC,CAAT,EAAY;AACtCI,YAAQC,GAAR,CAAYL,CAAZ;AACD,GAFC;AAMH,CAnBD,E;;;;;;;;;;;;ACPA,CAAC,SAASM,gCAAT,CAA0CC,IAA1C,EAAgDC,OAAhD,EAAyD;AACzD,KAAG,gCAAOC,OAAP,OAAmB,QAAnB,IAA+B,gCAAOC,MAAP,OAAkB,QAApD,EACCA,OAAOD,OAAP,GAAiBD,SAAjB,CADD,KAEK,IAAG,IAAH,EACJ,iCAAO,EAAP,oCAAWA,OAAX;AAAA;AAAA;AAAA,qGADI,KAEA,IAAG,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAtB,EACJA,QAAQ,SAAR,IAAqBD,SAArB,CADI,KAGJD,KAAK,SAAL,IAAkBC,SAAlB;AACD,CATD,aASS,YAAW;AACpB,QAAO,SAAU,UAASG,OAAT,EAAkB;AAAE;AACrC,WADmC,CACzB;AACV,WAAU,IAAIC,mBAAmB,EAAvB;AACV;AACA,WAJmC,CAIzB;AACV,WAAU,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACjD;AACA,YAFiD,CAEtC;AACX,YAAW,IAAGF,iBAAiBE,QAAjB,CAAH;AACX,aAAY,OAAOF,iBAAiBE,QAAjB,EAA2BL,OAAlC;AACZ;AACA,YANiD,CAMtC;AACX,YAAW,IAAIC,SAASE,iBAAiBE,QAAjB,IAA6B;AACrD,aAAYL,SAAS,EADgC;AAErD,aAAYM,IAAID,QAFqC;AAGrD,aAAYE,QAAQ;AACpB,aAJqD,EAA1C;AAKX;AACA,YAbiD,CAatC;AACX,YAAWL,QAAQG,QAAR,EAAkBG,IAAlB,CAAuBP,OAAOD,OAA9B,EAAuCC,MAAvC,EAA+CA,OAAOD,OAAtD,EAA+DI,mBAA/D;AACX;AACA,YAhBiD,CAgBtC;AACX,YAAWH,OAAOM,MAAP,GAAgB,IAAhB;AACX;AACA,YAnBiD,CAmBtC;AACX,YAAW,OAAON,OAAOD,OAAd;AACX;AAAW;AACX;AACA;AACA,WA7BmC,CA6BzB;AACV,WAAUI,oBAAoBK,CAApB,GAAwBP,OAAxB;AACV;AACA,WAhCmC,CAgCzB;AACV,WAAUE,oBAAoBM,CAApB,GAAwBP,gBAAxB;AACV;AACA,WAnCmC,CAmCzB;AACV,WAAUC,oBAAoBO,CAApB,GAAwB,EAAxB;AACV;AACA,WAtCmC,CAsCzB;AACV,WAAU,OAAOP,oBAAoB,CAApB,CAAP;AACV;AAAU,GAxCM;AAyChB;AACA,UAAU;AACV;AACA,OAAO,UAASH,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIQ,UAAUR,oBAAoB,CAApB,CAAd;AACA,OAAIpB,QAAQ,IAAI4B,OAAJ,EAAZ;;AAEA,OAAIC,MAAJ,EAAY;AACVA,WAAO7B,KAAP,GAAeA,KAAf;AACD;;AAEDiB,UAAOD,OAAP,GAAiBhB,KAAjB;;AAED;AAAO,GAfG;AAgBV;AACA,OAAO,UAASiB,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIE,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIC,aAAalB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAjB;;AAEA,OAAIgC,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIiC,OAAOpB,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAX;;AAEA,OAAIkC,OAAOrB,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAX;;AAEA,OAAImC,YAAYzB,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAhB;;AAEA,OAAIoC,UAAUpC,oBAAoB,EAApB,CAAd;AACA,OAAIqC,QAAQrC,oBAAoB,EAApB,CAAZ;AACA,OAAIsC,QAAQtC,oBAAoB,EAApB,CAAZ;AACA,OAAIuC,WAAWvC,oBAAoB,EAApB,CAAf;AACA,OAAIwC,SAASxC,oBAAoB,EAApB,CAAb;;AAEA,OAAIyC,WAAW5B,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAf;;AAEA,OAAI0C,WAAW7B,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAf;;AAEA;;;;AAIA,OAAIQ,UAAW,YAAY;AACzB,aAASA,OAAT,CAAiBmC,OAAjB,EAA0B;AACxBf,qBAAgB,IAAhB,EAAsBpB,OAAtB;;AAEA,UAAK,IAAIU,GAAT,IAAgBa,UAAhB,EAA4B;AAC1B,WAAKb,GAAL,IAAYa,WAAWb,GAAX,CAAZ;AACD;;AAED,UAAK,IAAI0B,IAAT,IAAiBZ,IAAjB,EAAuB;AACrB,WAAKY,IAAL,IAAaZ,KAAKY,IAAL,CAAb;AACD;;AAED,SAAIC,OAAO;AACTZ,YAAMA;AADG,MAAX;;AAIA,SAAIa,SAAS;AACXV,eAASA,OADE;AAEXC,aAAOA,KAFI;AAGXC,aAAOA,KAHI;AAIXC,gBAAUA,QAJC;AAKXC,cAAQA;AALG,MAAb;;AAQA,UAAK,IAAIO,KAAT,IAAkBD,MAAlB,EAA0B;AACxB,WAAKC,KAAL,IAAcD,OAAOC,KAAP,CAAd;AACD;;AAED,UAAK,IAAIC,KAAT,IAAkBH,IAAlB,EAAwB;AACtB,WAAKG,KAAL,IAAcH,KAAKG,KAAL,CAAd;AACD;;AAED,SAAIC,iBAAiBxC,OAAOyC,YAAP,IAAuBzC,OAAO0C,kBAAnD;AACA,UAAKC,QAAL,GAAgBT,WAAW,IAAIM,cAAJ,EAA3B;;AAEA,UAAKI,IAAL,GAAY,IAAInB,IAAJ,EAAZ;AACA,UAAKoB,IAAL,GAAY,KAAKD,IAAL,CAAUC,IAAV,CAAeC,IAAf,CAAoB,KAAKF,IAAzB,CAAZ;;AAEA,UAAKG,KAAL,GAAa,IAAIf,QAAJ,CAAa,KAAKW,QAAlB,CAAb;AACA,UAAKI,KAAL,CAAWnE,KAAX;AACA,UAAKqD,QAAL,GAAgBA,QAAhB;;AAEA,UAAKe,MAAL,GAAc;AACZC,cAAQ,MADI;AAEZC,YAAM,MAFM;AAGZC,aAAO,MAHK;AAIZC,YAAM,MAJM;AAKZC,mBAAa,MALD;AAMZC,kBAAY;AANA,MAAd;;AASA,UAAKC,SAAL,GAAiB7B,SAAjB;AACA,UAAK8B,GAAL,GAAW9B,UAAU8B,GAArB;AACD;;AAEDnD,iBAAaN,OAAb,EAAsB;AACpBmC,cAAS;AACPuB,WAAK,eAAY;AACf,cAAO,KAAKd,QAAZ;AACD,OAHM;AAIPe,WAAK,aAAUC,GAAV,EAAe;AAClB,YAAKZ,KAAL,CAAWa,IAAX;AACA,YAAKjB,QAAL,GAAgBgB,GAAhB;AACA,YAAKZ,KAAL,GAAa,IAAIf,QAAJ,CAAa,KAAKE,OAAlB,CAAb;AACA,YAAKa,KAAL,CAAWnE,KAAX;AACD;AATM;AADW,KAAtB;;AAcA,WAAOmB,OAAP;AACD,IAtEa,EAAd;;AAwEAX,UAAOD,OAAP,GAAiBY,OAAjB;;AAED;AAAO,GA/HG;AAgIV;AACA,OAAO,UAASX,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEAH,UAAOD,OAAP,GAAiB;AACf0E,cAAUtE,oBAAoB,CAApB,CADK;AAEfuE,YAAQvE,oBAAoB,EAApB,CAFO;AAGfwE,YAAQxE,oBAAoB,EAApB,CAHO;AAIf;AACA;AACAyE,YAAQzE,oBAAoB,EAApB,CANO;AAOf0E,gBAAY1E,oBAAoB,EAApB,CAPG;AAQf2E,iBAAa3E,oBAAoB,EAApB,CARE;AASf4E,YAAQ5E,oBAAoB,EAApB,CATO;AAUf6E,YAAQ7E,oBAAoB,EAApB,CAVO;AAWf8E,UAAM9E,oBAAoB,EAApB,CAXS;AAYf+E,WAAO/E,oBAAoB,EAApB,CAZQ;AAafgF,eAAWhF,oBAAoB,EAApB,CAbI;AAcfiF,WAAOjF,oBAAoB,EAApB,CAdQ;AAefkF,UAAMlF,oBAAoB,EAApB,CAfS;AAgBfmF,iBAAanF,oBAAoB,EAApB,CAhBE;AAiBfoF,SAAKpF,oBAAoB,EAApB,CAjBU;AAkBfqF,cAAUrF,oBAAoB,EAApB,CAlBK;AAmBfsF,iBAAatF,oBAAoB,EAApB,CAnBE;AAoBfuF,WAAOvF,oBAAoB,EAApB,CApBQ;AAqBfwF,kBAAcxF,oBAAoB,EAApB;AArBC,IAAjB;;AAwBD;AAAO,GA7JG;AA8JV;AACA,OAAO,UAASH,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAGrD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;;AAEA,OAAI6G,cAAcnG,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAlB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,OAAIsE,WAAY,UAAUwC,UAAV,EAAsB;AACpC,aAASxC,QAAT,GAAoB;AAClB1C,qBAAgB,IAAhB,EAAsB0C,QAAtB;;AAEA,SAAIyC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN,CADO;AAEbC,YAAM,UAFO;AAGbC,YAAM,CAHO;AAIbC,YAAM,CAJO;AAKbC,aAAO,CALM;AAMbC,SAAG,GANU;AAObC,YAAM,CAPO;AAQbC,YAAM,CARO;AASbC,aAAO,CATM;AAUbC,SAAG;AAVU,MAAf;;AAaAjC,UAAKlE,OAAO0E,cAAP,CAAsB3B,SAAS3C,SAA/B,CAAL,EAAgD,aAAhD,EAA+D,IAA/D,EAAqEvB,IAArE,CAA0E,IAA1E,EAAgFuH,SAAhF,EAA2FZ,OAA3F,EAAoGC,QAApG;;AAEA,UAAKY,EAAL,GAAU,IAAIhB,IAAJ,CAAS,KAAKiB,QAAL,CAAcV,IAAvB,EAA6B,KAAKU,QAAL,CAAcT,IAA3C,EAAiD,KAAKS,QAAL,CAAcR,KAA/D,EAAsE,KAAKQ,QAAL,CAAcP,CAApF,CAAV;AACA,UAAKQ,EAAL,GAAU,IAAIlB,IAAJ,CAAS,KAAKiB,QAAL,CAAcN,IAAvB,EAA6B,KAAKM,QAAL,CAAcL,IAA3C,EAAiD,KAAKK,QAAL,CAAcJ,KAA/D,EAAsE,KAAKI,QAAL,CAAcH,CAApF,CAAV;;AAEA,UAAKK,QAAL,GAAgB;AACdT,SAAG,IAAIT,YAAYmB,MAAhB,CAAuB,KAAKH,QAAL,CAAcX,IAArC,EAA2C,YAA3C,EAAyD,CAAC,CAAD,EAAI,KAAKe,KAAT,CAAzD,EAA0E,CAAC,KAAKC,MAAN,EAAc,CAAd,CAA1E,CADW;AAEdR,SAAG,IAAIb,YAAYmB,MAAhB,CAAuB,KAAKH,QAAL,CAAcX,IAArC,EAA2C,UAA3C,EAAuD,CAAC,CAAD,EAAI,KAAKe,KAAT,CAAvD,EAAwE,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAxE;AAFW,MAAhB;AAIA,UAAKH,QAAL,CAAcT,CAAd,CAAgBjG,KAAhB,GAAwB,KAAKuG,EAAL,CAAQO,UAAhC;AACA,UAAKJ,QAAL,CAAcL,CAAd,CAAgBrG,KAAhB,GAAwB,KAAKyG,EAAL,CAAQK,UAAhC;;AAEA,UAAKC,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAU7B,QAAV,EAAoBwC,UAApB;;AAEAhG,iBAAawD,QAAb,EAAuB;AACrBgE,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKC,IAAL,GAAY7B,IAAIJ,MAAJ,CAAW,QAAX,CAAZ;AACA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKF,IAA9B;AACD;AALa,MADK;AAQrBG,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAKX,QAAL,CAAcT,CAAd,CAAgBqB,MAAhB,CAAuB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAAvB,EAAwC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAxC;AACA,YAAKH,QAAL,CAAcL,CAAd,CAAgBiB,MAAhB,CAAuB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAAvB,EAAwC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAxC;;AAEA,YAAKU,aAAL,GAAqBC,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,CAArB;;AAEA,YAAKa,UAAL,GAAkB;AAChBC,aAAK,CAAE,EAAE,KAAKJ,aAAL,GAAqB,GAAvB,CAAF,GAAgC,CAAhC,GAAoC,CADzB,EAAlB;AAEA,YAAKG,UAAL,CAAgB7J,EAAhB,GAAqB,KAAK6J,UAAL,CAAgBC,GAAhB,GAAsB,CAA3C;;AAEA,YAAKT,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKhB,KAAL,GAAa,CAA1C;AACA,YAAKM,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKf,MAAL,GAAc,CAA3C;AACA,YAAKK,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAKF,UAAL,CAAgBC,GAA5C;AACD;AAfY,MARM;AAyBrBE,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKV,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,YAAK4E,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYC,MAA3C;AACD;AAJa,MAzBK;AA+BrB2E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,KAAKgB,OAAT,EAAkB;AAChB;AACA,aAAKd,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAKF,UAAL,CAAgB7J,EAA5C;AACD,QAHD,MAGO;AACL;AACA,aAAKqJ,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAKF,UAAL,CAAgBC,GAA5C;AACD;;AAED,YAAKM,eAAL,GAAuB;AACrBhC,WAAG,KAAKM,EAAL,CAAQO,UAAR,GAAqB,KAAKF,KADR;AAErBP,WAAG,KAAKQ,MAAL,GAAc,KAAKJ,EAAL,CAAQK,UAAR,GAAqB,KAAKD;AAFtB,QAAvB;;AAKA,YAAKK,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKK,eAAL,CAAqBhC,CAAlD;AACA,YAAKiB,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKK,eAAL,CAAqB5B,CAAlD;AACD;AAjBK,MA/Ba;AAkDrB6B,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKxB,QAAL,CAAcT,CAAd,CAAgBkC,MAAhB,GAAyB,KAAKC,KAA9B;AACA,YAAK1B,QAAL,CAAcL,CAAd,CAAgB8B,MAAhB,GAAyB,KAAKC,KAA9B;AACA,YAAKC,IAAL;AACD;AALI,MAlDc;AAyDrBA,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKL,OAAT,EAAkB;AAChB,aAAKtB,QAAL,CAAcT,CAAd,CAAgBqC,MAAhB,CAAuB,KAAKF,KAA5B;AACA,aAAK1B,QAAL,CAAcL,CAAd,CAAgBiC,MAAhB,CAAuB,KAAKF,KAA5B;AACA,aAAK7B,EAAL,CAAQgC,YAAR,CAAqB,KAAK7B,QAAL,CAAcT,CAAd,CAAgBjG,KAArC;AACA,aAAKyG,EAAL,CAAQ8B,YAAR,CAAqB,KAAK7B,QAAL,CAAcL,CAAd,CAAgBrG,KAArC;AACA,aAAKwI,IAAL,CAAU,QAAV,EAAoB;AAClBvC,YAAG,KAAKM,EAAL,CAAQvG,KADO;AAElBqG,YAAG,KAAKI,EAAL,CAAQzG;AAFO,SAApB;AAIA,aAAKgH,MAAL;AACD;AACF;AAbG,MAzDe;AAwErByB,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,YAAKzB,MAAL;AACD;AAHM,MAxEY;AA6ErBf,QAAG;;AAED;;;;;;AAMApD,WAAK,eAAY;AACf,cAAO,KAAK0D,EAAL,CAAQvG,KAAf;AACD,OAVA;AAWD8C,WAAK,aAAU9C,KAAV,EAAiB;AACpB,YAAKuG,EAAL,CAAQ+B,MAAR,CAAetI,KAAf;AACA,YAAKwI,IAAL,CAAU,QAAV,EAAoB;AAClBvC,WAAG,KAAKM,EAAL,CAAQvG,KADO;AAElBqG,WAAG,KAAKI,EAAL,CAAQzG;AAFO,QAApB;AAIA,YAAKgH,MAAL;AACD;AAlBA,MA7EkB;AAiGrBX,QAAG;;AAED;;;;;;AAMAxD,WAAK,eAAY;AACf,cAAO,KAAK4D,EAAL,CAAQzG,KAAf;AACD,OAVA;AAWD8C,WAAK,aAAU9C,KAAV,EAAiB;AACpB,YAAKyG,EAAL,CAAQ6B,MAAR,CAAetI,KAAf;AACA,YAAKwI,IAAL,CAAU,QAAV,EAAoB;AAClBvC,WAAG,KAAKM,EAAL,CAAQvG,KADO;AAElBqG,WAAG,KAAKI,EAAL,CAAQzG;AAFO,QAApB;AAIA,YAAKgH,MAAL;AACD;AAlBA,MAjGkB;AAqHrBF,iBAAY;AACVjE,WAAK,eAAY;AACf,cAAO;AACLoD,WAAG,KAAKM,EAAL,CAAQO,UADN;AAELT,WAAG,KAAKI,EAAL,CAAQK;AAFN,QAAP;AAID;AANS,MArHS;AA6HrBhB,WAAM;;AAEJ;;;;;AAKAjD,WAAK,eAAY;AACf,cAAO,KAAK0D,EAAL,CAAQkB,GAAf;AACD,OATG;AAUJ3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKyI,EAAL,CAAQkB,GAAR,GAAc3J,CAAd;AACA,YAAKkJ,MAAL;AACD;AAbG,MA7He;AA4IrBd,WAAM;;AAEJ;;;;;AAKArD,WAAK,eAAY;AACf,cAAO,KAAK4D,EAAL,CAAQgB,GAAf;AACD,OATG;AAUJ3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK2I,EAAL,CAAQgB,GAAR,GAAc3J,CAAd;AACA,YAAKkJ,MAAL;AACD;AAbG,MA5Ie;AA2JrBjB,WAAM;;AAEJ;;;;;AAKAlD,WAAK,eAAY;AACf,cAAO,KAAK0D,EAAL,CAAQmC,GAAf;AACD,OATG;AAUJ5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKyI,EAAL,CAAQmC,GAAR,GAAc5K,CAAd;AACA,YAAKkJ,MAAL;AACD;AAbG,MA3Je;AA0KrBb,WAAM;;AAEJ;;;;;AAKAtD,WAAK,eAAY;AACf,cAAO,KAAK4D,EAAL,CAAQiC,GAAf;AACD,OATG;AAUJ5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK2I,EAAL,CAAQiC,GAAR,GAAc5K,CAAd;AACA,YAAKkJ,MAAL;AACD;AAbG,MA1Ke;AAyLrBhB,YAAO;;AAEL;;;;;AAKAnD,WAAK,eAAY;AACf,cAAO,KAAK0D,EAAL,CAAQoC,IAAf;AACD,OATI;AAUL7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKyI,EAAL,CAAQoC,IAAR,GAAe7K,CAAf;AACA,YAAKkJ,MAAL;AACD;AAbI,MAzLc;AAwMrBZ,YAAO;;AAEL;;;;;AAKAvD,WAAK,eAAY;AACf,cAAO,KAAK4D,EAAL,CAAQkC,IAAf;AACD,OATI;AAUL7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK2I,EAAL,CAAQkC,IAAR,GAAe7K,CAAf;AACA,YAAKkJ,MAAL;AACD;AAbI,MAxMc;AAuNrBnB,WAAM;;AAEJ;;;;;;AAMAhD,WAAK,eAAY;AACf,cAAO,KAAK6D,QAAL,CAAcT,CAAd,CAAgBJ,IAAvB;AACD,OAVG;AAWJ/C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK4I,QAAL,CAAcT,CAAd,CAAgBJ,IAAhB,GAAuB/H,CAAvB;AACA,YAAK4I,QAAL,CAAcL,CAAd,CAAgBR,IAAhB,GAAuB/H,CAAvB;AACD;AAdG;AAvNe,KAAvB;;AAyOA,WAAOmF,QAAP;AACD,IA/Qc,CA+QZqC,SA/QY,CAAf;;AAiRA9G,UAAOD,OAAP,GAAiB0E,QAAjB;;AAED;AAAO,GA5eG;AA6eV;AACA,OAAO,UAASzE,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;;AAEAH,UAAOD,OAAP,GAAiB;;AAEf0G,YAAQ,gBAAU2D,IAAV,EAAgB;AACtB,YAAOpL,SAASqL,eAAT,CAAyB,4BAAzB,EAAuDD,IAAvD,CAAP;AACD,KAJc;;AAMfE,SAAK,aAAU7C,CAAV,EAAaI,CAAb,EAAgB0C,MAAhB,EAAwBC,UAAxB,EAAoCC,QAApC,EAA8C;;AAEjD,SAAIjL,QAAQ2C,KAAKuI,WAAL,CAAiBH,MAAjB,EAAyBE,QAAzB,CAAZ;AACA,SAAIE,MAAMxI,KAAKuI,WAAL,CAAiBH,MAAjB,EAAyBC,UAAzB,CAAV;;AAEA,SAAII,eAAeH,WAAWD,UAAX,IAAyB,GAAzB,GAA+B,GAA/B,GAAqC,GAAxD;;AAEA,SAAIK,IAAI,CAAC,GAAD,EAAMrL,MAAMiI,CAAN,GAAUA,CAAhB,EAAmBjI,MAAMqI,CAAN,GAAUA,CAA7B,EAAgC,GAAhC,EAAqC0C,MAArC,EAA6CA,MAA7C,EAAqD,CAArD,EAAwDK,YAAxD,EAAsE,CAAtE,EAAyED,IAAIlD,CAAJ,GAAQA,CAAjF,EAAoFkD,IAAI9C,CAAJ,GAAQA,CAA5F,EAA+FiD,IAA/F,CAAoG,GAApG,CAAR;;AAEA,YAAOD,CAAP;AACD,KAhBc;;AAkBfE,oBAAgB,wBAAUC,IAAV,EAAgBC,aAAhB,EAA+B;;AAE7C,SAAI5K,KAAK,aAAa8B,KAAK+I,EAAL,CAAQ,YAAR,CAAtB;AACA,SAAIC,QAAQ,EAAZ;;AAEA,SAAIC,WAAWpM,SAASqL,eAAT,CAAyB,4BAAzB,EAAuD,gBAAvD,CAAf;AACAe,cAAShC,YAAT,CAAsB,IAAtB,EAA4B/I,EAA5B;AACA+K,cAAShC,YAAT,CAAsB,IAAtB,EAA4B,KAA5B;AACAgC,cAAShC,YAAT,CAAsB,IAAtB,EAA4B,KAA5B;AACAgC,cAAShC,YAAT,CAAsB,GAAtB,EAA2B,KAA3B;;AAEA4B,UAAKpC,WAAL,CAAiBwC,QAAjB;;AAEA,UAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,aAApB,EAAmCI,GAAnC,EAAwC;AACtC,UAAIC,QAAQtM,SAASqL,eAAT,CAAyB,4BAAzB,EAAuD,MAAvD,CAAZ;AACAiB,YAAMlC,YAAN,CAAmB,IAAnB,EAAyB,SAASiC,CAAlC;AACA;AACA;AACAD,eAASxC,WAAT,CAAqB0C,KAArB;AACAH,YAAMI,IAAN,CAAWD,KAAX;AACD;;AAED,YAAO;AACLjL,UAAIA,EADC;AAEL8K,aAAOA,KAFF;AAGLxC,eAASyC;AAHJ,MAAP;AAKD;;AA7Cc,IAAjB;;AAiDD;AAAO,GAriBG;AAsiBV;AACA,OAAO,UAASpL,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEA;;;;;;;;;;;;AAYAA,WAAQyL,IAAR,GAAe,UAAUhK,KAAV,EAAiByH,GAAjB,EAAsBiB,GAAtB,EAA2B;AACxC,WAAOlB,KAAKC,GAAL,CAASD,KAAKkB,GAAL,CAAS1I,KAAT,EAAgByH,GAAhB,CAAT,EAA+BiB,GAA/B,CAAP;AACD,IAFD;;AAIAnK,WAAQ0L,SAAR,GAAoB,UAAUjK,KAAV,EAAiByH,GAAjB,EAAsBiB,GAAtB,EAA2B;AAC7C,WAAO,CAAC1I,QAAQyH,GAAT,KAAiBiB,MAAMjB,GAAvB,CAAP;AACD,IAFD;;AAIA;;;;;;;;;;;;AAYAlJ,WAAQ2L,KAAR,GAAgB,UAAUC,KAAV,EAAiBC,KAAjB,EAAwBC,KAAxB,EAA+BC,MAA/B,EAAuCC,MAAvC,EAA+C;AAC7D,QAAIH,UAAUC,KAAd,EAAqB;AACnB,YAAOC,MAAP;AACD;AACD,WAAO,CAACH,QAAQC,KAAT,KAAmBG,SAASD,MAA5B,KAAuCD,QAAQD,KAA/C,IAAwDE,MAA/D;AACD,IALD;;AAOA/L,WAAQiM,OAAR,GAAkB,UAAUvE,CAAV,EAAaI,CAAb,EAAgB;AAChC,QAAIoE,IAAIjD,KAAKkD,IAAL,CAAUzE,IAAIA,CAAJ,GAAQI,IAAIA,CAAtB,CAAR;;AAEA,QAAIsE,QAAQnD,KAAKoD,KAAL,CAAWvE,CAAX,EAAcJ,CAAd,CAAZ;AACA,QAAI0E,QAAQ,CAAZ,EAAe;AACbA,aAAQA,QAAQ,IAAInD,KAAKqD,EAAzB;AACD;AACD,WAAO,EAAE9B,QAAQ0B,CAAV,EAAaK,OAAOH,KAApB,EAAP;AACD,IARD;;AAUApM,WAAQ2K,WAAR,GAAsB,UAAUH,MAAV,EAAkB+B,KAAlB,EAAyB;AAC7C,QAAIC,MAAMvD,KAAKuD,GAAL,CAASD,KAAT,CAAV;AACA,QAAIE,MAAMxD,KAAKwD,GAAL,CAASF,KAAT,CAAV;AACA,WAAO,EAAE7E,GAAG8C,SAASgC,GAAd,EAAmB1E,GAAG0C,SAASiC,GAAT,GAAe,CAAC,CAAtC,EAAP;AACD,IAJD;AAKA;;;;;;;;;;AAUAzM,WAAQ0M,KAAR,GAAgB,UAAUC,IAAV,EAAgBhB,KAAhB,EAAuB;AACrC,WAAOiB,WAAWD,KAAKE,OAAL,CAAalB,KAAb,CAAX,CAAP;AACD,IAFD;;AAIA3L,WAAQ8M,MAAR,GAAiB,UAAUlB,KAAV,EAAiB;AAChC,WAAO5L,QAAQ2L,KAAR,CAAcC,KAAd,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,CAAP;AACD,IAFD;;AAIA;;;;;;;AAOA5L,WAAQ+M,IAAR,GAAe,UAAUC,IAAV,EAAgB;AAC7B,WAAO/D,KAAKgE,GAAL,CAAS,CAAT,EAAY,CAACD,OAAO,EAAR,IAAc,EAA1B,IAAgC,GAAvC;AACD,IAFD;;AAIA;;;;;;;;;;AAUAhN,WAAQkN,MAAR,GAAiB,UAAUC,GAAV,EAAejE,GAAf,EAAoBiB,GAApB,EAAyB;AACxC,WAAOgD,OAAOhD,MAAMjB,GAAb,IAAoBA,GAA3B;AACD,IAFD;;AAIA;;;;;;;AAOAlJ,WAAQoN,IAAR,GAAe,YAAY;AACzB,WAAOrF,UAAU,CAAE,EAAEkB,KAAKoE,MAAL,KAAgBtF,UAAUuF,MAA5B,CAAZ,CAAP;AACD,IAFD;;AAIA;;;;;;;;;;AAUAtN,WAAQuN,MAAR,GAAiB,UAAUC,GAAV,EAAe;AAC9B,WAAOvE,KAAKgE,GAAL,CAAS,CAAT,EAAYO,GAAZ,CAAP;AACD,IAFD;;AAIA;;;;;;;;;AASAxN,WAAQmL,EAAR,GAAa,UAAUsC,MAAV,EAAkBC,MAAlB,EAA0B;AACrC,QAAI,CAACA,MAAL,EAAa;AACXA,cAASD,MAAT;AACAA,cAAS,CAAT;AACD;AACD,QAAIE,MAAM1E,KAAKC,GAAL,CAASuE,MAAT,EAAiBC,MAAjB,CAAV;AACA,QAAIE,OAAO3E,KAAKkB,GAAL,CAASsD,MAAT,EAAiBC,MAAjB,CAAX;AACA,WAAOzE,KAAK4E,KAAL,CAAW5E,KAAKoE,MAAL,MAAiBO,OAAOD,GAAxB,IAA+BA,GAA1C,CAAP;AACD,IARD;;AAUA;;;;;;;;;AASA3N,WAAQ8N,EAAR,GAAa,UAAUL,MAAV,EAAkBC,MAAlB,EAA0B;AACrC,QAAI,CAACA,MAAL,EAAa;AACXA,cAASD,MAAT;AACAA,cAAS,CAAT;AACD;AACD,QAAIE,MAAM1E,KAAKC,GAAL,CAASuE,MAAT,EAAiBC,MAAjB,CAAV;AACA,QAAIE,OAAO3E,KAAKkB,GAAL,CAASsD,MAAT,EAAiBC,MAAjB,CAAX;AACA,WAAOzE,KAAKoE,MAAL,MAAiBO,OAAOD,GAAxB,IAA+BA,GAAtC;AACD,IARD;;AAUA3N,WAAQ+N,KAAR,GAAgB,UAAUC,KAAV,EAAiB9E,GAAjB,EAAsBiB,GAAtB,EAA2B;AACzC6D;AACA,QAAIA,SAAS7D,GAAb,EAAkB;AAChB6D,aAAQ9E,GAAR;AACD;AACD,WAAO8E,KAAP;AACD,IAND;;AAQA;;;;;;;AAOAhO,WAAQiO,OAAR,GAAkB,UAAUtB,IAAV,EAAgB;AAChC,QAAIuB,QAAQ,CAAZ;AACA,SAAK,IAAI5C,IAAI,CAAb,EAAgBA,IAAIqB,KAAKW,MAAzB,EAAiChC,GAAjC,EAAsC;AACpC4C,cAASvB,KAAKrB,CAAL,CAAT;AACD;AACD,WAAO4C,QAAQvB,KAAKW,MAApB;AACD,IAND;;AAQA;;;;;;;;;;AAUAtN,WAAQmO,QAAR,GAAmB,UAAUC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0B;AAC3C,QAAIC,IAAIJ,KAAKE,EAAb;AACA,QAAIG,IAAIJ,KAAKE,EAAb;AACA,WAAOtF,KAAKkD,IAAL,CAAUqC,IAAIA,CAAJ,GAAQC,IAAIA,CAAtB,CAAP;AACD,IAJD;;AAMAzO,WAAQ0O,QAAR,GAAmB,UAAUC,IAAV,EAAgB;AACjC,WAAO,KAAK1F,KAAK2F,KAAL,CAAWD,IAAX,CAAZ;AACD,IAFD;;AAIA;;;;;;;AAOA3O,WAAQ6O,IAAR,GAAe,YAAY;AACzB,QAAIC,OAAO/G,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,GAA7B,GAAmC4B,UAAU,CAAV,CAA9C;;AAEA,QAAI/H,QAAQ8N,EAAR,CAAW,CAAX,EAAc,CAAd,IAAmBgB,IAAvB,EAA6B;AAC3B,YAAO,CAAP;AACD,KAFD,MAEO;AACL,YAAO,CAAP;AACD;AACF,IARD;;AAUD;AAAO,GAvwBG;AAwwBV;AACA,OAAO,UAAS7O,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2O,MAAM3O,oBAAoB,CAApB,CAAV;AACA,OAAI4O,OAAO5O,oBAAoB,CAApB,CAAX;AACA,OAAI6O,QAAQ7O,oBAAoB,CAApB,CAAZ;AACA,OAAI8O,eAAe9O,oBAAoB,EAApB,CAAnB;;AAEA;;;;AAIA,OAAI2G,YAAa,UAAUoI,aAAV,EAAyB;AACxC,aAASpI,SAAT,CAAmBqI,IAAnB,EAAyBjI,OAAzB,EAAkCC,QAAlC,EAA4C;AAC1CpF,qBAAgB,IAAhB,EAAsB+E,SAAtB;;AAEAlB,UAAKlE,OAAO0E,cAAP,CAAsBU,UAAUhF,SAAhC,CAAL,EAAiD,aAAjD,EAAgE,IAAhE,EAAsEvB,IAAtE,CAA2E,IAA3E;AACA,UAAK6J,IAAL,GAAY,KAAK1D,WAAL,CAAiB0I,IAA7B;AACA,UAAKpH,QAAL,GAAgB,KAAKqH,aAAL,CAAmBF,IAAnB,EAAyBjI,OAAzB,EAAkCC,QAAlC,CAAhB;AACA,UAAKyC,KAAL,GAAa,EAAb;AACA,UAAK0F,IAAL,GAAY,KAAZ;AACA,UAAK1L,MAAL,GAAc,EAAd;AACA,SAAI2L,gBAAgBxQ,MAAM6E,MAA1B,CAT0C,CASR;AAClC,UAAKA,MAAL,CAAYC,MAAZ,GAAqB0L,cAAc1L,MAAnC;AACA,UAAKD,MAAL,CAAYE,IAAZ,GAAmByL,cAAczL,IAAjC;AACA,UAAKF,MAAL,CAAYG,KAAZ,GAAoBwL,cAAcxL,KAAlC;AACA,UAAKH,MAAL,CAAYI,IAAZ,GAAmBuL,cAAcvL,IAAjC;AACA,UAAKJ,MAAL,CAAYK,WAAZ,GAA0BsL,cAActL,WAAxC;AACA,UAAKL,MAAL,CAAYM,UAAZ,GAAyBqL,cAAcrL,UAAvC;AACD;;AAEDoC,cAAUQ,SAAV,EAAqBoI,aAArB;;AAEAjO,iBAAa6F,SAAb,EAAwB;AACtBuI,oBAAe;AACb7N,aAAO,SAAS6N,aAAT,CAAuBF,IAAvB,EAA6BjI,OAA7B,EAAsCC,QAAtC,EAAgD;;AAErDD,eAAQsI,OAAR,CAAgB,QAAhB;AACArI,gBAASsI,WAAT,GAAuBtI,SAASC,IAAT,CAAcsI,MAAd,CAAqB,CAArB,EAAwB,CAAxB,CAAvB;AACAvI,gBAASC,IAAT,GAAgB,KAAhB;;AAEA,WAAIY,WAAW;AACb7G,gBAAQnC,SAAS2Q,IADJ;AAEb/L,gBAAQ,EAFK,EAED;AACZgM,wBAAgB,IAHH;AAIbC,eAAO,SAASA,KAAT,GAAiB,CAAE,CAJb;AAKbC,mBAAW;AALE,QAAf;;AAQA,YAAK,IAAIzO,GAAT,IAAgB8F,QAAhB,EAA0B;AACxBa,iBAAS3G,GAAT,IAAgB8F,SAAS9F,GAAT,CAAhB;AACD;;AAED,YAAK,IAAIgK,IAAI,CAAb,EAAgBA,IAAI8D,KAAK9B,MAAzB,EAAiChC,GAAjC,EAAsC;AACpC;AACA,YAAI0E,UAAUZ,KAAK9D,CAAL,CAAd;AACA;AACA,YAAI0D,KAAKiB,QAAL,CAAcD,OAAd,CAAJ,EAA4B;AAC1B,cAAK,IAAI1O,GAAT,IAAgB0O,OAAhB,EAAyB;AACvB/H,mBAAS3G,GAAT,IAAgB0O,QAAQ1O,GAAR,CAAhB;AACD;AACD;AACD,SALD,MAKO,IAAI,OAAO0O,OAAP,KAAmB,UAAvB,EAAmC;AACxC/H,kBAAS6H,KAAT,GAAiBE,OAAjB;AACA;AACD,SAHM,MAGA,IAAI7I,QAAQmG,MAAR,IAAkB,CAAtB,EAAyB;AAC9B;AACA,aAAIhM,MAAM6F,QAAQwI,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAAV;AACA1H,kBAAS3G,GAAT,IAAgB0O,OAAhB;AACD;AACF;;AAED;;AAEA;AACA,YAAK5J,MAAL,GAAc2I,IAAImB,YAAJ,CAAiBjI,SAAS7G,MAA1B,CAAd;;AAEA;AACA,WAAI,KAAKgF,MAAL,IAAe,KAAKA,MAAL,YAAuB+J,WAAtC,IAAqD,CAAClI,SAAS8H,SAAnE,EAA8E;AAC5E,YAAI,CAAC,KAAK3J,MAAL,CAAYgK,YAAZ,CAAyB,UAAzB,CAAL,EAA2C;AACzC,cAAKhK,MAAL,CAAYiD,YAAZ,CAAyB,UAAzB,EAAqC,EAArC;AACD;AACF;;AAED;AACA,WAAIpB,SAASZ,IAAT,IAAiBgJ,MAAMC,OAAN,CAAcrI,SAASZ,IAAvB,CAAjB,IAAiDY,SAAS4H,cAA9D,EAA8E;AAC5E,aAAKxH,KAAL,GAAaJ,SAASZ,IAAT,CAAc,CAAd,CAAb;AACA,aAAKiB,MAAL,GAAcL,SAASZ,IAAT,CAAc,CAAd,CAAd;AACA,aAAKjB,MAAL,CAAYmD,KAAZ,CAAkBlB,KAAlB,GAA0B,KAAKA,KAAL,GAAa,IAAvC;AACA,aAAKjC,MAAL,CAAYmD,KAAZ,CAAkBjB,MAAlB,GAA2B,KAAKA,MAAL,GAAc,IAAzC;AACD,QALD,MAKO,IAAIL,SAAS4H,cAAb,EAA6B;AAClC,aAAKxH,KAAL,GAAauE,WAAW,KAAKxG,MAAL,CAAYmD,KAAZ,CAAkBlB,KAA7B,CAAb;AACA,aAAKC,MAAL,GAAcsE,WAAW,KAAKxG,MAAL,CAAYmD,KAAZ,CAAkBjB,MAA7B,CAAd;;AAEA,YAAI,CAAC,KAAKD,KAAV,EAAiB;AACf,cAAKA,KAAL,GAAauE,WAAW,KAAKxG,MAAL,CAAYiC,KAAvB,CAAb;AACD;AACD,YAAI,CAAC,KAAKC,MAAV,EAAkB;AAChB,cAAKA,MAAL,GAAcsE,WAAW,KAAKxG,MAAL,CAAYkC,MAAvB,CAAd;AACD;;AAED,YAAI,KAAKlC,MAAL,CAAYmD,KAAZ,CAAkBlB,KAAtB,EAA6B;AAC3B,aAAI,KAAKjC,MAAL,CAAYmD,KAAZ,CAAkBlB,KAAlB,CAAwBkI,OAAxB,CAAgC,GAAhC,IAAuC,CAA3C,EAA8C;AAC5C,eAAKlI,KAAL,GAAauE,WAAW/L,OAAO2P,gBAAP,CAAwB,KAAKpK,MAA7B,EAAqC,IAArC,EAA2CqK,gBAA3C,CAA4D,OAA5D,EAAqEC,OAArE,CAA6E,IAA7E,EAAmF,EAAnF,CAAX,CAAb;AACD;AACF;AACD,YAAI,KAAKtK,MAAL,CAAYiC,KAAhB,EAAuB;AACrB,aAAI,KAAKjC,MAAL,CAAYiC,KAAZ,CAAkBkI,OAAlB,CAA0B,GAA1B,IAAiC,CAArC,EAAwC;AACtC,eAAKlI,KAAL,GAAauE,WAAW/L,OAAO2P,gBAAP,CAAwB,KAAKpK,MAA7B,EAAqC,IAArC,EAA2CqK,gBAA3C,CAA4D,OAA5D,EAAqEC,OAArE,CAA6E,IAA7E,EAAmF,EAAnF,CAAX,CAAb;AACD;AACF;;AAED,YAAI,KAAKtK,MAAL,CAAYmD,KAAZ,CAAkBjB,MAAtB,EAA8B;AAC5B,aAAI,KAAKlC,MAAL,CAAYmD,KAAZ,CAAkBjB,MAAlB,CAAyBiI,OAAzB,CAAiC,GAAjC,IAAwC,CAA5C,EAA+C;AAC7C,eAAKjI,MAAL,GAAcsE,WAAW/L,OAAO2P,gBAAP,CAAwB,KAAKpK,MAA7B,EAAqC,IAArC,EAA2CqK,gBAA3C,CAA4D,QAA5D,EAAsEC,OAAtE,CAA8E,IAA9E,EAAoF,EAApF,CAAX,CAAd;AACD;AACF;AACD,YAAI,KAAKtK,MAAL,CAAYkC,MAAhB,EAAwB;AACtB,aAAI,KAAKlC,MAAL,CAAYkC,MAAZ,CAAmBiI,OAAnB,CAA2B,GAA3B,IAAkC,CAAtC,EAAyC;AACvC,eAAKjI,MAAL,GAAcsE,WAAW/L,OAAO2P,gBAAP,CAAwB,KAAKpK,MAA7B,EAAqC,IAArC,EAA2CqK,gBAA3C,CAA4D,QAA5D,EAAsEC,OAAtE,CAA8E,IAA9E,EAAoF,EAApF,CAAX,CAAd;AACD;AACF;;AAED;;;;AAIA;AACA;AACA,YAAI,CAAC,KAAKrI,KAAV,EAAiB;AACf,cAAKA,KAAL,GAAaJ,SAASyH,WAAT,CAAqB,CAArB,CAAb;AACA,cAAKtJ,MAAL,CAAYmD,KAAZ,CAAkBlB,KAAlB,GAA0B,KAAKA,KAAL,GAAa,IAAvC;AACD;AACD,YAAI,CAAC,KAAKC,MAAV,EAAkB;AAChB,cAAKA,MAAL,GAAcL,SAASyH,WAAT,CAAqB,CAArB,CAAd;AACA,cAAKtJ,MAAL,CAAYmD,KAAZ,CAAkBjB,MAAlB,GAA2B,KAAKA,MAAL,GAAc,IAAzC;AACD;AACF,QA/CM,MA+CA;AACLL,iBAASZ,IAAT,GAAgBY,SAASyH,WAAzB;AACA,aAAKrH,KAAL,GAAaJ,SAASZ,IAAT,CAAc,CAAd,CAAb;AACA,aAAKiB,MAAL,GAAcL,SAASZ,IAAT,CAAc,CAAd,CAAd;AACD;;AAED;AACA,WAAIY,SAAS6H,KAAb,EAAoB;AAClB,aAAKA,KAAL,GAAa,KAAKxQ,EAAL,CAAQ,QAAR,EAAkB2I,SAAS6H,KAA3B,CAAb;AACD,QAFD,MAEO;AACL,aAAKA,KAAL,GAAa,KAAb;AACD;;AAED,cAAO7H,QAAP;AACD;AArHY,MADO;AAwHtBO,WAAM;AACJ/G,aAAO,SAAS+G,IAAT,GAAgB;AACrB,YAAKmI,UAAL;AACA,YAAKjI,cAAL;AACA,YAAKI,aAAL;AACA,YAAK8H,eAAL;AACA,YAAKtH,cAAL;AACA,YAAKuH,YAAL;AACD;AARG,MAxHgB;AAkItBF,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe9B,IAAIJ,MAAJ,CAAW,KAAX,CAAf;AACA,YAAKkC,OAAL,CAAaS,YAAb,CAA0B,OAA1B,EAAmC,KAAKhB,KAAxC;AACA,YAAKO,OAAL,CAAaS,YAAb,CAA0B,QAA1B,EAAoC,KAAKf,MAAzC;AACA,YAAKlC,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AANS,MAlIU;AA0ItBF,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B,CAAE;AADrB,MA1IM;AA6ItBI,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB,CAAE;AADrB,MA7IO;AAgJtBQ,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B,CAAE;AADrB,MAhJM;AAmJtBsH,sBAAiB;AACfnP,aAAO,SAASmP,eAAT,GAA2B;AAChC,WAAIE,QAAQ,IAAZ;;AAEA,YAAKC,iBAAL,GAAyB,KAAKA,iBAAL,IAA0B,KAAKnI,OAAxD;;AAEA;AACA,WAAIqG,MAAM+B,MAAV,EAAkB;AAChB,aAAKD,iBAAL,CAAuB7R,gBAAvB,CAAwC,YAAxC,EAAsD,UAAU+R,GAAV,EAAe;AACnE,gBAAOH,MAAMI,QAAN,CAAeD,GAAf,CAAP;AACD,SAFD;AAGA,aAAKF,iBAAL,CAAuB7R,gBAAvB,CAAwC,WAAxC,EAAqD,UAAU+R,GAAV,EAAe;AAClE,gBAAOH,MAAMK,YAAN,CAAmBF,GAAnB,CAAP;AACD,SAFD;AAGA,aAAKF,iBAAL,CAAuB7R,gBAAvB,CAAwC,UAAxC,EAAoD,UAAU+R,GAAV,EAAe;AACjE,gBAAOH,MAAMM,eAAN,CAAsBH,GAAtB,CAAP;AACD,SAFD;AAGD;AACD,YAAKI,YAAL,GAAoB,UAAUJ,GAAV,EAAe;AACjC,eAAOH,MAAMQ,OAAN,CAAcL,GAAd,CAAP;AACD,QAFD;AAGA,YAAKM,eAAL,GAAuB,UAAUN,GAAV,EAAe;AACpC,eAAOH,MAAMU,UAAN,CAAiBP,GAAjB,CAAP;AACD,QAFD;AAGA,YAAKF,iBAAL,CAAuB7R,gBAAvB,CAAwC,WAAxC,EAAqD,UAAU+R,GAAV,EAAe;AAClE,eAAOH,MAAMW,QAAN,CAAeR,GAAf,CAAP;AACD,QAFD;AAGD;AA3Bc,MAnJK;AAgLtBJ,mBAAc;AACZpP,aAAO,SAASoP,YAAT,GAAwB;AAC7B,YAAKjI,OAAL,CAAaW,KAAb,CAAmBmI,MAAnB,GAA4B,SAA5B;AACD;AAHW,MAhLQ;AAqLtBD,eAAU;AACRhQ,aAAO,SAASgQ,QAAT,CAAkBE,CAAlB,EAAqB;AAC1B;AACA;AACA,WAAI,KAAK/I,OAAL,YAAwBuH,WAA5B,EAAyC;AACvC,aAAK9H,KAAL,GAAaxH,OAAO2P,gBAAP,CAAwB,KAAK5H,OAA7B,EAAsC,IAAtC,EAA4C6H,gBAA5C,CAA6D,OAA7D,EAAsEC,OAAtE,CAA8E,IAA9E,EAAoF,EAApF,CAAb;AACD;AACD;AACA;AACA,YAAKkB,MAAL,GAAc7C,IAAI8C,YAAJ,CAAiB,KAAKjJ,OAAtB,CAAd;AACA,YAAKiB,KAAL,GAAakF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmB,KAAKC,MAAxB,CAAb;AACA,YAAKnI,OAAL,GAAe,IAAf;AACA,YAAKE,KAAL;AACA,YAAKoI,SAAL,GAAiB9S,SAASC,gBAAT,CAA0B,WAA1B,EAAuC,KAAKmS,YAA5C,CAAjB;AACA,YAAKW,YAAL,GAAoB/S,SAASC,gBAAT,CAA0B,SAA1B,EAAqC,KAAKqS,eAA1C,CAApB;AACAI,SAAEM,cAAF;AACAN,SAAEO,eAAF;AACD;AAjBO,MArLY;AAwMtBZ,cAAS;AACP7P,aAAO,SAAS6P,OAAT,CAAiBK,CAAjB,EAAoB;AACzB,WAAIb,QAAQ,IAAZ;;AAEA,WAAI,CAAC,KAAKvB,IAAV,EAAgB;AACd,aAAK1F,KAAL,GAAakF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmB,KAAKC,MAAxB,CAAb;AACA,aAAK9H,IAAL;AACA,aAAKyF,IAAL,GAAY,IAAZ;AACA4C,mBAAW,YAAY;AACrBrB,eAAMvB,IAAN,GAAa,KAAb;AACD,SAFD,EAEG,EAFH;AAGD;AACDoC,SAAEM,cAAF;AACAN,SAAEO,eAAF;AACD;AAdM,MAxMa;AAwNtBV,iBAAY;AACV/P,aAAO,SAAS+P,UAAT,CAAoBG,CAApB,EAAuB;AAC5B,YAAK9H,KAAL,GAAakF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmB,KAAKC,MAAxB,CAAb;AACA,YAAKnI,OAAL,GAAe,KAAf;AACA,YAAKS,OAAL;AACAjL,gBAASmT,mBAAT,CAA6B,WAA7B,EAA0C,KAAKf,YAA/C;AACApS,gBAASmT,mBAAT,CAA6B,SAA7B,EAAwC,KAAKb,eAA7C;AACAI,SAAEM,cAAF;AACAN,SAAEO,eAAF;AACD;AATS,MAxNU;AAmOtBvI,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB,CAAE;AADrB,MAnOe;AAsOtBG,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB,CAAE;AADrB,MAtOgB;AAyOtBI,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB,CAAE;AADrB,MAzOa;AA4OtBgH,eAAU;;AAER;;AAEAzP,aAAO,SAASyP,QAAT,CAAkBS,CAAlB,EAAqB;AAC1B,WAAI,KAAK/I,OAAL,YAAwBuH,WAA5B,EAAyC;AACvC,aAAK9H,KAAL,GAAaxH,OAAO2P,gBAAP,CAAwB,KAAK5H,OAA7B,EAAsC,IAAtC,EAA4C6H,gBAA5C,CAA6D,OAA7D,EAAsEC,OAAtE,CAA8E,IAA9E,EAAoF,EAApF,CAAb;AACD;AACD,YAAKkB,MAAL,GAAc7C,IAAI8C,YAAJ,CAAiB,KAAKjJ,OAAtB,CAAd;AACA,YAAKiB,KAAL,GAAakF,IAAIsD,WAAJ,CAAgBV,CAAhB,EAAmB,KAAKC,MAAxB,CAAb;AACA,YAAKnI,OAAL,GAAe,IAAf;AACA,YAAKwF,KAAL,CAAW0C,CAAX;AACAA,SAAEM,cAAF;AACAN,SAAEO,eAAF;AACD;AAdO,MA5OY;AA4PtBf,mBAAc;AACZ1P,aAAO,SAAS0P,YAAT,CAAsBQ,CAAtB,EAAyB;AAC9B,WAAI,KAAKlI,OAAT,EAAkB;AAChB,aAAKI,KAAL,GAAakF,IAAIsD,WAAJ,CAAgBV,CAAhB,EAAmB,KAAKC,MAAxB,CAAb;AACA,aAAKU,SAAL;AACAX,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD;AACF;AARW,MA5PQ;AAsQtBd,sBAAiB;AACf3P,aAAO,SAAS2P,eAAT,CAAyBO,CAAzB,EAA4B;AACjC,YAAK9H,KAAL,GAAakF,IAAIsD,WAAJ,CAAgBV,CAAhB,EAAmB,KAAKC,MAAxB,CAAb;AACA,YAAKnI,OAAL,GAAe,KAAf;AACA,YAAK8I,YAAL;AACAZ,SAAEM,cAAF;AACAN,SAAEO,eAAF;AACD;AAPc,MAtQK;AA+QtBjD,YAAO;AACLxN,aAAO,SAASwN,KAAT,GAAiB;AACtB,YAAKtF,KAAL;AACD;AAHI,MA/Qe;AAoRtB2I,gBAAW;AACT7Q,aAAO,SAAS6Q,SAAT,GAAqB;AAC1B,YAAKxI,IAAL;AACD;AAHQ,MApRW;AAyRtByI,mBAAc;AACZ9Q,aAAO,SAAS8Q,YAAT,GAAwB;AAC7B,YAAKrI,OAAL;AACD;AAHW,MAzRQ;AA8RtBnB,aAAQ;;AAEN;;;;;;;;;AASAtH,aAAO,SAASsH,MAAT,CAAgBV,KAAhB,EAAuBC,MAAvB,EAA+B;AACpC,YAAKD,KAAL,GAAaA,KAAb;AACA,YAAKC,MAAL,GAAcA,MAAd;AACA,YAAKlC,MAAL,CAAYmD,KAAZ,CAAkBlB,KAAlB,GAA0B,KAAKA,KAAL,GAAa,IAAvC;AACA,YAAKjC,MAAL,CAAYmD,KAAZ,CAAkBjB,MAAlB,GAA2B,KAAKA,MAAL,GAAc,IAAzC;AACA,YAAKM,OAAL,CAAaS,YAAb,CAA0B,OAA1B,EAAmC,KAAKhB,KAAxC;AACA,YAAKO,OAAL,CAAaS,YAAb,CAA0B,QAA1B,EAAoC,KAAKf,MAAzC;AACA,YAAKQ,aAAL;AACD;AAnBK,MA9Rc;AAmTtB0J,YAAO;AACL/Q,aAAO,SAAS+Q,KAAT,GAAiB;AACtB,cAAO,KAAK5J,OAAL,CAAa6J,SAApB,EAA+B;AAC7B,aAAK7J,OAAL,CAAa8J,WAAb,CAAyB,KAAK9J,OAAL,CAAa6J,SAAtC;AACD;AACF;AALI,MAnTe;AA0TtBE,cAAS;;AAEP;;;;;;;AAOAlR,aAAO,SAASkR,OAAT,GAAmB;AACxB,YAAKH,KAAL;AACA,YAAKpM,MAAL,CAAYsM,WAAZ,CAAwB,KAAK9J,OAA7B;AACA,YAAKgK,kBAAL;AACA,WAAI,KAAKC,UAAT,EAAqB;AACnB,eAAO,KAAKA,UAAL,CAAgB,KAAKvS,EAArB,CAAP;AACD;AACD,YAAKwS,aAAL;AACD;AAjBM,MA1Ta;AA6UtBA,oBAAe;AACbrR,aAAO,SAASqR,aAAT,GAAyB,CAAE;AADrB,MA7UO;AAgVtBC,eAAU;AACRtR,aAAO,SAASsR,QAAT,CAAkB1I,IAAlB,EAAwB2I,KAAxB,EAA+B;AACpC,YAAKnP,MAAL,CAAYwG,IAAZ,IAAoB2I,KAApB;AACA,YAAK1J,cAAL;AACD;AAJO;AAhVY,KAAxB;;AAwVA,WAAOvC,SAAP;AACD,IA9We,CA8WbmI,YA9Wa,CAAhB;;AAgXAjP,UAAOD,OAAP,GAAiB+G,SAAjB;;AAED;AAAO,GAjpCG;AAkpCV;AACA,OAAO,UAAS9G,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAA,WAAQ6R,YAAR,GAAuB,UAAUoB,EAAV,EAAc;AACnC,QAAIC,iBAAiBD,GAAGE,qBAAH,EAArB;AACA,QAAIC,MAAMF,eAAeE,GAAf,GAAqBvS,OAAOwS,OAAtC;AACA,QAAIC,OAAOJ,eAAeI,IAAf,GAAsBzS,OAAO0S,OAAxC;AACA,WAAO,EAAEH,KAAKA,GAAP,EAAYE,MAAMA,IAAlB,EAAP;AACD,IALD;;AAOAtT,WAAQkQ,YAAR,GAAuB,UAAU9J,MAAV,EAAkB;AACvC,QAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9BA,cAASnH,SAASuU,cAAT,CAAwBpN,OAAOsK,OAAP,CAAe,GAAf,EAAoB,EAApB,CAAxB,CAAT;AACD;;AAED,QAAItK,kBAAkB+J,WAAlB,IAAiC/J,kBAAkBqN,UAAvD,EAAmE;AACjE,YAAOrN,MAAP;AACD,KAFD,MAEO;AACL,YAAO,0BAAP;AACD;AACF,IAVD;;AAYApG,WAAQ8R,WAAR,GAAsB,UAAUH,CAAV,EAAaC,MAAb,EAAqB;AACzC,WAAO;AACLlK,QAAGiK,EAAE+B,KAAF,GAAU9B,OAAO0B,IADf;AAELxL,QAAG6J,EAAEgC,KAAF,GAAU/B,OAAOwB;AAFf,KAAP;AAID,IALD;;AAOApT,WAAQqS,WAAR,GAAsB,UAAUV,CAAV,EAAaC,MAAb,EAAqB;AACzC,WAAO;AACLlK,QAAGiK,EAAEiC,aAAF,CAAgBtG,MAAhB,GAAyBqE,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBF,KAAnB,GAA2B9B,OAAO0B,IAA3D,GAAkE,KADhE;AAELxL,QAAG6J,EAAEiC,aAAF,CAAgBtG,MAAhB,GAAyBqE,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBD,KAAnB,GAA2B/B,OAAOwB,GAA3D,GAAiE;AAF/D,KAAP;AAID,IALD;;AAOApT,WAAQ6T,WAAR,GAAsB,UAAUzN,MAAV,EAAkB;AACtC,QAAI0K,QAAQ,IAAZ;;AAEA,SAAKlI,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,QAAvB,CAAf;AACA,SAAK/Q,OAAL,GAAe,KAAK6F,OAAL,CAAamL,UAAb,CAAwB,IAAxB,CAAf;AACA3N,WAAOyC,WAAP,CAAmB,KAAKD,OAAxB;;AAEA,SAAKG,MAAL,GAAc,UAAUiL,CAAV,EAAaC,CAAb,EAAgB;AAC5BnD,WAAMlI,OAAN,CAAcP,KAAd,GAAsB2L,IAAI,CAA1B;AACAlD,WAAMlI,OAAN,CAAcN,MAAd,GAAuB2L,IAAI,CAA3B;AACAnD,WAAMlI,OAAN,CAAcW,KAAd,CAAoBlB,KAApB,GAA4B2L,IAAI,IAAhC;AACAlD,WAAMlI,OAAN,CAAcW,KAAd,CAAoBjB,MAApB,GAA6B2L,IAAI,IAAjC;AACD,KALD;AAMD,IAbD;;AAeD;AAAO,GAvsCG;AAwsCV;AACA,OAAO,UAAShU,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAA,WAAQiQ,QAAR,GAAmB,UAAUlP,GAAV,EAAe;AAChC,QAAI,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2B,CAACsP,MAAMC,OAAN,CAAcvP,GAAd,CAA5B,IAAkDA,QAAQ,IAA1D,IAAkEA,eAAe0S,UAAf,KAA8B,KAAhG,IAAyG1S,eAAeoP,WAAf,KAA+B,KAA5I,EAAmJ;AACjJ,YAAO,IAAP;AACD,KAFD,MAEO;AACL,YAAO,KAAP;AACD;AACF,IAND;;AAQD;AAAO,GArtCG;AAstCV;AACA,OAAO,UAASlQ,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAA,WAAQgR,MAAR,GAAiB,kBAAkB/R,SAASiV,eAA5C;;AAED;AAAO,GA7tCG;AA8tCV;AACA,OAAO,UAASjU,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAASkP,YAAT,GAAwB;AACtB,SAAKiF,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,IAAsBjO,SAA3C;AACD;AACDlG,UAAOD,OAAP,GAAiBkP,YAAjB;;AAEA;AACAA,gBAAaA,YAAb,GAA4BA,YAA5B;;AAEAA,gBAAanN,SAAb,CAAuBoS,OAAvB,GAAiChO,SAAjC;AACA+I,gBAAanN,SAAb,CAAuBqS,aAAvB,GAAuCjO,SAAvC;;AAEA;AACA;AACA+I,gBAAamF,mBAAb,GAAmC,EAAnC;;AAEA;AACA;AACAnF,gBAAanN,SAAb,CAAuBuS,eAAvB,GAAyC,UAASC,CAAT,EAAY;AACnD,QAAI,CAACC,SAASD,CAAT,CAAD,IAAgBA,IAAI,CAApB,IAAyBE,MAAMF,CAAN,CAA7B,EACE,MAAMrS,UAAU,6BAAV,CAAN;AACF,SAAKkS,aAAL,GAAqBG,CAArB;AACA,WAAO,IAAP;AACD,IALD;;AAOArF,gBAAanN,SAAb,CAAuBkI,IAAvB,GAA8B,UAASI,IAAT,EAAe;AAC3C,QAAIqK,EAAJ,EAAQC,OAAR,EAAiBC,GAAjB,EAAsBxF,IAAtB,EAA4B9D,CAA5B,EAA+BuJ,SAA/B;;AAEA,QAAI,CAAC,KAAKV,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf;;AAEF;AACA,QAAI9J,SAAS,OAAb,EAAsB;AACpB,SAAI,CAAC,KAAK8J,OAAL,CAAaW,KAAd,IACC7E,SAAS,KAAKkE,OAAL,CAAaW,KAAtB,KAAgC,CAAC,KAAKX,OAAL,CAAaW,KAAb,CAAmBxH,MADzD,EACkE;AAChEoH,WAAK3M,UAAU,CAAV,CAAL;AACA,UAAI2M,cAAcK,KAAlB,EAAyB;AACvB,aAAML,EAAN,CADuB,CACb;AACX,OAFD,MAEO;AACL;AACA,WAAIM,MAAM,IAAID,KAAJ,CAAU,2CAA2CL,EAA3C,GAAgD,GAA1D,CAAV;AACAM,WAAIjS,OAAJ,GAAc2R,EAAd;AACA,aAAMM,GAAN;AACD;AACF;AACF;;AAEDL,cAAU,KAAKR,OAAL,CAAa9J,IAAb,CAAV;;AAEA,QAAI4K,YAAYN,OAAZ,CAAJ,EACE,OAAO,KAAP;;AAEF,QAAIO,WAAWP,OAAX,CAAJ,EAAyB;AACvB,aAAQ5M,UAAUuF,MAAlB;AACE;AACA,WAAK,CAAL;AACEqH,eAAQnU,IAAR,CAAa,IAAb;AACA;AACF,WAAK,CAAL;AACEmU,eAAQnU,IAAR,CAAa,IAAb,EAAmBuH,UAAU,CAAV,CAAnB;AACA;AACF,WAAK,CAAL;AACE4M,eAAQnU,IAAR,CAAa,IAAb,EAAmBuH,UAAU,CAAV,CAAnB,EAAiCA,UAAU,CAAV,CAAjC;AACA;AACF;AACA;AACEqH,cAAOiB,MAAMtO,SAAN,CAAgBoT,KAAhB,CAAsB3U,IAAtB,CAA2BuH,SAA3B,EAAsC,CAAtC,CAAP;AACA4M,eAAQS,KAAR,CAAc,IAAd,EAAoBhG,IAApB;AAdJ;AAgBD,KAjBD,MAiBO,IAAIa,SAAS0E,OAAT,CAAJ,EAAuB;AAC5BvF,YAAOiB,MAAMtO,SAAN,CAAgBoT,KAAhB,CAAsB3U,IAAtB,CAA2BuH,SAA3B,EAAsC,CAAtC,CAAP;AACA8M,iBAAYF,QAAQQ,KAAR,EAAZ;AACAP,WAAMC,UAAUvH,MAAhB;AACA,UAAKhC,IAAI,CAAT,EAAYA,IAAIsJ,GAAhB,EAAqBtJ,GAArB;AACEuJ,gBAAUvJ,CAAV,EAAa8J,KAAb,CAAmB,IAAnB,EAAyBhG,IAAzB;AADF;AAED;;AAED,WAAO,IAAP;AACD,IArDD;;AAuDAF,gBAAanN,SAAb,CAAuBsT,WAAvB,GAAqC,UAAShL,IAAT,EAAeiL,QAAf,EAAyB;AAC5D,QAAI7U,CAAJ;;AAEA,QAAI,CAACyU,WAAWI,QAAX,CAAL,EACE,MAAMpT,UAAU,6BAAV,CAAN;;AAEF,QAAI,CAAC,KAAKiS,OAAV,EACE,KAAKA,OAAL,GAAe,EAAf;;AAEF;AACA;AACA,QAAI,KAAKA,OAAL,CAAaoB,WAAjB,EACE,KAAKtL,IAAL,CAAU,aAAV,EAAyBI,IAAzB,EACU6K,WAAWI,SAASA,QAApB,IACAA,SAASA,QADT,GACoBA,QAF9B;;AAIF,QAAI,CAAC,KAAKnB,OAAL,CAAa9J,IAAb,CAAL;AACE;AACA,UAAK8J,OAAL,CAAa9J,IAAb,IAAqBiL,QAArB,CAFF,KAGK,IAAIrF,SAAS,KAAKkE,OAAL,CAAa9J,IAAb,CAAT,CAAJ;AACH;AACA,UAAK8J,OAAL,CAAa9J,IAAb,EAAmBmB,IAAnB,CAAwB8J,QAAxB,EAFG;AAIH;AACA,UAAKnB,OAAL,CAAa9J,IAAb,IAAqB,CAAC,KAAK8J,OAAL,CAAa9J,IAAb,CAAD,EAAqBiL,QAArB,CAArB;;AAEF;AACA,QAAIrF,SAAS,KAAKkE,OAAL,CAAa9J,IAAb,CAAT,KAAgC,CAAC,KAAK8J,OAAL,CAAa9J,IAAb,EAAmBmL,MAAxD,EAAgE;AAC9D,SAAI,CAACP,YAAY,KAAKb,aAAjB,CAAL,EAAsC;AACpC3T,UAAI,KAAK2T,aAAT;AACD,MAFD,MAEO;AACL3T,UAAIyO,aAAamF,mBAAjB;AACD;;AAED,SAAI5T,KAAKA,IAAI,CAAT,IAAc,KAAK0T,OAAL,CAAa9J,IAAb,EAAmBiD,MAAnB,GAA4B7M,CAA9C,EAAiD;AAC/C,WAAK0T,OAAL,CAAa9J,IAAb,EAAmBmL,MAAnB,GAA4B,IAA5B;AACA7V,cAAQmV,KAAR,CAAc,kDACA,qCADA,GAEA,kDAFd,EAGc,KAAKX,OAAL,CAAa9J,IAAb,EAAmBiD,MAHjC;AAIA,UAAI,OAAO3N,QAAQ8V,KAAf,KAAyB,UAA7B,EAAyC;AACvC;AACA9V,eAAQ8V,KAAR;AACD;AACF;AACF;;AAED,WAAO,IAAP;AACD,IAhDD;;AAkDAvG,gBAAanN,SAAb,CAAuBzC,EAAvB,GAA4B4P,aAAanN,SAAb,CAAuBsT,WAAnD;;AAEAnG,gBAAanN,SAAb,CAAuB2T,IAAvB,GAA8B,UAASrL,IAAT,EAAeiL,QAAf,EAAyB;AACrD,QAAI,CAACJ,WAAWI,QAAX,CAAL,EACE,MAAMpT,UAAU,6BAAV,CAAN;;AAEF,QAAIyT,QAAQ,KAAZ;;AAEA,aAASC,CAAT,GAAa;AACX,UAAKC,cAAL,CAAoBxL,IAApB,EAA0BuL,CAA1B;;AAEA,SAAI,CAACD,KAAL,EAAY;AACVA,cAAQ,IAAR;AACAL,eAASF,KAAT,CAAe,IAAf,EAAqBrN,SAArB;AACD;AACF;;AAED6N,MAAEN,QAAF,GAAaA,QAAb;AACA,SAAKhW,EAAL,CAAQ+K,IAAR,EAAcuL,CAAd;;AAEA,WAAO,IAAP;AACD,IAnBD;;AAqBA;AACA1G,gBAAanN,SAAb,CAAuB8T,cAAvB,GAAwC,UAASxL,IAAT,EAAeiL,QAAf,EAAyB;AAC/D,QAAIQ,IAAJ,EAAU3N,QAAV,EAAoBmF,MAApB,EAA4BhC,CAA5B;;AAEA,QAAI,CAAC4J,WAAWI,QAAX,CAAL,EACE,MAAMpT,UAAU,6BAAV,CAAN;;AAEF,QAAI,CAAC,KAAKiS,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAa9J,IAAb,CAAtB,EACE,OAAO,IAAP;;AAEFyL,WAAO,KAAK3B,OAAL,CAAa9J,IAAb,CAAP;AACAiD,aAASwI,KAAKxI,MAAd;AACAnF,eAAW,CAAC,CAAZ;;AAEA,QAAI2N,SAASR,QAAT,IACCJ,WAAWY,KAAKR,QAAhB,KAA6BQ,KAAKR,QAAL,KAAkBA,QADpD,EAC+D;AAC7D,YAAO,KAAKnB,OAAL,CAAa9J,IAAb,CAAP;AACA,SAAI,KAAK8J,OAAL,CAAa0B,cAAjB,EACE,KAAK5L,IAAL,CAAU,gBAAV,EAA4BI,IAA5B,EAAkCiL,QAAlC;AAEH,KAND,MAMO,IAAIrF,SAAS6F,IAAT,CAAJ,EAAoB;AACzB,UAAKxK,IAAIgC,MAAT,EAAiBhC,MAAM,CAAvB,GAA2B;AACzB,UAAIwK,KAAKxK,CAAL,MAAYgK,QAAZ,IACCQ,KAAKxK,CAAL,EAAQgK,QAAR,IAAoBQ,KAAKxK,CAAL,EAAQgK,QAAR,KAAqBA,QAD9C,EACyD;AACvDnN,kBAAWmD,CAAX;AACA;AACD;AACF;;AAED,SAAInD,WAAW,CAAf,EACE,OAAO,IAAP;;AAEF,SAAI2N,KAAKxI,MAAL,KAAgB,CAApB,EAAuB;AACrBwI,WAAKxI,MAAL,GAAc,CAAd;AACA,aAAO,KAAK6G,OAAL,CAAa9J,IAAb,CAAP;AACD,MAHD,MAGO;AACLyL,WAAKnG,MAAL,CAAYxH,QAAZ,EAAsB,CAAtB;AACD;;AAED,SAAI,KAAKgM,OAAL,CAAa0B,cAAjB,EACE,KAAK5L,IAAL,CAAU,gBAAV,EAA4BI,IAA5B,EAAkCiL,QAAlC;AACH;;AAED,WAAO,IAAP;AACD,IA3CD;;AA6CApG,gBAAanN,SAAb,CAAuB6Q,kBAAvB,GAA4C,UAASvI,IAAT,EAAe;AACzD,QAAI/I,GAAJ,EAASuT,SAAT;;AAEA,QAAI,CAAC,KAAKV,OAAV,EACE,OAAO,IAAP;;AAEF;AACA,QAAI,CAAC,KAAKA,OAAL,CAAa0B,cAAlB,EAAkC;AAChC,SAAI9N,UAAUuF,MAAV,KAAqB,CAAzB,EACE,KAAK6G,OAAL,GAAe,EAAf,CADF,KAEK,IAAI,KAAKA,OAAL,CAAa9J,IAAb,CAAJ,EACH,OAAO,KAAK8J,OAAL,CAAa9J,IAAb,CAAP;AACF,YAAO,IAAP;AACD;;AAED;AACA,QAAItC,UAAUuF,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,UAAKhM,GAAL,IAAY,KAAK6S,OAAjB,EAA0B;AACxB,UAAI7S,QAAQ,gBAAZ,EAA8B;AAC9B,WAAKsR,kBAAL,CAAwBtR,GAAxB;AACD;AACD,UAAKsR,kBAAL,CAAwB,gBAAxB;AACA,UAAKuB,OAAL,GAAe,EAAf;AACA,YAAO,IAAP;AACD;;AAEDU,gBAAY,KAAKV,OAAL,CAAa9J,IAAb,CAAZ;;AAEA,QAAI6K,WAAWL,SAAX,CAAJ,EAA2B;AACzB,UAAKgB,cAAL,CAAoBxL,IAApB,EAA0BwK,SAA1B;AACD,KAFD,MAEO,IAAIA,SAAJ,EAAe;AACpB;AACA,YAAOA,UAAUvH,MAAjB;AACE,WAAKuI,cAAL,CAAoBxL,IAApB,EAA0BwK,UAAUA,UAAUvH,MAAV,GAAmB,CAA7B,CAA1B;AADF;AAED;AACD,WAAO,KAAK6G,OAAL,CAAa9J,IAAb,CAAP;;AAEA,WAAO,IAAP;AACD,IAtCD;;AAwCA6E,gBAAanN,SAAb,CAAuB8S,SAAvB,GAAmC,UAASxK,IAAT,EAAe;AAChD,QAAI0L,GAAJ;AACA,QAAI,CAAC,KAAK5B,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAa9J,IAAb,CAAtB,EACE0L,MAAM,EAAN,CADF,KAEK,IAAIb,WAAW,KAAKf,OAAL,CAAa9J,IAAb,CAAX,CAAJ,EACH0L,MAAM,CAAC,KAAK5B,OAAL,CAAa9J,IAAb,CAAD,CAAN,CADG,KAGH0L,MAAM,KAAK5B,OAAL,CAAa9J,IAAb,EAAmB8K,KAAnB,EAAN;AACF,WAAOY,GAAP;AACD,IATD;;AAWA7G,gBAAanN,SAAb,CAAuBiU,aAAvB,GAAuC,UAAS3L,IAAT,EAAe;AACpD,QAAI,KAAK8J,OAAT,EAAkB;AAChB,SAAI8B,aAAa,KAAK9B,OAAL,CAAa9J,IAAb,CAAjB;;AAEA,SAAI6K,WAAWe,UAAX,CAAJ,EACE,OAAO,CAAP,CADF,KAEK,IAAIA,UAAJ,EACH,OAAOA,WAAW3I,MAAlB;AACH;AACD,WAAO,CAAP;AACD,IAVD;;AAYA4B,gBAAa8G,aAAb,GAA6B,UAASE,OAAT,EAAkB7L,IAAlB,EAAwB;AACnD,WAAO6L,QAAQF,aAAR,CAAsB3L,IAAtB,CAAP;AACD,IAFD;;AAIA,YAAS6K,UAAT,CAAoBiB,GAApB,EAAyB;AACvB,WAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,YAAS3B,QAAT,CAAkB2B,GAAlB,EAAuB;AACrB,WAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,YAASlG,QAAT,CAAkBkG,GAAlB,EAAuB;AACrB,WAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2BA,QAAQ,IAA1C;AACD;;AAED,YAASlB,WAAT,CAAqBkB,GAArB,EAA0B;AACxB,WAAOA,QAAQ,KAAK,CAApB;AACD;;AAGF;AAAO,GAjhDG;AAkhDV;AACA,OAAO,UAASlW,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOhC,oBAAoB,CAApB,CAAX;;AAEA;;;;;;;;;AASA,OAAI4G,OAAQ,YAAY;AACtB,aAASA,IAAT,GAAgB;AACd,SAAIkC,MAAMnB,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA3C;AACA,SAAIoC,MAAMpC,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA3C;AACA,SAAIqC,OAAOrC,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA5C;AACA,SAAItG,QAAQsG,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA7C;;AAEA/F,qBAAgB,IAAhB,EAAsBgF,IAAtB;;AAEA;AACA;AACA;AACA,UAAKkC,GAAL,GAAWA,GAAX;AACA,UAAKiB,GAAL,GAAWA,GAAX;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAK3I,KAAL,GAAaA,KAAb;AACA,UAAK2U,OAAL,GAAe,KAAf;AACA,UAAKC,QAAL,GAAgB,KAAhB;AACA,UAAKtM,MAAL,CAAY,KAAKtI,KAAjB;AACD;;AAEDP,iBAAa8F,IAAb,EAAmB;AACjB+C,aAAQ;;AAEN;;;;;AAKAtI,aAAO,SAASsI,MAAT,CAAgBtI,KAAhB,EAAuB;AAC5B,WAAI,KAAK2I,IAAT,EAAe;AACb;AACA,aAAK3I,KAAL,GAAaW,KAAKqJ,IAAL,CAAUxC,KAAKqN,KAAL,CAAW,CAAC7U,QAAQ,KAAKyH,GAAd,IAAqB,KAAKkB,IAArC,IAA6C,KAAKA,IAAlD,GAAyD,KAAKlB,GAAxE,EAA6E,KAAKA,GAAlF,EAAuF,KAAKiB,GAA5F,CAAb;AACD,QAHD,MAGO;AACL,aAAK1I,KAAL,GAAaW,KAAKqJ,IAAL,CAAUhK,KAAV,EAAiB,KAAKyH,GAAtB,EAA2B,KAAKiB,GAAhC,CAAb;AACD;AACD,WAAI,KAAKkM,QAAL,KAAkB,KAAK5U,KAA3B,EAAkC;AAChC,aAAK4U,QAAL,GAAgB,KAAK5U,KAArB;AACA,aAAK2U,OAAL,GAAe,IAAf;AACD,QAHD,MAGO;AACL,aAAKA,OAAL,GAAe,KAAf;AACD;AACD,cAAO,KAAK3U,KAAZ;AACD;AArBK,MADS;AAwBjBuI,mBAAc;;AAEZ;;;;;AAKAvI,aAAO,SAASuI,YAAT,CAAsBvI,KAAtB,EAA6B;AAClC,YAAKA,KAAL,GAAaW,KAAKuJ,KAAL,CAAWlK,KAAX,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAKyH,GAA7B,EAAkC,KAAKiB,GAAvC,CAAb;AACA,cAAO,KAAKJ,MAAL,CAAY,KAAKtI,KAAjB,CAAP;AACD;AAVW,MAxBG;AAoCjB8G,iBAAY;;AAEV;;;;AAIAjE,WAAK,eAAY;AACf,cAAOlC,KAAKsJ,SAAL,CAAe,KAAKjK,KAApB,EAA2B,KAAKyH,GAAhC,EAAqC,KAAKiB,GAA1C,CAAP;AACD;AARS;AApCK,KAAnB;;AAgDA,WAAOnD,IAAP;AACD,IAtEU,EAAX;;AAwEA/G,UAAOD,OAAP,GAAiBgH,IAAjB;;AAED;AAAO,GAhnDG;AAinDV;AACA,OAAO,UAAS/G,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEAP,UAAO4U,cAAP,CAAsBvW,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CyB,WAAO;AADoC,IAA7C;AAGA;;AAEA,OAAIW,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIoW,cAAcvV,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAlB;;AAEA;;;;;;;;;;;;;;;;;AAiBA;;;;;;;;;;;;;;;AAeA,OAAIgI,SAASpI,QAAQoI,MAAR,GAAkB,YAAY;AACzC,aAASA,MAAT,GAAkB;AAChB,SAAId,OAAOS,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,UAA7B,GAA0C4B,UAAU,CAAV,CAArD;AACA,SAAI0O,YAAY1O,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,UAA7B,GAA0C4B,UAAU,CAAV,CAA1D;AACA,SAAI2O,SAAS3O,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAAC,CAAD,EAAI,GAAJ,CAA7B,GAAwC4B,UAAU,CAAV,CAArD;AACA,SAAI4O,SAAS5O,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAAC,CAAD,EAAI,GAAJ,CAA7B,GAAwC4B,UAAU,CAAV,CAArD;;AAEA/F,qBAAgB,IAAhB,EAAsBoG,MAAtB;;AAEA,UAAKd,IAAL,GAAYA,IAAZ;AACA,UAAKmP,SAAL,GAAiBA,SAAjB;AACA,UAAKG,QAAL,GAAgB,CAAhB;AACA,UAAKnV,KAAL,GAAa,CAAb;AACA,UAAKoV,WAAL,GAAmB,CAAnB;AACA,UAAK9N,MAAL,CAAY2N,MAAZ,EAAoBC,MAApB;AACD;;AAEDzV,iBAAakH,MAAb,EAAqB;AACnBW,aAAQ;AACNtH,aAAO,SAASsH,MAAT,CAAgB2N,MAAhB,EAAwBC,MAAxB,EAAgC;AACrC,YAAKG,QAAL,GAAgB;AACd5N,aAAK;AACHxB,YAAGgP,OAAO,CAAP,CADA;AAEH5O,YAAG6O,OAAO,CAAP;AAFA,SADS;AAKdxM,aAAK;AACHzC,YAAGgP,OAAO,CAAP,CADA;AAEH5O,YAAG6O,OAAO,CAAP;AAFA,SALS;AASdI,gBAAQ;AACNrP,YAAG,CAACgP,OAAO,CAAP,IAAYA,OAAO,CAAP,CAAb,IAA0B,CAA1B,GAA8BA,OAAO,CAAP,CAD3B;AAEN5O,YAAG,CAAC6O,OAAO,CAAP,IAAYA,OAAO,CAAP,CAAb,IAA0B,CAA1B,GAA8BA,OAAO,CAAP;AAF3B;AATM,QAAhB;AAcD;AAhBK,MADW;AAmBnB/M,aAAQ;AACNrF,WAAK,aAAUsF,KAAV,EAAiB;AACpB,YAAKmN,OAAL,GAAe,KAAKC,sBAAL,CAA4BpN,KAA5B,CAAf;AACD,OAHK;AAINvF,WAAK,eAAY;AACf,cAAO,KAAK0S,OAAZ;AACD;AANK,MAnBW;AA2BnBjN,aAAQ;AACNtI,aAAO,SAASsI,MAAT,CAAgBF,KAAhB,EAAuB;AAC5B,WAAI,KAAKvC,IAAL,KAAc,UAAlB,EAA8B;AAC5B,YAAI4P,YAAY,KAAKD,sBAAL,CAA4BpN,KAA5B,IAAqC,KAAKD,MAA1D;AACA,YAAIX,KAAKkO,GAAL,CAASD,SAAT,IAAsB,GAA1B,EAA+B;AAC7BA,qBAAY,CAAZ;AACD;AACD,aAAKtN,MAAL,GAAcC,KAAd;AACA,aAAKpI,KAAL,GAAa,KAAKA,KAAL,GAAayV,YAAY,KAAKL,WAA3C;AACD,QAPD,MAOO;AACL,aAAKpV,KAAL,GAAa,KAAKwV,sBAAL,CAA4BpN,KAA5B,CAAb;AACD;AACD,YAAKpI,KAAL,GAAaW,KAAKqJ,IAAL,CAAU,KAAKhK,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,CAAb;AACD;AAbK,MA3BW;AA0CnBwV,6BAAwB;AACtBxV,aAAO,SAASwV,sBAAT,CAAgCG,OAAhC,EAAyC;AAC9C,eAAQ,KAAKX,SAAb;AACE,aAAK,QAAL;AACE,aAAItO,WAAW/F,KAAK6J,OAAL,CAAamL,QAAQ1P,CAAR,GAAY,KAAKoP,QAAL,CAAcC,MAAd,CAAqBrP,CAA9C,EAAiD0P,QAAQtP,CAAR,GAAY,KAAKgP,QAAL,CAAcC,MAAd,CAAqBjP,CAAlF,CAAf;AACAK,oBAAWA,SAASoE,KAAT,IAAkBtD,KAAKqD,EAAL,GAAU,CAA5B,CAAX;AACAnE,oBAAW,CAACA,WAAW,IAAX,GAAkB,CAAnB,IAAwB,CAAnC;AACA,gBAAOA,QAAP;AACF,aAAK,UAAL;AACE,gBAAO/F,KAAKuJ,KAAL,CAAWyL,QAAQtP,CAAnB,EAAsB,KAAKgP,QAAL,CAAc5N,GAAd,CAAkBpB,CAAxC,EAA2C,KAAKgP,QAAL,CAAc3M,GAAd,CAAkBrC,CAA7D,EAAgE,CAAhE,EAAmE,CAAnE,CAAP;AACF,aAAK,YAAL;AACE,gBAAO1F,KAAKuJ,KAAL,CAAWyL,QAAQ1P,CAAnB,EAAsB,KAAKoP,QAAL,CAAc5N,GAAd,CAAkBxB,CAAxC,EAA2C,KAAKoP,QAAL,CAAc3M,GAAd,CAAkBzC,CAA7D,EAAgE,CAAhE,EAAmE,CAAnE,CAAP;AATJ;AAWD;AAbqB;AA1CL,KAArB;;AA2DA,WAAOU,MAAP;AACD,IA7E6B,EAA9B;;AA+EA,OAAIvD,SAAS7E,QAAQ6E,MAAR,GAAkB,YAAY;AACzC,aAASA,MAAT,GAAkB;AAChB,SAAIyC,OAAOS,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,QAA7B,GAAwC4B,UAAU,CAAV,CAAnD;;AAEA/F,qBAAgB,IAAhB,EAAsB6C,MAAtB;;AAEA,UAAKyC,IAAL,GAAYA,IAAZ;AACA,UAAK+P,KAAL,GAAa,IAAIb,WAAJ,EAAb;AACA,UAAKc,UAAL,GAAkB,KAAlB;AACD;;AAEDpW,iBAAa2D,MAAb,EAAqB;AACnB8E,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,eAAQ,KAAKrC,IAAb;AACE,aAAK,SAAL;AACE,cAAK+P,KAAL,CAAW/X,EAAX;AACA,aAAI,KAAKiY,OAAT,EAAkB;AAChBC,uBAAa,KAAKD,OAAlB;AACD;AACD,cAAKA,OAAL,GAAepF,WAAW,KAAKkF,KAAL,CAAWjO,GAAX,CAAezF,IAAf,CAAoB,IAApB,CAAX,EAAsC,EAAtC,CAAf;AACA,cAAKsG,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACA;AACF,aAAK,QAAL;AACE,cAAKI,MAAL;AACA,cAAKxN,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACA;AACF,aAAK,YAAL;AACE,cAAKlP,QAAL,GAAgB;AACdT,aAAGtF,KAAKqJ,IAAL,CAAU,KAAK5B,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,CADW;AAEdP,aAAG1F,KAAKqJ,IAAL,CAAU,IAAI,KAAK5B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C;AAFW,UAAhB;AAIA,cAAKmP,MAAL;AACA,cAAKxN,IAAL,CAAU,QAAV,EAAoB;AAClBoN,iBAAO,KAAKA,KADM;AAElB3P,aAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,aAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAIA;AACF,aAAK,QAAL;AACE,cAAK4P,IAAL;AACA,cAAKzN,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACA;AA3BJ;AA6BD;AA/BI,MADY;AAkCnBvN,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKxC,IAAL,KAAc,YAAlB,EAAgC;AAC9B,aAAKa,QAAL,GAAgB;AACdT,YAAGtF,KAAKqJ,IAAL,CAAU,KAAK5B,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,CADW;AAEdP,YAAG1F,KAAKqJ,IAAL,CAAU,IAAI,KAAK5B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C;AAFW,SAAhB;AAIA,aAAK2B,IAAL,CAAU,QAAV,EAAoB;AAClBoN,gBAAO,KAAKA,KADM;AAElB3P,YAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,YAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAIA,aAAKW,MAAL;AACD;AACF;AAbG,MAlCa;AAiDnByB,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,eAAQ,KAAK5C,IAAb;AACE,aAAK,QAAL;AACE,cAAKqQ,OAAL;AACA,cAAK1N,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACA;AACF,aAAK,YAAL;AACE,cAAKM,OAAL;AACA,cAAKxP,QAAL,GAAgB;AACdT,aAAG,KAAKmC,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KADT;AAEdP,aAAG,IAAI,KAAK+B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ;AAFb,UAAhB;AAIA,cAAK2B,IAAL,CAAU,QAAV,EAAoB;AAClBoN,iBAAO,KAAKA,KADM;AAElB3P,aAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,aAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAIA;AAfJ;AAiBD;AAnBM;AAjDU,KAArB;;AAwEA,WAAOjD,MAAP;AACD,IApF6B,EAA9B;;AAsFD;AAAO,GA10DG;AA20DV;AACA,OAAO,UAAS5E,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEA,OAAIkB,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI0C,SAAU,YAAY;AACxB,aAASA,MAAT,CAAgByS,KAAhB,EAAuB;AACrBrV,qBAAgB,IAAhB,EAAsB4C,MAAtB;;AAEA,UAAKyS,KAAL,GAAaA,SAAS,KAAtB;AACD;;AAEDnW,iBAAa0D,MAAb,EAAqB;AACnB8S,WAAM;AACJjW,aAAO,SAASiW,IAAT,CAAcL,KAAd,EAAqB;AAC1B,WAAIA,SAASA,UAAU,KAAvB,EAA8B;AAC5B,aAAKA,KAAL,GAAaA,KAAb;AACD,QAFD,MAEO;AACL,aAAKA,KAAL,GAAa,CAAC,KAAKA,KAAnB;AACD;AACF;AAPG,MADa;AAUnB/X,SAAI;AACFmC,aAAO,SAASnC,EAAT,GAAc;AACnB,YAAK+X,KAAL,GAAa,IAAb;AACD;AAHC,MAVe;AAenBjO,UAAK;AACH3H,aAAO,SAAS2H,GAAT,GAAe;AACpB,YAAKiO,KAAL,GAAa,KAAb;AACD;AAHE;AAfc,KAArB;;AAsBA,WAAOzS,MAAP;AACD,IA9BY,EAAb;;AAgCA3E,UAAOD,OAAP,GAAiB4E,MAAjB;;AAED;AAAO,GAt3DG;AAu3DV;AACA,OAAO,UAAS3E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;;AAEA,OAAI6G,cAAcnG,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAlB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,OAAIuE,SAAU,UAAUuC,UAAV,EAAsB;AAClC,aAASvC,MAAT,GAAkB;AAChB3C,qBAAgB,IAAhB,EAAsB2C,MAAtB;;AAEA,SAAIwC,UAAU,CAAC,KAAD,EAAQ,KAAR,EAAe,OAAf,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,EAAN,CADO;AAEbC,YAAM,UAFO,EAEK;AAClB4B,WAAK,CAHQ;AAIbiB,WAAK,CAJQ;AAKbC,YAAM,CALO;AAMb3I,aAAO;AANM,MAAf;;AASAoE,UAAKlE,OAAO0E,cAAP,CAAsB1B,OAAO5C,SAA7B,CAAL,EAA8C,aAA9C,EAA6D,IAA7D,EAAmEvB,IAAnE,CAAwE,IAAxE,EAA8EuH,SAA9E,EAAyFZ,OAAzF,EAAkGC,QAAlG;;AAEA,UAAKwQ,WAAL,GAAmB,UAAnB,CAhBgB,CAgBe;;AAE/B,UAAKC,MAAL,GAAc,IAAI7Q,IAAJ,CAAS,KAAKiB,QAAL,CAAciB,GAAvB,EAA4B,KAAKjB,QAAL,CAAckC,GAA1C,EAA+C,KAAKlC,QAAL,CAAcmC,IAA7D,EAAmE,KAAKnC,QAAL,CAAcxG,KAAjF,CAAd;;AAEA,UAAK0G,QAAL,GAAgB,IAAIlB,YAAYmB,MAAhB,CAAuB,KAAKH,QAAL,CAAcX,IAArC,EAA2C,KAAKsQ,WAAhD,EAA6D,CAAC,CAAD,EAAI,KAAKvP,KAAT,CAA7D,EAA8E,CAAC,KAAKC,MAAN,EAAc,CAAd,CAA9E,CAAhB;AACA,UAAKH,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;;AAEA,UAAKC,IAAL;;AAEA,UAAKL,QAAL,CAAcsO,SAAd,GAA0B,KAAKmB,WAA/B;;AAEA,UAAK3N,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;;AAED8E,cAAU5B,MAAV,EAAkBuC,UAAlB;;AAEAhG,iBAAayD,MAAb,EAAqB;AACnB+D,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKoP,GAAL,GAAWhR,IAAIJ,MAAJ,CAAW,MAAX,CAAX;AACA,YAAKqR,OAAL,GAAejR,IAAIJ,MAAJ,CAAW,MAAX,CAAf;AACA,YAAKiC,IAAL,GAAY7B,IAAIJ,MAAJ,CAAW,QAAX,CAAZ;;AAEA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKiP,GAA9B;AACA,YAAKlP,OAAL,CAAaC,WAAb,CAAyB,KAAKkP,OAA9B;AACA,YAAKnP,OAAL,CAAaC,WAAb,CAAyB,KAAKF,IAA9B;AACD;AAVa,MADG;AAanBG,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI,KAAKT,KAAL,GAAa,KAAKC,MAAtB,EAA8B;AAC5B,aAAKsP,WAAL,GAAmB,UAAnB;AACD,QAFD,MAEO;AACL,aAAKA,WAAL,GAAmB,YAAnB;AACD;;AAED,WAAI,KAAKzP,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcY,MAAd,CAAqB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAArB,EAAsC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAtC;AACD;;AAED,WAAIZ,IAAIvB,SAAR;AAAA,WACI2B,IAAI3B,SADR;AAAA,WAEI6N,IAAI7N,SAFR;AAAA,WAGI8N,IAAI9N,SAHR;AAAA,WAII6R,YAAY7R,SAJhB;AAAA,WAKI8R,eAAe9R,SALnB;AAMA,YAAK+R,QAAL,GAAgB;AACdC,eAAO,CADO;AAEdjM,WAAG;AAFW,QAAhB;;AAKA,WAAI,KAAK0L,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKQ,SAAL,GAAiB,KAAK/P,KAAL,GAAa,CAA9B;AACAX,YAAI,KAAKW,KAAL,GAAa,CAAjB;AACAP,YAAI,CAAJ;AACAkM,YAAI,KAAKoE,SAAT;AACAnE,YAAI,KAAK3L,MAAT;AACA,aAAK4P,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,aAAKF,QAAL,CAAcC,KAAd,GAAsBlE,IAAI,KAAKiE,QAAL,CAAchM,CAAlB,GAAsB,KAAK3D,UAAL,IAAmB0L,IAAI,KAAKiE,QAAL,CAAchM,CAAd,GAAkB,CAAzC,CAA5C;AACA8L,oBAAY,eAAe,KAAKI,SAAL,GAAiB,CAAC,CAAlB,GAAsB,CAArC,GAAyC,KAArD;AACAH,uBAAejE,IAAI,CAAnB;AACD,QAVD,MAUO;AACL,aAAKoE,SAAL,GAAiB,KAAK9P,MAAL,GAAc,CAA/B;AACAZ,YAAI,CAAJ;AACAI,YAAI,KAAKQ,MAAL,GAAc,CAAlB;AACA0L,YAAI,KAAK3L,KAAT;AACA4L,YAAI,KAAKmE,SAAT;AACA,aAAKF,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,aAAKF,QAAL,CAAcC,KAAd,GAAsB,KAAK5P,UAAL,IAAmByL,IAAI,KAAKkE,QAAL,CAAchM,CAAd,GAAkB,CAAzC,IAA8C,KAAKgM,QAAL,CAAchM,CAAlF;AACA8L,oBAAY,iBAAiB,KAAKI,SAAL,GAAiB,CAAC,CAAlB,GAAsB,CAAvC,GAA2C,GAAvD;AACAH,uBAAehE,IAAI,CAAnB;AACD;;AAED,YAAK6D,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2B3B,CAA3B;AACA,YAAKoQ,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2BvB,CAA3B;AACA,YAAKgQ,GAAL,CAASzO,YAAT,CAAsB,WAAtB,EAAmC2O,SAAnC;AACA,YAAKF,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B4O,YAA5B,EAhD8B,CAgDa;AAC3C,YAAKH,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B4O,YAA5B;AACA,YAAKH,GAAL,CAASzO,YAAT,CAAsB,OAAtB,EAA+B2K,CAA/B;AACA,YAAK8D,GAAL,CAASzO,YAAT,CAAsB,QAAtB,EAAgC4K,CAAhC;;AAEA,WAAI,KAAK2D,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKG,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B3B,CAA/B;AACA,aAAKqQ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,KAAK6O,QAAL,CAAcC,KAA7C;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC2K,CAAnC;AACA,aAAK+D,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC4K,IAAI,KAAKiE,QAAL,CAAcC,KAAtD;AACD,QALD,MAKO;AACL,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,CAA/B;AACA,aAAK0O,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+BvB,CAA/B;AACA,aAAKiQ,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC,KAAK6O,QAAL,CAAcC,KAAjD;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC4K,CAApC;AACD;AACD,YAAK8D,OAAL,CAAa1O,YAAb,CAA0B,WAA1B,EAAuC2O,SAAvC;AACA,YAAKD,OAAL,CAAa1O,YAAb,CAA0B,IAA1B,EAAgC4O,YAAhC;AACA,YAAKF,OAAL,CAAa1O,YAAb,CAA0B,IAA1B,EAAgC4O,YAAhC;;AAEA,WAAI,KAAKL,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKjP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B3B,CAA7B;AACA,aAAKiB,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACD,QAHD,MAGO;AACL,aAAKxP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACA,aAAKxP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6BvB,CAA7B;AACD;AACD,YAAKa,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAK6O,QAAL,CAAchM,CAA1C;AACD;AA7EY,MAbI;AA4FnB5C,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKwO,GAAL,CAASzO,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYE,IAA1C;AACA,YAAKgU,OAAL,CAAa1O,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYC,MAA9C;AACA,YAAK6E,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYC,MAA3C;AACD;AALa,MA5FG;AAmGnB2E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAKgB,OAAV,EAAmB;AACjB,aAAKyO,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,IAAnC;AACD;AACD,YAAKzP,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAK6O,QAAL,CAAchM,CAA1C;;AAEA,WAAI,KAAK0L,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKM,QAAL,CAAcC,KAAd,GAAsB,KAAKD,QAAL,CAAchM,CAAd,GAAkB,KAAK2L,MAAL,CAAYtP,UAAZ,IAA0B,KAAKD,MAAL,GAAc,KAAK4P,QAAL,CAAchM,CAAd,GAAkB,CAA1D,CAAxC;AACA,aAAKvD,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKf,MAAL,GAAc,KAAK4P,QAAL,CAAcC,KAAzD;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,KAAKf,MAAL,GAAc,KAAK4P,QAAL,CAAcC,KAA3D;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC,KAAK6O,QAAL,CAAcC,KAAlD;AACD,QALD,MAKO;AACL,aAAKD,QAAL,CAAcC,KAAd,GAAsB,KAAKN,MAAL,CAAYtP,UAAZ,IAA0B,KAAKF,KAAL,GAAa,KAAK6P,QAAL,CAAchM,CAAd,GAAkB,CAAzD,IAA8D,KAAKgM,QAAL,CAAchM,CAAlG;AACA,aAAKvD,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,CAA/B;AACA,aAAK0O,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC,KAAK6O,QAAL,CAAcC,KAAjD;AACD;AACF;AAlBK,MAnGW;AAuHnBxO,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKuO,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,YAAKjQ,QAAL,CAAcyB,MAAd,GAAuB,KAAKC,KAA5B;AACA,YAAKC,IAAL;AACD;AALI,MAvHY;AA8HnBA,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKL,OAAT,EAAkB;AAChB,aAAKtB,QAAL,CAAc4B,MAAd,CAAqB,KAAKF,KAA1B;AACA,aAAKgO,MAAL,CAAY7N,YAAZ,CAAyB,KAAK7B,QAAL,CAAc1G,KAAvC;AACA,aAAKwI,IAAL,CAAU,QAAV,EAAoB,KAAK4N,MAAL,CAAYpW,KAAhC;AACA,aAAKgH,MAAL;AACD;AACF;AARG,MA9Ha;AAwInByB,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,YAAKzB,MAAL;AACD;AAHM,MAxIU;AA6InBF,iBAAY;AACVjE,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYtP,UAAnB;AACD;AAHS,MA7IO;AAkJnB9G,YAAO;;AAEL;;;;;;AAMA6C,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYpW,KAAnB;AACD,OAVI;AAWL8C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY9N,MAAZ,CAAmBxK,CAAnB;AACA,YAAK4I,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;AACA,YAAK0B,IAAL,CAAU,QAAV,EAAoB,KAAK4N,MAAL,CAAYpW,KAAhC;AACA,YAAKgH,MAAL;AACD;AAhBI,MAlJY;AAoKnBS,UAAK;;AAEH;;;;;;AAMA5E,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY3O,GAAnB;AACD,OAVE;AAWH3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY3O,GAAZ,GAAkB3J,CAAlB;AACD;AAbE,MApKc;AAmLnB4K,UAAK;;AAEH;;;;;;AAMA7F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY1N,GAAnB;AACD,OAVE;AAWH5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY1N,GAAZ,GAAkB5K,CAAlB;AACD;AAbE,MAnLc;AAkMnB6K,WAAM;;AAEJ;;;;;;AAMA9F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYzN,IAAnB;AACD,OAVG;AAWJ7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAYzN,IAAZ,GAAmB7K,CAAnB;AACD;AAbG,MAlMa;AAiNnB+H,WAAM;;AAEJ;;;;;;AAMAhD,WAAK,eAAY;AACf,cAAO,KAAK6D,QAAL,CAAcb,IAArB;AACD,OAVG;AAWJ/C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK4I,QAAL,CAAcb,IAAd,GAAqB/H,CAArB;AACD;AAbG;AAjNa,KAArB;;AAkOA,WAAOoF,MAAP;AACD,IApQY,CAoQVoC,SApQU,CAAb;;AAsQA9G,UAAOD,OAAP,GAAiB2E,MAAjB;;AAED;AAAO,GArrEG;AAsrEV;AACA,OAAO,UAAS1E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAIoW,cAAcpW,oBAAoB,EAApB,CAAlB;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAIwE,SAAU,UAAUsC,UAAV,EAAsB;AAClC,aAAStC,MAAT,GAAkB;AAChB5C,qBAAgB,IAAhB,EAAsB4C,MAAtB;;AAEA,SAAIuC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL,CADO;AAEbjG,cAAQ,KAFK;AAGbiW,aAAO;AAHM,MAAf;;AAMAxR,UAAKlE,OAAO0E,cAAP,CAAsBzB,OAAO7C,SAA7B,CAAL,EAA8C,aAA9C,EAA6D,IAA7D,EAAmEvB,IAAnE,CAAwE,IAAxE,EAA8EuH,SAA9E,EAAyFZ,OAAzF,EAAkGC,QAAlG;;AAEA,UAAKiR,MAAL,GAAc,IAAI7B,WAAJ,CAAgB,KAAKvO,QAAL,CAAcoP,KAA9B,CAAd;;AAEA,UAAK7O,IAAL;AACD;;AAEDjC,cAAU3B,MAAV,EAAkBsC,UAAlB;;AAEAhG,iBAAa0D,MAAb,EAAqB;AACnB8D,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKoP,GAAL,GAAWhR,IAAIJ,MAAJ,CAAW,MAAX,CAAX;AACA,YAAKiC,IAAL,GAAY7B,IAAIJ,MAAJ,CAAW,QAAX,CAAZ;AACA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKiP,GAA9B;AACA,YAAKlP,OAAL,CAAaC,WAAb,CAAyB,KAAKF,IAA9B;AACD;AAPa,MADG;AAUnBG,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI,KAAKR,MAAL,GAAc,KAAKD,KAAL,GAAa,CAA/B,EAAkC;AAChC,aAAKiQ,QAAL,GAAgB,KAAKhQ,MAAL,GAAc,CAA9B;AACD,QAFD,MAEO;AACL,aAAKgQ,QAAL,GAAgB,KAAKjQ,KAAL,GAAa,CAA7B;AACD;;AAED,YAAKyP,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2B,KAAKhB,KAAL,GAAa,CAAb,GAAiB,KAAKiQ,QAAL,GAAgB,GAA5D;AACA,YAAKR,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2B,KAAKf,MAAL,GAAc,CAAd,GAAkB,KAAKgQ,QAAL,GAAgB,CAA7D;AACA,YAAKR,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B,KAAKiP,QAAL,GAAgB,CAA5C;AACA,YAAKR,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B,KAAKiP,QAAL,GAAgB,CAA5C;AACA,YAAKR,GAAL,CAASzO,YAAT,CAAsB,OAAtB,EAA+B,KAAKiP,QAAL,GAAgB,CAA/C;AACA,YAAKR,GAAL,CAASzO,YAAT,CAAsB,QAAtB,EAAgC,KAAKiP,QAArC;;AAEA,YAAK3P,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKhB,KAAL,GAAa,CAAb,GAAiB,KAAKiQ,QAAnD;AACA,YAAK3P,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKf,MAAL,GAAc,CAA3C;AACA,YAAKK,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAKiP,QAAjC;AACD;AAnBY,MAVI;AA+BnBhP,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKX,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYC,MAA3C;AACA,YAAK2E,MAAL;AACD;AAJa,MA/BG;AAqCnBA,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAK4O,KAAV,EAAiB;AACf,aAAK1O,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKhB,KAAL,GAAa,CAAb,GAAiB,KAAKiQ,QAAnD;AACA,aAAKR,GAAL,CAASzO,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYE,IAA1C;AACD,QAHD,MAGO;AACL,aAAK4E,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKhB,KAAL,GAAa,CAAb,GAAiB,KAAKiQ,QAAnD;AACA,aAAKR,GAAL,CAASzO,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYC,MAA1C;AACD;AACF;AATK,MArCW;AAgDnB6F,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAK+N,IAAL;AACA,YAAKjP,MAAL;AACA,YAAKwB,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACD;AALI,MAhDY;AAuDnBA,YAAO;;AAEL;;;;;;AAMA/S,WAAK,eAAY;AACf,cAAO,KAAK+T,MAAL,CAAYhB,KAAnB;AACD,OAVI;AAWL9S,WAAK,aAAU9C,KAAV,EAAiB;AACpB,YAAK4W,MAAL,CAAYX,IAAZ,CAAiBjW,KAAjB;AACA,YAAKwI,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACA,YAAK5O,MAAL;AACD;AAfI,MAvDY;AAwEnBiP,WAAM;;AAEJ;;;;;;AAMAjW,aAAO,SAASiW,IAAT,GAAgB;AACrB,YAAKW,MAAL,CAAYX,IAAZ;AACA,YAAKjP,MAAL;AACD;AAXG;AAxEa,KAArB;;AAuFA,WAAO7D,MAAP;AACD,IA7GY,CA6GVmC,SA7GU,CAAb;;AA+GA9G,UAAOD,OAAP,GAAiB4E,MAAjB;;AAED;AAAO,GAr1EG;AAs1EV;AACA,OAAO,UAAS3E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAImY,iBAAiBnY,oBAAoB,EAApB,CAArB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAIyE,SAAU,UAAU2T,eAAV,EAA2B;AACvC,aAAS3T,MAAT,GAAkB;AAChB7C,qBAAgB,IAAhB,EAAsB6C,MAAtB;;AAEA,SAAIsC,UAAU,CAAC,MAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL,CADO;AAEbC,YAAM,YAFO,EAEO;AACpB+P,aAAO;AAHM,MAAf;;AAMAxR,UAAKlE,OAAO0E,cAAP,CAAsBxB,OAAO9C,SAA7B,CAAL,EAA8C,aAA9C,EAA6D,IAA7D,EAAmEvB,IAAnE,CAAwE,IAAxE,EAA8EuH,SAA9E,EAAyFZ,OAAzF,EAAkGC,QAAlG;;AAEA;;;;;AAKA,UAAKE,IAAL,GAAY,KAAKW,QAAL,CAAcX,IAA1B;;AAEA,UAAKkB,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAU1B,MAAV,EAAkB2T,eAAlB;;AAEAtX,iBAAa2D,MAAb,EAAqB;AACnB6D,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;AAC/B,YAAK+P,GAAL,GAAW3R,IAAIJ,MAAJ,CAAW,QAAX,CAAX;AACA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAK4P,GAA9B;;AAEA,YAAK1H,iBAAL,GAAyB,KAAK0H,GAA9B;;AAEA;AACA,YAAKxN,IAAL,GAAYnE,IAAIJ,MAAJ,CAAW,MAAX,CAAZ;AACA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKoC,IAA9B;;AAEA,YAAKI,QAAL,GAAgBvE,IAAIkE,cAAJ,CAAmB,KAAKC,IAAxB,EAA8B,CAA9B,CAAhB;;AAEA,YAAKI,QAAL,CAAcD,KAAd,CAAoB,CAApB,EAAuB/B,YAAvB,CAAoC,QAApC,EAA8C,KAA9C;;AAEA,YAAKgC,QAAL,CAAcD,KAAd,CAAoB,CAApB,EAAuB/B,YAAvB,CAAoC,QAApC,EAA8C,MAA9C;AACD;AAhBa,MADG;AAmBnBP,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAK2P,GAAL,CAASpP,YAAT,CAAsB,IAAtB,EAA4B,KAAKhB,KAAL,GAAa,CAAzC;AACA,YAAKoQ,GAAL,CAASpP,YAAT,CAAsB,IAAtB,EAA4B,KAAKf,MAAL,GAAc,CAA1C;AACA,YAAKmQ,GAAL,CAASpP,YAAT,CAAsB,GAAtB,EAA2BJ,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,IAAoC,CAApC,GAAwC,KAAKD,KAAL,GAAa,EAAhF;AACA,YAAKoQ,GAAL,CAASpP,YAAT,CAAsB,cAAtB,EAAsC,KAAKhB,KAAL,GAAa,EAAnD;AACD;AAPY,MAnBI;AA4BnBiB,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;;AAE/B,YAAK+B,QAAL,CAAcD,KAAd,CAAoB,CAApB,EAAuB/B,YAAvB,CAAoC,YAApC,EAAkD,KAAKxF,MAAL,CAAYC,MAA9D;AACA,YAAKuH,QAAL,CAAcD,KAAd,CAAoB,CAApB,EAAuB/B,YAAvB,CAAoC,YAApC,EAAkD,KAAKxF,MAAL,CAAYE,IAA9D;AACA,YAAK0E,MAAL;AACD;AANa,MA5BG;AAoCnBA,aAAQ;;AAEN;;;;;;;AAOAhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAK4O,KAAV,EAAiB;AACf,aAAKoB,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYE,IAA1C;AACA,aAAK0U,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKxF,MAAL,CAAYK,WAA5C;AACD,QAHD,MAGO;AACL,YAAI,KAAKoD,IAAL,KAAc,YAAlB,EAAgC;AAC9B,cAAKmR,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,UAAU,KAAKgC,QAAL,CAAc/K,EAAxB,GAA6B,GAA7D;AACA,cAAK+K,QAAL,CAAczC,OAAd,CAAsBS,YAAtB,CAAmC,IAAnC,EAAyC,KAAKlB,QAAL,CAAcT,CAAd,GAAkB,GAAlB,GAAwB,GAAjE;AACA,cAAK2D,QAAL,CAAczC,OAAd,CAAsBS,YAAtB,CAAmC,IAAnC,EAAyC,CAAC,IAAI,KAAKlB,QAAL,CAAcL,CAAnB,IAAwB,GAAxB,GAA8B,GAAvE;AACD,SAJD,MAIO;AACL,cAAK2Q,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKxF,MAAL,CAAYC,MAA5C;AACD;AACD,aAAK2U,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYC,MAA1C;AACD;AACF;AAvBK;AApCW,KAArB;;AA+DA,WAAOe,MAAP;AACD,IA3FY,CA2FV0T,cA3FU,CAAb;;AA6FAtY,UAAOD,OAAP,GAAiB6E,MAAjB;;AAED;AAAO,GAp+EG;AAq+EV;AACA,OAAO,UAAS5E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAIoW,cAAcpW,oBAAoB,EAApB,CAAlB;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;AAIA,OAAImY,iBAAkB,UAAUrR,UAAV,EAAsB;AAC1C,aAASqR,cAAT,CAAwBnJ,IAAxB,EAA8BjI,OAA9B,EAAuCC,QAAvC,EAAiD;AAC/CpF,qBAAgB,IAAhB,EAAsBuW,cAAtB;;AAEA1S,UAAKlE,OAAO0E,cAAP,CAAsBkS,eAAexW,SAArC,CAAL,EAAsD,aAAtD,EAAqE,IAArE,EAA2EvB,IAA3E,CAAgF,IAAhF,EAAsF4O,IAAtF,EAA4FjI,OAA5F,EAAqGC,QAArG;;AAEA,UAAKE,IAAL,GAAY,KAAKW,QAAL,CAAcX,IAAd,IAAsB,QAAlC;;AAEA,UAAKa,QAAL,GAAgB;AACdT,SAAG,CADW;AAEdI,SAAG;AAFW,MAAhB;;AAKA,UAAKuQ,MAAL,GAAc,IAAI7B,WAAJ,CAAgB,KAAKvO,QAAL,CAAcoP,KAA9B,CAAd;AACD;;AAED9Q,cAAUgS,cAAV,EAA0BrR,UAA1B;;AAEAhG,iBAAaqX,cAAb,EAA6B;AAC3B7P,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;AAC/B,YAAK+P,GAAL,GAAW3R,IAAIJ,MAAJ,CAAW,QAAX,CAAX;AACA,YAAK+R,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,MAA9B;AACA,YAAKoP,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,MAAhC;AACA,YAAKoP,GAAL,CAASpP,YAAT,CAAsB,cAAtB,EAAsC,CAAtC;;AAEA,YAAKT,OAAL,CAAaC,WAAb,CAAyB,KAAK4P,GAA9B;;AAEA,YAAK1H,iBAAL,GAAyB,KAAK0H,GAA9B;;AAEA,YAAK3P,aAAL;AACD;AAZa,MADW;AAe3BA,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;AAC9B,YAAK2P,GAAL,CAASpP,YAAT,CAAsB,IAAtB,EAA4B,KAAKhB,KAAL,GAAa,CAAzC;AACA,YAAKoQ,GAAL,CAASpP,YAAT,CAAsB,IAAtB,EAA4B,KAAKf,MAAL,GAAc,CAA1C;AACA,YAAKmQ,GAAL,CAASpP,YAAT,CAAsB,GAAtB,EAA2BJ,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,IAAoC,CAApC,GAAwC,CAAnE;AACD;AALY,MAfY;AAsB3BG,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAK4O,KAAV,EAAiB;AACf,aAAKoB,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYE,IAA1C;AACA,aAAK0U,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKxF,MAAL,CAAYK,WAA5C;AACD,QAHD,MAGO;AACL,aAAKuU,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYC,MAA1C;AACA,aAAK2U,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKxF,MAAL,CAAYC,MAA5C;AACD;AACF;AATK,MAtBmB;AAiC3B4U,WAAM;AACJjX,aAAO,SAASiX,IAAT,CAAcpB,UAAd,EAA0B;AAC/B,eAAQ,KAAKhQ,IAAb;AACE,aAAK,SAAL;AACE,cAAKmQ,MAAL;AACA,aAAI,KAAKF,OAAT,EAAkB;AAChBC,uBAAa,KAAKD,OAAlB;AACD;AACD,cAAKA,OAAL,GAAepF,WAAW,KAAKwF,OAAL,CAAahU,IAAb,CAAkB,IAAlB,CAAX,EAAoC,EAApC,CAAf;AACA;AACA;AACF,aAAK,QAAL;AACE,cAAK8T,MAAL;AACA;AACA;AACF,aAAK,YAAL;AACE,cAAKtP,QAAL,GAAgB;AACdT,aAAGtF,KAAKqJ,IAAL,CAAU,KAAK5B,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,CADW;AAEdP,aAAG1F,KAAKqJ,IAAL,CAAU,IAAI,KAAK5B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C;AAFW,UAAhB;AAIA,cAAKmP,MAAL;AACA;AACA;AACA;AACA;AACA;AACA;AACF,aAAK,QAAL;AACE,cAAKC,IAAL,CAAUJ,UAAV;AACA;AACA;AA5BJ;AA8BD;AAhCG,MAjCqB;AAmE3BqB,WAAM;AACJlX,aAAO,SAASkX,IAAT,CAAc9O,KAAd,EAAqB;AAC1B,WAAI,KAAKvC,IAAL,KAAc,YAAlB,EAAgC;AAC9B,aAAKuC,KAAL,GAAaA,SAAS,KAAKA,KAA3B;AACA,aAAK1B,QAAL,GAAgB;AACdT,YAAGtF,KAAKqJ,IAAL,CAAU,KAAK5B,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,CADW;AAEdP,YAAG1F,KAAKqJ,IAAL,CAAU,IAAI,KAAK5B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C;AAFW,SAAhB;AAIA,aAAK2B,IAAL,CAAU,QAAV,EAAoB;AAClBoN,gBAAO,KAAKA,KADM;AAElB3P,YAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,YAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAIA,aAAKW,MAAL;AACD;AACF;AAdG,MAnEqB;AAmF3BmQ,SAAI;AACFnX,aAAO,SAASmX,EAAT,GAAc;AACnB,eAAQ,KAAKtR,IAAb;AACE,aAAK,QAAL;AACE,cAAKqQ,OAAL;AACA;AACA;AACF,aAAK,YAAL;AACE,cAAKA,OAAL;AACA,cAAKxP,QAAL,GAAgB;AACdT,aAAGtF,KAAKqJ,IAAL,CAAU,KAAK5B,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAA9B,EAAqC,CAArC,EAAwC,CAAxC,CADW;AAEdP,aAAG1F,KAAKqJ,IAAL,CAAU,IAAI,KAAK5B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C;AAFW,UAAhB;AAIA;AACA;AACA;AACA;AACA;AACA;AAhBJ;AAkBD;AApBC,MAnFuB;AAyG3BqB,YAAO;;AAEL;;AAEAlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAK+O,IAAL;AACD;AANI,MAzGoB;AAiH3B5O,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,YAAK6O,IAAL;AACD;AAHG,MAjHqB;AAsH3BzO,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,YAAK0O,EAAL;AACD;AAHM,MAtHkB;AA2H3BvB,YAAO;;AAEL;;;;;;AAMA/S,WAAK,eAAY;AACf,cAAO,KAAK+T,MAAL,CAAYhB,KAAnB;AACD,OAVI;AAWL9S,WAAK,aAAU9C,KAAV,EAAiB;AACpB,YAAK4W,MAAL,CAAYX,IAAZ,CAAiBjW,KAAjB;AACA,WAAI,KAAK6F,IAAL,KAAc,YAAlB,EAAgC;AAC9B,aAAK2C,IAAL,CAAU,QAAV,EAAoB;AAClBoN,gBAAO,KAAKA,KADM;AAElB3P,YAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,YAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAID,QALD,MAKO;AACL,aAAKmC,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACD;AACD,YAAK5O,MAAL;AACD;AAtBI,MA3HoB;AAmJ3BiP,WAAM;;AAEJ;;;;;;AAMAjW,aAAO,SAASiW,IAAT,CAAcjW,KAAd,EAAqB;AAC1B,YAAK4W,MAAL,CAAYX,IAAZ,CAAiBjW,KAAjB;AACA,WAAI,KAAK6F,IAAL,KAAc,YAAlB,EAAgC;AAC9B,aAAK2C,IAAL,CAAU,QAAV,EAAoB;AAClBoN,gBAAO,KAAKA,KADM;AAElB3P,YAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,YAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAID,QALD,MAKO;AACL,aAAKmC,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACD;AACD,YAAK5O,MAAL;AACD;AAnBG,MAnJqB;AAwK3BgP,aAAQ;;AAEN;;;;;AAKAhW,aAAO,SAASgW,MAAT,CAAgBoB,QAAhB,EAA0B;AAC/B,YAAKR,MAAL,CAAY/Y,EAAZ;AACA,WAAIuZ,aAAa,KAAjB,EAAwB;AACtB,YAAI,KAAKvR,IAAL,KAAc,YAAlB,EAAgC;AAC9B,cAAK2C,IAAL,CAAU,QAAV,EAAoB;AAClBoN,iBAAO,KAAKA,KADM;AAElB3P,aAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,aAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAID,SALD,MAKO;AACL,cAAKmC,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACD;AACF;AACD,YAAK5O,MAAL;AACD;AApBK,MAxKmB;AA8L3BkP,cAAS;;AAEP;;;;;AAKAlW,aAAO,SAASkW,OAAT,CAAiBkB,QAAjB,EAA2B;AAChC,YAAKR,MAAL,CAAYjP,GAAZ;AACA,WAAIyP,aAAa,KAAjB,EAAwB;AACtB,YAAI,KAAKvR,IAAL,KAAc,YAAlB,EAAgC;AAC9B,cAAK2C,IAAL,CAAU,QAAV,EAAoB;AAClBoN,iBAAO,KAAKA,KADM;AAElB3P,aAAG,KAAKS,QAAL,CAAcT,CAFC;AAGlBI,aAAG,KAAKK,QAAL,CAAcL,CAHC,EAApB;AAID,SALD,MAKO;AACL,cAAKmC,IAAL,CAAU,QAAV,EAAoB,KAAKoN,KAAzB;AACD;AACF;AACD,YAAK5O,MAAL;AACD;AApBM;AA9LkB,KAA7B;;AAsNA,WAAO8P,cAAP;AACD,IAzOoB,CAyOlBxR,SAzOkB,CAArB;;AA2OA9G,UAAOD,OAAP,GAAiBuY,cAAjB;;AAED;AAAO,GAxuFG;AAyuFV;AACA,OAAO,UAAStY,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIqW,iBAAiBnY,oBAAoB,EAApB,CAArB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAI0E,aAAc,UAAU0T,eAAV,EAA2B;AAC3C,aAAS1T,UAAT,GAAsB;AACpB9C,qBAAgB,IAAhB,EAAsB8C,UAAtB;;AAEA,SAAIqC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,EAAN,CADO;AAEbgQ,aAAO,KAFM;AAGbyB,YAAM,MAHO;AAIbC,iBAAW;AAJE,MAAf;;AAOAlT,UAAKlE,OAAO0E,cAAP,CAAsBvB,WAAW/C,SAAjC,CAAL,EAAkD,aAAlD,EAAiE,IAAjE,EAAuEvB,IAAvE,CAA4E,IAA5E,EAAkFuH,SAAlF,EAA6FZ,OAA7F,EAAsGC,QAAtG;;AAEA,UAAK4R,KAAL,GAAa,KAAK/Q,QAAL,CAAc6Q,IAA3B;AACA,UAAKG,cAAL,GAAsB,KAAKhR,QAAL,CAAc8Q,SAApC;;AAEA,UAAKvQ,IAAL;AACA,UAAKC,MAAL;;AAEA,UAAK4O,KAAL,GAAa,KAAKpP,QAAL,CAAcoP,KAA3B;AACD;;AAED9Q,cAAUzB,UAAV,EAAsB0T,eAAtB;;AAEAtX,iBAAa4D,UAAb,EAAyB;AACvB6L,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;;AAE3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,KAAvB,CAAf;AACA,YAAK1N,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;;AAEA,YAAKsQ,WAAL,GAAmBja,SAAS6U,aAAT,CAAuB,KAAvB,CAAnB;AACA,YAAKoF,WAAL,CAAiBC,SAAjB,GAA6B,KAAKH,KAAlC;AACA,YAAKpQ,OAAL,CAAaC,WAAb,CAAyB,KAAKqQ,WAA9B;AACD;AATS,MADW;AAYvBxQ,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B,CAAE;AADrB,MAZO;AAevBY,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKV,OAAL,CAAaW,KAAb,CAAmByJ,KAAnB,GAA2B,KAAKnP,MAAL,CAAYI,IAAvC;AACA,YAAKwE,MAAL;AACD;AAJa,MAfO;AAqBvBK,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;AAC9B,WAAIsQ,WAAW,KAAK9Q,MAAL,GAAc,CAA7B;AACA,WAAI+Q,YAAY,KAAKhR,KAAL,IAAc,KAAK2Q,KAAL,CAAW1L,MAAX,GAAoB,CAAlC,CAAhB;AACA8L,kBAAWnQ,KAAKC,GAAL,CAASkQ,QAAT,EAAmBC,SAAnB,CAAX;AACA,WAAI,KAAKC,aAAT,EAAwB;AACtB,YAAIC,YAAY,KAAKlR,KAAL,IAAc,KAAKiR,aAAL,CAAmBhM,MAAnB,GAA4B,CAA1C,CAAhB;AACA8L,mBAAWnQ,KAAKC,GAAL,CAASkQ,QAAT,EAAmBG,SAAnB,CAAX;AACD;AACD,WAAIC,SAAS,YAAY,KAAKnR,KAAjB,GAAyB,KAAtC;AACAmR,iBAAU,aAAa,KAAKlR,MAAlB,GAA2B,KAArC;AACAkR,iBAAU,cAAc,CAAC,KAAKlR,MAAL,GAAc8Q,QAAf,IAA2B,CAAzC,GAA6C,SAAvD;AACAI,iBAAU,yBAAV;AACAA,iBAAU,qBAAV;AACAA,iBAAU,uBAAV;AACAA,iBAAU,mBAAV;AACAA,iBAAU,aAAV;AACAA,iBAAU,eAAeJ,QAAf,GAA0B,KAApC;AACA,YAAKF,WAAL,CAAiB3P,KAAjB,CAAuBkQ,OAAvB,GAAiCD,MAAjC;AACA,YAAK/Q,MAAL;AACD;AApBY,MArBQ;AA2CvBA,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAK4O,KAAV,EAAiB;AACf,aAAKzO,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,aAAKmV,WAAL,CAAiB3P,KAAjB,CAAuByJ,KAAvB,GAA+B,KAAKnP,MAAL,CAAYI,IAA3C;AACA,aAAKiV,WAAL,CAAiBC,SAAjB,GAA6B,KAAKH,KAAlC;AACD,QAJD,MAIO;AACL,aAAKpQ,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYC,MAAjD;AACA,aAAKoV,WAAL,CAAiB3P,KAAjB,CAAuByJ,KAAvB,GAA+B,KAAKnP,MAAL,CAAYE,IAA3C;AACA,YAAI,KAAKuV,aAAT,EAAwB;AACtB,cAAKJ,WAAL,CAAiBC,SAAjB,GAA6B,KAAKF,cAAlC;AACD,SAFD,MAEO;AACL,cAAKC,WAAL,CAAiBC,SAAjB,GAA6B,KAAKH,KAAlC;AACD;AACF;AACF;AAfK,MA3Ce;AA4DvBM,oBAAe;;AAEb;;;;;AAKAhV,WAAK,eAAY;AACf,cAAO,KAAK2U,cAAZ;AACD,OATY;AAUb1U,WAAK,aAAUuU,IAAV,EAAgB;AACnB,WAAIA,IAAJ,EAAU;AACR,aAAKxR,IAAL,GAAY,QAAZ;AACD,QAFD,MAEO;AACL,aAAKA,IAAL,GAAY,QAAZ;AACD;AACD,YAAK2R,cAAL,GAAsBH,IAAtB;AACA,YAAKrQ,MAAL;AACD;AAlBY,MA5DQ;AAgFvBqQ,WAAM;;AAEJ;;;;;AAKAxU,WAAK,eAAY;AACf,cAAO,KAAK0U,KAAZ;AACD,OATG;AAUJzU,WAAK,aAAUuU,IAAV,EAAgB;AACnB,YAAKE,KAAL,GAAaF,IAAb;AACA,YAAKhQ,aAAL;AACA,YAAKL,MAAL;AACD;AAdG;AAhFiB,KAAzB;;AAkGA,WAAO3D,UAAP;AACD,IA7HgB,CA6HdyT,cA7Hc,CAAjB;;AA+HAtY,UAAOD,OAAP,GAAiB8E,UAAjB;;AAED;AAAO,GAv5FG;AAw5FV;AACA,OAAO,UAAS7E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA;AACA,OAAI6E,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAIyE,SAASzE,oBAAoB,EAApB,CAAb;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAI2E,cAAe,UAAUmC,UAAV,EAAsB;AACvC,aAASnC,WAAT,GAAuB;AACrB/C,qBAAgB,IAAhB,EAAsB+C,WAAtB;;AAEA,SAAIoC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,EAAN,CADO;AAEbqS,uBAAiB,CAFJ;AAGbC,cAAQ,CAAC;AAHI,MAAf;;AAMA9T,UAAKlE,OAAO0E,cAAP,CAAsBtB,YAAYhD,SAAlC,CAAL,EAAmD,aAAnD,EAAkE,IAAlE,EAAwEvB,IAAxE,CAA6E,IAA7E,EAAmFuH,SAAnF,EAA8FZ,OAA9F,EAAuGC,QAAvG;;AAEA,UAAKwS,OAAL,GAAe,EAAf;AACA,UAAKC,gBAAL,GAAwB,KAAK5R,QAAL,CAAcyR,eAAtC;AACA,UAAKC,MAAL,GAAc,KAAK1R,QAAL,CAAc0R,MAA5B;;AAEA,UAAKnR,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAUxB,WAAV,EAAuBmC,UAAvB;;AAEAhG,iBAAa6D,WAAb,EAA0B;AACxB4L,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,KAAvB,CAAf;AACA,YAAK1N,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AAJS,MADY;AAOxBF,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAK,IAAI4C,IAAI,CAAb,EAAgBA,IAAI,KAAKuO,gBAAzB,EAA2CvO,GAA3C,EAAgD;AAC9C,YAAIwO,YAAY7a,SAAS6U,aAAT,CAAuB,MAAvB,CAAhB;;AAEA,YAAIzU,SAAS,IAAIwF,MAAJ,CAAWiV,SAAX,EAAsB;AACjCxS,eAAM,QAD2B;AAEjCyI,oBAAW,IAFsB,EAAtB,EAEQ,KAAKhG,MAAL,CAAYpG,IAAZ,CAAiB,IAAjB,EAAuB2H,CAAvB,CAFR,CAAb;;AAIA,aAAKsO,OAAL,CAAapO,IAAb,CAAkBnM,MAAlB;AACA,aAAKuJ,OAAL,CAAaC,WAAb,CAAyBiR,SAAzB;AACD;AACF;AAba,MAPQ;AAsBxBhR,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAIiR,cAAc,KAAK1R,KAAL,GAAa,KAAKwR,gBAApC;AACA,WAAIG,eAAe,KAAK1R,MAAxB;;AAEA,YAAK,IAAIgD,IAAI,CAAb,EAAgBA,IAAI,KAAKuO,gBAAzB,EAA2CvO,GAA3C,EAAgD;AAC9C,aAAKsO,OAAL,CAAatO,CAAb,EAAgBvC,MAAhB,CAAuBgR,WAAvB,EAAoCC,YAApC;AACD;AACF;AATY,MAtBS;AAiCxB1Q,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAK,IAAIgC,IAAI,CAAb,EAAgBA,IAAI,KAAKuO,gBAAzB,EAA2CvO,GAA3C,EAAgD;AAC9C,aAAKsO,OAAL,CAAatO,CAAb,EAAgBzH,MAAhB,GAAyB,KAAKA,MAA9B;AACA,aAAK+V,OAAL,CAAatO,CAAb,EAAgB7C,MAAhB;AACD;AACF;AANa,MAjCQ;AAyCxBsB,aAAQ;AACNtI,aAAO,SAASsI,MAAT,CAAgBkQ,KAAhB,EAAuB;AAC5B,WAAI,KAAKL,OAAL,CAAaK,KAAb,EAAoB5C,KAAxB,EAA+B;AAC7B,aAAK6C,MAAL,CAAYD,KAAZ;AACD,QAFD,MAEO;AACL,aAAKE,QAAL;AACD;AACD;AACD;AARK,MAzCgB;AAmDxB1R,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,YAAK,IAAI6C,IAAI,CAAb,EAAgBA,IAAI,KAAKsO,OAAL,CAAatM,MAAjC,EAAyChC,GAAzC,EAA8C;AAC5C,YAAIA,MAAM,KAAKqO,MAAf,EAAuB;AACrB,cAAKC,OAAL,CAAatO,CAAb,EAAgBmM,MAAhB,CAAuB,KAAvB;AACD,SAFD,MAEO;AACL,cAAKmC,OAAL,CAAatO,CAAb,EAAgBqM,OAAhB,CAAwB,KAAxB;AACD;AACF;AACF;AATK,MAnDgB;AA8DxBuC,aAAQ;;AAEN;;;;;AAKAzY,aAAO,SAASyY,MAAT,CAAgBD,KAAhB,EAAuB;AAC5B,WAAIA,SAAS,CAAT,IAAcA,QAAQ,KAAKL,OAAL,CAAatM,MAAvC,EAA+C;AAC7C,aAAKqM,MAAL,GAAcM,KAAd;AACA,aAAKhQ,IAAL,CAAU,QAAV,EAAoB,KAAK0P,MAAzB;AACA,aAAKlR,MAAL;AACD;AACF;AAbK,MA9DgB;AA6ExB0R,eAAU;;AAER;;;;AAIA1Y,aAAO,SAAS0Y,QAAT,GAAoB;AACzB,YAAKR,MAAL,GAAc,CAAC,CAAf;AACA,YAAK1P,IAAL,CAAU,QAAV,EAAoB,KAAK0P,MAAzB;AACA,YAAKlR,MAAL;AACD;AAVO,MA7Ec;AAyFxBiR,sBAAiB;AACfpV,WAAK,eAAY;AACf,cAAO,KAAKuV,gBAAZ;AACD,OAHc;;AAKf;;;;AAIAtV,WAAK,aAAUqV,OAAV,EAAmB;AACtB,YAAKC,gBAAL,GAAwBD,OAAxB;AACA,YAAK,IAAItO,IAAI,CAAb,EAAgBA,IAAI,KAAKsO,OAAL,CAAatM,MAAjC,EAAyChC,GAAzC,EAA8C;AAC5C,aAAKsO,OAAL,CAAatO,CAAb,EAAgBqH,OAAhB;AACD;AACD,YAAKiH,OAAL,GAAe,EAAf;AACA;AACA;AACA;AACA,YAAKpH,KAAL;AACA,YAAK9J,cAAL;AACD;AApBc;AAzFO,KAA1B;;AAiHA,WAAO3D,WAAP;AACD,IA1IiB,CA0IfgC,SA1Ie,CAAlB;;AA4IA9G,UAAOD,OAAP,GAAiB+E,WAAjB;;AAED;AAAO,GAplGG;AAqlGV;AACA,OAAO,UAAS9E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI6E,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,OAAI4E,SAAU,UAAUkC,UAAV,EAAsB;AAClC,aAASlC,MAAT,GAAkB;AAChBhD,qBAAgB,IAAhB,EAAsBgD,MAAtB;;AAEA,SAAImC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL,CADO;AAEb5F,aAAO,CAFM;AAGbyH,WAAK,CAHQ;AAIbiB,WAAK,KAJQ;AAKbC,YAAM;AALO,MAAf;;AAQAvE,UAAKlE,OAAO0E,cAAP,CAAsBrB,OAAOjD,SAA7B,CAAL,EAA8C,aAA9C,EAA6D,IAA7D,EAAmEvB,IAAnE,CAAwE,IAAxE,EAA8EuH,SAA9E,EAAyFZ,OAAzF,EAAkGC,QAAlG;;AAEA,UAAKyQ,MAAL,GAAc,IAAI7Q,IAAJ,CAAS,KAAKiB,QAAL,CAAciB,GAAvB,EAA4B,KAAKjB,QAAL,CAAckC,GAA1C,EAA+C,KAAKlC,QAAL,CAAcmC,IAA7D,EAAmE,KAAKnC,QAAL,CAAcxG,KAAjF,CAAd;;AAEA;;;;;AAKA,UAAK2Y,aAAL,GAAqB,CAArB;AACA,UAAKC,MAAL,GAAc,CAAd;;AAEA,UAAKlQ,GAAL,GAAW,KAAK0N,MAAL,CAAY1N,GAAvB;;AAEA,UAAKjB,GAAL,GAAW,KAAK2O,MAAL,CAAY3O,GAAvB;;AAEA,UAAKkB,IAAL,GAAY,KAAKyN,MAAL,CAAYzN,IAAxB;;AAEA,UAAK5B,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAUvB,MAAV,EAAkBkC,UAAlB;;AAEAhG,iBAAa8D,MAAb,EAAqB;AACnB2L,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,OAAvB,CAAf;AACA,YAAKlL,OAAL,CAAayB,IAAb,GAAoB,MAApB;;AAEA,YAAKzB,OAAL,CAAa1J,gBAAb,CAA8B,MAA9B,EAAuC,YAAY;AACjD,aAAK0J,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,aAAK6E,OAAL,CAAaW,KAAb,CAAmByJ,KAAnB,GAA2B,KAAKnP,MAAL,CAAYI,IAAvC;AACA,YAAI,KAAK2E,OAAL,CAAanH,KAAb,KAAuB,KAAKA,KAAhC,EAAuC;AACrC,cAAKA,KAAL,GAAamL,WAAW,KAAKhE,OAAL,CAAanH,KAAxB,CAAb;AACA,cAAKgH,MAAL;AACD;AACF,QAPqC,CAOnC9E,IAPmC,CAO9B,IAP8B,CAAtC;;AASA,YAAKiF,OAAL,CAAa1J,gBAAb,CAA8B,SAA9B,EAA0C,UAAUyS,CAAV,EAAa;AACrD,YAAIA,EAAE2I,KAAF,GAAU,EAAV,IAAgB3I,EAAE2I,KAAF,GAAU,EAA9B,EAAkC;AAChC,aAAI3I,EAAE2I,KAAF,KAAY,GAAZ,IAAmB3I,EAAE2I,KAAF,KAAY,GAA/B,IAAsC3I,EAAE2I,KAAF,KAAY,CAAtD,EAAyD;AACvD3I,YAAEM,cAAF;AACD;AACF;AACD,YAAIN,EAAE2I,KAAF,KAAY,EAAhB,EAAoB;AAClB,cAAK1R,OAAL,CAAa2R,IAAb;AACA,cAAK9Y,KAAL,GAAa,KAAKmH,OAAL,CAAanH,KAA1B;AACA,cAAKwI,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACA,cAAKgH,MAAL;AACD;AACF,QAZwC,CAYtC9E,IAZsC,CAYjC,IAZiC,CAAzC;;AAcA,YAAKyC,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AA7BS,MADO;AAgCnBE,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAKE,aAAL,GAAqBC,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,CAArB;;AAEA,WAAIkR,SAAS,YAAY,KAAKnR,KAAjB,GAAyB,KAAtC;AACAmR,iBAAU,aAAa,KAAKlR,MAAlB,GAA2B,KAArC;AACAkR,iBAAU,4BAAV;AACAA,iBAAU,cAAV;AACAA,iBAAU,qBAAV;AACAA,iBAAU,mBAAV;AACAA,iBAAU,eAAe,KAAKxQ,aAAL,GAAqB,CAApC,GAAwC,KAAlD;AACA;AACAwQ,iBAAU,eAAV;AACAA,iBAAU,gBAAV;AACAA,iBAAU,cAAc,KAAKxQ,aAAL,GAAqB,CAAnC,GAAuC,KAAvC,GAA+C,KAAKA,aAAL,GAAqB,CAApE,GAAwE,KAAlF;AACAwQ,iBAAU,yBAAV;AACAA,iBAAU,mBAAV;AACAA,iBAAU,sBAAV;AACAA,iBAAU,yBAAV;AACA,YAAK5Q,OAAL,CAAaW,KAAb,CAAmBkQ,OAAnB,IAA8BD,MAA9B;;AAEA;AACA;;AAEA,YAAK5Q,OAAL,CAAanH,KAAb,GAAqB,KAAKA,KAA1B;AACD;AA1BY,MAhCI;AA4DnB6H,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKV,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,YAAK6E,OAAL,CAAaW,KAAb,CAAmByJ,KAAnB,GAA2B,KAAKnP,MAAL,CAAYI,IAAvC;AACD;AAJa,MA5DG;AAkEnBwE,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;;AAEvB,YAAKG,OAAL,CAAanH,KAAb,GAAqBW,KAAKsK,KAAL,CAAW,KAAKjL,KAAhB,EAAuB,KAAK2Y,aAA5B,CAArB;AACD;AAJK,MAlEW;AAwEnBzQ,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAK6Q,QAAL,GAAgB,KAAhB;AACA,YAAK5R,OAAL,CAAa6R,QAAb,GAAwB,IAAxB;AACA,YAAKJ,MAAL,GAAc,KAAK5Y,KAAnB;AACA,YAAKiZ,OAAL,GAAe,EAAE5S,GAAG,KAAK+B,KAAL,CAAW/B,CAAhB,EAAf;AACA,YAAK6S,YAAL,GAAoBvY,KAAK0K,MAAL,CAAY,KAAKjD,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAAhC,CAApB;AACA1I,eAAQC,GAAR,CAAY,KAAK+a,YAAjB;AACD;AARI,MAxEY;AAkFnB7Q,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,YAAK0Q,QAAL,GAAgB,IAAhB;AACA,WAAI,KAAK/Q,OAAT,EAAkB;;AAEhB,YAAImR,WAAW,KAAKP,MAAL,GAAc,CAAC,KAAKxQ,KAAL,CAAW/B,CAAX,GAAe,KAAK4S,OAAL,CAAa5S,CAA7B,KAAmC1F,KAAKqJ,IAAL,CAAU,KAAKtB,GAAL,GAAW,KAAKjB,GAA1B,EAA+B,CAA/B,EAAkC,IAAlC,IAA0C,GAA7E,IAAoFD,KAAKgE,GAAL,CAAS,KAAK0N,YAAd,EAA4B,CAA5B,CAAjH;AACA,aAAKlZ,KAAL,GAAamZ,QAAb;;AAEA,aAAKnS,MAAL;AACA,YAAI,KAAKoP,MAAL,CAAYzB,OAAhB,EAAyB;AACvB,cAAKnM,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;AACF;AACF;AAbG,MAlFa;AAiGnByI,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,WAAI,CAAC,KAAKsQ,QAAV,EAAoB;AAClB,aAAK5R,OAAL,CAAa6R,QAAb,GAAwB,KAAxB;AACA,aAAK7R,OAAL,CAAaiS,KAAb;AACA,aAAKjS,OAAL,CAAakS,iBAAb,CAA+B,CAA/B,EAAkC,KAAKlS,OAAL,CAAanH,KAAb,CAAmB6L,MAArD;AACA,aAAK1E,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYC,MAAjD;AACA,aAAK8E,OAAL,CAAaW,KAAb,CAAmByJ,KAAnB,GAA2B,KAAKnP,MAAL,CAAYG,KAAvC;AACD,QAND,MAMO;AACL/E,iBAAS2Q,IAAT,CAAciL,KAAd;AACD;AACF;AAXM,MAjGU;AA8GnBE,WAAM;;AAEJ;;;;;;AAMAtZ,aAAO,SAASsZ,IAAT,CAAcC,WAAd,EAA2B;AAChC,WAAIlK,QAAQ,IAAZ;;AAEA,YAAK5H,GAAL,GAAW8R,YAAY9R,GAAvB;AACA,YAAKiB,GAAL,GAAW6Q,YAAY7Q,GAAvB;AACA,YAAKC,IAAL,GAAY4Q,YAAY5Q,IAAxB;AACA4Q,mBAAY1b,EAAZ,CAAe,QAAf,EAAyB,UAAUC,CAAV,EAAa;AACpCuR,cAAMmK,aAAN,CAAoB1b,CAApB;AACD,QAFD;AAGA,YAAKD,EAAL,CAAQ,QAAR,EAAkB,UAAUC,CAAV,EAAa;AAC7Byb,oBAAYvZ,KAAZ,GAAoBlC,CAApB;AACD,QAFD;AAGA,YAAKkC,KAAL,GAAauZ,YAAYvZ,KAAzB;AACA;;;;;;;;AAQD;AA7BG,MA9Ga;AA6InBwZ,oBAAe;AACbxZ,aAAO,SAASwZ,aAAT,CAAuB1b,CAAvB,EAA0B;AAC/B,YAAKsY,MAAL,CAAY9N,MAAZ,CAAmBxK,CAAnB;AACA,YAAKkJ,MAAL;AACD;AAJY,MA7II;AAmJnBhH,YAAO;;AAEL;;;;;;AAMA6C,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYpW,KAAnB;AACD,OAVI;AAWL8C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY9N,MAAZ,CAAmBxK,CAAnB;AACA,YAAK0K,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACA,YAAKgH,MAAL;AACD;AAfI,MAnJY;AAoKnBS,UAAK;;AAEH;;;;;;AAMA5E,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY3O,GAAnB;AACD,OAVE;AAWH3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY3O,GAAZ,GAAkB3J,CAAlB;AACD;AAbE,MApKc;AAmLnB4K,UAAK;;AAEH;;;;;;AAMA7F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY1N,GAAnB;AACD,OAVE;AAWH5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY1N,GAAZ,GAAkB5K,CAAlB;AACD;AAbE,MAnLc;AAkMnB6K,WAAM;;AAEJ;;;;;;AAMA9F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYzN,IAAnB;AACD,OAVG;AAWJ7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAYzN,IAAZ,GAAmB7K,CAAnB;AACD;AAbG;AAlMa,KAArB;;AAmNA,WAAOyF,MAAP;AACD,IA1PY,CA0PV+B,SA1PU,CAAb;;AA4PA9G,UAAOD,OAAP,GAAiBgF,MAAjB;;AAED;AAAO,GAp4GG;AAq4GV;AACA,OAAO,UAAS/E,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI6E,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAI6E,SAAU,UAAUiC,UAAV,EAAsB;AAClC,aAASjC,MAAT,GAAkB;AAChBjD,qBAAgB,IAAhB,EAAsBiD,MAAtB;;AAEA,SAAIkC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,EAAN,CADO;AAEbF,eAAS,CAAC,SAAD,EAAY,SAAZ;AAFI,MAAf;;AAKAtB,UAAKlE,OAAO0E,cAAP,CAAsBpB,OAAOlD,SAA7B,CAAL,EAA8C,aAA9C,EAA6D,IAA7D,EAAmEvB,IAAnE,CAAwE,IAAxE,EAA8EuH,SAA9E,EAAyFZ,OAAzF,EAAkGC,QAAlG;;AAEA,UAAK8T,cAAL,GAAsB,CAAC,CAAvB;AACA,UAAKrD,MAAL,GAAc,KAAd;;AAEA,UAAKsD,QAAL,GAAgB,KAAKlT,QAAL,CAAcd,OAA9B;;AAEA,UAAKqB,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAUtB,MAAV,EAAkBiC,UAAlB;;AAEAhG,iBAAa+D,MAAb,EAAqB;AACnB0L,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,QAAvB,CAAf;AACA,YAAKlL,OAAL,CAAaW,KAAb,CAAmB6R,QAAnB,GAA8B,KAAK9S,MAAL,GAAc,CAAd,GAAkB,IAAhD;AACA,YAAKM,OAAL,CAAaW,KAAb,CAAmB8R,OAAnB,GAA6B,MAA7B;AACA,YAAKzS,OAAL,CAAaW,KAAb,CAAmB+R,SAAnB,GAA+B,MAA/B;AACA,YAAK1S,OAAL,CAAaW,KAAb,CAAmBlB,KAAnB,GAA2B,KAAKA,KAAL,GAAa,IAAxC;AACA,YAAKO,OAAL,CAAaW,KAAb,CAAmBjB,MAAnB,GAA4B,KAAKA,MAAL,GAAc,IAA1C;;AAEA,YAAKiT,WAAL,GAAmB,KAAK9S,MAAL,CAAY9E,IAAZ,CAAiB,IAAjB,CAAnB;;AAEA,YAAKiF,OAAL,CAAa1J,gBAAb,CAA8B,QAA9B,EAAwC,KAAKqc,WAA7C;;AAEA,YAAKnV,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AAdS,MADO;AAiBnBgI,sBAAiB;AACfnP,aAAO,SAASmP,eAAT,GAA2B,CAAE;AADrB,MAjBE;AAoBnBlI,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAK8S,aAAL;AACD;AAJa,MApBG;AA0BnBlS,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKV,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,YAAK6E,OAAL,CAAaW,KAAb,CAAmByJ,KAAnB,GAA2B,KAAKnP,MAAL,CAAYI,IAAvC;AACA,YAAK2E,OAAL,CAAaW,KAAb,CAAmBkS,MAAnB,GAA4B,eAAe,KAAK5X,MAAL,CAAYK,WAAvD;AACD;AALa,MA1BG;AAiCnBuE,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;;AAEvB,YAAKoP,MAAL,GAAc,KAAKjP,OAAL,CAAazB,OAAb,CAAqB,KAAKyB,OAAL,CAAa8S,aAAlC,EAAiD5C,IAA/D;AACA,YAAKoC,cAAL,GAAsB,KAAKtS,OAAL,CAAa8S,aAAnC;AACA,YAAKzR,IAAL,CAAU,QAAV,EAAoB;AAClBxI,eAAO,KAAKoW,MADM;AAElBoC,eAAO,KAAKiB;AAFM,QAApB;AAID;AATK,MAjCW;AA4CnBvR,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB,CAAE;AADrB,MA5CY;AA+CnBG,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB,CAAE;AADrB,MA/Ca;AAkDnBI,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB,CAAE;AADrB,MAlDU;AAqDnBsR,oBAAe;;AAEb;;;;;AAKA/Z,aAAO,SAAS+Z,aAAT,CAAuBrU,OAAvB,EAAgC;AACrC,WAAIA,OAAJ,EAAa;AACX,aAAKgU,QAAL,GAAgBhU,OAAhB;AACD;;AAED,YAAK,IAAImE,IAAI,CAAb,EAAgBA,IAAI,KAAK1C,OAAL,CAAazB,OAAb,CAAqBmG,MAAzC,EAAiDhC,GAAjD,EAAsD;AACpD,aAAK1C,OAAL,CAAa+S,MAAb,CAAoBrQ,CAApB;AACD;;AAED,YAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAI,KAAK6P,QAAL,CAAc7N,MAAlC,EAA0ChC,GAA1C,EAA+C;AAC7C,aAAK1C,OAAL,CAAazB,OAAb,CAAqB9C,GAArB,CAAyB,IAAIuX,MAAJ,CAAW,KAAKT,QAAL,CAAc7P,CAAd,CAAX,EAA6BA,CAA7B,CAAzB;AACD;AACF;AAnBY,MArDI;AA0EnB7J,YAAO;;AAEL;;;;;;AAMA6C,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAZ;AACD,OAVI;AAWLtT,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,GAActY,CAAd;AACA,YAAK,IAAI+L,IAAI,CAAb,EAAgBA,IAAI,KAAK1C,OAAL,CAAazB,OAAb,CAAqBmG,MAAzC,EAAiDhC,GAAjD,EAAsD;AACpD,YAAI/L,MAAM,KAAKqJ,OAAL,CAAazB,OAAb,CAAqBmE,CAArB,EAAwBwN,IAAlC,EAAwC;AACtC,cAAK4C,aAAL,GAAqBpQ,CAArB;AACA;AACD;AACF;AACF;AAnBI,MA1EY;AA+FnBoQ,oBAAe;;AAEb;;;;;;AAMApX,WAAK,eAAY;AACf,cAAO,KAAK4W,cAAZ;AACD,OAVY;AAWb3W,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK2b,cAAL,GAAsB3b,CAAtB;AACA,YAAKqJ,OAAL,CAAa8S,aAAb,GAA6Bnc,CAA7B;AACA,YAAKkJ,MAAL;AACD;AAfY,MA/FI;AAgHnBqK,oBAAe;AACbrR,aAAO,SAASqR,aAAT,GAAyB;AAC9B,YAAKlK,OAAL,CAAawJ,mBAAb,CAAiC,QAAjC,EAA2C,KAAKmJ,WAAhD;AACD;AAHY;AAhHI,KAArB;;AAuHA,WAAOtW,MAAP;AACD,IAhJY,CAgJV8B,SAhJU,CAAb;;AAkJA9G,UAAOD,OAAP,GAAiBiF,MAAjB;;AAED;AAAO,GArkHG;AAskHV;AACA,OAAO,UAAShF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;;AAEA,OAAI6G,cAAcnG,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAlB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAI8E,OAAQ,UAAUgC,UAAV,EAAsB;AAChC,aAAShC,IAAT,GAAgB;AACdlD,qBAAgB,IAAhB,EAAsBkD,IAAtB;;AAEA,SAAIiC,UAAU,CAAC,KAAD,EAAQ,KAAR,EAAe,OAAf,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL,CADO;AAEbwU,mBAAa,QAFA,EAEU;AACvBvU,YAAM,UAHO,EAGK;AAClB4B,WAAK,CAJQ;AAKbiB,WAAK,CALQ;AAMbC,YAAM,CANO;AAOb3I,aAAO;AAPM,MAAf;;AAUAoE,UAAKlE,OAAO0E,cAAP,CAAsBnB,KAAKnD,SAA3B,CAAL,EAA4C,aAA5C,EAA2D,IAA3D,EAAiEvB,IAAjE,CAAsE,IAAtE,EAA4EuH,SAA5E,EAAuFZ,OAAvF,EAAgGC,QAAhG;;AAEA,UAAKyU,WAAL,GAAmB,KAAK5T,QAAL,CAAc4T,WAAjC;;AAEA,UAAKhE,MAAL,GAAc,IAAI7Q,IAAJ,CAAS,KAAKiB,QAAL,CAAciB,GAAvB,EAA4B,KAAKjB,QAAL,CAAckC,GAA1C,EAA+C,KAAKlC,QAAL,CAAcmC,IAA7D,EAAmE,KAAKnC,QAAL,CAAcxG,KAAjF,CAAd;;AAEA,UAAK0G,QAAL,GAAgB,IAAIlB,YAAYmB,MAAhB,CAAuB,KAAKH,QAAL,CAAcX,IAArC,EAA2C,KAAKuU,WAAhD,EAA6D,CAAC,CAAD,EAAI,KAAKxT,KAAT,CAA7D,EAA8E,CAAC,KAAKC,MAAN,EAAc,CAAd,CAA9E,CAAhB;;AAEA,UAAKE,IAAL;;AAEA,UAAK/G,KAAL,GAAa,KAAKoW,MAAL,CAAYpW,KAAzB;;AAEA,UAAK0G,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;;AAEA,UAAKuT,aAAL,GAAqB,KAArB;;AAEA,UAAK7R,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;;AAED8E,cAAUrB,IAAV,EAAgBgC,UAAhB;;AAEAhG,iBAAagE,IAAb,EAAmB;AACjBwD,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKqT,UAAL,GAAkBjV,IAAIJ,MAAJ,CAAW,QAAX,CAAlB;AACA,YAAKsV,KAAL,GAAalV,IAAIJ,MAAJ,CAAW,QAAX,CAAb;AACA,YAAKuV,MAAL,GAAcnV,IAAIJ,MAAJ,CAAW,MAAX,CAAd;AACA,YAAKwV,OAAL,GAAepV,IAAIJ,MAAJ,CAAW,MAAX,CAAf;AACA,YAAKyV,UAAL,GAAkBrV,IAAIJ,MAAJ,CAAW,MAAX,CAAlB;AACA,YAAK0V,WAAL,GAAmBtV,IAAIJ,MAAJ,CAAW,MAAX,CAAnB;AACA,YAAK2V,UAAL,GAAkBvV,IAAIJ,MAAJ,CAAW,MAAX,CAAlB;;AAEA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKkT,UAA9B;AACA,YAAKnT,OAAL,CAAaC,WAAb,CAAyB,KAAKoT,MAA9B;AACA,YAAKrT,OAAL,CAAaC,WAAb,CAAyB,KAAKqT,OAA9B;AACA,YAAKtT,OAAL,CAAaC,WAAb,CAAyB,KAAKsT,UAA9B;AACA,YAAKvT,OAAL,CAAaC,WAAb,CAAyB,KAAKuT,WAA9B;AACA,YAAKxT,OAAL,CAAaC,WAAb,CAAyB,KAAKwT,UAA9B;AACA,YAAKzT,OAAL,CAAaC,WAAb,CAAyB,KAAKmT,KAA9B;AACD;AAlBa,MADC;AAqBjBlT,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAKX,QAAL,CAAcY,MAAd,CAAqB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAArB,EAAsC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAtC;;AAEA,WAAIyO,SAAS;AACXrP,WAAG,KAAKW,KAAL,GAAa,CADL;AAEXP,WAAG,KAAKQ,MAAL,GAAc;AAFN,QAAb;;AAKA,WAAIgU,WAAWrT,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,CAAf;;AAEA,YAAKyT,UAAL,CAAgB1S,YAAhB,CAA6B,IAA7B,EAAmC0N,OAAOrP,CAA1C;AACA,YAAKqU,UAAL,CAAgB1S,YAAhB,CAA6B,IAA7B,EAAmC0N,OAAOjP,CAA1C;AACA,YAAKiU,UAAL,CAAgB1S,YAAhB,CAA6B,GAA7B,EAAkCiT,WAAW,CAAX,GAAeA,WAAW,EAA5D;;AAEA,YAAKN,KAAL,CAAW3S,YAAX,CAAwB,IAAxB,EAA8B0N,OAAOrP,CAArC;AACA,YAAKsU,KAAL,CAAW3S,YAAX,CAAwB,IAAxB,EAA8B0N,OAAOjP,CAArC;AACA,YAAKkU,KAAL,CAAW3S,YAAX,CAAwB,GAAxB,EAA6BiT,WAAW,EAAxC;;AAEA,WAAI7a,QAAQ,KAAKA,KAAjB;;AAEA,WAAI8a,eAAe;AACjB9c,eAAOwJ,KAAKqD,EAAL,GAAU,GADA;AAEjB1B,aAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAWlK,KAAX,EAAkB,CAAlB,EAAqB,GAArB,EAA0BwH,KAAKqD,EAAL,GAAU,GAApC,EAAyCrD,KAAKqD,EAAL,GAAU,GAAnD,CAAV,EAAmErD,KAAKqD,EAAL,GAAU,GAA7E,EAAkFrD,KAAKqD,EAAL,GAAU,GAA5F;AAFY,QAAnB;AAIA,WAAIkQ,gBAAgB;AAClB/c,eAAOwJ,KAAKqD,EAAL,GAAU,GADC;AAElB1B,aAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAWlK,KAAX,EAAkB,GAAlB,EAAuB,CAAvB,EAA0BwH,KAAKqD,EAAL,GAAU,GAApC,EAAyCrD,KAAKqD,EAAL,GAAU,GAAnD,CAAV,EAAmErD,KAAKqD,EAAL,GAAU,GAA7E,EAAkFrD,KAAKqD,EAAL,GAAU,GAA5F;AAFa,QAApB;;AAKA,WAAImQ,aAAa3V,IAAIyD,GAAJ,CAAQwM,OAAOrP,CAAf,EAAkBqP,OAAOjP,CAAzB,EAA4BwU,WAAW,CAAX,GAAeA,WAAW,EAAtD,EAA0DC,aAAa9c,KAAvE,EAA8E8c,aAAa3R,GAA3F,CAAjB;AACA,WAAI8R,cAAc5V,IAAIyD,GAAJ,CAAQwM,OAAOrP,CAAf,EAAkBqP,OAAOjP,CAAzB,EAA4BwU,WAAW,CAAX,GAAeA,WAAW,EAAtD,EAA0DE,cAAc/c,KAAxE,EAA+E+c,cAAc5R,GAA7F,CAAlB;;AAEA,YAAKqR,MAAL,CAAY5S,YAAZ,CAAyB,GAAzB,EAA8BoT,UAA9B;AACA,YAAKR,MAAL,CAAY5S,YAAZ,CAAyB,cAAzB,EAAyCiT,WAAW,EAApD;AACA,YAAKL,MAAL,CAAY5S,YAAZ,CAAyB,MAAzB,EAAiC,MAAjC;;AAEA,YAAK6S,OAAL,CAAa7S,YAAb,CAA0B,GAA1B,EAA+BqT,WAA/B;AACA,YAAKR,OAAL,CAAa7S,YAAb,CAA0B,cAA1B,EAA0CiT,WAAW,EAArD;AACA,YAAKJ,OAAL,CAAa7S,YAAb,CAA0B,MAA1B,EAAkC,MAAlC;;AAEAoT,qBAAc,QAAQ1F,OAAOrP,CAAf,GAAmB,GAAnB,GAAyBqP,OAAOjP,CAA9C;;AAEA,YAAKqU,UAAL,CAAgB9S,YAAhB,CAA6B,GAA7B,EAAkCoT,UAAlC;AACA,YAAKN,UAAL,CAAgB9S,YAAhB,CAA6B,cAA7B,EAA6C,KAA7C;;AAEAqT,sBAAe,QAAQ3F,OAAOrP,CAAf,GAAmB,GAAnB,GAAyBqP,OAAOjP,CAA/C;;AAEA,YAAKsU,WAAL,CAAiB/S,YAAjB,CAA8B,GAA9B,EAAmCqT,WAAnC;AACA,YAAKN,WAAL,CAAiB/S,YAAjB,CAA8B,cAA9B,EAA8C,KAA9C;;AAEA,WAAIsT,aAAaxW,SAAjB;AACA,WAAI1E,QAAQ,GAAZ,EAAiB;AACfkb,qBAAaJ,aAAa3R,GAA1B;AACD,QAFD,MAEO;AACL+R,qBAAaH,cAAc5R,GAA3B;AACD;;AAED,WAAIgS,aAAa7F,OAAOrP,CAAP,GAAWuB,KAAKuD,GAAL,CAASmQ,UAAT,KAAwBL,WAAW,CAAnC,CAA5B;AACA,WAAIO,aAAa9F,OAAOjP,CAAP,GAAWmB,KAAKwD,GAAL,CAASkQ,UAAT,KAAwBL,WAAW,CAAnC,IAAwC,CAAC,CAArE;;AAEA,YAAKD,UAAL,CAAgBhT,YAAhB,CAA6B,GAA7B,EAAkC,OAAO0N,OAAOrP,CAAd,GAAkB,GAAlB,GAAwBqP,OAAOjP,CAA/B,GAAmC,KAAnC,GAA2C8U,UAA3C,GAAwD,GAAxD,GAA8DC,UAAhG;AACA,YAAKR,UAAL,CAAgBhT,YAAhB,CAA6B,cAA7B,EAA6CiT,WAAW,EAAxD;AACD;AAhEY,MArBE;AAuFjBhT,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAKyS,UAAL,CAAgB1S,YAAhB,CAA6B,MAA7B,EAAqC,KAAKxF,MAAL,CAAYE,IAAjD;AACA,YAAKiY,KAAL,CAAW3S,YAAX,CAAwB,MAAxB,EAAgC,KAAKxF,MAAL,CAAYC,MAA5C;AACA,YAAKmY,MAAL,CAAY5S,YAAZ,CAAyB,QAAzB,EAAmC,KAAKxF,MAAL,CAAYC,MAA/C;AACA,YAAKoY,OAAL,CAAa7S,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYC,MAAhD;AACA,YAAKqY,UAAL,CAAgB9S,YAAhB,CAA6B,MAA7B,EAAqC,KAAKxF,MAAL,CAAYC,MAAjD;AACA,YAAKsY,WAAL,CAAiB/S,YAAjB,CAA8B,MAA9B,EAAsC,KAAKxF,MAAL,CAAYC,MAAlD;AACA,YAAKuY,UAAL,CAAgBhT,YAAhB,CAA6B,QAA7B,EAAuC,KAAKxF,MAAL,CAAYC,MAAnD;AACD;AATa,MAvFC;AAkGjB2E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAIhH,QAAQ,KAAKoW,MAAL,CAAYtP,UAAxB;;AAEA,WAAIwO,SAAS;AACXrP,WAAG,KAAKW,KAAL,GAAa,CADL;AAEXP,WAAG,KAAKQ,MAAL,GAAc;AAFN,QAAb;;AAKA,WAAIgU,WAAWrT,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,CAAf;;AAEA,WAAIiU,eAAe;AACjB9c,eAAOwJ,KAAKqD,EAAL,GAAU,GADA;AAEjB1B,aAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAWlK,KAAX,EAAkB,CAAlB,EAAqB,GAArB,EAA0BwH,KAAKqD,EAAL,GAAU,GAApC,EAAyCrD,KAAKqD,EAAL,GAAU,GAAnD,CAAV,EAAmErD,KAAKqD,EAAL,GAAU,GAA7E,EAAkFrD,KAAKqD,EAAL,GAAU,GAA5F;AAFY,QAAnB;AAIA,WAAIkQ,gBAAgB;AAClB/c,eAAOwJ,KAAKqD,EAAL,GAAU,GADC;AAElB1B,aAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAWlK,KAAX,EAAkB,GAAlB,EAAuB,CAAvB,EAA0BwH,KAAKqD,EAAL,GAAU,GAApC,EAAyCrD,KAAKqD,EAAL,GAAU,GAAnD,CAAV,EAAmErD,KAAKqD,EAAL,GAAU,GAA7E,EAAkFrD,KAAKqD,EAAL,GAAU,GAA5F;AAFa,QAApB;;AAKA,WAAImQ,aAAa3V,IAAIyD,GAAJ,CAAQwM,OAAOrP,CAAf,EAAkBqP,OAAOjP,CAAzB,EAA4BwU,WAAW,CAAX,GAAeA,WAAW,EAAtD,EAA0DC,aAAa9c,KAAvE,EAA8E8c,aAAa3R,GAA3F,CAAjB;AACA,WAAI8R,cAAc5V,IAAIyD,GAAJ,CAAQwM,OAAOrP,CAAf,EAAkBqP,OAAOjP,CAAzB,EAA4BwU,WAAW,CAAX,GAAeA,WAAW,EAAtD,EAA0DE,cAAc/c,KAAxE,EAA+E+c,cAAc5R,GAA7F,CAAlB;;AAEA,YAAKqR,MAAL,CAAY5S,YAAZ,CAAyB,GAAzB,EAA8BoT,UAA9B;AACA,YAAKP,OAAL,CAAa7S,YAAb,CAA0B,GAA1B,EAA+BqT,WAA/B;;AAEAD,qBAAc,QAAQ1F,OAAOrP,CAAf,GAAmB,GAAnB,GAAyBqP,OAAOjP,CAA9C;;AAEA,YAAKqU,UAAL,CAAgB9S,YAAhB,CAA6B,GAA7B,EAAkCoT,UAAlC;;AAEAC,sBAAe,QAAQ3F,OAAOrP,CAAf,GAAmB,GAAnB,GAAyBqP,OAAOjP,CAA/C;;AAEA,YAAKsU,WAAL,CAAiB/S,YAAjB,CAA8B,GAA9B,EAAmCqT,WAAnC;;AAEA,WAAIC,aAAaxW,SAAjB;AACA,WAAI1E,SAAS,GAAb,EAAkB;AAChBkb,qBAAaJ,aAAa3R,GAA1B;AACD,QAFD,MAEO;AACL+R,qBAAaH,cAAc5R,GAA3B;AACD;;AAED,WAAIgS,aAAa7F,OAAOrP,CAAP,GAAWuB,KAAKuD,GAAL,CAASmQ,UAAT,KAAwBL,WAAW,CAAnC,CAA5B;AACA,WAAIO,aAAa9F,OAAOjP,CAAP,GAAWmB,KAAKwD,GAAL,CAASkQ,UAAT,KAAwBL,WAAW,CAAnC,IAAwC,CAAC,CAArE;;AAEA,YAAKD,UAAL,CAAgBhT,YAAhB,CAA6B,GAA7B,EAAkC,OAAO0N,OAAOrP,CAAd,GAAkB,GAAlB,GAAwBqP,OAAOjP,CAA/B,GAAmC,KAAnC,GAA2C8U,UAA3C,GAAwD,GAAxD,GAA8DC,UAAhG;AACD;AA7CK,MAlGS;AAiJjBlT,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,WAAI,KAAKrC,IAAL,KAAc,UAAlB,EAA8B;AAC5B,aAAKwU,aAAL,GAAqB,KAArB;AACD;AACD,YAAK3T,QAAL,CAAcyB,MAAd,GAAuB,KAAKC,KAA5B;AACA,YAAK1B,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;AACA,YAAKuB,IAAL;AACD;AARI,MAjJU;AA2JjBA,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKL,OAAT,EAAkB;;AAEhB,aAAKtB,QAAL,CAAc4B,MAAd,CAAqB,KAAKF,KAA1B;;AAEA,YAAI0C,QAAQ,KAAKpE,QAAL,CAAc1G,KAAd,GAAsBwH,KAAKqD,EAA3B,GAAgC,CAA5C;;AAEA,YAAIC,QAAQ,CAAZ,EAAe;AACbA,kBAAStD,KAAKqD,EAAL,GAAU,CAAnB;AACD;;AAED,YAAI,KAAKhF,IAAL,KAAc,UAAlB,EAA8B;AAC5B,aAAI,KAAKwU,aAAL,KAAuB,KAAvB,IAAgC7S,KAAKkO,GAAL,CAAS,KAAK2E,aAAL,GAAqBvP,KAA9B,IAAuC,CAA3E,EAA8E;AAC5E,cAAI,KAAKuP,aAAL,GAAqB,CAAzB,EAA4B;AAC1BvP,mBAAQtD,KAAKqD,EAAL,GAAU,CAAlB;AACD,WAFD,MAEO;AACLC,mBAAQ,CAAR;AACD;AACF;AACF,SAlBe,CAkBd;;;;;;;;;AASF,aAAKuP,aAAL,GAAqBvP,KAArB;;AAEA,YAAIuQ,YAAYvQ,SAAStD,KAAKqD,EAAL,GAAU,CAAnB,CAAhB;;AAEA,aAAK7K,KAAL,GAAa,KAAKoW,MAAL,CAAY7N,YAAZ,CAAyB8S,SAAzB,CAAb;;AAEA,YAAI,KAAKxV,IAAL,KAAc,UAAlB,EAA8B;AAC5B,cAAKa,QAAL,CAAc1G,KAAd,GAAsBqb,SAAtB;AACD;;AAED,aAAK7S,IAAL,CAAU,QAAV,EAAoB,KAAK4N,MAAL,CAAYpW,KAAhC;;AAEA,aAAKgH,MAAL;AACD;AACF;AA3CG,MA3JW;AAwMjByB,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB,CAAE;AADrB,MAxMQ;AA2MjBzI,YAAO;;AAEL;;;;;;;;;;;;;;AAcA;;;;;;AAMA6C,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYpW,KAAnB;AACD,OAxBI;AAyBL8C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY9N,MAAZ,CAAmBxK,CAAnB;AACA,YAAK4I,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;AACA,YAAK0B,IAAL,CAAU,QAAV,EAAoB,KAAK4N,MAAL,CAAYpW,KAAhC;AACA,YAAKgH,MAAL;AACD;AA9BI,MA3MU;AA2OjBS,UAAK;;AAEH;;;;;;AAMA5E,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY3O,GAAnB;AACD,OAVE;AAWH3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY3O,GAAZ,GAAkB3J,CAAlB;AACD;AAbE,MA3OY;AA0PjB4K,UAAK;;AAEH;;;;;;AAMA7F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY1N,GAAnB;AACD,OAVE;AAWH5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY1N,GAAZ,GAAkB5K,CAAlB;AACD;AAbE,MA1PY;AAyQjB6K,WAAM;;AAEJ;;;;;;AAMA9F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYzN,IAAnB;AACD,OAVG;AAWJ7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAYzN,IAAZ,GAAmB7K,CAAnB;AACD;AAbG,MAzQW;AAwRjB+H,WAAM;;AAEJ;;;;;;AAMAhD,WAAK,eAAY;AACf,cAAO,KAAK6D,QAAL,CAAcb,IAArB;AACD,OAVG;AAWJ/C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK4I,QAAL,CAAcb,IAAd,GAAqB/H,CAArB;AACD;AAbG,MAxRW;AAuSjBgJ,iBAAY;;AAEV;;;;;;AAMAjE,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYtP,UAAnB;AACD,OAVS;AAWVhE,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY7N,YAAZ,CAAyBzK,CAAzB;AACA,YAAK0K,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;AAdS;AAvSK,KAAnB;;AAyTA,WAAOyD,IAAP;AACD,IA/VU,CA+VR6B,SA/VQ,CAAX;;AAiWA9G,UAAOD,OAAP,GAAiBkF,IAAjB;;AAED;AAAO,GAr+HG;AAs+HV;AACA,OAAO,UAASjF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAImY,iBAAiBnY,oBAAoB,EAApB,CAArB;AACA,OAAI6O,QAAQ7O,oBAAoB,CAApB,CAAZ;;AAEA,OAAI2c,WAAY,UAAUvE,eAAV,EAA2B;AACzC,aAASuE,QAAT,GAAoB;AAClB/a,qBAAgB,IAAhB,EAAsB+a,QAAtB;;AAEA,SAAI5V,UAAU,CAAC,OAAD,EAAU,MAAV,EAAkB,OAAlB,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL,CADO;AAEbjG,cAAQ,KAFK;AAGbkG,YAAM,QAHO;AAIb7F,aAAO;AAJM,MAAf;;AAOAoE,UAAKlE,OAAO0E,cAAP,CAAsB0W,SAAShb,SAA/B,CAAL,EAAgD,aAAhD,EAA+D,IAA/D,EAAqEvB,IAArE,CAA0E,IAA1E,EAAgFuH,SAAhF,EAA2FZ,OAA3F,EAAoGC,QAApG;;AAEA,UAAK1D,IAAL,GAAY,KAAKuE,QAAL,CAAcvE,IAA1B;AACA,UAAKsP,KAAL,GAAa,KAAK/K,QAAL,CAAc+K,KAA3B;;AAEA,UAAKnP,MAAL,GAAc;AACZmQ,SAAG,MADS;AAEZvF,SAAG,MAFS,EAAd;;AAIA,UAAKjG,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAUwW,QAAV,EAAoBvE,eAApB;;AAEAtX,iBAAa6b,QAAb,EAAuB;AACrBpM,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe9B,IAAIJ,MAAJ,CAAW,KAAX,CAAf;AACA,YAAKkC,OAAL,CAAaS,YAAb,CAA0B,OAA1B,EAAmC,KAAKhB,KAAxC;AACA,YAAKO,OAAL,CAAaS,YAAb,CAA0B,QAA1B,EAAoC,KAAKf,MAAzC;AACA,YAAKlC,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AANS,MADS;AASrBF,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;AAC/B,WAAIoI,QAAQ,IAAZ;;AAEA,YAAK2H,GAAL,GAAW3R,IAAIJ,MAAJ,CAAW,MAAX,CAAX;;AAEA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAK4P,GAA9B;;AAEA,YAAK1H,iBAAL,GAAyB,KAAK0H,GAA9B;;AAEA;;AAEA,WAAI,CAACxJ,MAAM+B,MAAX,EAAmB;;AAEjB,aAAKrH,KAAL,GAAa,YAAY;AACvB;AACAmH,eAAM1R,KAAN,CAAY4d,WAAZ,GAA0B,IAA1B;AACAlM,eAAM1R,KAAN,CAAYkY,UAAZ,GAAyB,CAACxG,MAAMuG,KAAhC;AACAvG,eAAM4H,IAAN,CAAW5H,MAAM1R,KAAN,CAAYkY,UAAvB;AACD,SALD;;AAOA,aAAKmB,GAAL,CAASvZ,gBAAT,CAA0B,WAA1B,EAAuC,YAAY;AACjD,aAAI4R,MAAM1R,KAAN,CAAY4d,WAAhB,EAA6B;AAC3B;AACAlM,gBAAM4H,IAAN,CAAW5H,MAAM1R,KAAN,CAAYkY,UAAvB;AACD;AACF,SALD;;AAOA,aAAKxN,IAAL,GAAY,YAAY;AACtB,aAAIgH,MAAM1R,KAAN,CAAY4d,WAAhB,EAA6B;AAC3B;AACAlM,gBAAM6H,IAAN;AACD;AACF,SALD;;AAOA,aAAKzO,OAAL,GAAe,YAAY;AACzB4G,eAAM1R,KAAN,CAAY4d,WAAZ,GAA0B,KAA1B;AACA;AACA;AACD,SAJD;AAKA,aAAKvE,GAAL,CAASvZ,gBAAT,CAA0B,SAA1B,EAAqC,YAAY;AAC/C,aAAI4R,MAAM1R,KAAN,CAAY4d,WAAhB,EAA6B;AAC3B;AACAlM,gBAAM8H,EAAN;AACD;AACF,SALD;AAMA,aAAKH,GAAL,CAASvZ,gBAAT,CAA0B,UAA1B,EAAsC,YAAY;AAChD,aAAI4R,MAAM1R,KAAN,CAAY4d,WAAhB,EAA6B;AAC3B;AACAlM,gBAAM8H,EAAN;AACD;AACF,SALD;AAMD;AACF;AArDa,MATK;AAgErB9P,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B;AACA,WAAI0B,SAAS,CAAb;;AAEA,YAAKiO,GAAL,CAASpP,YAAT,CAAsB,GAAtB,EAA2B,GAA3B;AACA,YAAKoP,GAAL,CAASpP,YAAT,CAAsB,GAAtB,EAA2B,GAA3B;AACA,WAAI,KAAKhB,KAAL,GAAa,CAAjB,EAAoB;AAClB,aAAKoQ,GAAL,CAASpP,YAAT,CAAsB,OAAtB,EAA+B,KAAKhB,KAAL,GAAa,CAA5C;AACD,QAFD,MAEO;AACL,aAAKoQ,GAAL,CAASpP,YAAT,CAAsB,OAAtB,EAA+B,KAAKhB,KAApC;AACD;AACD,WAAI,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACnB,aAAKmQ,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKf,MAArC;AACD,QAFD,MAEO;AACL,aAAKmQ,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKf,MAArC;AACD;AACD,YAAKmQ,GAAL,CAASpP,YAAT,CAAsB,IAAtB,EAA4BmB,MAA5B;AACA,YAAKiO,GAAL,CAASpP,YAAT,CAAsB,IAAtB,EAA4BmB,MAA5B;AACD;AApBY,MAhEM;AAsFrB/B,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAK4O,KAAV,EAAiB;AACf,aAAKoB,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAY,KAAKmP,KAAjB,CAA9B;AACD,QAFD,MAEO;AACL,aAAKyF,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYC,MAA1C;AACD;AACF;AAPK;AAtFa,KAAvB;;AAiGA,WAAOiZ,QAAP;AACD,IA9Hc,CA8HZxE,cA9HY,CAAf;;AAgIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAIpT,QAAS,UAAU+B,UAAV,EAAsB;AACjC,aAAS/B,KAAT,GAAiB;AACfnD,qBAAgB,IAAhB,EAAsBmD,KAAtB;;AAEA,SAAIgC,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN,CADO;AAEb4V,eAAS,EAFI;AAGbC,gBAAU,EAHG;AAIb5V,YAAM;AAJO,MAAf;;AAOAzB,UAAKlE,OAAO0E,cAAP,CAAsBlB,MAAMpD,SAA5B,CAAL,EAA6C,aAA7C,EAA4D,IAA5D,EAAkEvB,IAAlE,CAAuE,IAAvE,EAA6EuH,SAA7E,EAAwFZ,OAAxF,EAAiGC,QAAjG;;AAEA,UAAK+V,UAAL,GAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,CAAlB;;AAEA,UAAK7F,UAAL,GAAkB,KAAlB;;AAEA,UAAKhQ,IAAL,GAAY,KAAKW,QAAL,CAAcX,IAA1B;;AAEA,UAAK8V,KAAL,GAAa;AACXzP,WAAK,KAAK1F,QAAL,CAAcgV,OADR;AAEXrP,YAAM,KAAK3F,QAAL,CAAciV;AAFT,MAAb;;AAKA,UAAKE,KAAL,CAAW/V,IAAX,GAAkB,KAAK+V,KAAL,CAAWxP,IAAX,GAAkB,KAAKwP,KAAL,CAAWzP,GAA/C;;AAEA,UAAK0P,IAAL,GAAY,EAAZ;;AAEA,UAAKC,QAAL,GAAgB,KAAhB;;AAEA,UAAK9U,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAUpB,KAAV,EAAiB+B,UAAjB;;AAEAhG,iBAAaiE,KAAb,EAAoB;AAClBwL,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,KAAvB,CAAf;AACA,YAAKlL,OAAL,CAAaW,KAAb,CAAmBpB,QAAnB,GAA8B,UAA9B;AACA,YAAKS,OAAL,CAAaW,KAAb,CAAmBgU,YAAnB,GAAkC,KAAlC;AACA,YAAK3U,OAAL,CAAaW,KAAb,CAAmBiU,OAAnB,GAA6B,OAA7B;AACA,YAAK5U,OAAL,CAAaW,KAAb,CAAmBlB,KAAnB,GAA2B,MAA3B;AACA,YAAKO,OAAL,CAAaW,KAAb,CAAmBjB,MAAnB,GAA4B,MAA5B;AACA,YAAKlC,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AATS,MADM;AAYlBF,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAK2U,IAAL,GAAY,EAAZ;;AAEA,YAAK,IAAI/R,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,KAAL,CAAWxP,IAAX,GAAkB,KAAKwP,KAAL,CAAWzP,GAAjD,EAAsDrC,GAAtD,EAA2D;;AAEzD,YAAIwO,YAAY7a,SAAS6U,aAAT,CAAuB,MAAvB,CAAhB;AACA,YAAI2J,aAAa,CAACnS,IAAI,KAAK8R,KAAL,CAAWzP,GAAhB,IAAuB,KAAKwP,UAAL,CAAgB7P,MAAxD;;AAEA,YAAIhM,MAAM,IAAIyb,QAAJ,CAAajD,SAAb,EAAwB;AAChC/J,oBAAW,IADqB;AAEhCrM,eAAM4H,IAAI,KAAK8R,KAAL,CAAWzP,GAFW;AAGhCqF,gBAAO,KAAKmK,UAAL,CAAgBM,UAAhB,CAHyB;AAIhCnW,eAAM,KAAKA;AAJqB,SAAxB,EAKP,KAAKoW,SAAL,CAAe/Z,IAAf,CAAoB,IAApB,EAA0B2H,IAAI,KAAK8R,KAAL,CAAWzP,GAAzC,CALO,CAAV;;AAOArM,YAAIlC,KAAJ,GAAY,IAAZ;;AAEA,YAAI6P,MAAM+B,MAAV,EAAkB;AAChB1P,aAAImX,GAAJ,CAAQwB,KAAR,GAAgB3O,CAAhB;AACAhK,aAAImQ,QAAJ,GAAenQ,IAAIgQ,OAAJ,GAAchQ,IAAIkQ,UAAJ,GAAiB,YAAY,CAAE,CAA5D;AACAlQ,aAAIqI,KAAJ,GAAYrI,IAAIwI,IAAJ,GAAWxI,IAAI4I,OAAJ,GAAc,YAAY,CAAE,CAAnD;AACA5I,aAAI4P,QAAJ,GAAe5P,IAAI6P,YAAJ,GAAmB7P,IAAI8P,eAAJ,GAAsB,YAAY,CAAE,CAAtE;AACA9P,aAAI2N,KAAJ,GAAY3N,IAAIgR,SAAJ,GAAgBhR,IAAIiR,YAAJ,GAAmB,YAAY,CAAE,CAA7D;AACD;;AAED,aAAK8K,IAAL,CAAU7R,IAAV,CAAelK,GAAf;AACA,aAAKsH,OAAL,CAAaC,WAAb,CAAyBiR,SAAzB;AACD;AACD,WAAI7K,MAAM+B,MAAV,EAAkB;AAChB,aAAK2M,iBAAL;AACD;AACF;AAjCa,MAZE;AA+ClB7U,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI8U,OAAO,CAAX;;AAEA,WAAIC,eAAe,EAAnB;;AAEA,YAAK,IAAIvS,IAAI,CAAb,EAAgBA,IAAI,KAAK8R,KAAL,CAAWxP,IAAX,GAAkB,KAAKwP,KAAL,CAAWzP,GAAjD,EAAsDrC,GAAtD,EAA2D;;AAEzDuS,qBAAarS,IAAb,CAAkBoS,IAAlB;;AAEA,YAAIH,aAAa,CAACnS,IAAI,KAAK8R,KAAL,CAAWzP,GAAhB,IAAuB,KAAKwP,UAAL,CAAgB7P,MAAxD;AACA,YAAIwQ,iBAAiB,CAACxS,IAAI,CAAJ,GAAQ,KAAK8R,KAAL,CAAWzP,GAApB,IAA2B,KAAKwP,UAAL,CAAgB7P,MAAhE;AACA,YAAIhC,IAAI,CAAJ,GAAQ,KAAK8R,KAAL,CAAWzP,GAAnB,IAA0B,KAAKyP,KAAL,CAAWxP,IAAzC,EAA+C;AAC7CgQ,iBAAQ,CAAR;AACD,SAFD,MAEO,IAAI,KAAKT,UAAL,CAAgBM,UAAhB,MAAgC,GAAhC,IAAuC,KAAKN,UAAL,CAAgBW,cAAhB,MAAoC,GAA/E,EAAoF;AACzFF,iBAAQ,CAAR;AACD,SAFM,MAEA;AACLA,iBAAQ,GAAR;AACD;AACF;AACD,WAAIG,WAAWH,IAAf;;AAEA;AACA,WAAII,UAAU,CAAd;AACA,WAAIjE,cAAc,CAAC,KAAK1R,KAAL,GAAa2V,UAAU,CAAxB,IAA6BD,QAA/C;AACA,WAAI/D,eAAe,CAAC,KAAK1R,MAAL,GAAc0V,UAAU,CAAzB,IAA8B,CAAjD;;AAEA,YAAK,IAAI1S,IAAI,CAAb,EAAgBA,IAAI,KAAK+R,IAAL,CAAU/P,MAA9B,EAAsChC,GAAtC,EAA2C;;AAEzC,YAAIwO,YAAY,KAAKuD,IAAL,CAAU/R,CAAV,EAAalF,MAA7B;AACA0T,kBAAUvQ,KAAV,CAAgBpB,QAAhB,GAA2B,UAA3B;AACA2R,kBAAUvQ,KAAV,CAAgB+J,IAAhB,GAAuBuK,aAAavS,CAAb,IAAkByO,WAAlB,GAAgCiE,OAAhC,GAA0C,IAAjE;AACA,YAAI,KAAKX,IAAL,CAAU/R,CAAV,EAAa0H,KAAb,KAAuB,GAA3B,EAAgC;AAC9B8G,mBAAUvQ,KAAV,CAAgB6J,GAAhB,GAAsB4K,UAAU,IAAhC;AACA,cAAKX,IAAL,CAAU/R,CAAV,EAAavC,MAAb,CAAoBgR,WAApB,EAAiCC,eAAe,CAAhD;AACD,SAHD,MAGO;AACLF,mBAAUvQ,KAAV,CAAgB0U,MAAhB,GAAyB,CAAzB;AACAnE,mBAAUvQ,KAAV,CAAgB6J,GAAhB,GAAsB4K,UAAU,IAAhC;AACA,cAAKX,IAAL,CAAU/R,CAAV,EAAavC,MAAb,CAAoBgR,WAApB,EAAiCC,eAAe,GAAhD;AACD;AACF;AACF;AA1CY,MA/CG;AA2FlB1Q,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;;AAE/B;AACA;AACA,YAAKV,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYK,WAAjD;;AAEA,YAAK,IAAIoH,IAAI,CAAb,EAAgBA,IAAI,KAAK+R,IAAL,CAAU/P,MAA9B,EAAsChC,GAAtC,EAA2C;AACzC,aAAK+R,IAAL,CAAU/R,CAAV,EAAazH,MAAb,GAAsB;AACpBmQ,YAAG,KAAKnQ,MAAL,CAAYG,KADK;AAEpByK,YAAG,KAAK5K,MAAL,CAAYI,IAFK;AAGpBH,iBAAQ,KAAKD,MAAL,CAAYC,MAHA;AAIpB2X,iBAAQ,KAAK5X,MAAL,CAAYK;AAJA,SAAtB;AAMA,aAAKmZ,IAAL,CAAU/R,CAAV,EAAahC,cAAb;AACA,aAAK+T,IAAL,CAAU/R,CAAV,EAAa7C,MAAb;AACD;AACF;AAjBa,MA3FE;AA8GlBiV,gBAAW;AACTjc,aAAO,SAASic,SAAT,CAAmBha,IAAnB,EAAyBpE,EAAzB,EAA6B;AAClC;AACA;AACA;AACA;AACA,WAAIqN,OAAO;AACTjJ,cAAMA;AADG,QAAX;AAGA,WAAI,QAAOpE,EAAP,yCAAOA,EAAP,OAAc,QAAlB,EAA4B;AAC1BqN,aAAK0K,KAAL,GAAa/X,GAAG+X,KAAhB;AACA;AACA;AACD,QAJD,MAIO;AACL1K,aAAK0K,KAAL,GAAa/X,EAAb;AACD;AACD,YAAK2K,IAAL,CAAU,QAAV,EAAoB0C,IAApB;AACD;AAjBQ,MA9GO;AAiIlBlE,aAAQ;;AAEN;;;;;;;AAOAhH,aAAO,SAASgH,MAAT,GAAkB,CAAE;AATrB,MAjIU;AA4IlBkV,wBAAmB;AACjBlc,aAAO,SAASkc,iBAAT,GAA6B;AAClC,WAAI7M,QAAQ,IAAZ;;AAEA,YAAKW,QAAL,GAAgB,KAAKH,OAAL,GAAe,KAAKE,UAAL,GAAkB,YAAY,CAAE,CAA/D;AACA,YAAK7H,KAAL,GAAa,KAAKG,IAAL,GAAY,KAAKI,OAAL,GAAe,YAAY,CAAE,CAAtD;AACA,YAAKgH,QAAL,GAAgB,KAAKC,YAAL,GAAoB,KAAKC,eAAL,GAAuB,YAAY,CAAE,CAAzE;AACA,YAAKnC,KAAL,GAAa,KAAKqD,SAAL,GAAiB,KAAKC,YAAL,GAAoB,YAAY,CAAE,CAAhE;;AAEA,YAAK2L,cAAL,GAAsB,KAAtB;;AAEA,YAAKtV,OAAL,CAAa1J,gBAAb,CAA8B,YAA9B,EAA4C,UAAUyS,CAAV,EAAa;AACvDhS,gBAAQC,GAAR,CAAY,YAAZ;AACA,YAAIgJ,UAAU3J,SAASkf,gBAAT,CAA0BxM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBwK,OAA7C,EAAsDzM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmByK,OAAzE,CAAd;AACA,YAAI/c,MAAMwP,MAAMuM,IAAN,CAAWzU,QAAQqR,KAAnB,CAAV;AACAnJ,cAAMwG,UAAN,GAAmB,CAAChW,IAAI+V,KAAxB;AACA/V,YAAIoX,IAAJ,CAAS5H,MAAMwG,UAAf;AACAxG,cAAMoN,cAAN,GAAuBtV,QAAQqR,KAA/B;AACAtI,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QATD;;AAWA,YAAKtJ,OAAL,CAAa1J,gBAAb,CAA8B,WAA9B,EAA2C,UAAUyS,CAAV,EAAa;AACtD,YAAI/I,UAAU3J,SAASkf,gBAAT,CAA0BxM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBwK,OAA7C,EAAsDzM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmByK,OAAzE,CAAd;AACA,YAAI/c,MAAMwP,MAAMuM,IAAN,CAAWzU,QAAQqR,KAAnB,CAAV;AACA,YAAIrR,QAAQqR,KAAR,KAAkBnJ,MAAMoN,cAA5B,EAA4C;AAC1C,aAAIpN,MAAMoN,cAAV,EAA0B;AACxB,cAAII,UAAUxN,MAAMuM,IAAN,CAAWvM,MAAMoN,cAAjB,CAAd;AACAI,kBAAQ1F,EAAR;AACD;AACDtX,aAAIoX,IAAJ,CAAS5H,MAAMwG,UAAf;AACD,SAND,MAMO;AACLhW,aAAIqX,IAAJ;AACD;AACD7H,cAAMoN,cAAN,GAAuBtV,QAAQqR,KAA/B;AACAtI,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QAfD;;AAiBA,YAAKtJ,OAAL,CAAa1J,gBAAb,CAA8B,UAA9B,EAA0C,UAAUyS,CAAV,EAAa;AACrD;AACA,YAAIrQ,MAAMwP,MAAMuM,IAAN,CAAWvM,MAAMoN,cAAjB,CAAV;AACA5c,YAAIsX,EAAJ;AACA9H,cAAMkM,WAAN,GAAoB,KAApB;AACAlM,cAAMoN,cAAN,GAAuB,KAAvB;AACAvM,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QARD;AASD;AAhDgB,MA5ID;AA8LlBqM,eAAU;;AAER;;;;;;AAMA9c,aAAO,SAAS8c,QAAT,CAAkB5Q,GAAlB,EAAuBC,IAAvB,EAA6B;AAClC,YAAKwP,KAAL,CAAWzP,GAAX,GAAiBA,GAAjB;AACA,YAAKyP,KAAL,CAAWxP,IAAX,GAAkBA,IAAlB;AACA,YAAK4E,KAAL;AACA,YAAK9J,cAAL;AACD;AAbO,MA9LQ;AA6MlB8V,gBAAW;;AAET;;;;;;AAMA/c,aAAO,SAAS+c,SAAT,CAAmB9a,IAAnB,EAAyBpE,EAAzB,EAA6B;AAClC,YAAK+d,IAAL,CAAU3Z,OAAO,KAAK0Z,KAAL,CAAWzP,GAA5B,EAAiC+J,IAAjC,CAAsCpY,EAAtC;AACD;AAVQ,MA7MO;AAyNlBmf,kBAAa;;AAEX;;;;;;AAMAhd,aAAO,SAASgd,WAAT,CAAqBxE,KAArB,EAA4B3a,EAA5B,EAAgC;AACrC,YAAK+d,IAAL,CAAUpD,KAAV,EAAiBvC,IAAjB,CAAsBpY,EAAtB;AACD;AAVU;AAzNK,KAApB;;AAuOA,WAAO6F,KAAP;AACD,IA9QW,CA8QT4B,SA9QS,CAAZ;;AAgRA9G,UAAOD,OAAP,GAAiBmF,KAAjB;;AAEA;;AAED;AAAO,GA16IG;AA26IV;AACA,OAAO,UAASlF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2O,MAAM3O,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAImY,iBAAiBnY,oBAAoB,EAApB,CAArB;AACA,OAAIse,cAActe,oBAAoB,EAApB,CAAlB;AACA,OAAIue,eAAeve,oBAAoB,EAApB,CAAnB;AACA,OAAI6O,QAAQ7O,oBAAoB,CAApB,CAAZ;;AAEA,OAAIwe,aAAc,UAAUpG,eAAV,EAA2B;AAC3C,aAASoG,UAAT,GAAsB;AACpB5c,qBAAgB,IAAhB,EAAsB4c,UAAtB;;AAEA,SAAIzX,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL,CADO;AAEbjG,cAAQ,KAFK;AAGbkG,YAAM,QAHO;AAIb7F,aAAO;AAJM,MAAf;;AAOAoE,UAAKlE,OAAO0E,cAAP,CAAsBuY,WAAW7c,SAAjC,CAAL,EAAkD,aAAlD,EAAiE,IAAjE,EAAuEvB,IAAvE,CAA4E,IAA5E,EAAkFuH,SAAlF,EAA6FZ,OAA7F,EAAsGC,QAAtG;;AAEA,UAAK6S,KAAL,GAAa,KAAKhS,QAAL,CAAcgS,KAA3B;AACA,UAAK4E,GAAL,GAAW,KAAK5W,QAAL,CAAc4W,GAAzB;AACA,UAAKC,MAAL,GAAc,KAAK7W,QAAL,CAAc6W,MAA5B;;AAEA,UAAKC,MAAL,GAAc,KAAK9W,QAAL,CAAc8W,MAA5B;;AAEA,UAAK/B,WAAL,GAAmB,KAAnB;AACA,UAAK1F,UAAL,GAAkB,KAAlB;;AAEA,UAAK9O,IAAL;AACA,UAAKC,MAAL;AACD;;AAEDlC,cAAUqY,UAAV,EAAsBpG,eAAtB;;AAEAtX,iBAAa0d,UAAb,EAAyB;AACvBjO,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe9B,IAAIJ,MAAJ,CAAW,KAAX,CAAf;AACA,YAAKkC,OAAL,CAAaS,YAAb,CAA0B,OAA1B,EAAmC,KAAKhB,KAAxC;AACA,YAAKO,OAAL,CAAaS,YAAb,CAA0B,QAA1B,EAAoC,KAAKf,MAAzC;AACA,YAAKM,OAAL,CAAaW,KAAb,CAAmB6J,GAAnB,GAAyB,KAAzB;AACA,YAAKxK,OAAL,CAAaW,KAAb,CAAmB+J,IAAnB,GAA0B,KAA1B;AACA,YAAK1K,OAAL,CAAaW,KAAb,CAAmBpB,QAAnB,GAA8B,UAA9B;AACA,YAAK/B,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AATS,MADW;AAYvBF,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;AAC/B,WAAIoI,QAAQ,IAAZ;;AAEA,YAAK2H,GAAL,GAAW3R,IAAIJ,MAAJ,CAAW,MAAX,CAAX;AACA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAK4P,GAA9B;;AAEA,YAAK1H,iBAAL,GAAyB,KAAK0H,GAA9B;;AAEA;;AAEA,WAAI,CAACxJ,MAAM+B,MAAX,EAAmB;;AAEjB,aAAKrH,KAAL,GAAa,YAAY;AACvBmH,eAAMiO,MAAN,CAAa/B,WAAb,GAA2B,IAA3B;AACAlM,eAAMiO,MAAN,CAAazH,UAAb,GAA0B,CAACxG,MAAMuG,KAAjC;AACAvG,eAAM4H,IAAN,CAAW5H,MAAMiO,MAAN,CAAazH,UAAxB;AACD,SAJD;AAKA,aAAKmB,GAAL,CAASvZ,gBAAT,CAA0B,WAA1B,EAAuC,YAAY;AACjD,aAAI4R,MAAMiO,MAAN,CAAa/B,WAAjB,EAA8B;AAC5BlM,gBAAM4H,IAAN,CAAW5H,MAAMiO,MAAN,CAAazH,UAAxB;AACD;AACF,SAJD;;AAMA,aAAKxN,IAAL,GAAY,YAAY,CAAE,CAA1B;AACA,aAAK2O,GAAL,CAASvZ,gBAAT,CAA0B,WAA1B,EAAuC,UAAUyS,CAAV,EAAa;AAClD,aAAIb,MAAMiO,MAAN,CAAa/B,WAAjB,EAA8B;AAC5B,cAAI,CAAClM,MAAMc,MAAX,EAAmB;AACjBd,iBAAMc,MAAN,GAAe7C,IAAI8C,YAAJ,CAAiBf,MAAMlI,OAAvB,CAAf;AACD;AACDkI,gBAAMjH,KAAN,GAAckF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmBb,MAAMc,MAAzB,CAAd;AACAd,gBAAM6H,IAAN;AACD;AACF,SARD;;AAUA,aAAKzO,OAAL,GAAe,YAAY;AACzB4G,eAAMiO,MAAN,CAAa/B,WAAb,GAA2B,KAA3B;AACD,SAFD;AAGA,aAAKvE,GAAL,CAASvZ,gBAAT,CAA0B,SAA1B,EAAqC,YAAY;AAC/C,aAAI4R,MAAMiO,MAAN,CAAa/B,WAAjB,EAA8B;AAC5BlM,gBAAM8H,EAAN;AACD;AACF,SAJD;AAKA,aAAKH,GAAL,CAASvZ,gBAAT,CAA0B,UAA1B,EAAsC,YAAY;AAChD,aAAI4R,MAAMiO,MAAN,CAAa/B,WAAjB,EAA8B;AAC5BlM,gBAAM8H,EAAN;AACD;AACF,SAJD;AAKD;AACF;AAjDa,MAZO;AA+DvB9P,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAK2P,GAAL,CAASpP,YAAT,CAAsB,GAAtB,EAA2B,CAA3B;AACA,YAAKoP,GAAL,CAASpP,YAAT,CAAsB,GAAtB,EAA2B,CAA3B;AACA,WAAI,KAAKhB,KAAL,GAAa,CAAjB,EAAoB;AAClB,aAAKoQ,GAAL,CAASpP,YAAT,CAAsB,OAAtB,EAA+B,KAAKhB,KAAL,GAAa,CAA5C;AACD,QAFD,MAEO;AACL,aAAKoQ,GAAL,CAASpP,YAAT,CAAsB,OAAtB,EAA+B,KAAKhB,KAApC;AACD;AACD,WAAI,KAAKC,MAAL,GAAc,CAAlB,EAAqB;AACnB,aAAKmQ,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKf,MAAL,GAAc,CAA9C;AACD,QAFD,MAEO;AACL,aAAKmQ,GAAL,CAASpP,YAAT,CAAsB,QAAtB,EAAgC,KAAKf,MAArC;AACD;AACD;AACA,YAAKmQ,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAK0V,MAAL,CAAYlb,MAAZ,CAAmBE,IAAjD;AACD;AAjBY,MA/DQ;AAkFvB0E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAK4O,KAAV,EAAiB;AACf,aAAKoB,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAK0V,MAAL,CAAYlb,MAAZ,CAAmBE,IAAjD;AACD,QAFD,MAEO;AACL,aAAK0U,GAAL,CAASpP,YAAT,CAAsB,MAAtB,EAA8B,KAAK0V,MAAL,CAAYlb,MAAZ,CAAmBC,MAAjD;AACD;AACF;AAPK;AAlFe,KAAzB;;AA6FA,WAAO8a,UAAP;AACD,IA5HgB,CA4HdrG,cA5Hc,CAAjB;;AA8HA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAInT,YAAa,UAAU8B,UAAV,EAAsB;AACrC,aAAS9B,SAAT,GAAqB;AACnBpD,qBAAgB,IAAhB,EAAsBoD,SAAtB;;AAEA,SAAI+B,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN,CADO;AAEbC,YAAM,QAFO;AAGb0X,YAAM,CAHO;AAIbC,eAAS;AAJI,MAAf;;AAOApZ,UAAKlE,OAAO0E,cAAP,CAAsBjB,UAAUrD,SAAhC,CAAL,EAAiD,aAAjD,EAAgE,IAAhE,EAAsEvB,IAAtE,CAA2E,IAA3E,EAAiFuH,SAAjF,EAA4FZ,OAA5F,EAAqGC,QAArG;;AAEA,UAAKuS,MAAL,GAAc,CAAC,CAAf;;AAEA,UAAKrS,IAAL,GAAY,KAAKW,QAAL,CAAcX,IAA1B;;AAEA;;;;AAIA,UAAK4X,QAAL,GAAgB,IAAIlgB,MAAM8D,QAAV,CAAmB,GAAnB,EAAwB,YAAY,CAAE,CAAtC,EAAwC,KAAxC,CAAhB,CAtBmB,CAsB6C;;AAEhE;;;;AAIA,UAAKic,MAAL,GAAc,IAAIL,WAAJ,CAAgB,KAAKzW,QAAL,CAAc+W,IAA9B,EAAoC,KAAK/W,QAAL,CAAcgX,OAAlD,CAAd;AACA,UAAKF,MAAL,CAAYI,EAAZ,GAAiB,IAAjB;;AAEA;;;;AAIA,UAAKC,OAAL,GAAe,IAAIT,YAAJ,CAAiB,CAAjB,EAAoB,KAAKM,OAAzB,CAAf;;AAEA,UAAKzW,IAAL;AACD;;AAEDjC,cAAUnB,SAAV,EAAqB8B,UAArB;;AAEAhG,iBAAakE,SAAb,EAAwB;AACtBuL,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,KAAvB,CAAf;AACA,YAAKlL,OAAL,CAAaW,KAAb,CAAmBpB,QAAnB,GAA8B,UAA9B;AACA,YAAKS,OAAL,CAAaW,KAAb,CAAmBiU,OAAnB,GAA6B,OAA7B;AACA,YAAK5U,OAAL,CAAaW,KAAb,CAAmBlB,KAAnB,GAA2B,MAA3B;AACA,YAAKO,OAAL,CAAaW,KAAb,CAAmBjB,MAAnB,GAA4B,MAA5B;AACA,YAAKlC,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACA,WAAIqG,MAAM+B,MAAV,EAAkB;AAChB,aAAK2M,iBAAL;AACD;AACF;AAXS,MADU;AActBjV,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAK2W,KAAL,GAAa,EAAb;AACA,YAAK,IAAI/T,IAAI,CAAb,EAAgBA,IAAI,KAAKyT,MAAL,CAAYzR,MAAhC,EAAwChC,GAAxC,EAA6C;;AAE3C,YAAIgU,YAAY,KAAKP,MAAL,CAAYQ,MAAZ,CAAmBjU,CAAnB,CAAhB;AACA;;AAEA,YAAIwO,YAAY7a,SAAS6U,aAAT,CAAuB,MAAvB,CAAhB;AACAgG,kBAAUvQ,KAAV,CAAgBpB,QAAhB,GAA2B,UAA3B;;AAEA,YAAIqX,OAAO,IAAIZ,UAAJ,CAAe9E,SAAf,EAA0B;AACnC/J,oBAAW,IADwB;AAEnCkK,gBAAO3O,CAF4B;AAGnCuT,cAAKS,UAAUT,GAHoB;AAInCC,iBAAQQ,UAAUR,MAJiB;AAKnCxX,eAAM,KAAKA,IALwB;AAMnCyX,iBAAQ;AAN2B,SAA1B,EAOR,KAAKrB,SAAL,CAAe/Z,IAAf,CAAoB,IAApB,EAA0B2H,CAA1B,CAPQ,CAAX;;AASA;AACA,YAAI2D,MAAM+B,MAAV,EAAkB;AAChBwO,cAAK/G,GAAL,CAASwB,KAAT,GAAiB3O,CAAjB;AACAkU,cAAK/N,QAAL,GAAgB+N,KAAKlO,OAAL,GAAekO,KAAKhO,UAAL,GAAkB,YAAY,CAAE,CAA/D;AACAgO,cAAK7V,KAAL,GAAa6V,KAAK1V,IAAL,GAAY0V,KAAKtV,OAAL,GAAe,YAAY,CAAE,CAAtD;AACAsV,cAAKtO,QAAL,GAAgBsO,KAAKrO,YAAL,GAAoBqO,KAAKpO,eAAL,GAAuB,YAAY,CAAE,CAAzE;AACAoO,cAAKvQ,KAAL,GAAauQ,KAAKlN,SAAL,GAAiBkN,KAAKjN,YAAL,GAAoB,YAAY,CAAE,CAAhE;AACD;;AAED,aAAK8M,KAAL,CAAW7T,IAAX,CAAgBgU,IAAhB;AACA,aAAK5W,OAAL,CAAaC,WAAb,CAAyBiR,SAAzB;AACD;AACD,YAAKhR,aAAL;AACD;AAlCa,MAdM;AAkDtBA,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI2W,YAAY,KAAKpX,KAAL,GAAa,KAAK4W,OAAlC;AACA,WAAIS,aAAa,KAAKpX,MAAL,GAAc,KAAK0W,IAApC;;AAEA,YAAK,IAAI1T,IAAI,CAAb,EAAgBA,IAAI,KAAK+T,KAAL,CAAW/R,MAA/B,EAAuChC,GAAvC,EAA4C;AAC1C,YAAIwO,YAAY,KAAKuF,KAAL,CAAW/T,CAAX,EAAclF,MAA9B;AACA0T,kBAAUvQ,KAAV,CAAgB+J,IAAhB,GAAuB,KAAK+L,KAAL,CAAW/T,CAAX,EAAcwT,MAAd,GAAuBW,SAAvB,GAAmC,IAA1D;AACA3F,kBAAUvQ,KAAV,CAAgB6J,GAAhB,GAAsB,KAAKiM,KAAL,CAAW/T,CAAX,EAAcuT,GAAd,GAAoBa,UAApB,GAAiC,IAAvD;AACA,aAAKL,KAAL,CAAW/T,CAAX,EAAcvC,MAAd,CAAqB0W,SAArB,EAAgCC,UAAhC;AACD;AACF;AAZY,MAlDO;AAgEtBpW,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAK,IAAIgC,IAAI,CAAb,EAAgBA,IAAI,KAAK+T,KAAL,CAAW/R,MAA/B,EAAuChC,GAAvC,EAA4C;AAC1C,aAAK+T,KAAL,CAAW/T,CAAX,EAAc7C,MAAd;AACD;AACF;AALa,MAhEM;AAuEtBsB,aAAQ;AACNtI,aAAO,SAASsI,MAAT,GAAkB;AACvB,WAAI+G,QAAQ,IAAZ;;AAEA;AACA;AACA,YAAKiO,MAAL,CAAYY,OAAZ,CAAoB,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB4K,CAAhB,EAAmB;AACrC;AACA,YAAIwF,MAAMiO,MAAN,CAAaa,OAAb,CAAqB1T,CAArB,EAAwBxL,CAAxB,MAA+BoQ,MAAMuO,KAAN,CAAY/T,CAAZ,EAAe+L,KAAlD,EAAyD;AACvD,aAAIvG,MAAMiO,MAAN,CAAaa,OAAb,CAAqB1T,CAArB,EAAwBxL,CAAxB,IAA6B,CAAjC,EAAoC;AAClCoQ,gBAAMuO,KAAN,CAAY/T,CAAZ,EAAemM,MAAf;AACD,UAFD,MAEO;AACL3G,gBAAMuO,KAAN,CAAY/T,CAAZ,EAAeqM,OAAf;AACD;AACF;AACF,QATD;AAUD;AAhBK,MAvEc;AAyFtB+F,gBAAW;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEAjc,aAAO,SAASic,SAAT,CAAmBha,IAAnB,EAAyBpE,EAAzB,EAA6B;AAClC;AACA;AACA;AACA,WAAIkgB,OAAO,KAAKT,MAAL,CAAYQ,MAAZ,CAAmB7b,IAAnB,CAAX;AACA;AACA,YAAKqb,MAAL,CAAYa,OAAZ,CAAoBJ,KAAKX,GAAzB,EAA8BW,KAAKV,MAAnC,IAA6Cxf,EAA7C;AACA,WAAIqN,OAAO;AACTkS,aAAKW,KAAKX,GADD;AAETC,gBAAQU,KAAKV,MAFJ;AAGTzH,eAAO/X;AAHE,QAAX;AAKA,YAAK2K,IAAL,CAAU,QAAV,EAAoB0C,IAApB;AACD;AAtBQ,MAzFW;AAiHtBlE,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAIqI,QAAQ,IAAZ;;AAEA,WAAI,KAAKsO,OAAL,CAAa3d,KAAb,IAAsB,CAA1B,EAA6B;AAC3B,aAAKsd,MAAL,CAAYY,OAAZ,CAAoB,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB4K,CAAhB,EAAmB;AACrC,aAAI5K,MAAMoQ,MAAMsO,OAAN,CAAc3d,KAAxB,EAA+B;AAC7BqP,gBAAMuO,KAAN,CAAY/T,CAAZ,EAAemN,GAAf,CAAmBpP,YAAnB,CAAgC,QAAhC,EAA0CyH,MAAMjN,MAAN,CAAaK,WAAvD;AACA4M,gBAAMuO,KAAN,CAAY/T,CAAZ,EAAemN,GAAf,CAAmBpP,YAAnB,CAAgC,cAAhC,EAAgD,GAAhD;AACAyH,gBAAMuO,KAAN,CAAY/T,CAAZ,EAAemN,GAAf,CAAmBpP,YAAnB,CAAgC,gBAAhC,EAAkD,GAAlD;AACD,UAJD,MAIO;AACLyH,gBAAMuO,KAAN,CAAY/T,CAAZ,EAAemN,GAAf,CAAmBpP,YAAnB,CAAgC,QAAhC,EAA0C,MAA1C;AACD;AACF,SARD;AASD;AACF;AAfK,MAjHc;AAkItB5J,YAAO;;AAEL;;;;;AAKAgC,aAAO,SAAShC,KAAT,CAAeogB,EAAf,EAAmB;AACxB,YAAKX,QAAL,CAAcpP,KAAd,GAAsB,KAAKgQ,IAAL,CAAUnc,IAAV,CAAe,IAAf,CAAtB;AACA,WAAIkc,EAAJ,EAAQ;AACN,aAAKX,QAAL,CAAcW,EAAd,CAAiBA,EAAjB;AACD;AACD,YAAKX,QAAL,CAAczf,KAAd;AACD;AAbI,MAlIe;AAiJtBgF,WAAM;;AAEJ;;;;AAIAhD,aAAO,SAASgD,IAAT,GAAgB;AACrB,YAAKya,QAAL,CAAcza,IAAd;AACD;AARG,MAjJgB;AA2JtBqb,WAAM;;AAEJ;;;;AAIAre,aAAO,SAASqe,IAAT,GAAgB;AACrB,YAAKV,OAAL,CAAaU,IAAb;AACA,YAAK7V,IAAL,CAAU,MAAV,EAAkB,KAAK8U,MAAL,CAAYD,MAAZ,CAAmB,KAAKM,OAAL,CAAa3d,KAAhC,EAAuCse,OAAvC,EAAlB;AACA,YAAKtX,MAAL;AACD;AAVG,MA3JgB;AAuKtBkV,wBAAmB;AACjBlc,aAAO,SAASkc,iBAAT,GAA6B;AAClC,WAAI7M,QAAQ,IAAZ;;AAEA,YAAKW,QAAL,GAAgB,KAAKH,OAAL,GAAe,KAAKE,UAAL,GAAkB,YAAY,CAAE,CAA/D;AACA,YAAK7H,KAAL,GAAa,KAAKG,IAAL,GAAY,KAAKI,OAAL,GAAe,YAAY,CAAE,CAAtD;AACA,YAAKgH,QAAL,GAAgB,KAAKC,YAAL,GAAoB,KAAKC,eAAL,GAAuB,YAAY,CAAE,CAAzE;AACA,YAAKnC,KAAL,GAAa,KAAKqD,SAAL,GAAiB,KAAKC,YAAL,GAAoB,YAAY,CAAE,CAAhE;;AAEA,YAAK2L,cAAL,GAAsB,KAAtB;;AAEA,YAAKtV,OAAL,CAAa1J,gBAAb,CAA8B,YAA9B,EAA4C,UAAUyS,CAAV,EAAa;AACvD,YAAI/I,UAAU3J,SAASkf,gBAAT,CAA0BxM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBwK,OAA7C,EAAsDzM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmByK,OAAzE,CAAd;AACA,YAAImB,OAAO1O,MAAMuO,KAAN,CAAYzW,QAAQqR,KAApB,CAAX;AACAnJ,cAAMwG,UAAN,GAAmB,CAACkI,KAAKnI,KAAzB;AACAmI,aAAK9G,IAAL,CAAU5H,MAAMwG,UAAhB;AACAxG,cAAMoN,cAAN,GAAuBtV,QAAQqR,KAA/B;AACAtI,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QARD;;AAUA,YAAKtJ,OAAL,CAAa1J,gBAAb,CAA8B,WAA9B,EAA2C,UAAUyS,CAAV,EAAa;AACtD,YAAI/I,UAAU3J,SAASkf,gBAAT,CAA0BxM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBwK,OAA7C,EAAsDzM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmByK,OAAzE,CAAd;AACA,YAAImB,OAAO1O,MAAMuO,KAAN,CAAYzW,QAAQqR,KAApB,CAAX;AACA,YAAIrR,QAAQqR,KAAR,KAAkBnJ,MAAMoN,cAA5B,EAA4C;AAC1C,aAAIpN,MAAMoN,cAAN,IAAwB,CAA5B,EAA+B;AAC7B,cAAI8B,WAAWlP,MAAMuO,KAAN,CAAYvO,MAAMoN,cAAlB,CAAf;AACA8B,mBAASpH,EAAT;AACD;AACD4G,cAAK9G,IAAL,CAAU5H,MAAMwG,UAAhB;AACD,SAND,MAMO;AACLkI,cAAK7G,IAAL;AACD;AACD7H,cAAMoN,cAAN,GAAuBtV,QAAQqR,KAA/B;AACAtI,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QAfD;;AAiBA,YAAKtJ,OAAL,CAAa1J,gBAAb,CAA8B,UAA9B,EAA0C,UAAUyS,CAAV,EAAa;AACrD;AACA,YAAI6N,OAAO1O,MAAMuO,KAAN,CAAYvO,MAAMoN,cAAlB,CAAX;AACAsB,aAAK5G,EAAL;AACA9H,cAAMkM,WAAN,GAAoB,KAApB;AACAlM,cAAMoN,cAAN,GAAuB,KAAvB;AACAvM,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QARD;AASD;AA/CgB,MAvKG;AAwNtB8M,WAAM;;AAEJ;;;;;AAKA1a,WAAK,eAAY;AACf,cAAO,KAAKya,MAAL,CAAYC,IAAnB;AACD,OATG;AAUJza,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKwf,MAAL,CAAYC,IAAZ,GAAmBzf,CAAnB;AACA,YAAKiT,KAAL;AACA,YAAK9J,cAAL;AACA,YAAKqB,MAAL;AACD;AAfG,MAxNgB;AAyOtBkV,cAAS;;AAEP;;;;;AAKA3a,WAAK,eAAY;AACf,cAAO,KAAKya,MAAL,CAAYE,OAAnB;AACD,OATM;AAUP1a,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKwf,MAAL,CAAYE,OAAZ,GAAsB1f,CAAtB;AACA,YAAK6f,OAAL,CAAajV,GAAb,GAAmB5K,CAAnB;AACA,YAAKiT,KAAL;AACA,YAAK9J,cAAL;AACA,YAAKqB,MAAL;AACD;AAhBM;AAzOa,KAAxB;;AA6PA,WAAO3E,SAAP;AACD,IAzSe,CAySb2B,SAzSa,CAAhB;;AA2SA9G,UAAOD,OAAP,GAAiBoF,SAAjB;;AAED;AAAO,GAl5JG;AAm5JV;AACA,OAAO,UAASnF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIuC,WAAW1B,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAf;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,OAAIwC,SAAU,YAAY;AACxB,aAASA,MAAT,CAAgBoc,IAAhB,EAAsBC,OAAtB,EAA+B;AAC7B,SAAInO,QAAQ,IAAZ;;AAEA9O,qBAAgB,IAAhB,EAAsBY,MAAtB;;AAEA;AACA,UAAKgd,OAAL,GAAe,EAAf;AACA,UAAKlZ,MAAL,CAAYsY,IAAZ,EAAkBC,OAAlB;;AAEA,UAAKgB,MAAL,GAAc;AACZT,YAAM,cAAUV,MAAV,EAAkBD,GAAlB,EAAuB;AAC3B/N,aAAM8O,OAAN,CAAcf,GAAd,EAAmBC,MAAnB,IAA6B,CAAChO,MAAM8O,OAAN,CAAcf,GAAd,EAAmBC,MAAnB,CAA9B,CAD2B,CAC+B;AAC1D,WAAIhO,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACD,cAAO+G,MAAM8O,OAAN,CAAcf,GAAd,EAAmBC,MAAnB,CAAP;AACD,OAPW;AAQZoB,WAAK,eAAY;AACfpP,aAAM6O,OAAN,CAAc,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB;AAC5BoQ,cAAMmP,MAAN,CAAaT,IAAb,CAAkB9e,CAAlB,EAAqBwL,CAArB;AACD,QAFD;AAGA,WAAI4E,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAfW;AAgBZ8U,WAAK,aAAUA,KAAV,EAAe;AAClB,YAAK,IAAIvT,IAAI,CAAb,EAAgBA,IAAIwF,MAAMmO,OAA1B,EAAmC3T,GAAnC,EAAwC;AACtCwF,cAAMmP,MAAN,CAAaT,IAAb,CAAkBlU,CAAlB,EAAqBuT,KAArB;AACD;AACD,WAAI/N,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAvBW;AAwBZ+U,cAAQ,gBAAUA,QAAV,EAAkB;AACxB,YAAK,IAAIxT,IAAI,CAAb,EAAgBA,IAAIwF,MAAMkO,IAA1B,EAAgC1T,GAAhC,EAAqC;AACnCwF,cAAMmP,MAAN,CAAaT,IAAb,CAAkBV,QAAlB,EAA0BxT,CAA1B;AACD;AACD,WAAIwF,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF;AA/BW,MAAd;;AAkCA,UAAKxF,GAAL,GAAW;AACTib,YAAM,cAAUV,MAAV,EAAkBD,GAAlB,EAAuBpd,KAAvB,EAA8B;AAClCqP,aAAM8O,OAAN,CAAcf,GAAd,EAAmBC,MAAnB,IAA6Brd,KAA7B;AACA,WAAIqP,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OANQ;AAOTmW,WAAK,aAAUC,MAAV,EAAkB;AACrB;AACA;AACArP,aAAM8O,OAAN,GAAgBO,MAAhB;AACA,WAAIrP,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAdQ;AAeT8U,WAAK,aAAUA,KAAV,EAAesB,MAAf,EAAuB;AAC1B;AACArP,aAAM8O,OAAN,CAAcf,KAAd,IAAqBsB,MAArB;AACA,WAAIrP,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OArBQ;AAsBT+U,cAAQ,gBAAUA,QAAV,EAAkBqB,MAAlB,EAA0B;AAChC;AACArP,aAAM8O,OAAN,CAAcQ,OAAd,CAAsB,UAAUvB,GAAV,EAAevT,CAAf,EAAkB;AACtCwF,cAAM8O,OAAN,CAActU,CAAd,EAAiBwT,QAAjB,IAA2BqB,OAAO7U,CAAP,CAA3B;AACD,QAFD;AAGA,WAAIwF,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF;AA9BQ,MAAX;;AAiCA,UAAKsW,MAAL,GAAc;AACZ;AACA;AACAH,WAAK,aAAUI,MAAV,EAAkB;AACrB,WAAI,CAACA,MAAD,IAAWA,WAAW,CAA1B,EAA6B;AAC3BA,iBAAS,CAAT;AACD;AACDA,iBAAUxP,MAAM8O,OAAN,CAAc,CAAd,EAAiBtS,MAA3B;AACA,WAAIgT,SAAS,CAAb,EAAgB;AACdA,iBAASxP,MAAM8O,OAAN,CAAc,CAAd,EAAiBtS,MAAjB,GAA0BgT,MAAnC;AACD;AACD,YAAK,IAAIhV,IAAI,CAAb,EAAgBA,IAAIwF,MAAMkO,IAA1B,EAAgC1T,GAAhC,EAAqC;AACnC,YAAIiV,MAAMzP,MAAM8O,OAAN,CAActU,CAAd,EAAiBqE,MAAjB,CAAwBmB,MAAM8O,OAAN,CAActU,CAAd,EAAiBgC,MAAjB,GAA0BgT,MAAlD,EAA0DA,MAA1D,CAAV;AACAxP,cAAM8O,OAAN,CAActU,CAAd,IAAmBiV,IAAIC,MAAJ,CAAW1P,MAAM8O,OAAN,CAActU,CAAd,CAAX,CAAnB;AACD;AACD,WAAIwF,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAlBW;AAmBZ8U,WAAK,aAAUA,KAAV,EAAeyB,MAAf,EAAuB;AAC1B,WAAI,CAACA,MAAD,IAAWA,WAAW,CAA1B,EAA6B;AAC3BA,iBAAS,CAAT;AACD;AACDA,iBAAUxP,MAAM8O,OAAN,CAAc,CAAd,EAAiBtS,MAA3B;AACA,WAAIgT,SAAS,CAAb,EAAgB;AACdA,iBAASxP,MAAM8O,OAAN,CAAc,CAAd,EAAiBtS,MAAjB,GAA0BgT,MAAnC;AACD;AACD,WAAIC,MAAMzP,MAAM8O,OAAN,CAAcf,KAAd,EAAmBlP,MAAnB,CAA0BmB,MAAM8O,OAAN,CAAcf,KAAd,EAAmBvR,MAAnB,GAA4BgT,MAAtD,EAA8DA,MAA9D,CAAV;AACAxP,aAAM8O,OAAN,CAAcf,KAAd,IAAqB0B,IAAIC,MAAJ,CAAW1P,MAAM8O,OAAN,CAAcf,KAAd,CAAX,CAArB;AACA,WAAI/N,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAhCW;AAiCZ+U,cAAQ,gBAAUA,QAAV,EAAkBwB,MAAlB,EAA0B;AAChC,WAAI,CAACA,MAAD,IAAWA,WAAW,CAA1B,EAA6B;AAC3BA,iBAAS,CAAT;AACD;AACDA,iBAAUxP,MAAM8O,OAAN,CAActS,MAAxB;AACA,WAAIgT,SAAS,CAAb,EAAgB;AACdA,iBAASxP,MAAM8O,OAAN,CAActS,MAAd,GAAuBgT,MAAhC;AACD;AACD,WAAIG,QAAQ,EAAZ;AACA3P,aAAM8O,OAAN,CAAcQ,OAAd,CAAsB,UAAUvB,GAAV,EAAe;AACnC4B,cAAMjV,IAAN,CAAWqT,IAAIC,QAAJ,CAAX;AACD,QAFD;AAGA,WAAIyB,MAAME,MAAM9Q,MAAN,CAAa8Q,MAAMnT,MAAN,GAAegT,MAA5B,EAAoCA,MAApC,CAAV;AACAG,eAAQF,IAAIC,MAAJ,CAAWC,KAAX,CAAR;AACA3P,aAAM8O,OAAN,CAAcQ,OAAd,CAAsB,UAAUvB,GAAV,EAAevT,CAAf,EAAkB;AACtCuT,YAAIC,QAAJ,IAAc2B,MAAMnV,CAAN,CAAd;AACD,QAFD;AAGA,WAAIwF,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF;AArDW,MAAd;;AAwDA;AACA;AACA;AACA,UAAK2W,QAAL,GAAgB;AACdR,WAAK,aAAUpR,IAAV,EAAgB;AACnB,WAAI6R,eAAe,IAAIhe,QAAJ,CAAamM,IAAb,CAAnB;AACAgC,aAAM6O,OAAN,CAAc,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB;AAC5BoQ,cAAM8O,OAAN,CAAc1T,CAAd,EAAiBxL,CAAjB,IAAsB0B,KAAKyM,IAAL,CAAU8R,aAAab,IAAb,EAAV,CAAtB;AACD,QAFD;AAGA;AACA;AACA;AACA;AACA,WAAIhP,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAba;AAcd8U,WAAK,eAAY;AACf,WAAIA,MAAM9W,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA3C;AACA,WAAI+G,OAAO/G,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA5C;;AAEA,WAAI4Y,eAAe,IAAIhe,QAAJ,CAAamM,IAAb,CAAnB;AACAgC,aAAM8O,OAAN,CAAcf,GAAd,EAAmBuB,OAAnB,CAA2B,UAAUZ,IAAV,EAAgBlU,CAAhB,EAAmB;AAC5CwF,cAAM8O,OAAN,CAAcf,GAAd,EAAmBvT,CAAnB,IAAwBlJ,KAAKyM,IAAL,CAAU8R,aAAab,IAAb,EAAV,CAAxB;AACD,QAFD;AAGA,WAAIhP,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF,OAzBa;AA0Bd+U,cAAQ,kBAAY;AAClB,WAAIA,SAAS/W,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA9C;AACA,WAAI+G,OAAO/G,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA5C;;AAEA,WAAI4Y,eAAe,IAAIhe,QAAJ,CAAamM,IAAb,CAAnB;AACAgC,aAAM8O,OAAN,CAAcQ,OAAd,CAAsB,UAAUvB,GAAV,EAAevT,CAAf,EAAkB;AACtCwF,cAAM8O,OAAN,CAActU,CAAd,EAAiBwT,MAAjB,IAA2B1c,KAAKyM,IAAL,CAAU8R,aAAab,IAAb,EAAV,CAA3B;AACD,QAFD;AAGA,WAAIhP,MAAMqO,EAAV,EAAc;AACZrO,cAAMqO,EAAN,CAASpV,MAAT;AACD;AACF;AArCa,MAAhB;;AAwCA;AACA,UAAK6W,KAAL,GAAa;AACXV,WAAK,eAAY;AACfpP,aAAMvM,GAAN,CAAU2b,GAAV,CAAc,CAAd;AACD,OAHU;AAIXrB,WAAK,aAAUA,KAAV,EAAe;AAClB/N,aAAMvM,GAAN,CAAUsa,GAAV,CAAcA,KAAd,EAAmB,CAAnB;AACD,OANU;AAOXC,cAAQ,gBAAUA,QAAV,EAAkB;AACxBhO,aAAMvM,GAAN,CAAUua,MAAV,CAAiBA,QAAjB,EAAyB,CAAzB;AACD;AATU,MAAb;;AAYA;AACD;;AAED5d,iBAAa0B,MAAb,EAAqB;AACnB8D,aAAQ;AACNjF,aAAO,SAASiF,MAAT,CAAgBsY,IAAhB,EAAsBC,OAAtB,EAA+B;AACpC,WAAInO,QAAQ,IAAZ;;AAEA,YAAK8O,OAAL,GAAe,EAAf;AACA,YAAK,IAAIf,MAAM,CAAf,EAAkBA,MAAMG,IAAxB,EAA8BH,KAA9B,EAAqC;AACnC,YAAIgC,MAAM,IAAIxQ,KAAJ,CAAU4O,OAAV,CAAV;AACA,aAAKW,OAAL,CAAapU,IAAb,CAAkBqV,GAAlB;AACD;AACD,YAAKlB,OAAL,CAAa,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB;AAC3BoQ,cAAM8O,OAAN,CAAc1T,CAAd,EAAiBxL,CAAjB,IAAsB,KAAtB;AACD,QAFD;AAGD;AAZK,MADW;AAenBif,cAAS;AACPle,aAAO,SAASke,OAAT,CAAiBmB,CAAjB,EAAoBC,EAApB,EAAwB;AAC7B,WAAIzV,IAAI,CAAR;AACA,YAAK,IAAIuT,MAAM,CAAf,EAAkBA,MAAM,KAAKG,IAA7B,EAAmCH,KAAnC,EAA0C;AACxC,YAAIkC,EAAJ,EAAQ;AACNA,YAAGlC,GAAH;AACD;AACD,aAAK,IAAIC,SAAS,CAAlB,EAAqBA,SAAS,KAAKG,OAAnC,EAA4CH,QAA5C,EAAsD;AACpDgC,WAAEjC,GAAF,EAAOC,MAAP,EAAexT,CAAf;AACAA;AACD;AACF;AACF;AAZM,MAfU;AA6BnB0V,mBAAc;AACZvf,aAAO,SAASuf,YAAT,GAAwB;AAC7B,WAAIlQ,QAAQ,IAAZ;;AAEA,WAAImQ,gBAAgB,EAApB;AACA,YAAKtB,OAAL,CAAa,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB;AAC3BugB,yBAAiB,CAACnQ,MAAM8O,OAAN,CAAc1T,CAAd,EAAiBxL,CAAjB,IAAsB,CAAtB,GAA0B,CAA3B,IAAgC,GAAjD;AACD,QAFD,EAEG,YAAY;AACbugB,yBAAiB,IAAjB;AACD,QAJD;AAKA,cAAOA,aAAP;AACD;AAXW,MA7BK;AA0CnBrhB,UAAK;AACH6B,aAAO,SAAS7B,GAAT,GAAe;AACpBD,eAAQC,GAAR,CAAY,KAAKohB,YAAL,EAAZ;AACD;AAHE,MA1Cc;AA+CnBjX,aAAQ;AACNtI,aAAO,SAASsI,MAAT,CAAgB6V,OAAhB,EAAyB;AAC9B,YAAKA,OAAL,GAAeA,WAAW,KAAKA,OAA/B;AACD;AAHK,MA/CW;AAoDnBtS,aAAQ;AACNhJ,WAAK,eAAY;AACf,cAAO,KAAK0a,IAAL,GAAY,KAAKC,OAAxB;AACD;AAHK,MApDW;AAyDnBM,aAAQ;AACN9d,aAAO,SAAS8d,MAAT,CAAgBtF,KAAhB,EAAuB;AAC5B;AACA,cAAO;AACL4E,aAAK,CAAE,EAAE5E,QAAQ,KAAKgF,OAAf,CADF;AAELH,gBAAQ7E,QAAQ,KAAKgF;AAFhB,QAAP;AAID;AAPK,MAzDW;AAkEnB1O,cAAS;AACP9O,aAAO,SAAS8O,OAAT,CAAiBsO,GAAjB,EAAsBC,MAAtB,EAA8B;AACnC,cAAOA,SAASD,MAAM,KAAKI,OAA3B;AACA;AACD;AAJM,MAlEU;AAwEnBJ,UAAK;AACHpd,aAAQ,UAAUyf,IAAV,EAAgB;AACtB,WAAIC,cAAc,SAAStC,GAAT,CAAa7W,EAAb,EAAiB;AACjC,eAAOkZ,KAAK9L,KAAL,CAAW,IAAX,EAAiBrN,SAAjB,CAAP;AACD,QAFD;;AAIAoZ,mBAAYC,QAAZ,GAAuB,YAAY;AACjC,eAAOF,KAAKE,QAAL,EAAP;AACD,QAFD;;AAIA,cAAOD,WAAP;AACD,OAVM,CAUJ,UAAUtC,GAAV,EAAe;AAChB,WAAIlS,OAAO,EAAX;AACA,YAAK,IAAIrB,IAAI,CAAb,EAAgBA,IAAI,KAAK2T,OAAzB,EAAkC3T,GAAlC,EAAuC;AACrCqB,aAAKnB,IAAL,CAAU,KAAKoU,OAAL,CAAaf,GAAb,IAAoB,CAApB,GAAwB,CAAlC;AACD;AACD,cAAOlS,IAAP;AACD,OAhBM;AADJ,MAxEc;AA2FnBmS,aAAQ;AACNrd,aAAQ,UAAU4f,OAAV,EAAmB;AACzB,WAAIC,iBAAiB,SAASxC,MAAT,CAAgByC,GAAhB,EAAqB;AACxC,eAAOF,QAAQjM,KAAR,CAAc,IAAd,EAAoBrN,SAApB,CAAP;AACD,QAFD;;AAIAuZ,sBAAeF,QAAf,GAA0B,YAAY;AACpC,eAAOC,QAAQD,QAAR,EAAP;AACD,QAFD;;AAIA,cAAOE,cAAP;AACD,OAVM,CAUJ,UAAUxC,MAAV,EAAkB;AACnB,WAAInS,OAAO,EAAX;AACA,YAAK,IAAIrB,IAAI,CAAb,EAAgBA,IAAI,KAAK0T,IAAzB,EAA+B1T,GAA/B,EAAoC;AAClCqB,aAAKnB,IAAL,CAAU,KAAKoU,OAAL,CAAatU,CAAb,EAAgBwT,MAAhB,IAA0B,CAA1B,GAA8B,CAAxC;AACD;AACD,cAAOnS,IAAP;AACD,OAhBM;AADD,MA3FW;AA8GnBqS,WAAM;AACJ1a,WAAK,eAAY;AACf,cAAO,KAAKsb,OAAL,CAAatS,MAApB;AACD,OAHG;AAIJ/I,WAAK,aAAUhF,CAAV,EAAa;AAChB,WAAIuR,QAAQ,IAAZ;;AAEA,WAAI8F,WAAW,KAAKgJ,OAAL,CAAazK,KAAb,CAAmB,CAAnB,CAAf;AACA,YAAKzO,MAAL,CAAYnH,CAAZ,EAAe,KAAK0f,OAApB;AACA,YAAKU,OAAL,CAAa,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB;AAC3B,YAAIkW,SAAS1K,CAAT,KAAe0K,SAAS1K,CAAT,EAAYxL,CAAZ,CAAnB,EAAmC;AACjCoQ,eAAM8O,OAAN,CAAc1T,CAAd,EAAiBxL,CAAjB,IAAsBkW,SAAS1K,CAAT,EAAYxL,CAAZ,CAAtB;AACD;AACF,QAJD;AAKD;AAdG,MA9Ga;AA8HnBue,cAAS;AACP3a,WAAK,eAAY;AACf,cAAO,KAAKsb,OAAL,CAAa,CAAb,EAAgBtS,MAAvB;AACD,OAHM;AAIP/I,WAAK,aAAUhF,CAAV,EAAa;AAChB,WAAIuR,QAAQ,IAAZ;;AAEA,WAAI8F,WAAW,KAAKgJ,OAAL,CAAazK,KAAb,CAAmB,CAAnB,CAAf;AACA,YAAKzO,MAAL,CAAY,KAAKsY,IAAjB,EAAuBzf,CAAvB;AACA,YAAKogB,OAAL,CAAa,UAAUzT,CAAV,EAAaxL,CAAb,EAAgB;AAC3B,YAAIkW,SAAS1K,CAAT,KAAe0K,SAAS1K,CAAT,EAAYxL,CAAZ,CAAnB,EAAmC;AACjCoQ,eAAM8O,OAAN,CAAc1T,CAAd,EAAiBxL,CAAjB,IAAsBkW,SAAS1K,CAAT,EAAYxL,CAAZ,CAAtB;AACD;AACF,QAJD;AAKD;AAdM;AA9HU,KAArB;;AAgJA,WAAOkC,MAAP;AACD,IAjVY,EAAb;;AAmVA3C,UAAOD,OAAP,GAAiB4C,MAAjB;;AAED;AAAO,GA3wKG;AA4wKV;AACA,OAAO,UAAS3C,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIsC,QAAQzB,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAZ;;AAEA,OAAIuC,WAAY,YAAY;AAC1B,aAASA,QAAT,GAAoB;AAClB,SAAI6e,WAAWzZ,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,CAA7B,GAA+C4B,UAAU,CAAV,CAA9D;AACA,SAAIT,OAAOS,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,IAA7B,GAAoC4B,UAAU,CAAV,CAA/C;AACA,SAAII,WAAWJ,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,KAA7B,GAAqC4B,UAAU,CAAV,CAApD;;AAEA/F,qBAAgB,IAAhB,EAAsBW,QAAtB;;AAEA,UAAKwd,MAAL,GAAcqB,QAAd;AACA,SAAI,CAACnR,MAAMC,OAAN,CAAc,KAAK6P,MAAnB,CAAL,EAAiC;AAC/B,WAAKA,MAAL,GAAc,CAAC,KAAKA,MAAN,CAAd;AACD;AACD,UAAKsB,KAAL,GAAana,IAAb;AACA,UAAKa,QAAL,GAAgBA,QAAhB;;AAEA,UAAKuZ,SAAL,GAAiB,IAAIhf,KAAJ,CAAU,CAAV,EAAa,KAAKyd,MAAL,CAAY7S,MAAZ,GAAqB,CAAlC,CAAjB;;AAEA,UAAKqU,WAAL,GAAmB;AACjB/I,UAAI,CADa;AAEjBF,YAAM,KAAKyH,MAAL,CAAY7S,MAAZ,GAAqB,CAFV;AAGjBsU,aAAO,CAAE,EAAE,KAAKzB,MAAL,CAAY7S,MAAZ,GAAqB,CAAvB,CAHQ;AAIjBD,cAAQjL,KAAK+I,EAAL,CAAQ,KAAKgV,MAAL,CAAY7S,MAApB;AAJS,MAAnB;;AAOA,SAAI,KAAKnF,QAAL,KAAkB,KAAtB,EAA6B;AAC3B,WAAK2X,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACD,MAFD,MAEO;AACL,WAAK3B,IAAL,GAAY,KAAK+B,KAAjB;AACD;AACF;;AAED3gB,iBAAayB,QAAb,EAAuB;AACrB2E,WAAM;AACJhD,WAAK,eAAY;AACf,cAAO,KAAKmd,KAAZ;AACD,OAHG;AAIJld,WAAK,aAAU+C,IAAV,EAAgB;AACnB,WAAI,EAAEA,SAAS,IAAT,IAAiBA,SAAS,MAA1B,IAAoCA,SAAS,QAA7C,IAAyDA,SAAS,OAApE,CAAJ,EAAkF;AAChF3H,gBAAQmV,KAAR,CAAc,+DAAd;AACA;AACD;AACD,YAAK2M,KAAL,GAAana,IAAb;AACA,WAAI,KAAKa,QAAT,EAAmB;AACjB,aAAK2X,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACD;AACF;AAbG,MADe;AAgBrBhgB,YAAO;AACL6C,WAAK,eAAY;AACf,cAAO,KAAK6b,MAAL,CAAY,KAAKhY,QAAjB,CAAP;AACD,OAHI;AAIL5D,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK4I,QAAL,GAAgB,KAAKgY,MAAL,CAAY5P,OAAZ,CAAoBhR,CAApB,CAAhB;AACD;AANI,MAhBc;AAwBrBsiB,YAAO;AACLpgB,aAAO,SAASogB,KAAT,GAAiB;AACtB,WAAI,KAAK1Z,QAAL,KAAkB,KAAtB,EAA6B;AAC3B,aAAK2X,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACA,eAAO,KAAK3B,IAAL,EAAP;AACD;AACD,YAAK3X,QAAL,GAAgB,KAAKwZ,WAAL,CAAiB,KAAKF,KAAtB,CAAhB;AACA,YAAK3B,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACA,cAAO,KAAKhgB,KAAZ;AACD;AATI,MAxBc;AAmCrBmX,SAAI;AACFnX,aAAO,SAASmX,EAAT,GAAc;AACnB,YAAKzQ,QAAL;AACA,YAAKA,QAAL,IAAiB,KAAKgY,MAAL,CAAY7S,MAA7B;AACA,cAAO,KAAK7L,KAAZ;AACD;AALC,MAnCiB;AA0CrBiX,WAAM;AACJjX,aAAO,SAASiX,IAAT,GAAgB;AACrB,YAAKvQ,QAAL;AACA,WAAI,KAAKA,QAAL,GAAgB,CAApB,EAAuB;AACrB,aAAKA,QAAL,GAAgB,CAAC,KAAKA,QAAL,GAAgB,KAAKgY,MAAL,CAAY7S,MAA7B,IAAuC,KAAK6S,MAAL,CAAY7S,MAAnE;AACD;AACD,cAAO,KAAK7L,KAAZ;AACD;AAPG,MA1Ce;AAmDrB4L,aAAQ;AACN5L,aAAO,SAAS4L,MAAT,GAAkB;AACvB,YAAKlF,QAAL,GAAgB/F,KAAK+I,EAAL,CAAQ,CAAR,EAAW,KAAKgV,MAAL,CAAY7S,MAAvB,CAAhB;AACA,cAAO,KAAK7L,KAAZ;AACD;AAJK,MAnDa;AAyDrBmgB,YAAO;AACLngB,aAAO,SAASmgB,KAAT,GAAiB;AACtB,YAAKF,SAAL,CAAevX,GAAf,GAAqB,KAAKgW,MAAL,CAAY7S,MAAjC;AACA,YAAKoU,SAAL,CAAejgB,KAAf,GAAuB,KAAK0G,QAA5B;AACA,YAAKA,QAAL,GAAgB,KAAKuZ,SAAL,CAAe5B,IAAf,EAAhB;AACA,cAAO,KAAKre,KAAZ;AACD;;AAED;;;;;;AARK;AAzDc,KAAvB;;AA0EA,WAAOkB,QAAP;AACD,IA1Gc,EAAf;;AA4GA1C,UAAOD,OAAP,GAAiB2C,QAAjB;;AAED;AAAO,GAz4KG;AA04KV;AACA,OAAO,UAAS1C,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIsC,QAAS,YAAY;AACrB,aAASA,KAAT,GAAiB;AACb,SAAIwG,MAAMnB,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA3C;AACA,SAAIoC,MAAMpC,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA3C;AACA,SAAItG,QAAQsG,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA7C;AACA,SAAImP,YAAYnP,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAAjD;AACA,SAAI+Z,OAAO/Z,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,KAA7B,GAAqC4B,UAAU,CAAV,CAAhD;;AAEA/F,qBAAgB,IAAhB,EAAsBU,KAAtB;;AAEA,UAAKwG,GAAL,GAAWA,GAAX;AACA,UAAKiB,GAAL,GAAWA,GAAX;AACA,UAAK1I,KAAL,GAAaA,KAAb;AACA,UAAKyV,SAAL,GAAiBA,SAAjB;AACA,UAAK4K,IAAL,GAAYA,IAAZ;AACH;;AAED5gB,iBAAawB,KAAb,EAAoB;AAChBod,WAAM;AACFre,aAAO,SAASqe,IAAT,GAAgB;AACnB,YAAKre,KAAL,IAAcW,KAAKgL,IAAL,CAAU,CAAC,CAAD,GAAK,KAAK8J,SAApB,EAA+B,KAAKA,SAApC,CAAd;AACA,WAAI,KAAKzV,KAAL,GAAa,KAAK0I,GAAtB,EAA2B;AACvB,YAAI,KAAK2X,IAAT,EAAe;AACX,cAAKrgB,KAAL,GAAa,KAAKyH,GAAlB;AACH,SAFD,MAEO;AACH,cAAKzH,KAAL,GAAa,KAAK0I,GAAL,GAAW,KAAK+M,SAA7B;AACH;AACJ;;AAED,WAAI,KAAKzV,KAAL,GAAa,KAAKyH,GAAtB,EAA2B;AACvB,YAAI,KAAK4Y,IAAT,EAAe;AACX,cAAKrgB,KAAL,GAAa,KAAK0I,GAAlB;AACH,SAFD,MAEO;AACH,cAAK1I,KAAL,GAAa,KAAKyH,GAAL,GAAW,KAAKgO,SAA7B;AACH;AACJ;AACD,cAAO,KAAKzV,KAAZ;AACH;AAnBC;AADU,KAApB;;AAwBA,WAAOiB,KAAP;AACH,IA1CW,EAAZ;;AA4CAzC,UAAOD,OAAP,GAAiB0C,KAAjB;;AAED;AAAO,GAr8KG;AAs8KV;AACA,OAAO,UAASzC,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIsC,QAAQzB,gBAAgBb,oBAAoB,EAApB,CAAhB,CAAZ;;AAEA,OAAIoC,UAAW,YAAY;AACvB,aAASA,OAAT,GAAmB;AACf,SAAI0G,MAAMnB,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA3C;AACA,SAAIoC,MAAMpC,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,EAA7B,GAAkC4B,UAAU,CAAV,CAA5C;AACA,SAAIT,OAAOS,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,IAA7B,GAAoC4B,UAAU,CAAV,CAA/C;AACA,SAAItG,QAAQsG,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,KAA7B,GAAqC4B,UAAU,CAAV,CAAjD;;AAEA/F,qBAAgB,IAAhB,EAAsBQ,OAAtB;;AAEA,UAAK0G,GAAL,GAAWA,GAAX;AACA,UAAKiB,GAAL,GAAWA,GAAX;AACA,UAAK1I,KAAL,GAAaA,KAAb;AACA,UAAK6F,IAAL,GAAYA,IAAZ;AACA,UAAKoa,SAAL,GAAiB,IAAIhf,KAAJ,CAAU,KAAKwG,GAAf,EAAoB,KAAKiB,GAAzB,CAAjB;AACA,SAAI,KAAK1I,KAAL,KAAe,KAAnB,EAA0B;AACtB,WAAKqe,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACH,MAFD,MAEO;AACH,WAAK3B,IAAL,GAAY,KAAK+B,KAAjB;AACH;AACJ;;AAED3gB,iBAAasB,OAAb,EAAsB;AAClB8E,WAAM;AACF/C,WAAK,aAAU+C,IAAV,EAAgB;AACjB,WAAI,EAAEA,SAAS,IAAT,IAAiBA,SAAS,MAA1B,IAAoCA,SAAS,QAA7C,IAAyDA,SAAS,OAApE,CAAJ,EAAkF;AAC9E3H,gBAAQmV,KAAR,CAAc,+DAAd;AACA;AACH;AACD,YAAK2M,KAAL,GAAana,IAAb;AACA,WAAI,KAAK7F,KAAT,EAAgB;AACZ,aAAKqe,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACH;AACJ,OAVC;AAWFnd,WAAK,eAAY;AACb,cAAO,KAAKmd,KAAZ;AACH;AAbC,MADY;AAgBlBI,YAAO;AACHpgB,aAAO,SAASogB,KAAT,GAAiB;AACpB,WAAI,KAAKpgB,KAAL,KAAe,KAAnB,EAA0B;AACtB,aAAKqe,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACA,eAAO,KAAK3B,IAAL,EAAP;AACH;AACD,YAAK6B,WAAL,GAAmB;AACf/I,YAAI,KAAK1P,GADM;AAEfwP,cAAM,KAAKvO,GAFI;AAGfyX,eAAO,CAAE,CAACxf,KAAK6L,OAAL,CAAa,KAAK/E,GAAlB,EAAuB,KAAKiB,GAA5B,CAHK;AAIfkD,gBAAQjL,KAAK+I,EAAL,CAAQ,KAAKjC,GAAb,EAAkB,KAAKiB,GAAvB;AAJO,QAAnB;AAMA,YAAK1I,KAAL,GAAa,KAAKkgB,WAAL,CAAiB,KAAKF,KAAtB,CAAb;AACA,YAAK3B,IAAL,GAAY,KAAK,KAAK2B,KAAV,CAAZ;AACA,cAAO,KAAKhgB,KAAZ;AACH;AAfE,MAhBW;AAiClBmX,SAAI;AACAnX,aAAO,SAASmX,EAAT,GAAc;AACjB,YAAKnX,KAAL;AACA,WAAI,KAAKA,KAAL,IAAc,KAAK0I,GAAvB,EAA4B;AACxB,aAAK1I,KAAL,GAAa,KAAKyH,GAAlB;AACH;AACD,cAAO,KAAKzH,KAAZ;AACH;AAPD,MAjCc;AA0ClBiX,WAAM;AACFjX,aAAO,SAASiX,IAAT,GAAgB;AACnB,YAAKjX,KAAL;AACA,WAAI,KAAKA,KAAL,GAAa,KAAKyH,GAAtB,EAA2B;AACvB,aAAKzH,KAAL,GAAa,KAAK0I,GAAlB;AACH;AACD,cAAO,KAAK1I,KAAZ;AACH;AAPC,MA1CY;AAmDlB4L,aAAQ;AACJ5L,aAAO,SAAS4L,MAAT,GAAkB;AACrB,YAAK5L,KAAL,GAAaW,KAAK+I,EAAL,CAAQ,KAAKjC,GAAb,EAAkB,KAAKiB,GAAvB,CAAb;AACA,cAAO,KAAK1I,KAAZ;AACH;AAJG,MAnDU;AAyDlBmgB,YAAO;AACHngB,aAAO,SAASmgB,KAAT,GAAiB;AACpB,YAAKF,SAAL,CAAexY,GAAf,GAAqB,KAAKA,GAA1B;AACA,YAAKwY,SAAL,CAAevX,GAAf,GAAqB,KAAKA,GAA1B;AACA,YAAKuX,SAAL,CAAejgB,KAAf,GAAuB,KAAKA,KAA5B;AACA,YAAKA,KAAL,GAAa,KAAKigB,SAAL,CAAe5B,IAAf,EAAb;AACA,cAAO,KAAKre,KAAZ;AACH;AAPE;AAzDW,KAAtB;;AAoEA,WAAOe,OAAP;AACH,IA1Fa,EAAd;;AA4FAvC,UAAOD,OAAP,GAAiBwC,OAAjB;;AAED;AAAO,GAnjLG;AAojLV;AACA,OAAO,UAASvC,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;;AAEA,OAAI6G,cAAcnG,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAlB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAIiF,QAAS,UAAU6B,UAAV,EAAsB;AACjC,aAAS7B,KAAT,GAAiB;AACfrD,qBAAgB,IAAhB,EAAsBqD,KAAtB;;AAEA,SAAI8B,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN,CADO;AAEb+V,aAAO,GAFM;AAGb9V,YAAM,UAHO;AAIbya,gBAAU,CAAC,CAAC,GAAD,EAAM,GAAN,CAAD,EAAa,CAAC,IAAD,EAAO,IAAP,CAAb,EAA2B,CAAC,GAAD,EAAM,GAAN,CAA3B,EAAuC,CAAC,IAAD,EAAO,IAAP,CAAvC,EAAqD,CAAC,GAAD,EAAM,GAAN,CAArD,EAAiE,CAAC,IAAD,EAAO,IAAP,CAAjE,EAA+E,CAAC,GAAD,EAAM,GAAN,CAA/E,EAA2F,CAAC,IAAD,EAAO,IAAP,CAA3F;AAJG,MAAf;;AAOAlc,UAAKlE,OAAO0E,cAAP,CAAsBhB,MAAMtD,SAA5B,CAAL,EAA6C,aAA7C,EAA4D,IAA5D,EAAkEvB,IAAlE,CAAuE,IAAvE,EAA6EuH,SAA7E,EAAwFZ,OAAxF,EAAiGC,QAAjG;;AAEA,UAAK3F,KAAL,GAAa;AACXiG,SAAG,IAAIV,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,GAAlB,CADQ;AAEXc,SAAG,IAAId,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,GAAlB;AAFQ,MAAb;;AAKA;;;AAGA,UAAKM,IAAL,GAAY,KAAKW,QAAL,CAAcX,IAA1B;;AAEA,UAAKa,QAAL,GAAgB;AACdT,SAAG,IAAIT,YAAYmB,MAAhB,CAAuB,KAAKd,IAA5B,EAAkC,YAAlC,EAAgD,CAAC,CAAD,EAAI,KAAKe,KAAT,CAAhD,EAAiE,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAjE,CADW;AAEdR,SAAG,IAAIb,YAAYmB,MAAhB,CAAuB,KAAKd,IAA5B,EAAkC,UAAlC,EAA8C,CAAC,CAAD,EAAI,KAAKe,KAAT,CAA9C,EAA+D,CAAC,KAAKC,MAAN,EAAc,CAAd,CAA/D;AAFW,MAAhB;AAIA,UAAKH,QAAL,CAAcT,CAAd,CAAgBjG,KAAhB,GAAwB,KAAKA,KAAL,CAAWiG,CAAX,CAAaa,UAArC;AACA,UAAKJ,QAAL,CAAcL,CAAd,CAAgBrG,KAAhB,GAAwB,KAAKA,KAAL,CAAWqG,CAAX,CAAaS,UAArC;;AAEA;;;AAGA,UAAKwZ,QAAL,GAAgB,KAAK9Z,QAAL,CAAc8Z,QAA9B;;AAEA;;;AAGA,UAAK3E,KAAL,GAAa,KAAKnV,QAAL,CAAcmV,KAA3B;;AAEA;;;AAGA,UAAK4E,MAAL,GAAc,EAAd;;AAEA,UAAKxZ,IAAL;;AAEA,UAAKyZ,eAAL;AACA,UAAKxZ,MAAL;AACD;;AAEDlC,cAAUlB,KAAV,EAAiB6B,UAAjB;;AAEAhG,iBAAamE,KAAb,EAAoB;AAClBqD,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKC,IAAL,GAAY7B,IAAIJ,MAAJ,CAAW,QAAX,CAAZ;;AAEA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKF,IAA9B;;AAEA;AACA,YAAKuZ,eAAL,GAAuB,EAAvB;;AAEA,YAAK,IAAI5W,IAAI,CAAb,EAAgBA,IAAI,KAAKyW,QAAL,CAAczU,MAAlC,EAA0ChC,GAA1C,EAA+C;AAC7C,YAAI6W,iBAAiBrb,IAAIJ,MAAJ,CAAW,QAAX,CAArB;;AAEA,aAAKkC,OAAL,CAAaC,WAAb,CAAyBsZ,cAAzB;;AAEA,aAAKD,eAAL,CAAqB1W,IAArB,CAA0B2W,cAA1B;AACD;AACF;AAjBa,MADE;AAoBlBrZ,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAKE,aAAL,GAAqBC,KAAKC,GAAL,CAAS,KAAKb,KAAd,EAAqB,KAAKC,MAA1B,CAArB;;AAEA,YAAKa,UAAL,GAAkB;AAChBC,aAAK,CAAE,EAAE,KAAKJ,aAAL,GAAqB,GAAvB,CAAF,GAAgC,CAAhC,GAAoC,CADzB,EAAlB;AAEA,YAAKG,UAAL,CAAgB7J,EAAhB,GAAqB,KAAK6J,UAAL,CAAgBC,GAAhB,GAAsB,CAA3C;;AAEA,YAAKT,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKhB,KAAL,GAAa,CAA1C;AACA,YAAKM,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKf,MAAL,GAAc,CAA3C;AACA,YAAKK,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAKF,UAAL,CAAgBC,GAA5C;;AAEA,YAAK,IAAIkC,IAAI,CAAb,EAAgBA,IAAI,KAAKyW,QAAL,CAAczU,MAAlC,EAA0ChC,GAA1C,EAA+C;AAC7C,YAAI6W,iBAAiB,KAAKD,eAAL,CAAqB5W,CAArB,CAArB;AACA,YAAI8W,UAAU,KAAKL,QAAL,CAAczW,CAAd,CAAd;AACA6W,uBAAe9Y,YAAf,CAA4B,IAA5B,EAAkC+Y,QAAQ,CAAR,IAAa,KAAK/Z,KAApD;AACA8Z,uBAAe9Y,YAAf,CAA4B,IAA5B,EAAkC+Y,QAAQ,CAAR,IAAa,KAAK9Z,MAApD;AACA6Z,uBAAe9Y,YAAf,CAA4B,GAA5B,EAAiC,KAAKL,aAAL,GAAqB,EAArB,GAA0B,CAA3D;AACAmZ,uBAAe9Y,YAAf,CAA4B,cAA5B,EAA4C,GAA5C;AACD;;AAED,YAAKlB,QAAL,CAAcT,CAAd,CAAgBqB,MAAhB,CAAuB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAAvB,EAAwC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAxC;AACA,YAAKH,QAAL,CAAcL,CAAd,CAAgBiB,MAAhB,CAAuB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAAvB,EAAwC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAxC;;AAEA;AACA;AACA;AACA,YAAK2Z,eAAL;AACA,YAAKxZ,MAAL;AACD;AA9BY,MApBG;AAoDlBa,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;;AAE/B,YAAKV,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,YAAK4E,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYK,WAA3C;;AAEA,YAAK,IAAIoH,IAAI,CAAb,EAAgBA,IAAI,KAAKyW,QAAL,CAAczU,MAAlC,EAA0ChC,GAA1C,EAA+C;AAC7C,YAAI6W,iBAAiB,KAAKD,eAAL,CAAqB5W,CAArB,CAArB;AACA6W,uBAAe9Y,YAAf,CAA4B,MAA5B,EAAoC,KAAKxF,MAAL,CAAYC,MAAhD;AACAqe,uBAAe9Y,YAAf,CAA4B,QAA5B,EAAsC,KAAKxF,MAAL,CAAYC,MAAlD;AACD;AACF;AAXa,MApDE;AAiElB2E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,YAAKiB,eAAL,GAAuB;AACrBhC,WAAG,KAAKjG,KAAL,CAAWiG,CAAX,CAAaa,UAAb,GAA0B,KAAKF,KADb;AAErBP,WAAG,KAAKQ,MAAL,GAAc,KAAK7G,KAAL,CAAWqG,CAAX,CAAaS,UAAb,GAA0B,KAAKD;AAF3B,QAAvB;;AAKA,YAAKK,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKK,eAAL,CAAqBhC,CAAlD;AACA,YAAKiB,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKK,eAAL,CAAqB5B,CAAlD;AACD;AATK,MAjEU;AA4ElB6B,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKxB,QAAL,CAAcT,CAAd,CAAgBkC,MAAhB,GAAyB,KAAKC,KAA9B;AACA,YAAK1B,QAAL,CAAcL,CAAd,CAAgB8B,MAAhB,GAAyB,KAAKC,KAA9B;AACA,YAAKC,IAAL;AACD;AALI,MA5EW;AAmFlBA,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKL,OAAT,EAAkB;AAChB,aAAKtB,QAAL,CAAcT,CAAd,CAAgBqC,MAAhB,CAAuB,KAAKF,KAA5B;AACA,aAAK1B,QAAL,CAAcL,CAAd,CAAgBiC,MAAhB,CAAuB,KAAKF,KAA5B;AACA;AACA;AACA;AACA;AACA,aAAKoY,eAAL;AACA,aAAKhY,IAAL,CAAU,QAAV,EAAoB,KAAK+X,MAAzB;AACA,aAAKvZ,MAAL;AACD;AACF;AAbG,MAnFY;AAkGlByB,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,YAAKzB,MAAL;AACD;AAHM,MAlGS;AAuGlBF,iBAAY;AACVjE,WAAK,eAAY;AACf,cAAO;AACLoD,WAAG,KAAKjG,KAAL,CAAWiG,CAAX,CAAaa,UADX;AAELT,WAAG,KAAKrG,KAAL,CAAWqG,CAAX,CAAaS;AAFX,QAAP;AAID;AANS,MAvGM;AA+GlB0Z,sBAAiB;AACfxgB,aAAO,SAASwgB,eAAT,GAA2B;AAChC,WAAInR,QAAQ,IAAZ;;AAEA,YAAKrP,KAAL,CAAWiG,CAAX,CAAasC,YAAb,CAA0B,KAAK7B,QAAL,CAAcT,CAAd,CAAgBjG,KAA1C;AACA,YAAKA,KAAL,CAAWqG,CAAX,CAAakC,YAAb,CAA0B,KAAK7B,QAAL,CAAcL,CAAd,CAAgBrG,KAA1C;AACA,YAAKugB,MAAL,GAAc,EAAd;AACA,YAAKD,QAAL,CAAc3B,OAAd,CAAsB,UAAUiC,CAAV,EAAa/W,CAAb,EAAgB;AACpC,YAAI6C,WAAW/L,KAAK+L,QAAL,CAAckU,EAAE,CAAF,IAAOvR,MAAMzI,KAA3B,EAAkCga,EAAE,CAAF,IAAOvR,MAAMxI,MAA/C,EAAuDwI,MAAM3I,QAAN,CAAeT,CAAf,CAAiBjG,KAAjB,GAAyBqP,MAAMzI,KAAtF,EAA6F,CAAC,IAAIyI,MAAM3I,QAAN,CAAeL,CAAf,CAAiBrG,KAAtB,IAA+BqP,MAAMxI,MAAlI,CAAf;AACA,YAAI6P,QAAQ/V,KAAKqJ,IAAL,CAAU,IAAI0C,YAAY2C,MAAMsM,KAAN,GAActM,MAAMzI,KAAhC,CAAd,EAAsD,CAAtD,EAAyD,CAAzD,CAAZ;AACAyI,cAAMkR,MAAN,CAAaxW,IAAb,CAAkB2M,KAAlB;AACArH,cAAMoR,eAAN,CAAsB5W,CAAtB,EAAyBjC,YAAzB,CAAsC,cAAtC,EAAsD8O,KAAtD;AACD,QALD;AAMD;AAbc,MA/GC;AA8HlBmK,iBAAY;;AAEV;;;;;;AAMA7gB,aAAO,SAAS6gB,UAAT,CAAoB5a,CAApB,EAAuBI,CAAvB,EAA0B;AAC/B,WAAIya,WAAW;AACb7a,WAAGA,IAAI,KAAKW,KADC;AAEbP,WAAGA,IAAI,KAAKQ;AAFC,QAAf;AAIA,YAAKH,QAAL,CAAcT,CAAd,CAAgBqC,MAAhB,CAAuBwY,QAAvB;AACA,YAAKpa,QAAL,CAAcL,CAAd,CAAgBiC,MAAhB,CAAuBwY,QAAvB;AACA,YAAKN,eAAL;AACA,YAAKhY,IAAL,CAAU,QAAV,EAAoB,KAAK+X,MAAzB;AACA,YAAKvZ,MAAL;AACD;AAlBS,MA9HM;AAkJlB+Z,kBAAa;;AAEX;;;;;;;AAOA/gB,aAAO,SAAS+gB,WAAT,CAAqBvI,KAArB,EAA4BvS,CAA5B,EAA+BI,CAA/B,EAAkC;;AAEvC,YAAKia,QAAL,CAAc9H,KAAd,IAAuB,CAACvS,CAAD,EAAII,CAAJ,CAAvB;AACA,YAAKoa,eAAL,CAAqBjI,KAArB,EAA4B5Q,YAA5B,CAAyC,IAAzC,EAA+C3B,IAAI,KAAKW,KAAxD;AACA,YAAK6Z,eAAL,CAAqBjI,KAArB,EAA4B5Q,YAA5B,CAAyC,IAAzC,EAA+CvB,IAAI,KAAKQ,MAAxD;AACA,YAAK2Z,eAAL;AACA,YAAKhY,IAAL,CAAU,QAAV,EAAoB,KAAK+X,MAAzB;AACA,YAAKvZ,MAAL;AACD;;AAED;;;;;;;AAnBW;AAlJK,KAApB;;AA+KA,WAAOpD,KAAP;AACD,IAvOW,CAuOT0B,SAvOS,CAAZ;;AAyOA9G,UAAOD,OAAP,GAAiBqF,KAAjB;;AAED;AAAO,GA51LG;AA61LV;AACA,OAAO,UAASpF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI0G,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAIkF,OAAQ,UAAU4B,UAAV,EAAsB;AAChC,aAAS5B,IAAT,GAAgB;AACdtD,qBAAgB,IAAhB,EAAsBsD,IAAtB;;AAEA,SAAI6B,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,EAAL;AADO,MAAf;;AAIAxB,UAAKlE,OAAO0E,cAAP,CAAsBf,KAAKvD,SAA3B,CAAL,EAA4C,aAA5C,EAA2D,IAA3D,EAAiEvB,IAAjE,CAAsE,IAAtE,EAA4EuH,SAA5E,EAAuFZ,OAAvF,EAAgGC,QAAhG;;AAEA,UAAKqb,OAAL,GAAe,IAAf;;AAEA,UAAKja,IAAL;;AAEA;;AAEA,UAAKka,WAAL,GAAmB,KAAK3Y,MAAL,CAAYpG,IAAZ,CAAiB,IAAjB,CAAnB;AACA;;AAEA,SAAI9C,OAAO8hB,sBAAX,EAAmC;AACjC,WAAKC,mBAAL,GAA2B/hB,OAAO3B,gBAAP,CAAwB,mBAAxB,EAA6C,KAAKwjB,WAAlD,EAA+D,KAA/D,CAA3B;AACD,MAFD,MAEO;AACL,WAAKD,OAAL,GAAe,KAAf;AACA,WAAKnZ,cAAL;AACD;;AAED;;;;;AAKD;;AAED/C,cAAUjB,IAAV,EAAgB4B,UAAhB;;AAEAhG,iBAAaoE,IAAb,EAAmB;AACjBoD,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKma,KAAL,GAAa/b,IAAIJ,MAAJ,CAAW,MAAX,CAAb;AACA,YAAKoc,OAAL,GAAehc,IAAIJ,MAAJ,CAAW,QAAX,CAAf;AACA,YAAKqc,OAAL,GAAejc,IAAIJ,MAAJ,CAAW,QAAX,CAAf;AACA,YAAKsc,OAAL,GAAelc,IAAIJ,MAAJ,CAAW,QAAX,CAAf;;AAEA,YAAKuc,IAAL,GAAYnc,IAAIJ,MAAJ,CAAW,MAAX,CAAZ;AACA,YAAKwc,IAAL,GAAYpc,IAAIJ,MAAJ,CAAW,MAAX,CAAZ;AACA,YAAKyc,IAAL,GAAYrc,IAAIJ,MAAJ,CAAW,MAAX,CAAZ;;AAEA,YAAK0c,KAAL,GAAatc,IAAIJ,MAAJ,CAAW,MAAX,CAAb;AACA,YAAK2c,KAAL,GAAavc,IAAIJ,MAAJ,CAAW,MAAX,CAAb;AACA,YAAK4c,KAAL,GAAaxc,IAAIJ,MAAJ,CAAW,MAAX,CAAb;;AAEA,YAAKuc,IAAL,CAAU5Z,YAAV,CAAuB,SAAvB,EAAkC,KAAlC;AACA,YAAK6Z,IAAL,CAAU7Z,YAAV,CAAuB,SAAvB,EAAkC,KAAlC;AACA,YAAK8Z,IAAL,CAAU9Z,YAAV,CAAuB,SAAvB,EAAkC,KAAlC;AACA,YAAK+Z,KAAL,CAAW/Z,YAAX,CAAwB,SAAxB,EAAmC,KAAnC;AACA,YAAKga,KAAL,CAAWha,YAAX,CAAwB,SAAxB,EAAmC,KAAnC;AACA,YAAKia,KAAL,CAAWja,YAAX,CAAwB,SAAxB,EAAmC,KAAnC;;AAEA,YAAKyZ,OAAL,CAAazZ,YAAb,CAA0B,IAA1B,EAAgC,KAAKhB,KAAL,GAAa,CAAb,GAAiB,EAAjD;AACA,YAAKya,OAAL,CAAazZ,YAAb,CAA0B,IAA1B,EAAgC,KAAKf,MAAL,GAAc,CAAd,GAAkB,CAAlD;AACA,YAAKwa,OAAL,CAAazZ,YAAb,CAA0B,GAA1B,EAA+B,KAAKf,MAAL,GAAc,EAA7C;AACA,YAAKwa,OAAL,CAAazZ,YAAb,CAA0B,SAA1B,EAAqC,KAArC;;AAEA,YAAK0Z,OAAL,CAAa1Z,YAAb,CAA0B,IAA1B,EAAgC,KAAKhB,KAAL,GAAa,CAAb,GAAiB,EAAjD;AACA,YAAK0a,OAAL,CAAa1Z,YAAb,CAA0B,IAA1B,EAAgC,KAAKf,MAAL,GAAc,CAAd,GAAkB,CAAlD;AACA,YAAKya,OAAL,CAAa1Z,YAAb,CAA0B,GAA1B,EAA+B,KAAKf,MAAL,GAAc,EAA7C;AACA,YAAKya,OAAL,CAAa1Z,YAAb,CAA0B,SAA1B,EAAqC,KAArC;;AAEA,YAAK2Z,OAAL,CAAa3Z,YAAb,CAA0B,IAA1B,EAAgC,KAAKhB,KAAL,GAAa,CAAb,GAAiB,EAAjD;AACA,YAAK2a,OAAL,CAAa3Z,YAAb,CAA0B,IAA1B,EAAgC,KAAKf,MAAL,GAAc,CAAd,GAAkB,CAAlD;AACA,YAAK0a,OAAL,CAAa3Z,YAAb,CAA0B,GAA1B,EAA+B,KAAKf,MAAL,GAAc,EAA7C;AACA,YAAK0a,OAAL,CAAa3Z,YAAb,CAA0B,SAA1B,EAAqC,KAArC;;AAEA,YAAK4Z,IAAL,CAAU5Z,YAAV,CAAuB,cAAvB,EAAuCJ,KAAKqN,KAAL,CAAW,KAAKhO,MAAL,GAAc,EAAzB,CAAvC;AACA,YAAK4a,IAAL,CAAU7Z,YAAV,CAAuB,cAAvB,EAAuCJ,KAAKqN,KAAL,CAAW,KAAKhO,MAAL,GAAc,EAAzB,CAAvC;AACA,YAAK6a,IAAL,CAAU9Z,YAAV,CAAuB,cAAvB,EAAuCJ,KAAKqN,KAAL,CAAW,KAAKhO,MAAL,GAAc,EAAzB,CAAvC;;AAEA,YAAK2a,IAAL,CAAU5Z,YAAV,CAAuB,MAAvB,EAA+B,MAA/B;AACA,YAAK6Z,IAAL,CAAU7Z,YAAV,CAAuB,MAAvB,EAA+B,MAA/B;AACA,YAAK8Z,IAAL,CAAU9Z,YAAV,CAAuB,MAAvB,EAA+B,MAA/B;;AAEA,YAAK+Z,KAAL,CAAW/Z,YAAX,CAAwB,cAAxB,EAAwCJ,KAAKqN,KAAL,CAAW,KAAKhO,MAAL,GAAc,EAAzB,CAAxC;AACA,YAAK+a,KAAL,CAAWha,YAAX,CAAwB,cAAxB,EAAwCJ,KAAKqN,KAAL,CAAW,KAAKhO,MAAL,GAAc,EAAzB,CAAxC;AACA,YAAKgb,KAAL,CAAWja,YAAX,CAAwB,cAAxB,EAAwCJ,KAAKqN,KAAL,CAAW,KAAKhO,MAAL,GAAc,EAAzB,CAAxC;;AAEA,YAAK8a,KAAL,CAAW/Z,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;AACA,YAAKga,KAAL,CAAWha,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;AACA,YAAKia,KAAL,CAAWja,YAAX,CAAwB,MAAxB,EAAgC,MAAhC;;AAEA,YAAKwZ,KAAL,CAAWxZ,YAAX,CAAwB,GAAxB,EAA6B,KAAKhB,KAAL,GAAa,CAA1C;AACA,YAAKwa,KAAL,CAAWxZ,YAAX,CAAwB,GAAxB,EAA6B,KAAKf,MAAL,GAAc,CAAd,GAAkB,CAA/C;AACA,YAAKua,KAAL,CAAWxZ,YAAX,CAAwB,WAAxB,EAAqC,MAArC;AACA,YAAKwZ,KAAL,CAAWxZ,YAAX,CAAwB,aAAxB,EAAuC,MAAvC;AACA,YAAKwZ,KAAL,CAAWxZ,YAAX,CAAwB,gBAAxB,EAA0C,KAA1C;AACA,YAAKwZ,KAAL,CAAWxZ,YAAX,CAAwB,SAAxB,EAAmC,KAAnC;AACA,YAAKwZ,KAAL,CAAWxZ,YAAX,CAAwB,aAAxB,EAAuC,QAAvC;AACA,YAAKwZ,KAAL,CAAWU,WAAX,GAAyB,MAAzB;;AAEA,YAAK3a,OAAL,CAAaC,WAAb,CAAyB,KAAKia,OAA9B;AACA,YAAKla,OAAL,CAAaC,WAAb,CAAyB,KAAKka,OAA9B;AACA,YAAKna,OAAL,CAAaC,WAAb,CAAyB,KAAKma,OAA9B;;AAEA,YAAKpa,OAAL,CAAaC,WAAb,CAAyB,KAAKoa,IAA9B;AACA,YAAKra,OAAL,CAAaC,WAAb,CAAyB,KAAKqa,IAA9B;AACA,YAAKta,OAAL,CAAaC,WAAb,CAAyB,KAAKsa,IAA9B;;AAEA,YAAKva,OAAL,CAAaC,WAAb,CAAyB,KAAKua,KAA9B;AACA,YAAKxa,OAAL,CAAaC,WAAb,CAAyB,KAAKwa,KAA9B;AACA,YAAKza,OAAL,CAAaC,WAAb,CAAyB,KAAKya,KAA9B;;AAEA,YAAK1a,OAAL,CAAaC,WAAb,CAAyB,KAAKga,KAA9B;AACD;AA5Ea,MADC;AA+EjBvZ,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;;AAE/B,WAAI,KAAKmZ,OAAT,EAAkB;AAChB,aAAK7Z,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYC,MAAjD;AACA,aAAKgf,OAAL,CAAazZ,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYG,KAA9C;AACA,aAAK+e,OAAL,CAAa1Z,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYG,KAA9C;AACA,aAAKgf,OAAL,CAAa3Z,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYG,KAA9C;AACA,aAAK8e,OAAL,CAAazZ,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYG,KAAhD;AACA,aAAK+e,OAAL,CAAa1Z,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYG,KAAhD;AACA,aAAKgf,OAAL,CAAa3Z,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYG,KAAhD;AACA,aAAKif,IAAL,CAAU5Z,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYG,KAA7C;AACA,aAAKkf,IAAL,CAAU7Z,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYG,KAA7C;AACA,aAAKmf,IAAL,CAAU9Z,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYG,KAA7C;AACA,aAAKof,KAAL,CAAW/Z,YAAX,CAAwB,QAAxB,EAAkC,KAAKxF,MAAL,CAAYG,KAA9C;AACA,aAAKqf,KAAL,CAAWha,YAAX,CAAwB,QAAxB,EAAkC,KAAKxF,MAAL,CAAYG,KAA9C;AACA,aAAKsf,KAAL,CAAWja,YAAX,CAAwB,QAAxB,EAAkC,KAAKxF,MAAL,CAAYG,KAA9C;AACA,aAAK6e,KAAL,CAAWxZ,YAAX,CAAwB,MAAxB,EAAgC,KAAKxF,MAAL,CAAYG,KAA5C;AACD,QAfD,MAeO;AACL,aAAK4E,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,aAAK+e,OAAL,CAAazZ,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYK,WAA9C;AACA,aAAK6e,OAAL,CAAa1Z,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYK,WAA9C;AACA,aAAK8e,OAAL,CAAa3Z,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYK,WAA9C;AACA,aAAK4e,OAAL,CAAazZ,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYK,WAAhD;AACA,aAAK6e,OAAL,CAAa1Z,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYK,WAAhD;AACA,aAAK8e,OAAL,CAAa3Z,YAAb,CAA0B,QAA1B,EAAoC,KAAKxF,MAAL,CAAYK,WAAhD;AACA,aAAK+e,IAAL,CAAU5Z,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYK,WAA7C;AACA,aAAKgf,IAAL,CAAU7Z,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYK,WAA7C;AACA,aAAKif,IAAL,CAAU9Z,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYK,WAA7C;AACA,aAAKkf,KAAL,CAAW/Z,YAAX,CAAwB,QAAxB,EAAkC,KAAKxF,MAAL,CAAYK,WAA9C;AACA,aAAKmf,KAAL,CAAWha,YAAX,CAAwB,QAAxB,EAAkC,KAAKxF,MAAL,CAAYK,WAA9C;AACA,aAAKof,KAAL,CAAWja,YAAX,CAAwB,QAAxB,EAAkC,KAAKxF,MAAL,CAAYK,WAA9C;AACA,aAAK2e,KAAL,CAAWxZ,YAAX,CAAwB,MAAxB,EAAgC,KAAKxF,MAAL,CAAYK,WAA5C;AACD;AACF;AAlCa,MA/EC;AAmHjB6F,aAAQ;AACNtI,aAAO,SAASsI,MAAT,CAAgBxK,CAAhB,EAAmB;AACxB,WAAI,KAAKkjB,OAAT,EAAkB;;AAEhB,YAAI3a,IAAIvI,EAAEikB,IAAV;AACA,YAAI9b,IAAInI,EAAEkkB,KAAV;AACA,YAAIC,IAAInkB,EAAEokB,KAAV;;AAEA;AACAjc,YAAItF,KAAKuJ,KAAL,CAAWjE,CAAX,EAAc,CAAC,EAAf,EAAmB,EAAnB,EAAuB,CAAvB,EAA0B,CAA1B,CAAJ;AACAI,YAAI1F,KAAKuJ,KAAL,CAAW7D,CAAX,EAAc,CAAC,EAAf,EAAmB,EAAnB,EAAuB,CAAvB,EAA0B,CAA1B,CAAJ;AACA4b,YAAIthB,KAAKuJ,KAAL,CAAW+X,CAAX,EAAc,CAAd,EAAiB,GAAjB,EAAsB,CAAtB,EAAyB,CAAzB,CAAJ;;AAEA,YAAInH,eAAe;AACjB9c,gBAAOwJ,KAAKqD,EAAL,GAAU,GADA;AAEjB1B,cAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAWjE,CAAX,EAAc,CAAd,EAAiB,GAAjB,EAAsBuB,KAAKqD,EAAL,GAAU,GAAhC,EAAqCrD,KAAKqD,EAAL,GAAU,GAA/C,CAAV,EAA+DrD,KAAKqD,EAAL,GAAU,GAAzE,EAA8ErD,KAAKqD,EAAL,GAAU,GAAxF;AAFY,SAAnB;AAIA,YAAIkQ,gBAAgB;AAClB/c,gBAAOwJ,KAAKqD,EAAL,GAAU,GADC;AAElB1B,cAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAWjE,CAAX,EAAc,GAAd,EAAmB,CAAnB,EAAsBuB,KAAKqD,EAAL,GAAU,GAAhC,EAAqCrD,KAAKqD,EAAL,GAAU,GAA/C,CAAV,EAA+DrD,KAAKqD,EAAL,GAAU,GAAzE,EAA8ErD,KAAKqD,EAAL,GAAU,GAAxF;AAFa,SAApB;;AAKA,YAAImQ,aAAa3V,IAAIyD,GAAJ,CAAQ,KAAKuY,OAAL,CAAac,EAAb,CAAgBC,OAAhB,CAAwBpiB,KAAhC,EAAuC,KAAKqhB,OAAL,CAAagB,EAAb,CAAgBD,OAAhB,CAAwBpiB,KAA/D,EAAsE,KAAKqhB,OAAL,CAAa5W,CAAb,CAAe2X,OAAf,CAAuBpiB,KAA7F,EAAoG8a,aAAa9c,KAAjH,EAAwH8c,aAAa3R,GAArI,CAAjB;AACA,YAAI8R,cAAc5V,IAAIyD,GAAJ,CAAQ,KAAKuY,OAAL,CAAac,EAAb,CAAgBC,OAAhB,CAAwBpiB,KAAhC,EAAuC,KAAKqhB,OAAL,CAAagB,EAAb,CAAgBD,OAAhB,CAAwBpiB,KAA/D,EAAsE,KAAKqhB,OAAL,CAAa5W,CAAb,CAAe2X,OAAf,CAAuBpiB,KAA7F,EAAoG+a,cAAc/c,KAAlH,EAAyH+c,cAAc5R,GAAvI,CAAlB;;AAEA,aAAKqY,IAAL,CAAU5Z,YAAV,CAAuB,GAAvB,EAA4BoT,UAA5B;AACA,aAAK2G,KAAL,CAAW/Z,YAAX,CAAwB,GAAxB,EAA6BqT,WAA7B;;AAEAH,uBAAe;AACb9c,gBAAOwJ,KAAKqD,EAAL,GAAU,GADJ;AAEb1B,cAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAW7D,CAAX,EAAc,CAAd,EAAiB,GAAjB,EAAsBmB,KAAKqD,EAAL,GAAU,GAAhC,EAAqCrD,KAAKqD,EAAL,GAAU,GAA/C,CAAV,EAA+DrD,KAAKqD,EAAL,GAAU,GAAzE,EAA8ErD,KAAKqD,EAAL,GAAU,GAAxF;AAFQ,SAAf;AAIAkQ,wBAAgB;AACd/c,gBAAOwJ,KAAKqD,EAAL,GAAU,GADH;AAEd1B,cAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAW7D,CAAX,EAAc,GAAd,EAAmB,CAAnB,EAAsBmB,KAAKqD,EAAL,GAAU,GAAhC,EAAqCrD,KAAKqD,EAAL,GAAU,GAA/C,CAAV,EAA+DrD,KAAKqD,EAAL,GAAU,GAAzE,EAA8ErD,KAAKqD,EAAL,GAAU,GAAxF;AAFS,SAAhB;;AAKAmQ,qBAAa3V,IAAIyD,GAAJ,CAAQ,KAAKwY,OAAL,CAAaa,EAAb,CAAgBC,OAAhB,CAAwBpiB,KAAhC,EAAuC,KAAKshB,OAAL,CAAae,EAAb,CAAgBD,OAAhB,CAAwBpiB,KAA/D,EAAsE,KAAKshB,OAAL,CAAa7W,CAAb,CAAe2X,OAAf,CAAuBpiB,KAA7F,EAAoG8a,aAAa9c,KAAjH,EAAwH8c,aAAa3R,GAArI,CAAb;AACA8R,sBAAc5V,IAAIyD,GAAJ,CAAQ,KAAKwY,OAAL,CAAaa,EAAb,CAAgBC,OAAhB,CAAwBpiB,KAAhC,EAAuC,KAAKshB,OAAL,CAAae,EAAb,CAAgBD,OAAhB,CAAwBpiB,KAA/D,EAAsE,KAAKshB,OAAL,CAAa7W,CAAb,CAAe2X,OAAf,CAAuBpiB,KAA7F,EAAoG+a,cAAc/c,KAAlH,EAAyH+c,cAAc5R,GAAvI,CAAd;;AAEA,aAAKsY,IAAL,CAAU7Z,YAAV,CAAuB,GAAvB,EAA4BoT,UAA5B;AACA,aAAK4G,KAAL,CAAWha,YAAX,CAAwB,GAAxB,EAA6BqT,WAA7B;;AAEAH,uBAAe;AACb9c,gBAAOwJ,KAAKqD,EAAL,GAAU,GADJ;AAEb1B,cAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAW+X,CAAX,EAAc,CAAd,EAAiB,GAAjB,EAAsBza,KAAKqD,EAAL,GAAU,GAAhC,EAAqCrD,KAAKqD,EAAL,GAAU,GAA/C,CAAV,EAA+DrD,KAAKqD,EAAL,GAAU,GAAzE,EAA8ErD,KAAKqD,EAAL,GAAU,GAAxF;AAFQ,SAAf;AAIAkQ,wBAAgB;AACd/c,gBAAOwJ,KAAKqD,EAAL,GAAU,GADH;AAEd1B,cAAKxI,KAAKqJ,IAAL,CAAUrJ,KAAKuJ,KAAL,CAAW+X,CAAX,EAAc,GAAd,EAAmB,CAAnB,EAAsBza,KAAKqD,EAAL,GAAU,GAAhC,EAAqCrD,KAAKqD,EAAL,GAAU,GAA/C,CAAV,EAA+DrD,KAAKqD,EAAL,GAAU,GAAzE,EAA8ErD,KAAKqD,EAAL,GAAU,GAAxF;AAFS,SAAhB;;AAKAmQ,qBAAa3V,IAAIyD,GAAJ,CAAQ,KAAKyY,OAAL,CAAaY,EAAb,CAAgBC,OAAhB,CAAwBpiB,KAAhC,EAAuC,KAAKuhB,OAAL,CAAac,EAAb,CAAgBD,OAAhB,CAAwBpiB,KAA/D,EAAsE,KAAKuhB,OAAL,CAAa9W,CAAb,CAAe2X,OAAf,CAAuBpiB,KAA7F,EAAoG8a,aAAa9c,KAAjH,EAAwH8c,aAAa3R,GAArI,CAAb;AACA8R,sBAAc5V,IAAIyD,GAAJ,CAAQ,KAAKyY,OAAL,CAAaY,EAAb,CAAgBC,OAAhB,CAAwBpiB,KAAhC,EAAuC,KAAKuhB,OAAL,CAAac,EAAb,CAAgBD,OAAhB,CAAwBpiB,KAA/D,EAAsE,KAAKuhB,OAAL,CAAa9W,CAAb,CAAe2X,OAAf,CAAuBpiB,KAA7F,EAAoG+a,cAAc/c,KAAlH,EAAyH+c,cAAc5R,GAAvI,CAAd;;AAEA,aAAKuY,IAAL,CAAU9Z,YAAV,CAAuB,GAAvB,EAA4BoT,UAA5B;AACA,aAAK6G,KAAL,CAAWja,YAAX,CAAwB,GAAxB,EAA6BqT,WAA7B;;AAEA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAKzS,IAAL,CAAU,QAAV,EAAoB;AAClBvC,YAAGA,CADe;AAElBI,YAAGA,CAFe;AAGlB4b,YAAGA;AAHe,SAApB;AAKD;AACF;AAhFK,MAnHS;AAqMjB/Z,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,WAAI9I,OAAO8hB,sBAAX,EAAmC;AACjC,aAAKhJ,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD;AACF;AALI,MArMU;AA4MjBA,aAAQ;;AAEN;;;;;AAKArV,WAAK,eAAY;AACf,cAAO,KAAKme,OAAZ;AACD,OATK;AAUNle,WAAK,aAAUjF,EAAV,EAAc;AACjB,YAAKmjB,OAAL,GAAenjB,EAAf;AACA,YAAKgK,cAAL;AACD;AAbK,MA5MS;AA2NjBwJ,oBAAe;AACbrR,aAAO,SAASqR,aAAT,GAAyB;AAC9BjS,cAAOuR,mBAAP,CAA2B,mBAA3B,EAAgD,KAAKsQ,WAArD,EAAkE,KAAlE;AACD;AAHY;AA3NE,KAAnB;;AAkOA,WAAOpd,IAAP;AACD,IAxQU,CAwQRyB,SAxQQ,CAAX;;AA0QA9G,UAAOD,OAAP,GAAiBsF,IAAjB;;AAED;AAAO,GAjpMG;AAkpMV;AACA,OAAO,UAASrF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI6M,MAAM3O,oBAAoB,CAApB,CAAV;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI2jB,iBAAiB3jB,oBAAoB,EAApB,CAArB;AACA,OAAI6O,QAAQ7O,oBAAoB,CAApB,CAAZ;;AAEA,OAAI4jB,eAAgB,UAAUC,eAAV,EAA2B;AAC7C,aAASD,YAAT,GAAwB;AACtB,SAAIlT,QAAQ,IAAZ;;AAEA9O,qBAAgB,IAAhB,EAAsBgiB,YAAtB;;AAEA,SAAI7c,UAAU,CAAC,OAAD,EAAU,OAAV,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,EAAN,CADO;AAEbuQ,mBAAa,UAFA;AAGbtQ,YAAM,UAHO;AAIbqE,aAAO,CAAC,CAAD,EAAI,CAAJ,CAJM;AAKbvB,YAAM,CALO;AAMb3I,aAAO,CANM;AAObyiB,eAAS;AAPI,MAAf;;AAUAre,UAAKlE,OAAO0E,cAAP,CAAsB2d,aAAajiB,SAAnC,CAAL,EAAoD,aAApD,EAAmE,IAAnE,EAAyEvB,IAAzE,CAA8E,IAA9E,EAAoFuH,SAApF,EAA+FZ,OAA/F,EAAwGC,QAAxG;;AAEA;;AAEA,SAAI,CAAC6H,MAAM+B,MAAX,EAAmB;;AAEjB,WAAKrH,KAAL,GAAa,YAAY;AACvBmH,aAAMqT,WAAN,CAAkBnH,WAAlB,GAAgC,IAAhC;AACAlM,aAAMqT,WAAN,CAAkBC,aAAlB,GAAkC;AAChCnK,eAAOnJ,MAAMmJ,KADmB;AAEhCxY,eAAOqP,MAAMrP;AAFmB,QAAlC;AAIAqP,aAAM4H,IAAN;AACA5H,aAAMqT,WAAN,CAAkBhE,MAAlB,CAAyBrP,MAAMmJ,KAA/B,IAAwCnJ,MAAMrP,KAA9C;AACD,OARD;AASA,WAAKmH,OAAL,CAAa1J,gBAAb,CAA8B,WAA9B,EAA2C,UAAUyS,CAAV,EAAa;AACtD,WAAIb,MAAMqT,WAAN,CAAkBnH,WAAtB,EAAmC;AACjC,YAAI,CAAClM,MAAMc,MAAX,EAAmB;AACjBd,eAAMc,MAAN,GAAe7C,IAAI8C,YAAJ,CAAiBf,MAAMlI,OAAvB,CAAf;AACD;AACDkI,cAAMjH,KAAN,GAAckF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmBb,MAAMc,MAAzB,CAAd;AACAd,cAAM4H,IAAN;AACA5H,cAAMqT,WAAN,CAAkBhE,MAAlB,CAAyBrP,MAAMmJ,KAA/B,IAAwCnJ,MAAMrP,KAA9C;AACA,YAAIqP,MAAMqT,WAAN,CAAkBC,aAAtB,EAAqC;AACnC,aAAIjW,WAAWlF,KAAKkO,GAAL,CAASrG,MAAMqT,WAAN,CAAkBC,aAAlB,CAAgCnK,KAAhC,GAAwCnJ,MAAMmJ,KAAvD,CAAf;AACA,aAAI9L,WAAW,CAAf,EAAkB;AAChB,cAAIR,MAAM1E,KAAKC,GAAL,CAAS4H,MAAMqT,WAAN,CAAkBC,aAAlB,CAAgCnK,KAAzC,EAAgDnJ,MAAMmJ,KAAtD,CAAV;AACA,cAAIrM,OAAO3E,KAAKkB,GAAL,CAAS2G,MAAMqT,WAAN,CAAkBC,aAAlB,CAAgCnK,KAAzC,EAAgDnJ,MAAMmJ,KAAtD,CAAX;AACA,cAAIoK,WAAWvT,MAAMqT,WAAN,CAAkBG,OAAlB,CAA0B3W,GAA1B,EAA+BlM,KAA9C;AACA,cAAI8iB,YAAYzT,MAAMqT,WAAN,CAAkBG,OAAlB,CAA0B1W,IAA1B,EAAgCnM,KAAhD;AACA,eAAK,IAAI6J,IAAIqC,GAAb,EAAkBrC,IAAIsC,IAAtB,EAA4BtC,GAA5B,EAAiC;AAC/BwF,iBAAMqT,WAAN,CAAkBG,OAAlB,CAA0BhZ,CAA1B,EAA6B7J,KAA7B,GAAqCW,KAAK8K,MAAL,CAAY,CAAC5B,IAAIqC,GAAL,IAAYQ,QAAxB,EAAkCkW,QAAlC,EAA4CE,SAA5C,CAArC;AACD;AACF;AACF;;AAEDzT,cAAMqT,WAAN,CAAkBC,aAAlB,GAAkC;AAChCnK,gBAAOnJ,MAAMmJ,KADmB;AAEhCxY,gBAAOqP,MAAMrP;AAFmB,SAAlC;AAID;AACF,OA1BD;;AA4BA,WAAKqI,IAAL,GAAY,YAAY,CAAE,CAA1B;AACA,WAAKlB,OAAL,CAAa1J,gBAAb,CAA8B,WAA9B,EAA2C,UAAUyS,CAAV,EAAa;AACtD,WAAIb,MAAMqT,WAAN,CAAkBnH,WAAtB,EAAmC;AACjC,YAAI,CAAClM,MAAMc,MAAX,EAAmB;AACjBd,eAAMc,MAAN,GAAe7C,IAAI8C,YAAJ,CAAiBf,MAAMlI,OAAvB,CAAf;AACD;AACDkI,cAAMjH,KAAN,GAAckF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmBb,MAAMc,MAAzB,CAAd;AACAd,cAAM0T,KAAN;AACA1T,cAAMqT,WAAN,CAAkBhE,MAAlB,CAAyBrP,MAAMmJ,KAA/B,IAAwCnJ,MAAMrP,KAA9C;AACD;AACF,OATD;;AAWA,WAAKyI,OAAL,GAAe,YAAY;AACzB4G,aAAMqT,WAAN,CAAkBnH,WAAlB,GAAgC,KAAhC;AACAlM,aAAMqT,WAAN,CAAkBC,aAAlB,GAAkC,KAAlC;AACD,OAHD;AAIA,WAAKxb,OAAL,CAAa1J,gBAAb,CAA8B,SAA9B,EAAyC,YAAY;AACnD,WAAI4R,MAAMqT,WAAN,CAAkBnH,WAAtB,EAAmC;AACjClM,cAAM8H,EAAN;AACA9H,cAAMqT,WAAN,CAAkBC,aAAlB,GAAkC,KAAlC;AACAtT,cAAMqT,WAAN,CAAkBhE,MAAlB,CAAyBrP,MAAMmJ,KAA/B,IAAwCnJ,MAAMrP,KAA9C;AACD;AACF,OAND;AAOA,WAAKmH,OAAL,CAAa1J,gBAAb,CAA8B,UAA9B,EAA0C,YAAY;AACpD,WAAI4R,MAAMqT,WAAN,CAAkBnH,WAAtB,EAAmC;AACjClM,cAAM8H,EAAN;AACA9H,cAAMqT,WAAN,CAAkBhE,MAAlB,CAAyBrP,MAAMmJ,KAA/B,IAAwCnJ,MAAMrP,KAA9C;AACD;AACF,OALD;AAMD;;AAED,UAAKgjB,WAAL;AACD;;AAEDle,cAAUyd,YAAV,EAAwBC,eAAxB;;AAEA/iB,iBAAa8iB,YAAb,EAA2B;AACzBS,kBAAa;AACXhjB,aAAO,SAASgjB,WAAT,GAAuB;;AAE5B;;AAEA,YAAK3M,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2B,CAA3B;AACA,YAAKyO,GAAL,CAASzO,YAAT,CAAsB,WAAtB,EAAmC,gBAAnC;AACA,YAAKyO,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B,CAA5B,EAN4B,CAMI;AAChC,YAAKyO,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B,CAA5B;AACA,YAAKyO,GAAL,CAASzO,YAAT,CAAsB,OAAtB,EAA+B,KAAKhB,KAApC;AACA,YAAKyP,GAAL,CAASzO,YAAT,CAAsB,QAAtB,EAAgC,KAAKf,MAArC;;AAEA,YAAKyP,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,CAA/B;AACA,YAAK0O,OAAL,CAAa1O,YAAb,CAA0B,WAA1B,EAAuC,gBAAvC;AACA,YAAK0O,OAAL,CAAa1O,YAAb,CAA0B,IAA1B,EAAgC,CAAhC,EAb4B,CAaQ;AACpC,YAAK0O,OAAL,CAAa1O,YAAb,CAA0B,IAA1B,EAAgC,CAAhC;AACA,YAAK0O,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC,KAAKhB,KAAxC;AACA,YAAK0P,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC,KAAKf,MAAzC;AACD;AAlBU;AADY,KAA3B;;AAuBA,WAAO0b,YAAP;AACD,IAzHkB,CAyHhBD,cAzHgB,CAAnB;;AA2HA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;;;;;;AAMA,OAAIxe,cAAe,UAAU2B,UAAV,EAAsB;AACvC,aAAS3B,WAAT,GAAuB;AACrBvD,qBAAgB,IAAhB,EAAsBuD,WAAtB;;AAEA,SAAI4B,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN,CADO;AAEbqd,uBAAiB,CAFJ;AAGbxb,WAAK,CAHQ;AAIbiB,WAAK,CAJQ;AAKbC,YAAM,CALO;AAMb+V,cAAQ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB;AANK,MAAf;;AASAta,UAAKlE,OAAO0E,cAAP,CAAsBd,YAAYxD,SAAlC,CAAL,EAAmD,aAAnD,EAAkE,IAAlE,EAAwEvB,IAAxE,CAA6E,IAA7E,EAAmFuH,SAAnF,EAA8FZ,OAA9F,EAAuGC,QAAvG;;AAEA,UAAKud,gBAAL,GAAwB,KAAK1c,QAAL,CAAcyc,eAAtC;AACA,UAAKvE,MAAL,GAAc,KAAKlY,QAAL,CAAckY,MAA5B;;AAEA,UAAKmE,OAAL,GAAe,EAAf;;AAEA,UAAKtH,WAAL,GAAmB,KAAnB;;AAEA,UAAKxU,IAAL;AACD;;AAEDjC,cAAUhB,WAAV,EAAuB2B,UAAvB;;AAEAhG,iBAAaqE,WAAb,EAA0B;AACxBoL,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAK/H,OAAL,GAAe3J,SAAS6U,aAAT,CAAuB,KAAvB,CAAf;AACA,YAAK1N,MAAL,CAAYyC,WAAZ,CAAwB,KAAKD,OAA7B;AACD;AAJS,MADY;AAOxBF,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,WAAIQ,MAAM,KAAKjB,QAAL,CAAciB,GAAxB;AACA,WAAIiB,MAAM,KAAKlC,QAAL,CAAckC,GAAxB;AACA,WAAIC,OAAO,KAAKnC,QAAL,CAAcmC,IAAzB;;AAEA,WAAI,KAAKka,OAAL,CAAahX,MAAjB,EAAyB;AACvBpE,cAAM,KAAKob,OAAL,CAAa,CAAb,EAAgBpb,GAAtB;AACAiB,cAAM,KAAKma,OAAL,CAAa,CAAb,EAAgBna,GAAtB;AACAC,eAAO,KAAKka,OAAL,CAAa,CAAb,EAAgBla,IAAvB;AACD;;AAED,YAAKka,OAAL,GAAe,EAAf;;AAEA,YAAK,IAAIhZ,IAAI,CAAb,EAAgBA,IAAI,KAAKqZ,gBAAzB,EAA2CrZ,GAA3C,EAAgD;AAC9C,YAAIwO,YAAY7a,SAAS6U,aAAT,CAAuB,MAAvB,CAAhB;;AAEA,YAAI8Q,SAAS,IAAIZ,YAAJ,CAAiBlK,SAAjB,EAA4B;AACvCnO,gBAAO,CAACzC,GAAD,EAAMiB,GAAN,CADgC;AAEvCC,eAAMA,IAFiC;AAGvC9C,eAAM,UAHiC;AAIvCsQ,sBAAa,UAJ0B;AAKvCnW,gBAAO,KAAK0e,MAAL,CAAY7U,CAAZ,CALgC;AAMvC4Y,kBAAS,KAN8B;AAOvCnU,oBAAW,IAP4B,EAA5B,EAOQ,KAAKhG,MAAL,CAAYpG,IAAZ,CAAiB,IAAjB,EAAuB2H,CAAvB,CAPR,CAAb;AAQAsZ,eAAOT,WAAP,GAAqB,IAArB;;AAEAS,eAAO3K,KAAP,GAAe3O,CAAf;AACA,YAAI2D,MAAM+B,MAAV,EAAkB;AAChB4T,gBAAO9M,GAAP,CAAWmC,KAAX,GAAmB3O,CAAnB;AACAsZ,gBAAO7M,OAAP,CAAekC,KAAf,GAAuB3O,CAAvB;AACAsZ,gBAAOnT,QAAP,GAAkBmT,OAAOtT,OAAP,GAAiBsT,OAAOpT,UAAP,GAAoB,YAAY,CAAE,CAArE;AACAoT,gBAAOjb,KAAP,GAAeib,OAAO9a,IAAP,GAAc8a,OAAO1a,OAAP,GAAiB,YAAY,CAAE,CAA5D;AACA0a,gBAAO1T,QAAP,GAAkB0T,OAAOzT,YAAP,GAAsByT,OAAOxT,eAAP,GAAyB,YAAY,CAAE,CAA/E;AACAwT,gBAAO3V,KAAP,GAAe2V,OAAOtS,SAAP,GAAmBsS,OAAOrS,YAAP,GAAsB,YAAY,CAAE,CAAtE;AACD;;AAED,aAAK+R,OAAL,CAAa9Y,IAAb,CAAkBoZ,MAAlB;AACA,aAAKhc,OAAL,CAAaC,WAAb,CAAyBiR,SAAzB;AACD;AACD,WAAI7K,MAAM+B,MAAV,EAAkB;AAChB,aAAK2M,iBAAL;AACD;AACF;AA5Ca,MAPQ;AAqDxBrU,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAK,IAAIgC,IAAI,CAAb,EAAgBA,IAAI,KAAKgZ,OAAL,CAAahX,MAAjC,EAAyChC,GAAzC,EAA8C;AAC5C,aAAKgZ,OAAL,CAAahZ,CAAb,EAAgBzH,MAAhB,GAAyB,KAAKA,MAA9B;AACA,aAAKygB,OAAL,CAAahZ,CAAb,EAAgBhC,cAAhB;AACD;AACF;AANa,MArDQ;AA6DxBR,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI+b,cAAc,KAAKxc,KAAL,GAAa,KAAKic,OAAL,CAAahX,MAA5C;AACA,WAAIwX,eAAe,KAAKxc,MAAxB;;AAEA,YAAK,IAAIgD,IAAI,CAAb,EAAgBA,IAAI,KAAKgZ,OAAL,CAAahX,MAAjC,EAAyChC,GAAzC,EAA8C;AAC5C,aAAKgZ,OAAL,CAAahZ,CAAb,EAAgBvC,MAAhB,CAAuB8b,WAAvB,EAAoCC,YAApC;AACA,aAAKR,OAAL,CAAahZ,CAAb,EAAgBmZ,WAAhB;AACD;AACF;AAVY,MA7DS;AAyExB1a,aAAQ;AACNtI,aAAO,SAASsI,MAAT,CAAgBkQ,KAAhB,EAAuBxY,KAAvB,EAA8B;AACnC,YAAKwI,IAAL,CAAU,QAAV,EAAoB;AAClBgQ,eAAOA,KADW;AAElBxY,eAAOA;AAFW,QAApB;AAID;AANK,MAzEgB;AAiFxBkc,wBAAmB;AACjBlc,aAAO,SAASkc,iBAAT,GAA6B;AAClC,WAAI7M,QAAQ,IAAZ;;AAEA,YAAKW,QAAL,GAAgB,KAAKH,OAAL,GAAe,KAAKE,UAAL,GAAkB,YAAY,CAAE,CAA/D;AACA,YAAK7H,KAAL,GAAa,KAAKG,IAAL,GAAY,KAAKI,OAAL,GAAe,YAAY,CAAE,CAAtD;AACA,YAAKgH,QAAL,GAAgB,KAAKC,YAAL,GAAoB,KAAKC,eAAL,GAAuB,YAAY,CAAE,CAAzE;AACA,YAAKnC,KAAL,GAAa,KAAKqD,SAAL,GAAiB,KAAKC,YAAL,GAAoB,YAAY,CAAE,CAAhE;;AAEA,YAAK2L,cAAL,GAAsB,KAAtB;;AAEA,YAAKtV,OAAL,CAAa1J,gBAAb,CAA8B,YAA9B,EAA4C,UAAUyS,CAAV,EAAa;AACvD,YAAI/I,UAAU3J,SAASkf,gBAAT,CAA0BxM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBwK,OAA7C,EAAsDzM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmByK,OAAzE,CAAd;AACA,YAAIuG,SAAS9T,MAAMwT,OAAN,CAAc1b,QAAQqR,KAAtB,CAAb;AACA,YAAI,CAAC2K,OAAOhT,MAAZ,EAAoB;AAClBgT,gBAAOhT,MAAP,GAAgB7C,IAAI8C,YAAJ,CAAiB+S,OAAOhc,OAAxB,CAAhB;AACD;AACDgc,eAAO/a,KAAP,GAAekF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmBiT,OAAOhT,MAA1B,CAAf;AACAgT,eAAOlM,IAAP;AACA5H,cAAMoN,cAAN,GAAuBtV,QAAQqR,KAA/B;AACAtI,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QAXD;;AAaA,YAAKtJ,OAAL,CAAa1J,gBAAb,CAA8B,WAA9B,EAA2C,UAAUyS,CAAV,EAAa;AACtD,YAAI/I,UAAU3J,SAASkf,gBAAT,CAA0BxM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmBwK,OAA7C,EAAsDzM,EAAEiC,aAAF,CAAgB,CAAhB,EAAmByK,OAAzE,CAAd;AACA,YAAIuG,SAAS9T,MAAMwT,OAAN,CAAc1b,QAAQqR,KAAtB,CAAb;AACA,YAAI,CAAC2K,OAAOhT,MAAZ,EAAoB;AAClBgT,gBAAOhT,MAAP,GAAgB7C,IAAI8C,YAAJ,CAAiB+S,OAAOhc,OAAxB,CAAhB;AACD;AACDgc,eAAO/a,KAAP,GAAekF,IAAI+C,WAAJ,CAAgBH,CAAhB,EAAmBiT,OAAOhT,MAA1B,CAAf;AACA,YAAIhJ,QAAQqR,KAAR,KAAkBnJ,MAAMoN,cAA5B,EAA4C;AAC1C,aAAIpN,MAAMoN,cAAN,IAAwB,CAA5B,EAA+B;AAC7B,cAAI6G,aAAajU,MAAMwT,OAAN,CAAcxT,MAAMoN,cAApB,CAAjB;AACA6G,qBAAWnM,EAAX;AACD;AACDgM,gBAAOlM,IAAP;AACD,SAND,MAMO;AACLkM,gBAAOJ,KAAP;AACD;AACD1T,cAAMoN,cAAN,GAAuBtV,QAAQqR,KAA/B;AACAtI,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QAnBD;;AAqBA,YAAKtJ,OAAL,CAAa1J,gBAAb,CAA8B,UAA9B,EAA0C,UAAUyS,CAAV,EAAa;AACrD;AACA,YAAIiT,SAAS9T,MAAMwT,OAAN,CAAcxT,MAAMoN,cAApB,CAAb;AACA0G,eAAOhM,EAAP;AACA9H,cAAMkM,WAAN,GAAoB,KAApB;AACAlM,cAAMoN,cAAN,GAAuB,KAAvB;AACAvM,UAAEM,cAAF;AACAN,UAAEO,eAAF;AACD,QARD;AASD;AAtDgB,MAjFK;AAyIxBwS,sBAAiB;;AAEf;;;;;AAKApgB,WAAK,eAAY;AACf,cAAO,KAAKggB,OAAL,CAAahX,MAApB;AACD,OATc;AAUf/I,WAAK,aAAUhF,CAAV,EAAa;AAChB,WAAIA,MAAM,KAAK+kB,OAAL,CAAahX,MAAvB,EAA+B;AAC7B;AACD;AACD,YAAKgX,OAAL,CAAalE,OAAb,CAAqB,UAAUwE,MAAV,EAAkB;AACrCA,eAAOjS,OAAP;AACD,QAFD;AAGA,YAAKH,KAAL;AACA,YAAKmS,gBAAL,GAAwBplB,CAAxB;AACA,YAAKmJ,cAAL;AACD;AApBc,MAzIO;AA+JxBQ,UAAK;;AAEH;;;;;;AAMA5E,WAAK,eAAY;AACf,cAAO,KAAKggB,OAAL,CAAa,CAAb,EAAgBpb,GAAvB;AACD,OAVE;AAWH3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK+kB,OAAL,CAAalE,OAAb,CAAqB,UAAUwE,MAAV,EAAkB;AACrCA,eAAO1b,GAAP,GAAa3J,CAAb;AACD,QAFD;AAGD;AAfE,MA/JmB;AAgLxB4K,UAAK;;AAEH;;;;;;AAMA7F,WAAK,eAAY;AACf,cAAO,KAAKggB,OAAL,CAAa,CAAb,EAAgBna,GAAvB;AACD,OAVE;AAWH5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK+kB,OAAL,CAAalE,OAAb,CAAqB,UAAUwE,MAAV,EAAkB;AACrCA,eAAOza,GAAP,GAAa5K,CAAb;AACD,QAFD;AAGD;AAfE,MAhLmB;AAiMxB6K,WAAM;;AAEJ;;;;;;AAMA9F,WAAK,eAAY;AACf,cAAO,KAAKggB,OAAL,CAAa,CAAb,EAAgBla,IAAvB;AACD,OAVG;AAWJ7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK+kB,OAAL,CAAalE,OAAb,CAAqB,UAAUwE,MAAV,EAAkB;AACrCA,eAAOxa,IAAP,GAAc7K,CAAd;AACD,QAFD;AAGD;AAfG,MAjMkB;AAkNxBylB,gBAAW;;AAET;;;;;;;;;AASAvjB,aAAO,SAASujB,SAAT,CAAmB/K,KAAnB,EAA0BxY,KAA1B,EAAiC;AACtC,YAAK6iB,OAAL,CAAarK,KAAb,EAAoBxY,KAApB,GAA4BA,KAA5B;AACA,YAAKwI,IAAL,CAAU,QAAV,EAAoB;AAClBgQ,eAAOA,KADW;AAElBxY,eAAOA;AAFW,QAApB;AAID;AAjBQ,MAlNa;AAqOxBwjB,oBAAe;;AAEb;;;;;;;AAOAxjB,aAAO,SAASwjB,aAAT,CAAuB9E,MAAvB,EAA+B;AACpC,WAAIrP,QAAQ,IAAZ;;AAEA,YAAKqP,MAAL,GAAcA,MAAd;AACA,YAAKmE,OAAL,CAAalE,OAAb,CAAqB,UAAUwE,MAAV,EAAkBtZ,CAAlB,EAAqB;AACxCsZ,eAAOnjB,KAAP,GAAe0e,OAAO7U,IAAI6U,OAAO7S,MAAlB,CAAf;AACAwD,cAAM7G,IAAN,CAAW,QAAX,EAAqB;AACnBgQ,gBAAO3O,CADY;AAEnB7J,gBAAOmjB,OAAOnjB;AAFK,SAArB;AAID,QAND;AAOD;AApBY;AArOS,KAA1B;;AA6PA,WAAO8D,WAAP;AACD,IA3RiB,CA2RfwB,SA3Re,CAAlB;;AA6RA9G,UAAOD,OAAP,GAAiBuF,WAAjB;;AAED;AAAO,GArmNG;AAsmNV;AACA,OAAO,UAAStF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;;AAEA,OAAI6G,cAAcnG,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAlB;;AAEA,OAAI2jB,iBAAkB,UAAU7c,UAAV,EAAsB;AAC1C,aAAS6c,cAAT,CAAwB3U,IAAxB,EAA8BjI,OAA9B,EAAuCC,QAAvC,EAAiD;AAC/CpF,qBAAgB,IAAhB,EAAsB+hB,cAAtB;;AAEAle,UAAKlE,OAAO0E,cAAP,CAAsB0d,eAAehiB,SAArC,CAAL,EAAsD,aAAtD,EAAqE,IAArE,EAA2EvB,IAA3E,CAAgF,IAAhF,EAAsF4O,IAAtF,EAA4FjI,OAA5F,EAAqGC,QAArG;;AAEA,UAAKwQ,WAAL,GAAmB,KAAK3P,QAAL,CAAc2P,WAAjC;;AAEA;;AAEA,UAAKsM,OAAL,GAAe,KAAKjc,QAAL,CAAcic,OAA7B;;AAEA;AACA;AACA;;AAEA,UAAKrM,MAAL,GAAc,IAAI7Q,IAAJ,CAAS,KAAKiB,QAAL,CAAc0D,KAAd,CAAoB,CAApB,CAAT,EAAiC,KAAK1D,QAAL,CAAc0D,KAAd,CAAoB,CAApB,CAAjC,EAAyD,KAAK1D,QAAL,CAAcmC,IAAvE,EAA6E,KAAKnC,QAAL,CAAcxG,KAA3F,CAAd;;AAEA,UAAK+G,IAAL;;AAEA,UAAKL,QAAL,GAAgB,IAAIlB,YAAYmB,MAAhB,CAAuB,KAAKH,QAAL,CAAcX,IAArC,EAA2C,KAAKsQ,WAAhD,EAA6D,CAAC,CAAD,EAAI,KAAKvP,KAAT,CAA7D,EAA8E,CAAC,KAAKC,MAAN,EAAc,CAAd,CAA9E,CAAhB;AACA,UAAKH,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;;AAEA,UAAK9G,KAAL,GAAa,KAAKoW,MAAL,CAAYpW,KAAzB;;AAEA,UAAKwI,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;;AAED8E,cAAUwd,cAAV,EAA0B7c,UAA1B;;AAEAhG,iBAAa6iB,cAAb,EAA6B;AAC3Brb,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKoP,GAAL,GAAWhR,IAAIJ,MAAJ,CAAW,MAAX,CAAX;AACA,YAAKqR,OAAL,GAAejR,IAAIJ,MAAJ,CAAW,MAAX,CAAf;AACA,YAAKiC,IAAL,GAAY7B,IAAIJ,MAAJ,CAAW,QAAX,CAAZ;;AAEA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKiP,GAA9B;AACA,YAAKlP,OAAL,CAAaC,WAAb,CAAyB,KAAKkP,OAA9B;AACA,YAAKnP,OAAL,CAAaC,WAAb,CAAyB,KAAKF,IAA9B;;AAEA,YAAKG,aAAL;AACD;AAZa,MADW;AAe3BA,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI,CAAC,KAAKb,QAAL,CAAc2P,WAAnB,EAAgC;AAC9B,YAAI,KAAKvP,KAAL,GAAa,KAAKC,MAAtB,EAA8B;AAC5B,cAAKsP,WAAL,GAAmB,UAAnB;AACD,SAFD,MAEO;AACL,cAAKA,WAAL,GAAmB,YAAnB;AACD;AACF;;AAED,WAAIlQ,IAAIvB,SAAR;AAAA,WACI2B,IAAI3B,SADR;AAAA,WAEI6N,IAAI7N,SAFR;AAAA,WAGI8N,IAAI9N,SAHR;AAAA,WAII6R,YAAY7R,SAJhB;AAAA,WAKI8R,eAAe9R,SALnB;AAMA,YAAK+R,QAAL,GAAgB;AACdC,eAAO,CADO;AAEdjM,WAAG;AAFW,QAAhB;;AAKA,WAAI,KAAK0L,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKQ,SAAL,GAAiB,KAAK/P,KAAL,GAAa,CAA9B;AACAX,YAAI,KAAKW,KAAL,GAAa,CAAjB;AACAP,YAAI,CAAJ;AACAkM,YAAI,KAAKoE,SAAT;AACAnE,YAAI,KAAK3L,MAAT;AACA,aAAK4P,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,aAAKF,QAAL,CAAcC,KAAd,GAAsBlE,IAAI,KAAK1L,UAAL,GAAkB0L,CAA5C;AACA+D,oBAAY,eAAe,KAAKI,SAAL,GAAiB,CAAC,CAAlB,GAAsB,CAArC,GAAyC,KAArD;AACAH,uBAAejE,IAAI,CAAnB;AACD,QAVD,MAUO;AACL,aAAKoE,SAAL,GAAiB,KAAK9P,MAAL,GAAc,CAA/B;AACAZ,YAAI,CAAJ;AACAI,YAAI,KAAKQ,MAAL,GAAc,CAAlB;AACA0L,YAAI,KAAK3L,KAAT;AACA4L,YAAI,KAAKmE,SAAT;AACA,aAAKF,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,aAAKF,QAAL,CAAcC,KAAd,GAAsB,KAAK5P,UAAL,GAAkByL,CAAxC;AACAgE,oBAAY,iBAAiB,KAAKI,SAAL,GAAiB,CAAC,CAAlB,GAAsB,CAAvC,GAA2C,GAAvD;AACAH,uBAAehE,IAAI,CAAnB;AACD;;AAED,YAAK6D,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2B3B,CAA3B;AACA,YAAKoQ,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2BvB,CAA3B;AACA,YAAKgQ,GAAL,CAASzO,YAAT,CAAsB,WAAtB,EAAmC2O,SAAnC;AACA,YAAKF,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B4O,YAA5B,EA9C8B,CA8Ca;AAC3C,YAAKH,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B4O,YAA5B;AACA,YAAKH,GAAL,CAASzO,YAAT,CAAsB,OAAtB,EAA+B2K,CAA/B;AACA,YAAK8D,GAAL,CAASzO,YAAT,CAAsB,QAAtB,EAAgC4K,CAAhC;;AAEA,WAAI,KAAK2D,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKG,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B3B,CAA/B;AACA,aAAKqQ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,KAAK6O,QAAL,CAAcC,KAA7C;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC2K,CAAnC;AACA,aAAK+D,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC4K,IAAI,KAAKiE,QAAL,CAAcC,KAAtD;AACD,QALD,MAKO;AACL,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,CAA/B;AACA,aAAK0O,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+BvB,CAA/B;AACA,aAAKiQ,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC,KAAK6O,QAAL,CAAcC,KAAjD;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC4K,CAApC;AACD;AACD,YAAK8D,OAAL,CAAa1O,YAAb,CAA0B,WAA1B,EAAuC2O,SAAvC;AACA,YAAKD,OAAL,CAAa1O,YAAb,CAA0B,IAA1B,EAAgC4O,YAAhC;AACA,YAAKF,OAAL,CAAa1O,YAAb,CAA0B,IAA1B,EAAgC4O,YAAhC;;AAEA,WAAI,KAAKL,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKjP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B3B,CAA7B;AACA,aAAKiB,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACD,QAHD,MAGO;AACL,aAAKxP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACA,aAAKxP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6BvB,CAA7B;AACD;AACD,YAAKa,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAK6O,QAAL,CAAchM,CAA1C;;AAEA,WAAI,KAAK/D,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcY,MAAd,CAAqB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAArB,EAAsC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAtC;AACD;AACF;AA/EY,MAfY;AAgG3BgB,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;;AAE/B,YAAKwO,GAAL,CAASzO,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYE,IAA1C;AACA,YAAKgU,OAAL,CAAa1O,YAAb,CAA0B,MAA1B,EAAkC,KAAKxF,MAAL,CAAYC,MAA9C;AACA,YAAK6E,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYC,MAA3C;AACA,WAAI,CAAC,KAAKogB,OAAV,EAAmB;AACjB,aAAKvb,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,MAA/B;AACD;AACF;AATa,MAhGW;AA2G3BZ,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAKgB,OAAV,EAAmB;AACjB,aAAKyO,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,IAAnC;AACD;AACD,YAAKzP,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAK6O,QAAL,CAAchM,CAA1C;;AAEA,WAAI,KAAK0L,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKM,QAAL,CAAcC,KAAd,GAAsB,KAAKN,MAAL,CAAYtP,UAAZ,GAAyB,KAAKD,MAApD;AACA,aAAKK,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKf,MAAL,GAAc,KAAK4P,QAAL,CAAcC,KAAzD;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,KAAKf,MAAL,GAAc,KAAK4P,QAAL,CAAcC,KAA3D;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,QAA1B,EAAoC,KAAK6O,QAAL,CAAcC,KAAlD;AACD,QALD,MAKO;AACL,aAAKD,QAAL,CAAcC,KAAd,GAAsB,KAAKN,MAAL,CAAYtP,UAAZ,GAAyB,KAAKF,KAApD;AACA,aAAKM,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACA,aAAKJ,OAAL,CAAa1O,YAAb,CAA0B,GAA1B,EAA+B,CAA/B;AACA,aAAK0O,OAAL,CAAa1O,YAAb,CAA0B,OAA1B,EAAmC,KAAK6O,QAAL,CAAcC,KAAjD;AACD;AACF;AAlBK,MA3GmB;AA+H3BO,WAAM;AACJjX,aAAO,SAASiX,IAAT,GAAgB;AACrB,YAAKjP,OAAL,GAAe,IAAf;AACA,YAAKyO,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,YAAKjQ,QAAL,CAAcyB,MAAd,GAAuB,KAAKC,KAA5B;AACA,YAAK2a,KAAL;AACD;AANG,MA/HqB;AAuI3BA,YAAO;AACL/iB,aAAO,SAAS+iB,KAAT,GAAiB;AACtB,WAAI,KAAK/a,OAAT,EAAkB;AAChB,aAAKtB,QAAL,CAAc4B,MAAd,CAAqB,KAAKF,KAA1B;AACA,aAAKpI,KAAL,GAAa,KAAKoW,MAAL,CAAY7N,YAAZ,CAAyB,KAAK7B,QAAL,CAAc1G,KAAvC,CAAb;AACA,aAAKwI,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;AACF;AAPI,MAvIoB;AAgJ3BmX,SAAI;AACFnX,aAAO,SAASmX,EAAT,GAAc;AACnB,YAAKnP,OAAL,GAAe,KAAf;AACA,YAAKhB,MAAL;AACD;AAJC,MAhJuB;AAsJ3BF,iBAAY;AACVjE,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYtP,UAAnB;AACD;AAHS,MAtJe;AA2J3B9G,YAAO;;AAEL;;;;;;AAMA6C,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYpW,KAAnB;AACD,OAVI;AAWL8C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY9N,MAAZ,CAAmBxK,CAAnB;AACA,YAAK4I,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;AACA,YAAKE,MAAL;AACD;AAfI,MA3JoB;AA4K3BS,UAAK;;AAEH;;;;;;AAMA5E,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY3O,GAAnB;AACD,OAVE;AAWH3E,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY3O,GAAZ,GAAkB3J,CAAlB;AACD;AAbE,MA5KsB;AA2L3B4K,UAAK;;AAEH;;;;;;AAMA7F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAY1N,GAAnB;AACD,OAVE;AAWH5F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAY1N,GAAZ,GAAkB5K,CAAlB;AACD;AAbE,MA3LsB;AA0M3B6K,WAAM;;AAEJ;;;;;;AAMA9F,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYzN,IAAnB;AACD,OAVG;AAWJ7F,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAKsY,MAAL,CAAYzN,IAAZ,GAAmB7K,CAAnB;AACD;AAbG,MA1MqB;AAyN3B+H,WAAM;;AAEJ;;;;;;AAMAhD,WAAK,eAAY;AACf,cAAO,KAAK6D,QAAL,CAAcb,IAArB;AACD,OAVG;AAWJ/C,WAAK,aAAUhF,CAAV,EAAa;AAChB,YAAK4I,QAAL,CAAcb,IAAd,GAAqB/H,CAArB;AACD;AAbG;AAzNqB,KAA7B;;AA0OA,WAAOwkB,cAAP;AACD,IAzQoB,CAyQlBhd,SAzQkB,CAArB;;AA2QA9G,UAAOD,OAAP,GAAiB+jB,cAAjB;;AAED;AAAO,GAx4NG;AAy4NV;AACA,OAAO,UAAS9jB,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIU,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI4E,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;AACA,OAAI4G,OAAO5G,oBAAoB,EAApB,CAAX;;AAEA,OAAI6G,cAAcnG,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAlB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAIoF,MAAO,UAAU0B,UAAV,EAAsB;AAC/B,aAAS1B,GAAT,GAAe;AACbxD,qBAAgB,IAAhB,EAAsBwD,GAAtB;;AAEA,SAAI2B,UAAU,CAAC,OAAD,EAAU,OAAV,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,EAAN,CADO;AAEbuQ,mBAAa,YAFA;AAGbtQ,YAAM,UAHO;AAIbqE,aAAO,CAAC,CAAC,CAAF,EAAK,CAAL,CAJM;AAKbvB,YAAM,CALO;AAMb3I,aAAO,CANM;AAObyiB,eAAS;AAPI,MAAf;;AAUAre,UAAKlE,OAAO0E,cAAP,CAAsBb,IAAIzD,SAA1B,CAAL,EAA2C,aAA3C,EAA0D,IAA1D,EAAgEvB,IAAhE,CAAqE,IAArE,EAA2EuH,SAA3E,EAAsFZ,OAAtF,EAA+FC,QAA/F;;AAEA,UAAKwQ,WAAL,GAAmB,KAAK3P,QAAL,CAAc2P,WAAjC;;AAEA,UAAKtQ,IAAL,GAAY,KAAKW,QAAL,CAAcX,IAA1B;;AAEA,UAAK4c,OAAL,GAAe,KAAKjc,QAAL,CAAcic,OAA7B;;AAEA;AACA;AACA,UAAK9Z,IAAL,GAAY,KAAKnC,QAAL,CAAcmC,IAA1B,CAzBa,CAyBmB;;AAEhC,UAAKyN,MAAL,GAAc,IAAI7Q,IAAJ,CAAS,KAAKiB,QAAL,CAAc0D,KAAd,CAAoB,CAApB,CAAT,EAAiC,KAAK1D,QAAL,CAAc0D,KAAd,CAAoB,CAApB,CAAjC,EAAyD,KAAK1D,QAAL,CAAcmC,IAAvE,EAA6E,KAAKnC,QAAL,CAAcxG,KAA3F,CAAd;;AAEA,UAAK+G,IAAL;;AAEA,UAAKL,QAAL,GAAgB,IAAIlB,YAAYmB,MAAhB,CAAuB,KAAKd,IAA5B,EAAkC,KAAKsQ,WAAvC,EAAoD,CAAC,CAAD,EAAI,KAAKvP,KAAT,CAApD,EAAqE,CAAC,KAAKC,MAAN,EAAc,CAAd,CAArE,CAAhB;AACA,UAAKH,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;;AAEA,UAAK9G,KAAL,GAAa,KAAKoW,MAAL,CAAYpW,KAAzB;;AAEA,UAAKwI,IAAL,CAAU,QAAV,EAAoB,KAAKxI,KAAzB;AACD;;AAED8E,cAAUf,GAAV,EAAe0B,UAAf;;AAEAhG,iBAAasE,GAAb,EAAkB;AAChBkD,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;;AAE/B,YAAKoP,GAAL,GAAWhR,IAAIJ,MAAJ,CAAW,MAAX,CAAX;AACA,YAAKiC,IAAL,GAAY7B,IAAIJ,MAAJ,CAAW,QAAX,CAAZ;;AAEA,YAAKkC,OAAL,CAAaC,WAAb,CAAyB,KAAKiP,GAA9B;AACA,YAAKlP,OAAL,CAAaC,WAAb,CAAyB,KAAKF,IAA9B;AACD;AARa,MADA;AAWhBG,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,WAAI,KAAKX,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcY,MAAd,CAAqB,CAAC,CAAD,EAAI,KAAKV,KAAT,CAArB,EAAsC,CAAC,KAAKC,MAAN,EAAc,CAAd,CAAtC;AACD;;AAED,WAAI,KAAKD,KAAL,GAAa,KAAKC,MAAtB,EAA8B;AAC5B,aAAKsP,WAAL,GAAmB,UAAnB;AACD,QAFD,MAEO;AACL,aAAKA,WAAL,GAAmB,YAAnB;AACD;;AAED,WAAIlQ,IAAIvB,SAAR;AAAA,WACI2B,IAAI3B,SADR;AAAA,WAEI6N,IAAI7N,SAFR;AAAA,WAGI8N,IAAI9N,SAHR;AAAA,WAII6R,YAAY7R,SAJhB;AAAA,WAKI8R,eAAe9R,SALnB;AAMA,YAAK+R,QAAL,GAAgB;AACdC,eAAO,CADO;AAEdjM,WAAG;AAFW,QAAhB;;AAKA,WAAI,KAAK0L,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKQ,SAAL,GAAiB,KAAK/P,KAAL,GAAa,CAA9B;AACAX,YAAI,KAAKW,KAAL,GAAa,CAAjB;AACAP,YAAI,CAAJ;AACAkM,YAAI,KAAKoE,SAAT;AACAnE,YAAI,KAAK3L,MAAT;AACA,aAAK4P,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,aAAKF,QAAL,CAAcC,KAAd,GAAsBlE,IAAI,KAAKiE,QAAL,CAAchM,CAAlB,GAAsB,KAAK3D,UAAL,IAAmB0L,IAAI,KAAKiE,QAAL,CAAchM,CAAd,GAAkB,CAAzC,CAA5C;AACA8L,oBAAY,eAAe,KAAKI,SAAL,GAAiB,CAAC,CAAlB,GAAsB,CAArC,GAAyC,KAArD;AACAH,uBAAejE,IAAI,CAAnB;AACD,QAVD,MAUO;AACL,aAAKoE,SAAL,GAAiB,KAAK9P,MAAL,GAAc,CAA/B;AACAZ,YAAI,CAAJ;AACAI,YAAI,KAAKQ,MAAL,GAAc,CAAlB;AACA0L,YAAI,KAAK3L,KAAT;AACA4L,YAAI,KAAKmE,SAAT;AACA,aAAKF,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,aAAKF,QAAL,CAAcC,KAAd,GAAsB,KAAK5P,UAAL,IAAmByL,IAAI,KAAKkE,QAAL,CAAchM,CAAd,GAAkB,CAAzC,IAA8C,KAAKgM,QAAL,CAAchM,CAAlF;AACA8L,oBAAY,iBAAiB,KAAKI,SAAL,GAAiB,CAAC,CAAlB,GAAsB,CAAvC,GAA2C,GAAvD;AACAH,uBAAehE,IAAI,CAAnB;AACD;;AAED,YAAK6D,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2B3B,CAA3B;AACA,YAAKoQ,GAAL,CAASzO,YAAT,CAAsB,GAAtB,EAA2BvB,CAA3B;AACA,YAAKgQ,GAAL,CAASzO,YAAT,CAAsB,WAAtB,EAAmC2O,SAAnC;AACA,YAAKF,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B4O,YAA5B,EAhD8B,CAgDa;AAC3C,YAAKH,GAAL,CAASzO,YAAT,CAAsB,IAAtB,EAA4B4O,YAA5B;AACA,YAAKH,GAAL,CAASzO,YAAT,CAAsB,OAAtB,EAA+B2K,CAA/B;AACA,YAAK8D,GAAL,CAASzO,YAAT,CAAsB,QAAtB,EAAgC4K,CAAhC;;AAEA,WAAI,KAAK2D,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKjP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B3B,CAA7B;AACA,aAAKiB,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACD,QAHD,MAGO;AACL,aAAKxP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACA,aAAKxP,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6BvB,CAA7B;AACD;AACD,YAAKa,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAK6O,QAAL,CAAchM,CAA1C;AACD;AA9DY,MAXC;AA2EhB5C,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;;AAE/B,YAAKwO,GAAL,CAASzO,YAAT,CAAsB,MAAtB,EAA8B,KAAKxF,MAAL,CAAYE,IAA1C;AACA,YAAK4E,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYC,MAA3C;;AAEA,WAAI,CAAC,KAAKogB,OAAV,EAAmB;AACjB,aAAKvb,IAAL,CAAUU,YAAV,CAAuB,MAAvB,EAA+B,aAA/B;AACD;AACF;AATa,MA3EA;AAsFhBZ,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB,WAAI,CAAC,KAAKgB,OAAV,EAAmB;AACjB,aAAKyO,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,IAAnC;AACD;AACD,YAAKzP,IAAL,CAAUU,YAAV,CAAuB,GAAvB,EAA4B,KAAK6O,QAAL,CAAchM,CAA1C;;AAEA,WAAI,KAAK0L,WAAL,KAAqB,UAAzB,EAAqC;AACnC,aAAKM,QAAL,CAAcC,KAAd,GAAsB,KAAKD,QAAL,CAAchM,CAAd,GAAkB,KAAK2L,MAAL,CAAYtP,UAAZ,IAA0B,KAAKD,MAAL,GAAc,KAAK4P,QAAL,CAAchM,CAAd,GAAkB,CAA1D,CAAxC;AACA,aAAKvD,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAKf,MAAL,GAAc,KAAK4P,QAAL,CAAcC,KAAzD;AACD,QAHD,MAGO;AACL,aAAKD,QAAL,CAAcC,KAAd,GAAsB,KAAKN,MAAL,CAAYtP,UAAZ,IAA0B,KAAKF,KAAL,GAAa,KAAK6P,QAAL,CAAchM,CAAd,GAAkB,CAAzD,IAA8D,KAAKgM,QAAL,CAAchM,CAAlG;AACA,aAAKvD,IAAL,CAAUU,YAAV,CAAuB,IAAvB,EAA6B,KAAK6O,QAAL,CAAcC,KAA3C;AACD;AACF;AAdK,MAtFQ;AAsGhBxO,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKuO,QAAL,CAAchM,CAAd,GAAkB,KAAKkM,SAAL,GAAiB,GAAnC;AACA,YAAKjQ,QAAL,CAAcyB,MAAd,GAAuB,KAAKC,KAA5B;AACA,YAAKC,IAAL;AACD;AALI,MAtGS;AA6GhBA,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKL,OAAT,EAAkB;AAChB,aAAKtB,QAAL,CAAc4B,MAAd,CAAqB,KAAKF,KAA1B;;AAEA,aAAKpI,KAAL,GAAa,KAAKoW,MAAL,CAAY7N,YAAZ,CAAyB,KAAK7B,QAAL,CAAc1G,KAAvC,CAAb;;AAEA,aAAKwI,IAAL,CAAU,QAAV,EAAoB;AAClBxI,gBAAO,KAAKA,KADM;AAElByjB,YAAGjc,KAAKgE,GAAL,CAAS7K,KAAKuJ,KAAL,CAAW,KAAKlK,KAAhB,EAAuB,CAAC,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,CAAT,EAA8C,CAA9C,CAFe;AAGlB0jB,YAAGlc,KAAKgE,GAAL,CAAS7K,KAAKuJ,KAAL,CAAW,KAAKlK,KAAhB,EAAuB,CAAC,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,CAAT,EAA8C,CAA9C;AAHe,SAApB;AAKD;AACF;AAbG,MA7GU;AA4HhByI,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;AACxB,YAAKzB,MAAL;AACD;AAHM,MA5HO;AAiIhBhH,YAAO;;AAEL;;;;;AAKA6C,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYpW,KAAnB;AACD,OATI;AAUL8C,WAAK,aAAU9C,KAAV,EAAiB;AACpB,YAAKoW,MAAL,CAAY9N,MAAZ,CAAmBtI,KAAnB;AACA,YAAK0G,QAAL,CAAc1G,KAAd,GAAsB,KAAKoW,MAAL,CAAYtP,UAAlC;AACA,YAAK0B,IAAL,CAAU,QAAV,EAAoB;AAClBxI,eAAO,KAAKA,KADM;AAElByjB,WAAGjc,KAAKgE,GAAL,CAAS7K,KAAKuJ,KAAL,CAAW,KAAKlK,KAAhB,EAAuB,CAAC,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,CAAT,EAA8C,CAA9C,CAFe;AAGlB0jB,WAAGlc,KAAKgE,GAAL,CAAS7K,KAAKuJ,KAAL,CAAW,KAAKlK,KAAhB,EAAuB,CAAC,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,CAAT,EAA8C,CAA9C;AAHe,QAApB;AAKA,YAAKgH,MAAL;AACD;AAnBI,MAjIS;AAsJhBF,iBAAY;AACVjE,WAAK,eAAY;AACf,cAAO,KAAKuT,MAAL,CAAYtP,UAAnB;AACD;AAHS;AAtJI,KAAlB;;AA6JA,WAAO/C,GAAP;AACD,IAxMS,CAwMPuB,SAxMO,CAAV;;AA0MA9G,UAAOD,OAAP,GAAiBwF,GAAjB;;AAED;AAAO,GAloOG;AAmoOV;AACA,OAAO,UAASvF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI0G,MAAM1G,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA,OAAIglB,QAAQ,SAASA,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;;AAE1C,SAAK5d,CAAL,GAAS2d,MAAM3d,CAAf;AACA,SAAKI,CAAL,GAASud,MAAMvd,CAAf;AACA,SAAKwd,QAAL,GAAgBA,QAAhB;;AAEA,SAAK1c,OAAL,GAAe9B,IAAIJ,MAAJ,CAAW,QAAX,CAAf;AACA,SAAKkC,OAAL,CAAaS,YAAb,CAA0B,MAA1B,EAAkC,KAAKic,QAAL,CAAczhB,MAAd,CAAqBC,MAAvD;;AAEA,SAAKwhB,QAAL,CAAc1c,OAAd,CAAsBC,WAAtB,CAAkC,KAAKD,OAAvC;;AAEA,SAAKG,MAAL,GAAc,YAAY;AACxB,SAAImD,IAAI,CAAE,EAAEjD,KAAKC,GAAL,CAAS,KAAKoc,QAAL,CAAcjd,KAAvB,EAA8B,KAAKid,QAAL,CAAchd,MAA5C,IAAsD,EAAxD,CAAF,GAAgE,CAAxE;AACA,UAAKM,OAAL,CAAaS,YAAb,CAA0B,GAA1B,EAA+B6C,CAA/B;AACD,KAHD;;AAKA,SAAKpC,IAAL,GAAY,UAAUpC,CAAV,EAAaI,CAAb,EAAgB;;AAE1B,UAAKJ,CAAL,GAASA,KAAKA,MAAM,CAAX,GAAeA,CAAf,GAAmB,KAAKA,CAAjC;AACA,UAAKI,CAAL,GAASA,KAAKA,MAAM,CAAX,GAAeA,CAAf,GAAmB,KAAKA,CAAjC;;AAEA,SAAI,KAAKwd,QAAL,CAAcC,KAAd,CAAoBhV,OAApB,CAA4B,IAA5B,KAAqC,CAAzC,EAA4C;;AAE1C,UAAIiV,YAAY,KAAKF,QAAL,CAAcC,KAAd,CAAoBhV,OAApB,CAA4B,IAA5B,IAAoC,CAApD;AACA,UAAIkV,YAAY,KAAKH,QAAL,CAAcC,KAAd,CAAoBhV,OAApB,CAA4B,IAA5B,IAAoC,CAApD;;AAEA,UAAImV,WAAW,KAAKJ,QAAL,CAAcC,KAAd,CAAoBC,SAApB,CAAf;AACA,UAAIG,WAAW,KAAKL,QAAL,CAAcC,KAAd,CAAoBE,SAApB,CAAf;;AAEA,UAAIG,OAAOJ,aAAa,CAAb,GAAiBE,SAAShe,CAA1B,GAA8B,CAAzC;AACA,UAAIme,QAAQJ,YAAY,KAAKH,QAAL,CAAcC,KAAd,CAAoBjY,MAAhC,GAAyCqY,SAASje,CAAlD,GAAsD,CAAlE;;AAEA,UAAI,KAAKA,CAAL,GAASke,IAAb,EAAmB;AACjB,YAAKle,CAAL,GAASke,IAAT;AACD;AACD,UAAI,KAAKle,CAAL,GAASme,KAAb,EAAoB;AAClB,YAAKne,CAAL,GAASme,KAAT;AACD;AACF;;AAED,UAAKtD,QAAL,GAAgB,KAAKuD,cAAL,EAAhB;AACA,UAAKld,OAAL,CAAaS,YAAb,CAA0B,IAA1B,EAAgC,KAAKkZ,QAAL,CAAc7a,CAA9C;AACA,UAAKkB,OAAL,CAAaS,YAAb,CAA0B,IAA1B,EAAgC,KAAKkZ,QAAL,CAAcza,CAA9C;AACD,KA3BD;;AA6BA,SAAKge,cAAL,GAAsB,YAAY;AAChC,YAAO;AACLpe,SAAG,KAAKA,CAAL,GAAS,KAAK4d,QAAL,CAAcjd,KADrB;AAELP,SAAG,CAAC,IAAI,KAAKA,CAAV,IAAe,KAAKwd,QAAL,CAAchd;AAF3B,MAAP;AAID,KALD;;AAOA,SAAKwB,IAAL,CAAU,KAAKpC,CAAf,EAAkB,KAAKI,CAAvB;AACA,SAAKiB,MAAL;;AAEA,SAAK4J,OAAL,GAAe,YAAY;AACzB,UAAK2S,QAAL,CAAc1c,OAAd,CAAsB8J,WAAtB,CAAkC,KAAK9J,OAAvC;AACD,KAFD;AAGD,IA1DD;;AA4DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,OAAInD,WAAY,UAAUyB,UAAV,EAAsB;AACpC,aAASzB,QAAT,GAAoB;AAClBzD,qBAAgB,IAAhB,EAAsByD,QAAtB;;AAEA,SAAI0B,UAAU,CAAC,OAAD,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN,CADO;AAEb0e,cAAQ,CAAC;AACPre,UAAG,GADI;AAEPI,UAAG;AAFI,OAAD,EAGL;AACDJ,UAAG,IADF;AAEDI,UAAG;AAFF,OAHK,EAML;AACDJ,UAAG,IADF;AAEDI,UAAG;AAFF,OANK,EASL;AACDJ,UAAG,GADF;AAEDI,UAAG;AAFF,OATK;AAFK,MAAf;;AAiBAjC,UAAKlE,OAAO0E,cAAP,CAAsBZ,SAAS1D,SAA/B,CAAL,EAAgD,aAAhD,EAA+D,IAA/D,EAAqEvB,IAArE,CAA0E,IAA1E,EAAgFuH,SAAhF,EAA2FZ,OAA3F,EAAoGC,QAApG;;AAEA,UAAK2e,MAAL,GAAc,KAAK9d,QAAL,CAAc8d,MAA5B;;AAEA,UAAKR,KAAL,GAAa,EAAb;;AAEA,UAAKS,QAAL,GAAgB,KAAhB;;AAEA,UAAKxd,IAAL;AACD;;AAEDjC,cAAUd,QAAV,EAAoByB,UAApB;;AAEAhG,iBAAauE,QAAb,EAAuB;AACrBiD,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;AAC/B,WAAIoI,QAAQ,IAAZ;;AAEA,YAAKiV,MAAL,CAAY3F,OAAZ,CAAoB,UAAUiF,KAAV,EAAiB;AACnC,YAAIY,OAAO,IAAIb,KAAJ,CAAUC,KAAV,EAAiBvU,KAAjB,CAAX;AACAA,cAAMyU,KAAN,CAAY/Z,IAAZ,CAAiBya,IAAjB;AACD,QAHD;;AAKA,YAAKC,UAAL;;AAEA,YAAKC,IAAL,GAAYrf,IAAIJ,MAAJ,CAAW,UAAX,CAAZ;AACA,YAAKyf,IAAL,CAAU9c,YAAV,CAAuB,cAAvB,EAAuC,CAAvC;AACA,YAAK8c,IAAL,CAAU9c,YAAV,CAAuB,MAAvB,EAA+B,MAA/B;;AAEA,YAAKT,OAAL,CAAaC,WAAb,CAAyB,KAAKsd,IAA9B;;AAEA,YAAKpiB,IAAL,GAAY+C,IAAIJ,MAAJ,CAAW,UAAX,CAAZ;AACA,YAAK3C,IAAL,CAAUsF,YAAV,CAAuB,cAAvB,EAAuC,KAAvC;;AAEA,YAAKT,OAAL,CAAaC,WAAb,CAAyB,KAAK9E,IAA9B;AACD;AArBa,MADK;AAwBrB+E,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;;AAE9B,YAAK,IAAIwC,IAAI,CAAb,EAAgBA,IAAI,KAAKia,KAAL,CAAWjY,MAA/B,EAAuChC,GAAvC,EAA4C;AAC1C,aAAKia,KAAL,CAAWja,CAAX,EAAcvC,MAAd;AACA,aAAKwc,KAAL,CAAWja,CAAX,EAAcxB,IAAd;AACD;;AAED,YAAKrB,MAAL;AACD;AATY,MAxBM;AAmCrBa,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,WAAIwH,QAAQ,IAAZ;;AAEA,YAAKlI,OAAL,CAAaW,KAAb,CAAmBC,eAAnB,GAAqC,KAAK3F,MAAL,CAAYE,IAAjD;AACA,YAAKoiB,IAAL,CAAU9c,YAAV,CAAuB,QAAvB,EAAiC,KAAKxF,MAAL,CAAYC,MAA7C;AACA,YAAKC,IAAL,CAAUsF,YAAV,CAAuB,MAAvB,EAA+B,KAAKxF,MAAL,CAAYC,MAA3C;AACA,YAAKyhB,KAAL,CAAWnF,OAAX,CAAmB,UAAU6F,IAAV,EAAgB;AACjCA,aAAKrd,OAAL,CAAaS,YAAb,CAA0B,MAA1B,EAAkCyH,MAAMjN,MAAN,CAAaC,MAA/C;AACD,QAFD;AAGD;AAVa,MAnCK;AA+CrB2E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;AACvB;AACA,YAAK2d,aAAL;AACD;AAJK,MA/Ca;AAqDrBC,sBAAiB;AACf5kB,aAAO,SAAS4kB,eAAT,GAA2B;AAChC,WAAIvV,QAAQ,IAAZ;;AAEA,YAAKiV,MAAL,GAAc,EAAd;AACA,YAAKR,KAAL,CAAWnF,OAAX,CAAmB,UAAU6F,IAAV,EAAgB;AACjCnV,cAAMiV,MAAN,CAAava,IAAb,CAAkB,EAAE9D,GAAGue,KAAKve,CAAV,EAAaI,GAAGme,KAAKne,CAArB,EAAlB;AACD,QAFD;AAGD;AARc,MArDI;AA+DrBse,oBAAe;AACb3kB,aAAO,SAAS2kB,aAAT,GAAyB;;AAE9B;AACA,WAAIzZ,OAAO,OAAO,KAAK4Y,KAAL,CAAW,CAAX,EAAchD,QAAd,CAAuBza,CAA9B,GAAkC,IAA7C;;AAEA;AACA;;AAEA,YAAKyd,KAAL,CAAWnF,OAAX,CAAmB,UAAU6F,IAAV,EAAgB;AACjC;AACAtZ,gBAAQsZ,KAAK1D,QAAL,CAAc7a,CAAd,GAAkB,GAAlB,GAAwBue,KAAK1D,QAAL,CAAcza,CAAtC,GAA0C,IAAlD;AACD,QAHD;;AAKA;AACA6E,eAAQ,KAAKtE,KAAL,GAAa,GAAb,GAAmB,KAAKkd,KAAL,CAAW,KAAKA,KAAL,CAAWjY,MAAX,GAAoB,CAA/B,EAAkCiV,QAAlC,CAA2Cza,CAAtE;;AAEA,YAAKqe,IAAL,CAAU9c,YAAV,CAAuB,QAAvB,EAAiCsD,IAAjC;;AAEA;AACA;;AAEAA,eAAQ,OAAO,KAAKtE,KAAZ,GAAoB,GAApB,GAA0B,KAAKC,MAA/B,GAAwC,IAAhD;AACAqE,eAAQ,OAAO,KAAKrE,MAApB;;AAEA,YAAKvE,IAAL,CAAUsF,YAAV,CAAuB,QAAvB,EAAiCsD,IAAjC;AACD;AA1BY,MA/DM;AA2FrBhD,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB;AACA,YAAK6Q,QAAL,GAAgB,KAAhB;AACA,YAAKwL,QAAL,GAAgB,KAAKM,eAAL,EAAhB;;AAEA,YAAKf,KAAL,CAAW,KAAKS,QAAhB,EAA0Blc,IAA1B,CAA+B,KAAKD,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAAnD,EAA0D,IAAI,KAAKwB,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlF;AACA,YAAKie,SAAL,CAAe,KAAKP,QAApB;;AAEA;AACA,YAAKK,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,YAAKtd,MAAL;AACD;AAbI,MA3Fc;AA0GrBqB,WAAM;AACJrI,aAAO,SAASqI,IAAT,GAAgB;AACrB,WAAI,KAAKL,OAAT,EAAkB;AAChB,aAAKI,KAAL,CAAWnC,CAAX,GAAetF,KAAKqJ,IAAL,CAAU,KAAK5B,KAAL,CAAWnC,CAArB,EAAwB,CAAxB,EAA2B,KAAKW,KAAhC,CAAf;AACA,aAAKmS,QAAL,GAAgB,IAAhB;;AAEA,aAAK+K,KAAL,CAAW,KAAKS,QAAhB,EAA0Blc,IAA1B,CAA+B,KAAKD,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAAnD,EAA0D,IAAI,KAAKwB,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAlF;AACA,aAAKie,SAAL,CAAe,KAAKP,QAApB;;AAEA,aAAKK,eAAL;AACA,aAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,aAAKtd,MAAL;AACD;AACF;AAbG,MA1Ge;AAyHrByB,cAAS;AACPzI,aAAO,SAASyI,OAAT,GAAmB;;AAExB,WAAI,CAAC,KAAKsQ,QAAV,EAAoB;AAClB,aAAK+K,KAAL,CAAW,KAAKS,QAAhB,EAA0BrT,OAA1B;AACA,aAAK4S,KAAL,CAAW5V,MAAX,CAAkB,KAAKqW,QAAvB,EAAiC,CAAjC;AACD;;AAED,YAAKK,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,YAAKtd,MAAL;;AAEA;AACA,YAAKud,QAAL,GAAgB,IAAhB;AACD;AAdM,MAzHY;AAyIrBM,sBAAiB;AACf7kB,aAAO,SAAS6kB,eAAT,GAA2B;AAChC,WAAIE,eAAe,IAAnB;AACA;AACA,WAAIC,cAAc,KAAlB;AACA,WAAIC,SAAS,KAAb;AACA,WAAIhf,IAAI,KAAKmC,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAA5B;AACA,WAAIP,IAAI,IAAI,KAAK+B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ,MAAhC;AACA,WAAIid,QAAQ,KAAKA,KAAjB;AACA,YAAK,IAAIja,IAAI,CAAb,EAAgBA,IAAIia,MAAMjY,MAA1B,EAAkChC,GAAlC,EAAuC;;AAErC;AACA,YAAI6C,WAAWlF,KAAKkD,IAAL,CAAUlD,KAAKgE,GAAL,CAASsY,MAAMja,CAAN,EAAS5D,CAAT,GAAaA,CAAtB,EAAyB,CAAzB,IAA8BuB,KAAKgE,GAAL,CAASsY,MAAMja,CAAN,EAASxD,CAAT,GAAaA,CAAtB,EAAyB,CAAzB,CAAxC,CAAf;;AAEA;AACA,YAAIqG,WAAWsY,WAAf,EAA4B;AAC1BA,uBAActY,QAAd;AACAqY,wBAAelb,CAAf;AACAob,kBAAShf,IAAI6d,MAAMja,CAAN,EAAS5D,CAAtB;AACD;AACF;;AAED;AACA,WAAI+e,cAAc,IAAlB,EAAwB;;AAEtBD,uBAAe,KAAKG,aAAL,CAAmB,KAAK9c,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KAAvC,CAAf;;AAEA,aAAKkd,KAAL,CAAW5V,MAAX,CAAkB6W,YAAlB,EAAgC,CAAhC,EAAmC,IAAIpB,KAAJ,CAAU;AAC3C1d,YAAG,KAAKmC,KAAL,CAAWnC,CAAX,GAAe,KAAKW,KADoB;AAE3CP,YAAG,IAAI,KAAK+B,KAAL,CAAW/B,CAAX,GAAe,KAAKQ;AAFgB,SAAV,EAGhC,IAHgC,CAAnC;AAIA,aAAKkS,QAAL,GAAgB,IAAhB;AACD;;AAED,cAAOgM,YAAP;AACD;AAnCc,MAzII;AA8KrBG,oBAAe;AACbllB,aAAO,SAASklB,aAAT,CAAuBjf,CAAvB,EAA0B;AAC/B,WAAIoJ,QAAQ,IAAZ;;AAEA,WAAImJ,QAAQ,CAAZ;AACA,YAAKsL,KAAL,CAAWnF,OAAX,CAAmB,UAAU6F,IAAV,EAAgB3a,CAAhB,EAAmB;AACpC,YAAIwF,MAAMyU,KAAN,CAAYja,CAAZ,EAAe5D,CAAf,IAAoBA,CAAxB,EAA2B;AACzBuS,iBAAQ3O,IAAI,CAAZ;AACD;AACF,QAJD;AAKA,cAAO2O,KAAP;AACD;AAXY,MA9KM;AA2LrBsM,gBAAW;AACT9kB,aAAO,SAAS8kB,SAAT,CAAmBjb,CAAnB,EAAsB;;AAE3B,WAAIsb,WAAWxkB,KAAKqJ,IAAL,CAAU,KAAK8Z,KAAL,CAAWja,CAAX,EAAc5D,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,CAAf;AACA,WAAImf,WAAWzkB,KAAKqJ,IAAL,CAAU,KAAK8Z,KAAL,CAAWja,CAAX,EAAcxD,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,CAAf;;AAEA,YAAKyd,KAAL,CAAWja,CAAX,EAAcxB,IAAd,CAAmB8c,QAAnB,EAA6BC,QAA7B;AACD;AAPQ,MA3LU;AAoMrBX,iBAAY;;AAEV;;;;AAIAzkB,aAAO,SAASykB,UAAT,GAAsB;AAC3B,YAAKX,KAAL,CAAWuB,IAAX,CAAgB,UAAUtY,CAAV,EAAaC,CAAb,EAAgB;AAC9B,eAAOD,EAAE9G,CAAF,GAAM+G,EAAE/G,CAAf;AACD,QAFD;AAGD;AAVS,MApMS;AAgNrBqf,eAAU;;AAER;;;;;;AAMAtlB,aAAO,SAASslB,QAAT,CAAkBrf,CAAlB,EAAqBI,CAArB,EAAwB;AAC7B,WAAImS,QAAQ,CAAZ;;AAEA,YAAKiM,UAAL;;AAEA,YAAK,IAAI5a,IAAI,CAAb,EAAgBA,IAAI,KAAKia,KAAL,CAAWjY,MAA/B,EAAuChC,GAAvC,EAA4C;AAC1C,YAAI5D,IAAI,KAAK6d,KAAL,CAAWja,CAAX,EAAc5D,CAAtB,EAAyB;AACvBuS,iBAAQ3O,CAAR;AACA;AACD;AACF;;AAED,YAAKia,KAAL,CAAW5V,MAAX,CAAkBsK,KAAlB,EAAyB,CAAzB,EAA4B,IAAImL,KAAJ,CAAU;AACpC1d,WAAGA,CADiC;AAEpCI,WAAGA;AAFiC,QAAV,EAGzB,IAHyB,CAA5B;;AAKA,YAAKye,SAAL,CAAetM,KAAf;;AAEA,YAAKoM,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;;AAEA,YAAKtd,MAAL;AACD;AA/BO,MAhNW;AAiPrBue,WAAM;;AAEJ;;;;;AAKAvlB,aAAO,SAASulB,IAAT,CAActf,CAAd,EAAiB;AACtB;AACA,WAAI+d,YAAY,KAAKkB,aAAL,CAAmBjf,CAAnB,CAAhB;AACA,WAAIuf,aAAaxB,YAAY,CAA7B;AACA,WAAIwB,aAAa,CAAjB,EAAoB;AAClBA,qBAAa,CAAb;AACD;AACD,WAAIxB,aAAa,KAAKF,KAAL,CAAWjY,MAA5B,EAAoC;AAClCmY,oBAAY,KAAKF,KAAL,CAAWjY,MAAX,GAAoB,CAAhC;AACD;AACD,WAAI4Z,aAAa,KAAK3B,KAAL,CAAW0B,UAAX,CAAjB;AACA,WAAIE,YAAY,KAAK5B,KAAL,CAAWE,SAAX,CAAhB;AACA,WAAItY,MAAM/K,KAAKuJ,KAAL,CAAWjE,CAAX,EAAcwf,WAAWxf,CAAzB,EAA4Byf,UAAUzf,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,CAAV;AACA,WAAIjG,QAAQW,KAAK8K,MAAL,CAAYC,GAAZ,EAAiB+Z,WAAWpf,CAA5B,EAA+Bqf,UAAUrf,CAAzC,CAAZ;AACA,YAAKmC,IAAL,CAAU,MAAV,EAAkBxI,KAAlB;AACA,cAAOA,KAAP;AACD;AAvBG,MAjPe;AA0QrB2lB,gBAAW;;AAET;;;;;;;AAOA3lB,aAAO,SAAS2lB,SAAT,CAAmBnN,KAAnB,EAA0BvS,CAA1B,EAA6BI,CAA7B,EAAgC;AACrC,YAAKyd,KAAL,CAAWtL,KAAX,EAAkBnQ,IAAlB,CAAuBpC,CAAvB,EAA0BI,CAA1B;AACA,YAAKye,SAAL,CAAetM,KAAf;AACA,YAAKoM,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,YAAKtd,MAAL;AACD;AAfQ,MA1QU;AA2RrB4e,kBAAa;;AAEX;;;;;;;AAOA5lB,aAAO,SAAS4lB,WAAT,CAAqBpN,KAArB,EAA4BqN,OAA5B,EAAqCC,OAArC,EAA8C;AACnD,YAAKhC,KAAL,CAAWtL,KAAX,EAAkBnQ,IAAlB,CAAuB,KAAKyb,KAAL,CAAWtL,KAAX,EAAkBvS,CAAlB,GAAsB4f,OAA7C,EAAsD,KAAK/B,KAAL,CAAWtL,KAAX,EAAkBnS,CAAlB,GAAsByf,OAA5E;AACA,YAAKhB,SAAL,CAAetM,KAAf;AACA,YAAKoM,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,YAAKtd,MAAL;AACD;AAfU,MA3RQ;AA4SrB+e,mBAAc;;AAEZ;;;;;AAKA/lB,aAAO,SAAS+lB,YAAT,CAAsBvN,KAAtB,EAA6B;AAClC,YAAKsL,KAAL,CAAWtL,KAAX,EAAkBtH,OAAlB;AACA,YAAK0T,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,YAAKtd,MAAL;AACD;AAZW,MA5SO;AA0TrBgf,gBAAW;;AAET;;;;;AAKAhmB,aAAO,SAASgmB,SAAT,CAAmBC,SAAnB,EAA8B;AACnC,WAAI5W,QAAQ,IAAZ;;AAEA,YAAKyU,KAAL,CAAWnF,OAAX,CAAmB,UAAUiF,KAAV,EAAiB;AAClCA,cAAM1S,OAAN;AACD,QAFD;AAGA+U,iBAAUtH,OAAV,CAAkB,UAAUiF,KAAV,EAAiB;AACjCvU,cAAMiW,QAAN,CAAe1B,MAAM3d,CAArB,EAAwB2d,MAAMvd,CAA9B;AACD,QAFD;AAGA,YAAKue,eAAL;AACA,YAAKpc,IAAL,CAAU,QAAV,EAAoB,KAAK8b,MAAzB;AACA,YAAKtd,MAAL;AACD;AAnBQ;AA1TU,KAAvB;;AAiVA,WAAOhD,QAAP;AACD,IAtXc,CAsXZsB,SAtXY,CAAf;;AAwXA9G,UAAOD,OAAP,GAAiByF,QAAjB;;AAED;AAAO,GAvnPG;AAwnPV;AACA,OAAO,UAASxF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI6M,MAAM3O,oBAAoB,CAApB,CAAV;AACA;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA,OAAIsF,cAAe,UAAUwB,UAAV,EAAsB;AACvC,aAASxB,WAAT,GAAuB;AACrB1D,qBAAgB,IAAhB,EAAsB0D,WAAtB;;AAEA,SAAIyB,UAAU,CAAC,OAAD,EAAU,OAAV,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN;AADO,MAAf;;AAIAxB,UAAKlE,OAAO0E,cAAP,CAAsBX,YAAY3D,SAAlC,CAAL,EAAmD,aAAnD,EAAkE,IAAlE,EAAwEvB,IAAxE,CAA6E,IAA7E,EAAmFuH,SAAnF,EAA8FZ,OAA9F,EAAuGC,QAAvG;;AAEA,UAAKrE,OAAL,GAAe/D,MAAM+D,OAArB,CAXqB,CAWS;;AAE9B,UAAK4kB,QAAL,GAAgB,KAAK5kB,OAAL,CAAa6kB,cAAb,EAAhB;AACA,UAAKD,QAAL,CAAcE,OAAd,GAAwB,IAAxB;AACA,UAAKC,YAAL,GAAoB,KAAKH,QAAL,CAAcI,iBAAlC;AACA,UAAKC,SAAL,GAAiB,IAAIC,UAAJ,CAAe,KAAKH,YAApB,CAAjB;;AAEA,UAAKnO,MAAL,GAAc,IAAd;;AAEA,UAAKuO,MAAL,GAAc,KAAd;;AAEA,UAAK1f,IAAL;AACD;;AAEDjC,cAAUb,WAAV,EAAuBwB,UAAvB;;AAEAhG,iBAAawE,WAAb,EAA0B;AACxBiL,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAKwX,MAAL,GAAc,IAAIpZ,IAAI8E,WAAR,CAAoB,KAAKzN,MAAzB,CAAd;AACA,YAAKwC,OAAL,GAAe,KAAKuf,MAAL,CAAYvf,OAA3B;AACD;AAJS,MADY;AAOxBE,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;AAC9B,YAAKqf,MAAL,CAAYpf,MAAZ,CAAmB,KAAKV,KAAxB,EAA+B,KAAKC,MAApC;AACD;AAHY,MAPS;AAYxBgB,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAK6e,MAAL,CAAYvf,OAAZ,CAAoBW,KAApB,CAA0BC,eAA1B,GAA4C,KAAK3F,MAAL,CAAYE,IAAxD;AACD;AAHa,MAZQ;AAiBxB0E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;;AAEvB,WAAI,KAAKkR,MAAT,EAAiB;AACfyO,8BAAsB,KAAK3f,MAAL,CAAY9E,IAAZ,CAAiB,IAAjB,CAAtB;AACD;;AAED,YAAKgkB,QAAL,CAAcU,oBAAd,CAAmC,KAAKL,SAAxC;;AAEA,YAAKG,MAAL,CAAYplB,OAAZ,CAAoBulB,SAApB,GAAgC,KAAKzkB,MAAL,CAAYE,IAA5C;AACA,YAAKokB,MAAL,CAAYplB,OAAZ,CAAoBwlB,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,EAAmC,KAAKJ,MAAL,CAAYvf,OAAZ,CAAoBP,KAAvD,EAA8D,KAAK8f,MAAL,CAAYvf,OAAZ,CAAoBN,MAAlF;;AAEA,WAAI,KAAK4f,MAAL,IAAe,KAAKF,SAAxB,EAAmC;;AAEjC;;AAEA,YAAIQ,WAAW,KAAKL,MAAL,CAAYvf,OAAZ,CAAoBP,KAApB,GAA4B,KAAKyf,YAAhD;AACA,YAAIW,YAAYtiB,SAAhB;AACA,YAAIuB,IAAI,CAAR;;AAEA,YAAIghB,aAAa,KAAKP,MAAL,CAAYvf,OAAZ,CAAoBP,KAApB,GAA4B,EAA7C;;AAEA,aAAK,IAAIiD,IAAI,CAAb,EAAgBA,IAAI,KAAKwc,YAAzB,EAAuCxc,IAAIA,IAAIod,UAA/C,EAA2D;AACzDD,qBAAYxf,KAAKkB,GAAL,CAASiL,KAAT,CAAe,IAAf,EAAqB,KAAK4S,SAAL,CAAeW,QAAf,CAAwBrd,CAAxB,EAA2BA,IAAIod,UAA/B,CAArB,CAAZ;AACAD,sBAAa,GAAb;AACAA,sBAAa,KAAKN,MAAL,CAAYvf,OAAZ,CAAoBN,MAAjC;;AAEA,cAAK6f,MAAL,CAAYplB,OAAZ,CAAoBulB,SAApB,GAAgC,KAAKzkB,MAAL,CAAYC,MAA5C;AACA,cAAKqkB,MAAL,CAAYplB,OAAZ,CAAoBwlB,QAApB,CAA6B7gB,CAA7B,EAAgC,KAAKygB,MAAL,CAAYvf,OAAZ,CAAoBN,MAApB,GAA6BmgB,SAA7D,EAAwED,WAAWE,UAAnF,EAA+FD,SAA/F;;AAEA/gB,cAAK8gB,WAAWE,UAAhB;AACD;AACF;AACF;AAjCK,MAjBgB;AAoDxBE,cAAS;;AAEP;;;;;AAKAnnB,aAAO,SAASmnB,OAAT,CAAiB3C,IAAjB,EAAuB;AAC5B,WAAI,KAAKiC,MAAT,EAAiB;AACf,aAAKW,UAAL;AACD;AACD,YAAKX,MAAL,GAAcjC,IAAd;AACA,YAAKiC,MAAL,CAAYU,OAAZ,CAAoB,KAAKjB,QAAzB;AACA,YAAKlf,MAAL;AACD;AAdM,MApDe;AAoExBogB,iBAAY;;AAEV;;;;AAIApnB,aAAO,SAASonB,UAAT,GAAsB;AAC3B,YAAKX,MAAL,CAAYW,UAAZ,CAAuB,KAAKlB,QAA5B;AACA,YAAKO,MAAL,GAAc,IAAd;AACD;AATS,MApEY;AA+ExBve,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKgQ,MAAL,GAAc,CAAC,KAAKA,MAApB;AACA,YAAKlR,MAAL;AACD;AAJI,MA/EiB;AAqFxBqK,oBAAe;AACbrR,aAAO,SAASqR,aAAT,GAAyB;AAC9B,YAAK6G,MAAL,GAAc,KAAd;AACD;AAHY;AArFS,KAA1B;;AA4FA,WAAOjU,WAAP;AACD,IAzHiB,CAyHfqB,SAzHe,CAAlB;;AA2HA9G,UAAOD,OAAP,GAAiB0F,WAAjB;;AAED;AAAO,GA3xPG;AA4xPV;AACA,OAAO,UAASzF,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI6M,MAAM3O,oBAAoB,CAApB,CAAV;AACA,OAAIgC,OAAOhC,oBAAoB,CAApB,CAAX;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA,OAAIuF,QAAS,UAAUuB,UAAV,EAAsB;AACjC,aAASvB,KAAT,GAAiB;AACf3D,qBAAgB,IAAhB,EAAsB2D,KAAtB;;AAEA,SAAIwB,UAAU,CAAC,OAAD,EAAU,OAAV,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,EAAD,EAAK,GAAL;AADO,MAAf;;AAIAxB,UAAKlE,OAAO0E,cAAP,CAAsBV,MAAM5D,SAA5B,CAAL,EAA6C,aAA7C,EAA4D,IAA5D,EAAkEvB,IAAlE,CAAuE,IAAvE,EAA6EuH,SAA7E,EAAwFZ,OAAxF,EAAiGC,QAAjG;;AAEA,UAAKrE,OAAL,GAAe/D,MAAM+D,OAArB,CAXe,CAWe;;AAE9B,UAAK+lB,QAAL,GAAgB,CAAhB;;AAEA,UAAKC,QAAL,GAAgB,KAAKhmB,OAAL,CAAaimB,qBAAb,CAAmC,KAAKF,QAAxC,CAAhB;;AAEA,UAAKG,SAAL,GAAiB,EAAjB;;AAEA,UAAK,IAAI3d,IAAI,CAAb,EAAgBA,IAAI,KAAKwd,QAAzB,EAAmCxd,GAAnC,EAAwC;AACtC,UAAIqc,WAAW,KAAK5kB,OAAL,CAAa6kB,cAAb,EAAf;AACA,WAAKmB,QAAL,CAAcH,OAAd,CAAsBjB,QAAtB,EAAgCrc,CAAhC;AACAqc,eAASE,OAAT,GAAmB,IAAnB;AACAF,eAASuB,qBAAT,GAAiC,CAAjC;AACA,WAAKD,SAAL,CAAezd,IAAf,CAAoBmc,QAApB;AACD;AACD,UAAKG,YAAL,GAAoB,KAAKmB,SAAL,CAAe,CAAf,EAAkBlB,iBAAtC;AACA,UAAKC,SAAL,GAAiB,IAAImB,YAAJ,CAAiB,KAAKrB,YAAtB,CAAjB;;AAEA;;;;;;;;;;;AAWA,UAAKnO,MAAL,GAAc,IAAd;;AAEA,UAAKyP,EAAL,GAAU,CAACC,QAAX;;AAEA,UAAK7gB,IAAL;;AAEA,UAAK8gB,UAAL,GAAkB,KAAKnB,MAAL,CAAYvf,OAAZ,CAAoBP,KAApB,GAA4B,KAAKygB,QAAnD;;AAEA,UAAKrgB,MAAL;AACD;;AAEDlC,cAAUZ,KAAV,EAAiBuB,UAAjB;;AAEAhG,iBAAayE,KAAb,EAAoB;AAClBgL,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAKwX,MAAL,GAAc,IAAIpZ,IAAI8E,WAAR,CAAoB,KAAKzN,MAAzB,CAAd;AACA,YAAKwC,OAAL,GAAe,KAAKuf,MAAL,CAAYvf,OAA3B;AACD;AAJS,MADM;AAOlBE,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;AAC9B,YAAKqf,MAAL,CAAYpf,MAAZ,CAAmB,KAAKV,KAAxB,EAA+B,KAAKC,MAApC;AACD;AAHY,MAPG;AAYlBgB,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAK6e,MAAL,CAAYvf,OAAZ,CAAoBW,KAApB,CAA0BC,eAA1B,GAA4C,KAAK3F,MAAL,CAAYE,IAAxD;AACD;AAHa,MAZE;AAiBlB0E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;;AAEvB,WAAI,KAAKkR,MAAT,EAAiB;AACfyO,8BAAsB,KAAK3f,MAAL,CAAY9E,IAAZ,CAAiB,IAAjB,CAAtB;AACD;;AAED,YAAKwkB,MAAL,CAAYplB,OAAZ,CAAoBulB,SAApB,GAAgC,KAAKzkB,MAAL,CAAYE,IAA5C;AACA,YAAKokB,MAAL,CAAYplB,OAAZ,CAAoBwlB,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,EAAmC,KAAKJ,MAAL,CAAYvf,OAAZ,CAAoBP,KAAvD,EAA8D,KAAK8f,MAAL,CAAYvf,OAAZ,CAAoBN,MAAlF;;AAEA,YAAK,IAAIgD,IAAI,CAAb,EAAgBA,IAAI,KAAK2d,SAAL,CAAe3b,MAAnC,EAA2ChC,GAA3C,EAAgD;;AAE9C,YAAI,KAAK4c,MAAT,EAAiB;;AAEf,cAAKe,SAAL,CAAe3d,CAAf,EAAkBie,sBAAlB,CAAyC,KAAKvB,SAA9C;;AAEA,aAAIwB,MAAM,CAAV;;AAEA,cAAK,IAAIC,KAAK,CAAd,EAAiBA,KAAK,KAAKzB,SAAL,CAAe1a,MAArC,EAA6Cmc,IAA7C,EAAmD;AACjDD,iBAAO,KAAKxB,SAAL,CAAeyB,EAAf,IAAqB,KAAKzB,SAAL,CAAeyB,EAAf,CAA5B;AACD;;AAEDD,eAAMvgB,KAAKkD,IAAL,CAAUqd,MAAM,KAAKxB,SAAL,CAAe1a,MAA/B,CAAN;;AAEA,cAAK8b,EAAL,GAAU,KAAKngB,KAAK2F,KAAL,CAAW4a,GAAX,CAAf;AACD,SAbD,MAaO,IAAI,KAAKJ,EAAL,GAAU,CAAC,GAAX,IAAkB,KAAKA,EAAL,KAAY,CAACC,QAAnC,EAA6C;AAClD,cAAKD,EAAL,IAAW,CAAX;AACD,SAFM,MAEA;AACL,cAAKA,EAAL,GAAU,CAACC,QAAX;AACD;;AAED;;AAEA,YAAI,KAAKD,EAAL,GAAU,CAAC,EAAf,EAAmB;;AAEjB,aAAIM,SAAStnB,KAAKsJ,SAAL,CAAe,KAAK0d,EAApB,EAAwB,CAAC,EAAzB,EAA6B,CAA7B,CAAb;AACA,aAAIO,MAAMD,SAASA,MAAnB;AACA,aAAI5hB,IAAI1F,KAAKuJ,KAAL,CAAWge,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,KAAK/gB,OAAL,CAAaN,MAAnC,EAA2C,CAA3C,CAAR;;AAEA,cAAK6f,MAAL,CAAYplB,OAAZ,CAAoBulB,SAApB,GAAgC,KAAKzkB,MAAL,CAAYC,MAA5C;AACA,cAAKqkB,MAAL,CAAYplB,OAAZ,CAAoBwlB,QAApB,CAA6B,KAAKe,UAAL,GAAkBhe,CAA/C,EAAkDxD,CAAlD,EAAqD,KAAKwhB,UAA1D,EAAsE,KAAKnB,MAAL,CAAYvf,OAAZ,CAAoBN,MAApB,GAA6BR,CAAnG;;AAEA;AACD;AACF;AACF;AA7CK,MAjBU;AAgElB8gB,cAAS;;AAEP;;;;;;AAMAnnB,aAAO,SAASmnB,OAAT,CAAiB3C,IAAjB,EAAuB6C,QAAvB,EAAiC;AACtC,WAAI,KAAKZ,MAAT,EAAiB;AACf,aAAKW,UAAL;AACD;AACD;;AAEA,WAAIC,QAAJ,EAAc;AACZ,aAAKA,QAAL,GAAgBA,QAAhB;AACD,QAFD,MAEO,IAAI7C,KAAK2D,YAAT,EAAuB;AAC5B,aAAKd,QAAL,GAAgB7C,KAAK2D,YAArB;AACD,QAFM,MAEA;AACL,aAAKd,QAAL,GAAgB,CAAhB;AACD;AACD,YAAKQ,UAAL,GAAkB,KAAKnB,MAAL,CAAYvf,OAAZ,CAAoBP,KAApB,GAA4B,KAAKygB,QAAnD;;AAEA,YAAKZ,MAAL,GAAcjC,IAAd;AACA,YAAKiC,MAAL,CAAYU,OAAZ,CAAoB,KAAKG,QAAzB;;AAEA;AACD;AA3BM,MAhES;AA6FlBF,iBAAY;;AAEV;;;;AAIApnB,aAAO,SAASonB,UAAT,GAAsB;;AAE3B,YAAKX,MAAL,CAAYW,UAAZ,CAAuB,KAAKE,QAA5B;AACA,YAAKb,MAAL,GAAc,KAAd;AACA;AACA,YAAKoB,UAAL,GAAkB,KAAKnB,MAAL,CAAYvf,OAAZ,CAAoBP,KAApB,GAA4B,KAAKygB,QAAnD;AACD;AAZS,MA7FM;AA2GlBnf,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKgQ,MAAL,GAAc,CAAC,KAAKA,MAApB;AACA,YAAKlR,MAAL;AACD;AAJI,MA3GW;AAiHlBqK,oBAAe;AACbrR,aAAO,SAASqR,aAAT,GAAyB;AAC9B,YAAK6G,MAAL,GAAc,KAAd;AACD;AAHY;AAjHG,KAApB;;AAwHA,WAAOhU,KAAP;AACD,IA/KW,CA+KToB,SA/KS,CAAZ;;AAiLA9G,UAAOD,OAAP,GAAiB2F,KAAjB;;AAED;AAAO,GAr/PG;AAs/PV;AACA,OAAO,UAAS1F,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIc,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAIiE,OAAO,SAASvB,GAAT,CAAawB,MAAb,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAAE,QAAIC,OAAOtE,OAAOuE,wBAAP,CAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIE,SAASE,SAAb,EAAwB;AAAE,SAAIC,SAASzE,OAAO0E,cAAP,CAAsBP,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,aAAOD,SAAP;AAAmB,MAA1C,MAAgD;AAAE,aAAO7B,IAAI8B,MAAJ,EAAYL,QAAZ,EAAsBC,QAAtB,CAAP;AAAyC;AAAE,KAAnK,MAAyK,IAAI,WAAWC,IAAX,IAAmBA,KAAKvE,QAA5B,EAAsC;AAAE,YAAOuE,KAAKxE,KAAZ;AAAoB,KAA5D,MAAkE;AAAE,SAAI6E,SAASL,KAAK3B,GAAlB,CAAuB,IAAIgC,WAAWH,SAAf,EAA0B;AAAE,aAAOA,SAAP;AAAmB,MAAC,OAAOG,OAAO9F,IAAP,CAAYwF,QAAZ,CAAP;AAA+B;AAAE,IAAzc;;AAEA,OAAIO,YAAY,SAAZA,SAAY,CAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAAE,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,WAAM,IAAIvE,SAAJ,CAAc,qEAAoEuE,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAsG,KAACD,SAASzE,SAAT,GAAqBJ,OAAO+E,MAAP,CAAcD,cAAcA,WAAW1E,SAAvC,EAAkD,EAAE4E,aAAa,EAAElF,OAAO+E,QAAT,EAAmBI,YAAY,KAA/B,EAAsClF,UAAU,IAAhD,EAAsDF,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIiF,UAAJ,EAAgBD,SAASK,SAAT,GAAqBJ,UAArB;AAAkC,IAA/a;;AAEA,OAAIzE,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAI6M,MAAM3O,oBAAoB,CAApB,CAAV;AACA,OAAI2G,YAAY3G,oBAAoB,CAApB,CAAhB;;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA,OAAIwF,eAAgB,UAAUsB,UAAV,EAAsB;AACxC,aAAStB,YAAT,GAAwB;AACtB5D,qBAAgB,IAAhB,EAAsB4D,YAAtB;;AAEA,SAAIuB,UAAU,CAAC,OAAD,EAAU,OAAV,CAAd;;AAEA,SAAIC,WAAW;AACbC,YAAM,CAAC,GAAD,EAAM,GAAN;AADO,MAAf;;AAIAxB,UAAKlE,OAAO0E,cAAP,CAAsBT,aAAa7D,SAAnC,CAAL,EAAoD,aAApD,EAAmE,IAAnE,EAAyEvB,IAAzE,CAA8E,IAA9E,EAAoFuH,SAApF,EAA+FZ,OAA/F,EAAwGC,QAAxG;;AAEA,UAAKrE,OAAL,GAAe/D,MAAM+D,OAArB,CAXsB,CAWQ;;AAE9B,UAAK4kB,QAAL,GAAgB,KAAK5kB,OAAL,CAAa6kB,cAAb,EAAhB;AACA,UAAKD,QAAL,CAAcE,OAAd,GAAwB,IAAxB;AACA,UAAKC,YAAL,GAAoB,KAAKH,QAAL,CAAcI,iBAAlC;AACA,UAAKC,SAAL,GAAiB,IAAIC,UAAJ,CAAe,KAAKH,YAApB,CAAjB;AACA,UAAKH,QAAL,CAAckC,qBAAd,CAAoC,KAAK7B,SAAzC;;AAEA,UAAKrO,MAAL,GAAc,IAAd;;AAEA,UAAKuO,MAAL,GAAc,KAAd;;AAEA,UAAK1f,IAAL;;AAEA,UAAKC,MAAL;AACD;;AAEDlC,cAAUX,YAAV,EAAwBsB,UAAxB;;AAEAhG,iBAAa0E,YAAb,EAA2B;AACzB+K,iBAAY;AACVlP,aAAO,SAASkP,UAAT,GAAsB;AAC3B,YAAKwX,MAAL,GAAc,IAAIpZ,IAAI8E,WAAR,CAAoB,KAAKzN,MAAzB,CAAd;AACA,YAAKwC,OAAL,GAAe,KAAKuf,MAAL,CAAYvf,OAA3B;AACD;AAJS,MADa;AAOzBE,oBAAe;AACbrH,aAAO,SAASqH,aAAT,GAAyB;AAC9B,YAAKqf,MAAL,CAAYpf,MAAZ,CAAmB,KAAKV,KAAxB,EAA+B,KAAKC,MAApC;AACD;AAHY,MAPU;AAYzBgB,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,YAAK6e,MAAL,CAAYvf,OAAZ,CAAoBW,KAApB,CAA0BC,eAA1B,GAA4C,KAAK3F,MAAL,CAAYE,IAAxD;AACD;AAHa,MAZS;AAiBzB0E,aAAQ;AACNhH,aAAO,SAASgH,MAAT,GAAkB;;AAEvB,WAAI,KAAKkR,MAAT,EAAiB;AACfyO,8BAAsB,KAAK3f,MAAL,CAAY9E,IAAZ,CAAiB,IAAjB,CAAtB;AACD;;AAED,YAAKgkB,QAAL,CAAckC,qBAAd,CAAoC,KAAK7B,SAAzC;;AAEA,YAAKG,MAAL,CAAYplB,OAAZ,CAAoBulB,SAApB,GAAgC,KAAKzkB,MAAL,CAAYE,IAA5C;AACA,YAAKokB,MAAL,CAAYplB,OAAZ,CAAoBwlB,QAApB,CAA6B,CAA7B,EAAgC,CAAhC,EAAmC,KAAKJ,MAAL,CAAYvf,OAAZ,CAAoBP,KAAvD,EAA8D,KAAK8f,MAAL,CAAYvf,OAAZ,CAAoBN,MAAlF;;AAEA,YAAK6f,MAAL,CAAYplB,OAAZ,CAAoB+mB,SAApB,GAAgC,CAAE,EAAE,KAAKxhB,MAAL,GAAc,GAAd,GAAoB,CAAtB,CAAlC;AACA,YAAK6f,MAAL,CAAYplB,OAAZ,CAAoBgnB,WAApB,GAAkC,KAAKlmB,MAAL,CAAYC,MAA9C;;AAEA,YAAKqkB,MAAL,CAAYplB,OAAZ,CAAoBinB,SAApB;;AAEA,WAAI,KAAK9B,MAAT,EAAiB;;AAEf,YAAI+B,aAAa,KAAK9B,MAAL,CAAYvf,OAAZ,CAAoBP,KAApB,GAA4B,CAA5B,GAAgC,KAAKyf,YAAtD;AACA,YAAIpgB,IAAI,CAAR;;AAEA,aAAK,IAAI4D,IAAI,CAAb,EAAgBA,IAAI,KAAKwc,YAAzB,EAAuCxc,GAAvC,EAA4C;;AAE1C,aAAI/L,IAAI,KAAKyoB,SAAL,CAAe1c,CAAf,IAAoB,GAA5B;AACA,aAAIxD,IAAIvI,IAAI,KAAK4oB,MAAL,CAAYvf,OAAZ,CAAoBN,MAAxB,GAAiC,CAAzC;;AAEA,aAAIgD,MAAM,CAAV,EAAa;AACX,eAAK6c,MAAL,CAAYplB,OAAZ,CAAoBmnB,MAApB,CAA2BxiB,CAA3B,EAA8BI,CAA9B;AACD,UAFD,MAEO;AACL,eAAKqgB,MAAL,CAAYplB,OAAZ,CAAoBonB,MAApB,CAA2BziB,CAA3B,EAA8BI,CAA9B;AACD;;AAEDJ,cAAKuiB,UAAL;AACD;AACF,QAlBD,MAkBO;AACL,aAAK9B,MAAL,CAAYplB,OAAZ,CAAoBmnB,MAApB,CAA2B,CAA3B,EAA8B,KAAK/B,MAAL,CAAYvf,OAAZ,CAAoBN,MAApB,GAA6B,CAA3D;AACA,aAAK6f,MAAL,CAAYplB,OAAZ,CAAoBonB,MAApB,CAA2B,KAAKhC,MAAL,CAAYvf,OAAZ,CAAoBP,KAA/C,EAAsD,KAAK8f,MAAL,CAAYvf,OAAZ,CAAoBN,MAApB,GAA6B,CAAnF;AACD;;AAED,YAAK6f,MAAL,CAAYplB,OAAZ,CAAoBqnB,MAApB;AACD;AAzCK,MAjBiB;AA4DzBxB,cAAS;;AAEP;;;;;AAKAnnB,aAAO,SAASmnB,OAAT,CAAiB3C,IAAjB,EAAuB;;AAE5B,WAAI,KAAKiC,MAAT,EAAiB;AACf,aAAKW,UAAL;AACD;;AAED,YAAKX,MAAL,GAAcjC,IAAd;AACA,YAAKiC,MAAL,CAAYU,OAAZ,CAAoB,KAAKjB,QAAzB;;AAEA,YAAKlf,MAAL;AACD;AAjBM,MA5DgB;AA+EzBogB,iBAAY;;AAEV;;;;AAIApnB,aAAO,SAASonB,UAAT,GAAsB;AAC3B,WAAI,KAAKX,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYW,UAAZ,CAAuB,KAAKlB,QAA5B;AACA,aAAKO,MAAL,GAAc,IAAd;AACD;AACF;AAXS,MA/Ea;AA4FzBve,YAAO;AACLlI,aAAO,SAASkI,KAAT,GAAiB;AACtB,YAAKgQ,MAAL,GAAc,CAAC,KAAKA,MAApB;AACA,YAAKlR,MAAL;AACD;AAJI,MA5FkB;AAkGzBqK,oBAAe;AACbrR,aAAO,SAASqR,aAAT,GAAyB;AAC9B,YAAK6G,MAAL,GAAc,KAAd;AACD;AAHY;AAlGU,KAA3B;;AAyGA,WAAO/T,YAAP;AACD,IAzIkB,CAyIhBmB,SAzIgB,CAAnB;;AA2IA9G,UAAOD,OAAP,GAAiB4F,YAAjB;;AAED;AAAO,GAxqQG;AAyqQV;AACA,OAAO,UAAS3F,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAID,0BAA0B,SAA1BA,uBAA0B,CAAUC,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAE,WAAWA,GAAb,EAArC;AAA0D,IAAzG;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAIkC,YAAYtD,wBAAwBV,oBAAoB,EAApB,CAAxB,CAAhB;;AAEA,OAAI2O,MAAM9N,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAV;;AAEA,OAAIiC,OAAQ,YAAY;AACtB,aAASA,IAAT,CAAcjB,MAAd,EAAsB6G,QAAtB,EAAgC;AAC9BjG,qBAAgB,IAAhB,EAAsBK,IAAtB;;AAEA,UAAKgoB,IAAL,GAAY,EAAZ;AACA,UAAKA,IAAL,CAAUjpB,MAAV,GAAmBA,MAAnB;AACA,UAAKipB,IAAL,CAAUjkB,MAAV,GAAmB2I,IAAImB,YAAJ,CAAiB9O,MAAjB,CAAnB,CAL8B,CAKe;AAC7C,UAAKipB,IAAL,CAAUxmB,MAAV,GAAmB,EAAnB;;AAEA,SAAIoE,QAAJ,EAAc;AACZ,WAAKoiB,IAAL,CAAUC,SAAV,GAAsBriB,SAASqiB,SAAT,IAAsB,UAA5C;AACA,WAAKD,IAAL,CAAUxH,KAAV,GAAkB5a,SAASoH,IAAT,IAAiB,KAAnC;AACA,WAAKgb,IAAL,CAAUE,IAAV,GAAiBtiB,SAASsiB,IAAT,IAAiB,KAAlC;AACD,MAJD,MAIO;AACL,WAAKF,IAAL,CAAUC,SAAV,GAAsB,UAAtB;AACA,WAAKD,IAAL,CAAUxH,KAAV,GAAkB,KAAlB;AACA,WAAKwH,IAAL,CAAUE,IAAV,GAAiB,KAAjB;AACD;;AAED,SAAI/a,gBAAgBxQ,MAAM6E,MAA1B,CAlB8B,CAkBI;AAClC,UAAKwmB,IAAL,CAAUxmB,MAAV,CAAiBC,MAAjB,GAA0B0L,cAAc1L,MAAxC;AACA,UAAKumB,IAAL,CAAUxmB,MAAV,CAAiBE,IAAjB,GAAwByL,cAAczL,IAAtC;AACA,UAAKsmB,IAAL,CAAUxmB,MAAV,CAAiBG,KAAjB,GAAyBwL,cAAcxL,KAAvC;AACA,UAAKqmB,IAAL,CAAUxmB,MAAV,CAAiBI,IAAjB,GAAwBuL,cAAcvL,IAAtC;AACA,UAAKomB,IAAL,CAAUxmB,MAAV,CAAiBK,WAAjB,GAA+BsL,cAActL,WAA7C;AACA,UAAKmmB,IAAL,CAAUxmB,MAAV,CAAiBM,UAAjB,GAA8BqL,cAAcrL,UAA5C;AACA,UAAKuE,cAAL;AACA,UAAKY,cAAL;AACD;;AAEDpI,iBAAamB,IAAb,EAAmB;AACjBqG,qBAAgB;AACdjH,aAAO,SAASiH,cAAT,GAA0B;AAC/B,WAAIoI,QAAQ,IAAZ;;AAEA,YAAKuZ,IAAL,CAAUjkB,MAAV,CAAiBmD,KAAjB,CAAuBihB,SAAvB,GAAmC,YAAnC;AACA,YAAKH,IAAL,CAAUjkB,MAAV,CAAiBmD,KAAjB,CAAuBkhB,UAAvB,GAAoC,MAApC;AACA,YAAKJ,IAAL,CAAUjkB,MAAV,CAAiBmD,KAAjB,CAAuBmhB,aAAvB,GAAuC,MAAvC;AACA,YAAKL,IAAL,CAAUjkB,MAAV,CAAiBmD,KAAjB,CAAuBohB,gBAAvB,GAA0C,MAA1C;;AAEA,YAAKN,IAAL,CAAUO,QAAV,GAAqB3rB,SAAS6U,aAAT,CAAuB,KAAvB,CAArB;;AAEA,cAAO,KAAKuW,IAAL,CAAUjkB,MAAV,CAAiBykB,UAAjB,CAA4Bvd,MAA5B,GAAqC,CAA5C,EAA+C;AAC7C,aAAK+c,IAAL,CAAUO,QAAV,CAAmB/hB,WAAnB,CAA+B,KAAKwhB,IAAL,CAAUjkB,MAAV,CAAiBykB,UAAjB,CAA4B,CAA5B,CAA/B;AACD;;AAED,YAAKR,IAAL,CAAUO,QAAV,CAAmBrhB,KAAnB,CAAyByU,OAAzB,GAAmC,KAAnC;AACA,YAAKqM,IAAL,CAAUO,QAAV,CAAmBrhB,KAAnB,CAAyBihB,SAAzB,GAAqC,YAArC;;AAEA,WAAI,KAAKH,IAAL,CAAUxH,KAAd,EAAqB;AACnB,aAAKwH,IAAL,CAAUS,QAAV,GAAqB7rB,SAAS6U,aAAT,CAAuB,KAAvB,CAArB;AACA,aAAKuW,IAAL,CAAUS,QAAV,CAAmB3R,SAAnB,GAA+B,KAAKkR,IAAL,CAAUxH,KAAzC;AACA,aAAKwH,IAAL,CAAUS,QAAV,CAAmBvhB,KAAnB,CAAyBwhB,UAAzB,GAAsC,OAAtC;AACA,aAAKV,IAAL,CAAUS,QAAV,CAAmBvhB,KAAnB,CAAyBpB,QAAzB,GAAoC,UAApC;AACA,aAAKkiB,IAAL,CAAUS,QAAV,CAAmBvhB,KAAnB,CAAyByJ,KAAzB,GAAiC,MAAjC;AACA,aAAKqX,IAAL,CAAUS,QAAV,CAAmBvhB,KAAnB,CAAyByU,OAAzB,GAAmC,KAAnC;AACA,aAAKqM,IAAL,CAAUS,QAAV,CAAmBvhB,KAAnB,CAAyB6R,QAAzB,GAAoC,MAApC;;AAEA,aAAKiP,IAAL,CAAUhrB,MAAV,GAAmBJ,SAAS6U,aAAT,CAAuB,KAAvB,CAAnB;AACA,aAAKuW,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuBpB,QAAvB,GAAkC,UAAlC;AACA,aAAKkiB,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuB6J,GAAvB,GAA6B,KAA7B;AACA,aAAKiX,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuByhB,KAAvB,GAA+B,KAA/B;AACA,aAAKX,IAAL,CAAUhrB,MAAV,CAAiB8Z,SAAjB,GAA6B,GAA7B;AACA,aAAKkR,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuByU,OAAvB,GAAiC,aAAjC;AACA,aAAKqM,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuB0hB,UAAvB,GAAoC,MAApC;AACA,aAAKZ,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuB6R,QAAvB,GAAkC,MAAlC;;AAEA,aAAKiP,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuBmI,MAAvB,GAAgC,SAAhC;;AAEA,aAAK2Y,IAAL,CAAUhrB,MAAV,CAAiBH,gBAAjB,CAAkC,WAAlC,EAA+C,YAAY;AACzD4R,eAAMuZ,IAAN,CAAWhrB,MAAX,CAAkBkK,KAAlB,CAAwBC,eAAxB,GAA0CsH,MAAMuZ,IAAN,CAAWxmB,MAAX,CAAkBM,UAA5D;AACD,SAFD;AAGA,aAAKkmB,IAAL,CAAUhrB,MAAV,CAAiBH,gBAAjB,CAAkC,YAAlC,EAAgD,YAAY;AAC1D4R,eAAMuZ,IAAN,CAAWhrB,MAAX,CAAkBkK,KAAlB,CAAwBC,eAAxB,GAA0CsH,MAAMuZ,IAAN,CAAWxmB,MAAX,CAAkBK,WAA5D;AACD,SAFD;AAGA,aAAKmmB,IAAL,CAAUhrB,MAAV,CAAiBH,gBAAjB,CAAkC,OAAlC,EAA2C,YAAY;AACrD,aAAI4R,MAAMuZ,IAAN,CAAWE,IAAf,EAAqB;AACnBzZ,gBAAMoa,IAAN;AACD,UAFD,MAEO;AACLpa,gBAAMqa,IAAN;AACD;AACF,SAND;;AAQA,aAAKd,IAAL,CAAUS,QAAV,CAAmBjiB,WAAnB,CAA+B,KAAKwhB,IAAL,CAAUhrB,MAAzC;;AAEA,aAAKgrB,IAAL,CAAUjkB,MAAV,CAAiByC,WAAjB,CAA6B,KAAKwhB,IAAL,CAAUS,QAAvC;AACD;AACD,YAAKT,IAAL,CAAUjkB,MAAV,CAAiByC,WAAjB,CAA6B,KAAKwhB,IAAL,CAAUO,QAAvC;;AAEA;AACA;;AAEA,WAAIzL,KAAK/a,UAAUgnB,OAAV,CAAkB,KAAKf,IAAL,CAAUjpB,MAA5B,EAAoC,KAAKipB,IAAL,CAAUC,SAA9C,CAAT;AACA,YAAK,IAAIhpB,GAAT,IAAgB6d,EAAhB,EAAoB;AAClB,aAAK7d,GAAL,IAAY6d,GAAG7d,GAAH,CAAZ;AACD;AACF;AAjEa,MADC;AAoEjBgI,qBAAgB;AACd7H,aAAO,SAAS6H,cAAT,GAA0B;AAC/B,WAAI,KAAK+gB,IAAL,CAAUxH,KAAd,EAAqB;AACnB,aAAKwH,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuBC,eAAvB,GAAyC,KAAK6gB,IAAL,CAAUxmB,MAAV,CAAiBK,WAA1D;AACA,aAAKmmB,IAAL,CAAUhrB,MAAV,CAAiBkK,KAAjB,CAAuBkS,MAAvB,GAAgC,eAAe,KAAK4O,IAAL,CAAUxmB,MAAV,CAAiBE,IAAhE;AACA,aAAKsmB,IAAL,CAAUjkB,MAAV,CAAiBmD,KAAjB,CAAuBkS,MAAvB,GAAgC,eAAe,KAAK4O,IAAL,CAAUxmB,MAAV,CAAiBK,WAAhE;AACA,aAAKmmB,IAAL,CAAUjkB,MAAV,CAAiBmD,KAAjB,CAAuBC,eAAvB,GAAyC,KAAK6gB,IAAL,CAAUxmB,MAAV,CAAiBG,KAA1D;AACA,aAAKqmB,IAAL,CAAUS,QAAV,CAAmBvhB,KAAnB,CAAyBC,eAAzB,GAA2C,KAAK6gB,IAAL,CAAUxmB,MAAV,CAAiBE,IAA5D;AACD;AACF;AATa,MApEC;AA+EjBonB,WAAM;AACJ1pB,aAAO,SAAS0pB,IAAT,GAAgB;AACrB,YAAKd,IAAL,CAAUO,QAAV,CAAmBrhB,KAAnB,CAAyBiU,OAAzB,GAAmC,OAAnC;AACA,YAAK6M,IAAL,CAAUE,IAAV,GAAiB,IAAjB;AACD;AAJG,MA/EW;AAqFjBW,WAAM;AACJzpB,aAAO,SAASypB,IAAT,GAAgB;AACrB,YAAKb,IAAL,CAAUO,QAAV,CAAmBrhB,KAAnB,CAAyBiU,OAAzB,GAAmC,MAAnC;AACA,YAAK6M,IAAL,CAAUE,IAAV,GAAiB,KAAjB;AACD;AAJG,MArFW;AA2FjBxX,eAAU;AACRtR,aAAO,SAASsR,QAAT,CAAkB1I,IAAlB,EAAwB2I,KAAxB,EAA+B;AACpC,YAAK,IAAI1R,GAAT,IAAgB,IAAhB,EAAsB;AACpB,YAAI,KAAKA,GAAL,EAAUyR,QAAd,EAAwB;AACtB,cAAKzR,GAAL,EAAUyR,QAAV,CAAmB1I,IAAnB,EAAyB2I,KAAzB;AACD;AACF;AACD,YAAKqX,IAAL,CAAUxmB,MAAV,CAAiBwG,IAAjB,IAAyB2I,KAAzB;AACA,YAAK1J,cAAL;AACD;AATO,MA3FO;AAsGjBkJ,YAAO;AACL/Q,aAAO,SAAS+Q,KAAT,GAAiB;AACtB,YAAK,IAAIlR,GAAT,IAAgB,IAAhB,EAAsB;AACpB,YAAI,KAAKA,GAAL,EAAUqR,OAAd,EAAuB;AACrB,cAAKrR,GAAL,EAAUqR,OAAV;AACD;AACF;AACF;AAPI;AAtGU,KAAnB;;AAiHA,WAAOtQ,IAAP;AACD,IAhJU,EAAX;;AAkJApC,UAAOD,OAAP,GAAiBqC,IAAjB;;AAED;AAAO,GAp3QG;AAq3QV;AACA,OAAO,UAASpC,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEAY,UAAO4U,cAAP,CAAsBvW,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CyB,WAAO;AADoC,IAA7C;AAGA;;AAEA,OAAIsN,MAAM9N,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAV;;AAEA,OAAI+B,aAAalB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAjB;;AAEA,OAAIirB,oBAAoB,SAApBA,iBAAoB,CAAUC,MAAV,EAAkBC,YAAlB,EAAgC;AACtD,QAAIlhB,OAAOihB,OAAOjhB,IAAlB;AACA,QAAIkhB,aAAalhB,IAAb,CAAJ,EAAwB;AACtBkhB,kBAAalhB,IAAb;AACD,KAFD,MAEO;AACLkhB,kBAAalhB,IAAb,IAAqB,CAArB;AACD;AACD,WAAOA,OAAOkhB,aAAalhB,IAAb,CAAd;AACD,IARD;;AAUA,OAAIzB,UAAU,iBAAUA,QAAV,EAAmByB,IAAnB,EAAyBlD,OAAzB,EAAkC;AAC9CA,cAAUA,WAAW,EAArB;AACA,SAAK,IAAImE,IAAI,CAAb,EAAgBA,IAAI1C,SAAQ4iB,UAAR,CAAmBle,MAAvC,EAA+ChC,GAA/C,EAAoD;AAClD,SAAImgB,MAAM7iB,SAAQ4iB,UAAR,CAAmBlgB,CAAnB,CAAV;AACA;AACA;AACA;AACAnE,aAAQskB,IAAIC,QAAZ,IAAwBD,IAAIE,SAA5B;AACA;AACD;AACDthB,WAAOA,KAAK,CAAL,EAAQuhB,WAAR,KAAwBvhB,KAAK8K,KAAL,CAAW,CAAX,CAA/B;AACA,QAAImW,SAAS,IAAInpB,WAAWkI,IAAX,CAAJ,CAAqBzB,QAArB,EAA8BzB,OAA9B,CAAb;AACAmkB,WAAOhrB,EAAP,GAAYsI,SAAQtI,EAApB;AACA,WAAOgrB,MAAP;AACD,IAdD;;AAgBA,OAAIF,UAAU,SAAVA,OAAU,CAAUhlB,MAAV,EAAkBylB,OAAlB,EAA2B;;AAEvCA,cAAUA,WAAW,UAArB;;AAEA,QAAIN,eAAe,EAAnB;;AAEA,QAAIzR,YAAY/K,IAAImB,YAAJ,CAAiB9J,MAAjB,CAAhB;;AAEA,QAAI+Y,KAAK,EAAT;;AAEA,QAAI2M,eAAehS,UAAUiS,oBAAV,CAA+B,GAA/B,CAAnB;AACA,QAAIC,WAAW,EAAf;AACA,SAAK,IAAI1gB,IAAI,CAAb,EAAgBA,IAAIwgB,aAAaxe,MAAjC,EAAyChC,GAAzC,EAA8C;AAC5C0gB,cAASxgB,IAAT,CAAcsgB,aAAaxgB,CAAb,CAAd;AACD;AACD,SAAK,IAAIA,IAAI,CAAb,EAAgBA,IAAI0gB,SAAS1e,MAA7B,EAAqChC,GAArC,EAA0C;AACxC,SAAIjB,OAAO2hB,SAAS1gB,CAAT,EAAY2gB,YAAZ,CAAyBJ,OAAzB,CAAX;AACA,SAAIxhB,IAAJ,EAAU;AACR,UAAI6hB,gBAAgB,KAApB;AACA,WAAK,IAAI5qB,GAAT,IAAgBa,UAAhB,EAA4B;AAC1B,WAAIkI,KAAK8hB,WAAL,OAAuB7qB,IAAI6qB,WAAJ,EAA3B,EAA8C;AAC5CD,wBAAgB5qB,GAAhB;AACD;AACF;AACD3B,cAAQC,GAAR,CAAYssB,aAAZ;AACA,UAAIZ,SAAS1iB,QAAQojB,SAAS1gB,CAAT,CAAR,EAAqB4gB,aAArB,CAAb;AACA,UAAIZ,OAAOhrB,EAAX,EAAe;AACb6e,UAAGmM,OAAOhrB,EAAV,IAAgBgrB,MAAhB;AACD,OAFD,MAEO;AACL,WAAIhrB,KAAK+qB,kBAAkBC,MAAlB,EAA0BC,YAA1B,CAAT;AACApM,UAAG7e,EAAH,IAASgrB,MAAT;AACD;AACF;AACF;;AAED,WAAOnM,EAAP;AACD,IApCD;;AAsCA,OAAI9a,MAAM,SAANA,GAAM,CAAUgG,IAAV,EAAgBlD,OAAhB,EAAyB;AACjC,QAAI/F,SAASnC,SAAS6U,aAAT,CAAuB,KAAvB,CAAb;AACA,QAAI1N,SAASnH,SAAS2Q,IAAtB;AACA,QAAIzI,OAAJ,EAAa;AACXf,cAASe,QAAQf,MAAjB;AACD,KAFD,MAEO;AACLe,eAAU,EAAV;AACD;AACDf,aAAS2I,IAAImB,YAAJ,CAAiB9J,MAAjB,CAAT;AACAA,WAAOyC,WAAP,CAAmBzH,MAAnB;AACA+F,YAAQ/F,MAAR,GAAiBA,MAAjB;AACA,QAAI+F,QAAQE,IAAZ,EAAkB;AAChBjG,YAAOmI,KAAP,CAAalB,KAAb,GAAqBlB,QAAQE,IAAR,CAAa,CAAb,IAAkB,IAAvC;AACAjG,YAAOmI,KAAP,CAAajB,MAAb,GAAsBnB,QAAQE,IAAR,CAAa,CAAb,IAAkB,IAAxC;AACD;AACD,WAAOuB,QAAQxH,MAAR,EAAgBiJ,IAAhB,EAAsBlD,OAAtB,CAAP;AACD,IAhBD;;AAkBAnH,WAAQ4I,OAAR,GAAkBA,OAAlB;AACA5I,WAAQorB,OAAR,GAAkBA,OAAlB;AACAprB,WAAQqE,GAAR,GAAcA,GAAd;;AAED;AAAO,GA39QG;AA49QV;AACA,OAAO,UAASpE,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD;;AAEA,OAAIa,kBAAkB,SAAlBA,eAAkB,CAAUF,GAAV,EAAe;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,IAAI,SAAJ,CAAxB,GAAyCA,GAAhD;AAAsD,IAA7F;;AAEA,OAAIG,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIE,OAAOnB,gBAAgBb,oBAAoB,CAApB,CAAhB,CAAX;;AAEA,OAAIkC,OAAQ,YAAY;AACtB,aAASA,IAAT,GAAgB;AACdN,qBAAgB,IAAhB,EAAsBM,IAAtB;;AAEA;AACA,UAAKqJ,KAAL,GAAa,EAAb;;AAEA;AACA,UAAKrE,IAAL,GAAY;AACV8kB,cAAQ,WADE;AAEVpe,aAAO;AAFG,MAAZ;;AAKA;AACA,UAAKqe,OAAL,GAAe,CAAC,SAAD,EAAY,UAAZ,EAAwB,UAAxB,EAAoC,UAApC,EAAgD,UAAhD,EAA4D,GAA5D,EAAiE,UAAjE,EAA6E,SAA7E,CAAf;;AAEA;AACA,UAAKvsB,IAAL,GAAYsC,KAAK2K,IAAL,CAAU,EAAV,CAAZ,CAhBc,CAgBa;;AAE3B;AACA,UAAKuf,WAAL,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,EAAnC;AACD;;AAEDprB,iBAAaoB,IAAb,EAAmB;AACjBoB,WAAM;;AAEJ;;AAEAjC,aAAO,SAASiC,IAAT,CAAcsK,KAAd,EAAqBT,MAArB,EAA6B;;AAElC,WAAIqN,WAAWzU,SAAf;;AAEA,WAAI,KAAKmB,IAAL,CAAU8kB,MAAV,KAAqB,WAAzB,EAAsC;AACpCxR,mBAAW,KAAK2R,SAAL,CAAeve,KAAf,EAAsBT,MAAtB,CAAX;AACD,QAFD,MAEO,IAAI,KAAKjG,IAAL,CAAU8kB,MAAV,KAAqB,OAAzB,EAAkC;AACvCxR,mBAAW,KAAK4R,KAAL,CAAWxe,KAAX,EAAkBT,MAAlB,CAAX;AACD,QAFM,MAEA,IAAI,KAAKjG,IAAL,CAAU8kB,MAAV,KAAqB,MAAzB,EAAiC;AACtCxR,mBAAW,KAAK6R,IAAL,CAAUze,KAAV,EAAiBT,MAAjB,CAAX;AACD,QAFM,MAEA;AACLqN,mBAAW,KAAK2R,SAAL,CAAeve,KAAf,EAAsBT,MAAtB,CAAX;AACD;;AAED,cAAOqN,QAAP;AACD;AAnBG,MADW;AAsBjB2R,gBAAW;;AAET;;AAEA9qB,aAAO,SAAS8qB,SAAT,CAAmBG,MAAnB,EAA2BC,QAA3B,EAAqC;;AAE1C,WAAI,KAAKrlB,IAAL,CAAU0G,KAAV,KAAoB,MAApB,IAA8B,KAAK1G,IAAL,CAAU0G,KAAV,KAAoB,MAAtD,EAA8D;AAC5D,aAAK0e,MAAL,IAAe,EAAf;AACD;;AAED;AACA,WAAInf,SAAStE,KAAK4E,KAAL,CAAW6e,SAAS,KAAK/gB,KAAL,CAAW2B,MAA/B,CAAb;;AAEA,WAAIqf,QAAJ,EAAc;AACZpf,kBAAUof,QAAV;AACD;;AAED;AACA,WAAIC,cAAcF,SAAS,KAAK/gB,KAAL,CAAW2B,MAAtC;;AAEA,cAAOsf,cAAc,CAArB,EAAwB;AACtBA,uBAAe,KAAKjhB,KAAL,CAAW2B,MAA1B;AACD;;AAED,WAAIkf,QAAQ,KAAK7gB,KAAL,CAAWihB,WAAX,CAAZ;;AAEA,WAAIC,OAAO,KAAK/sB,IAAL,GAAY0sB,KAAvB;;AAEAK,cAAOA,OAAO5jB,KAAKgE,GAAL,CAAS,CAAT,EAAYM,MAAZ,CAAd;;AAEA;AACAsf,cAAO5jB,KAAK4E,KAAL,CAAWgf,OAAO,YAAlB,IAAkC,YAAzC;;AAEA,cAAOA,IAAP;AACD;AAlCQ,MAtBM;AA0DjBL,YAAO;;AAEL;;AAEA/qB,aAAO,SAAS+qB,KAAT,CAAeE,MAAf,EAAuBC,QAAvB,EAAiC;;AAEtC,WAAI,KAAKrlB,IAAL,CAAU0G,KAAV,KAAoB,MAApB,IAA8B,KAAK1G,IAAL,CAAU0G,KAAV,KAAoB,MAAtD,EAA8D;AAC5D,aAAK0e,MAAL,IAAe,EAAf;AACD;;AAED;AACA,WAAInf,SAAStE,KAAK4E,KAAL,CAAW6e,SAAS,KAAK/gB,KAAL,CAAW2B,MAA/B,CAAb;;AAEA,WAAIqf,QAAJ,EAAc;AACZpf,kBAAUof,QAAV;AACD;;AAED;AACA,WAAIC,cAAcF,SAAS,KAAK/gB,KAAL,CAAW2B,MAAtC;;AAEA;AACA,WAAIkf,QAAQvjB,KAAKgE,GAAL,CAAS,CAAT,EAAYM,MAAZ,IAAsB,KAAK5B,KAAL,CAAWihB,WAAX,CAAlC;;AAEAJ,eAAQvjB,KAAK4E,KAAL,CAAW2e,QAAQ,YAAnB,IAAmC,YAA3C;;AAEA,cAAOA,KAAP;AACD;AA1BI,MA1DU;AAsFjBC,WAAM;;AAEJ;;AAEAhrB,aAAO,SAASgrB,IAAT,CAAcC,MAAd,EAAsBC,QAAtB,EAAgC;;AAErC,WAAI/R,WAAW,KAAK2R,SAAL,CAAeG,MAAf,EAAuBC,QAAvB,CAAf;;AAEA,WAAIpY,IAAI,KAAK,KAAKtL,KAAKrJ,GAAL,CAASgb,WAAW,GAApB,CAAL,GAAgC3R,KAAKrJ,GAAL,CAAS,CAAT,CAA7C;;AAEA2U,WAAItL,KAAK4E,KAAL,CAAW0G,IAAI,UAAf,IAA6B,UAAjC;;AAEA,cAAOA,CAAP;AACD;AAbG,MAtFW;AAqGjB+X,kBAAa;AACX7qB,aAAO,SAAS6qB,WAAT,GAAuB;AAC5B,WAAIQ,WAAW,EAAf;AACA,YAAK,IAAIxhB,IAAI,CAAb,EAAgBA,IAAIvD,UAAUuF,MAA9B,EAAsChC,GAAtC,EAA2C;AACzCwhB,iBAASthB,IAAT,CAAcpJ,KAAK2K,IAAL,CAAU,KAAKhF,UAAUuD,CAAV,CAAf,CAAd;AACD;AACD,YAAKyhB,wBAAL,CAA8BD,QAA9B;AACD;AAPU,MArGI;AA8GjBE,oBAAe;AACbvrB,aAAO,SAASurB,aAAT,GAAyB;AAC9B,YAAKrhB,KAAL,GAAa,EAAb;AACA,YAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAIvD,UAAUuF,MAA9B,EAAsChC,GAAtC,EAA2C;AACzC,aAAKK,KAAL,CAAWH,IAAX,CAAgBzD,UAAUuD,CAAV,CAAhB;AACD;AACF;AANY,MA9GE;AAsHjByhB,+BAA0B;AACxBtrB,aAAO,SAASsrB,wBAAT,CAAkCE,KAAlC,EAAyC;AAC9C,YAAKthB,KAAL,GAAa,EAAb;AACA,YAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAI2hB,MAAM3f,MAAN,GAAe,CAAnC,EAAsChC,GAAtC,EAA2C;AACzC,aAAKK,KAAL,CAAWH,IAAX,CAAgByhB,MAAM3hB,CAAN,IAAW2hB,MAAM,CAAN,CAA3B;AACD;AACF;AANuB,MAtHT;AA8HjBC,gBAAW;;AAET;;AAEAzrB,aAAO,SAASyrB,SAAT,CAAmB7d,IAAnB,EAAyB;;AAE9B;AACA,WAAI4d,QAAQ,KAAKE,MAAL,CAAY9d,IAAZ,EAAkB+d,WAA9B;AACA,YAAKL,wBAAL,CAA8BE,KAA9B;AACD;AATQ,MA9HM;AAyIjBI,aAAQ;;AAEN;;;AAGA5rB,aAAO,SAAS4rB,MAAT,CAAgBC,OAAhB,EAAyB;AAC9B,WAAIC,WAAW,EAAf;AACA,YAAK,IAAIjsB,GAAT,IAAgB,KAAK6rB,MAArB,EAA6B;AAC3B,YAAI7rB,IAAI6qB,WAAJ,GAAkB5b,OAAlB,CAA0B+c,QAAQnB,WAAR,EAA1B,MAAqD,CAAC,CAA1D,EAA6D;AAC3DoB,kBAAS/hB,IAAT,CAAclK,GAAd;AACD;AACF;AACD,cAAOisB,QAAP;AACD;AAbK,MAzIS;AAwJjBC,YAAO;;AAEL;;AAEA/rB,aAAO,SAAS+rB,KAAT,CAAeC,KAAf,EAAsB;AAC3B,WAAIrB,SAAS,EAAb;AACA,YAAK,IAAI9gB,IAAI,CAAb,EAAgBA,IAAImiB,MAAMngB,MAA1B,EAAkChC,GAAlC,EAAuC;AACrC8gB,eAAO5gB,IAAP,CAAY,KAAK9H,IAAL,CAAU+pB,MAAMniB,CAAN,CAAV,CAAZ;AACD;AACD,cAAO8gB,MAAP;AACD;AAVI;AAxJU,KAAnB;;AAsKA,WAAO9pB,IAAP;AACD,IA9LU,EAAX;;AAgMArC,UAAOD,OAAP,GAAiBsC,IAAjB;;AAED;AAAO,GA3qRG;AA4qRV;AACA,OAAO,UAASrC,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEA,OAAIkB,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA;AACA;;AAEA,OAAIO,QAAS,YAAY;AACrB;;AAEA,aAASA,KAAT,GAAiB;AACb,UAAK,IAAIirB,OAAO3lB,UAAUuF,MAArB,EAA6BqgB,SAAStd,MAAMqd,OAAO,CAAP,GAAWA,OAAO,CAAlB,GAAsB,CAA5B,CAAtC,EAAsE1qB,OAAO,CAAlF,EAAqFA,OAAO0qB,IAA5F,EAAkG1qB,MAAlG,EAA0G;AACtG2qB,aAAO3qB,OAAO,CAAd,IAAmB+E,UAAU/E,IAAV,CAAnB;AACH;;AAED,SAAIsK,SAASvF,UAAU,CAAV,MAAiB5B,SAAjB,GAA6B,CAA7B,GAAiC4B,UAAU,CAAV,CAA9C;;AAEA/F,qBAAgB,IAAhB,EAAsBS,KAAtB;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAI6K,SAAS,CAAb,EAAgB;AACZA,eAAS,CAAT;AACH;;AAED,UAAKA,MAAL,GAAcA,MAAd;AACA,UAAKqgB,MAAL,GAAcA,MAAd;AACA,UAAKC,KAAL,GAAa,IAAIvd,KAAJ,CAAU/C,MAAV,EAAkBvJ,IAAlB,CAAuB,CAAvB,CAAb;;AAEA,SAAI4pB,OAAOrgB,MAAP,GAAgB,CAApB,EAAuB;AACnB,WAAKhO,EAAL,CAAQ8V,KAAR,CAAc,IAAd,EAAoBuY,MAApB;AACH;AACJ;;AAEDzsB,iBAAauB,KAAb,EAAoB;AAChByX,aAAQ;AACJzY,aAAO,SAASyY,MAAT,CAAgBzY,KAAhB,EAAuB;AAC1B,YAAKmsB,KAAL,CAAW7pB,IAAX,CAAgB,CAAhB;AACA,YAAK6pB,KAAL,CAAWnsB,KAAX,IAAoB,CAApB;AACA,cAAO,KAAKmsB,KAAZ;AACH;AALG,MADQ;AAQhBlW,WAAM;AACFjW,aAAO,SAASiW,IAAT,GAAgB;AACnB,YAAK,IAAIgW,OAAO3lB,UAAUuF,MAArB,EAA6B6S,SAAS9P,MAAMqd,IAAN,CAAtC,EAAmD1qB,OAAO,CAA/D,EAAkEA,OAAO0qB,IAAzE,EAA+E1qB,MAA/E,EAAuF;AACnFmd,eAAOnd,IAAP,IAAe+E,UAAU/E,IAAV,CAAf;AACH;;AAED;AACA,WAAIwL,IAAI,KAAKof,KAAb;AACA,WAAIzN,OAAO7S,MAAP,GAAgB,CAApB,EAAuB;AACnB6S,eAAOC,OAAP,CAAe,UAAU7gB,CAAV,EAAa;AACxB,aAAIA,IAAIiP,EAAElB,MAAF,GAAW,CAAnB,EAAsB;AAClB3N,kBAAQkuB,IAAR,CAAa,wBAAwBtuB,CAAxB,GAA4B,kBAAzC;AACH,UAFD,MAEO;AACHiP,YAAEjP,CAAF,IAAOiP,EAAEjP,CAAF,IAAO,CAAP,GAAW,CAAlB;AACH;AACJ,SAND;AAOH,QARD,MAQO;AACHiP,UAAE4R,OAAF,CAAU,UAAU7gB,CAAV,EAAa+L,CAAb,EAAgBuV,GAAhB,EAAqB;AAC3BA,aAAIvV,CAAJ,IAAS/L,IAAI,CAAJ,GAAQ,CAAjB;AACH,SAFD;AAGH;AACD,cAAOiP,CAAP;AACH;AAtBC,MARU;AAgChBlP,SAAI;AACAmC,aAAO,SAASnC,EAAT,GAAc;AACjB,YAAK,IAAIouB,OAAO3lB,UAAUuF,MAArB,EAA6B6S,SAAS9P,MAAMqd,IAAN,CAAtC,EAAmD1qB,OAAO,CAA/D,EAAkEA,OAAO0qB,IAAzE,EAA+E1qB,MAA/E,EAAuF;AACnFmd,eAAOnd,IAAP,IAAe+E,UAAU/E,IAAV,CAAf;AACH;;AAED;AACA,WAAIwL,IAAI,KAAKof,KAAb;AACA,WAAIzN,OAAO7S,MAAP,GAAgB,CAApB,EAAuB;AACnB6S,eAAOC,OAAP,CAAe,UAAU7gB,CAAV,EAAa;AACxB,aAAIA,IAAIiP,EAAElB,MAAF,GAAW,CAAnB,EAAsB;AAClB3N,kBAAQkuB,IAAR,CAAa,wBAAwBtuB,CAAxB,GAA4B,0BAAzC;AACH,UAFD,MAEO;AACH,cAAIiP,EAAEjP,CAAF,MAAS,CAAb,EAAgB;AACZI,mBAAQkuB,IAAR,CAAa,wBAAwBtuB,CAAxB,GAA4B,mBAAzC;AACH;AACDiP,YAAEjP,CAAF,IAAO,CAAP;AACH;AACJ,SATD;AAUH,QAXD,MAWO;AACHiP,UAAEzK,IAAF,CAAO,CAAP;AACH;AACD,cAAOyK,CAAP;AACH;AAvBD,MAhCY;AAyDhBpF,UAAK;AACD3H,aAAO,SAAS2H,GAAT,GAAe;AAClB,YAAK,IAAIskB,OAAO3lB,UAAUuF,MAArB,EAA6B6S,SAAS9P,MAAMqd,IAAN,CAAtC,EAAmD1qB,OAAO,CAA/D,EAAkEA,OAAO0qB,IAAzE,EAA+E1qB,MAA/E,EAAuF;AACnFmd,eAAOnd,IAAP,IAAe+E,UAAU/E,IAAV,CAAf;AACH;;AAED;AACA,WAAIwL,IAAI,KAAKof,KAAb;AACA,WAAIzN,OAAO7S,MAAP,GAAgB,CAApB,EAAuB;AACnB6S,eAAOC,OAAP,CAAe,UAAU7gB,CAAV,EAAa;AACxBiP,WAAEjP,CAAF,IAAO,CAAP;AACH,SAFD;AAGH,QAJD,MAIO;AACHiP,UAAEzK,IAAF,CAAO,CAAP;AACH;AACD,cAAOyK,CAAP;AACH;AAhBA;AAzDW,KAApB;;AA6EA,WAAO/L,KAAP;AACH,IA7GW,EAAZ;;AA+GAxC,UAAOD,OAAP,GAAiByC,KAAjB;;AAED;AAAO,GAzyRG;AA0yRV;AACA,OAAO,UAASxC,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD,OAAIyC,WAAWzC,oBAAoB,EAApB,CAAf;;AAEAH,UAAOD,OAAP,GAAiB6C,QAAjB;AACA,OAAI,OAAOhC,MAAP,KAAkB,WAAtB,EAAmCA,OAAOgC,QAAP,GAAkBA,QAAlB;;AAGpC;AAAO,GAnzRG;AAozRV;AACA,OAAO,UAAS5C,MAAT,EAAiBD,OAAjB,EAA0BI,mBAA1B,EAA+C;;AAErD,8BAA4B,WAAS0tB,OAAT,EAAkB;AAAC,QAAIC,YAAa,OAAOltB,MAAP,KAAkB,WAAnC;;AAE/C,QAAImtB,iBAAiB;AACnBC,oBAAe,IADI;AAEnBC,qBAAgB;;AAGlB;AALqB,KAArB,CAMA,IAAIC,QAAQ,SAARA,KAAQ,CAASvqB,KAAT,EAAgBwqB,QAAhB,EAA0BC,IAA1B,EAAgC;AAC1C,UAAKzqB,KAAL,GAAaA,KAAb;AACA,UAAKyqB,IAAL,GAAYA,IAAZ;AACA,UAAKC,QAAL,GAAgB,KAAhB,CAH0C,CAGpB;;AAEtB,UAAKL,aAAL,GAAqBrqB,MAAMqqB,aAA3B;AACA,UAAKC,cAAL,GAAsBtqB,MAAMsqB,cAA5B;AACA,UAAKK,WAAL,GAAmB,IAAnB;AACA,UAAKC,aAAL,GAAqB,IAArB;AACA,UAAKJ,QAAL,GAAgB,IAAhB;AACA,UAAKK,UAAL,GAAkB,IAAlB;;AAEA,UAAKC,QAAL,CAAcN,QAAd;AACD,KAbD;;AAeA;AACAD,UAAMpsB,SAAN,CAAgB4sB,KAAhB,GAAwB,YAAW;AACjC,UAAK/qB,KAAL,CAAWgrB,YAAX,CAAwB,IAAxB;AACA,UAAKN,QAAL,GAAgB,IAAhB;AACA,YAAO,IAAP;AACD,KAJD;;AAMA;AACAH,UAAMpsB,SAAN,CAAgB8sB,MAAhB,GAAyB,UAASC,IAAT,EAAe;AACtC,SAAIA,SAAS,CAAb,EACE,MAAM,IAAI/Z,KAAJ,CAAU,mBAAV,CAAN;AACF,UAAK0Z,UAAL,GAAkBK,IAAlB;AACA,SAAI,CAAC,KAAKlrB,KAAL,CAAWmrB,SAAX,CAAqB,IAArB,CAAL,EACE,KAAKL,QAAL,CAAc,KAAKN,QAAL,GAAgB,KAAKK,UAAnC;AACF,YAAO,IAAP;AACD,KAPD;;AASA;AACA;AACA;AACAN,UAAMpsB,SAAN,CAAgBitB,SAAhB,GAA4B,UAAS7O,MAAT,EAAiB;AAC3C,SAAI,OAAOA,OAAO8O,IAAd,KAAuB,QAA3B,EACE,KAAKhB,aAAL,GAAqB9N,OAAO8O,IAA5B;AACF,SAAI,OAAO9O,OAAO+O,KAAd,KAAwB,QAA5B,EACE,KAAKhB,cAAL,GAAsB/N,OAAO+O,KAA7B;AACF,UAAKC,sBAAL;AACA,SAAI,KAAKvrB,KAAL,CAAWmrB,SAAX,CAAqB,IAArB,CAAJ,EAAgC;AAC9B,WAAKnrB,KAAL,CAAWgrB,YAAX,CAAwB,IAAxB;AACA,WAAKhrB,KAAL,CAAWwrB,YAAX,CAAwB,IAAxB;AACD;AACD,YAAO,IAAP;AACD,KAXD;;AAaA;AACAjB,UAAMpsB,SAAN,CAAgBstB,UAAhB,GAA6B,YAAW;AAAE,YAAO,KAAKZ,UAAL,KAAoB,IAA3B;AAAiC,KAA3E;;AAEA;AACA;AACA;AACAN,UAAMpsB,SAAN,CAAgB2sB,QAAhB,GAA2B,UAASN,QAAT,EAAmB;AAC5C,UAAKE,QAAL,GAAgB,KAAhB;AACA,UAAKF,QAAL,GAAgBA,QAAhB;AACA,UAAKe,sBAAL;;AAEA,SAAI,KAAKvrB,KAAL,CAAWb,OAAX,CAAmBusB,WAAnB,IAAkC,KAAKd,aAA3C,EAA0D;AACxD,WAAKe,QAAL;AAED,MAHD,MAGO,IAAI,KAAK3rB,KAAL,CAAWmrB,SAAX,CAAqB,IAArB,CAAJ,EAAgC;AACrC,WAAKnrB,KAAL,CAAWgrB,YAAX,CAAwB,IAAxB;AACA,WAAKhrB,KAAL,CAAWwrB,YAAX,CAAwB,IAAxB;AAED,MAJM,MAIA,KAAKxrB,KAAL,CAAWwrB,YAAX,CAAwB,IAAxB;AACR,KAbD;;AAeAjB,UAAMpsB,SAAN,CAAgBytB,WAAhB,GAA8B,UAASC,IAAT,EAAejD,KAAf,EAAsB;AAClD,SAAI,KAAK6C,UAAL,EAAJ,EACE,KAAKZ,UAAL,GAAkB,KAAKA,UAAL,GAAkBjC,KAApC;;AAEF,SAAI4B,WAAWqB,OAAOjD,SAAS,KAAK4B,QAAL,GAAgBqB,IAAzB,CAAtB;AACA;AACA;AACA,SAAI,KAAKJ,UAAL,EAAJ,EAAuB;AACrB,aAAO,KAAKzrB,KAAL,CAAWb,OAAX,CAAmBusB,WAAnB,IAAkClB,WAAW,KAAKF,cAAzD;AACEE,mBAAY,KAAKK,UAAjB;AADF;AAED;AACD,UAAKC,QAAL,CAAcN,QAAd;AACD,KAZD;;AAcA;AACAD,UAAMpsB,SAAN,CAAgBwtB,QAAhB,GAA2B,YAAW;AACpC,SAAI,KAAK3rB,KAAL,CAAW8rB,QAAX,KAAwB,KAA5B,EAAmC;AACnC,UAAK9rB,KAAL,CAAWgrB,YAAX,CAAwB,IAAxB;;AAEA,SAAI,KAAKhrB,KAAL,CAAWb,OAAX,CAAmBusB,WAAnB,GAAiC,KAAKf,WAA1C,EACE,KAAKF,IAAL,CAAU,IAAV,EADF,KAEK;AACH,UAAI,KAAKsB,SAAT,EAAoB,KAAKA,SAAL,CAAe,IAAf;AACpBhwB,cAAQkuB,IAAR,CAAa,eAAb;AACD;AACD;AACA;AACA,SAAI,CAAC,KAAKjqB,KAAL,CAAWmrB,SAAX,CAAqB,IAArB,CAAD,IAA+B,KAAKM,UAAL,EAA/B,IAAoD,CAAC,KAAKf,QAA9D,EACE,KAAKI,QAAL,CAAc,KAAKN,QAAL,GAAgB,KAAKK,UAAnC;AACH,KAdD;;AAgBA;AACAN,UAAMpsB,SAAN,CAAgBotB,sBAAhB,GAAyC,YAAW;AAClD,UAAKZ,WAAL,GAAmB,KAAKH,QAAL,GAAgB,KAAKH,aAAxC;AACA,UAAKO,aAAL,GAAqB,KAAKJ,QAAL,GAAgB,KAAKF,cAA1C;AACD,KAHD;;AAKA;AACA,QAAIrrB,WAAW5C,OAAOD,OAAP,GAAiB,UAAS+C,OAAT,EAAkB6sB,IAAlB,EAAwB;AACtD,SAAIC,OAAO,IAAX;AACAD,YAAOA,QAAQ,EAAf;AACA,UAAKE,UAAL,GAAkBF,KAAKE,UAAL,IAAmB,qBAArC;AACA,UAAK5B,cAAL,GAAsB0B,KAAK1B,cAAL,IAAuBF,eAAeE,cAA5D;AACA,UAAKD,aAAL,GAAqB2B,KAAK3B,aAAL,IAAsBD,eAAeC,aAA1D;AACA,UAAKlrB,OAAL,GAAeA,OAAf;AACA,UAAKoR,OAAL,GAAe,EAAf;AACA,UAAKub,QAAL,GAAgB,KAAhB;AACD,KATD;;AAWA;AACA;AACA7sB,aAASd,SAAT,CAAmBoQ,UAAnB,GAAgC,UAASkc,IAAT,EAAe0B,KAAf,EAAsB;AACpD,YAAO,KAAKC,YAAL,CAAkB3B,IAAlB,EAAwB,KAAK4B,QAAL,CAAcF,KAAd,CAAxB,CAAP;AACD,KAFD;;AAIA;AACAltB,aAASd,SAAT,CAAmBmuB,cAAnB,GAAoC,UAAS7B,IAAT,EAAeD,QAAf,EAAyB;AAC3D,YAAO,KAAK4B,YAAL,CAAkB3B,IAAlB,EAAwBD,QAAxB,CAAP;AACD,KAFD;;AAIA;AACA;AACAvrB,aAASd,SAAT,CAAmBytB,WAAnB,GAAiC,UAASC,IAAT,EAAeU,MAAf,EAAuB3D,KAAvB,EAA8B;AAC7D2D,YAAO/P,OAAP,CAAe,UAAStQ,KAAT,EAAgB;AAAEA,YAAM0f,WAAN,CAAkBC,IAAlB,EAAwBjD,KAAxB;AAAgC,MAAjE;AACA,YAAO2D,MAAP;AACD,KAHD;;AAKA;AACAttB,aAASd,SAAT,CAAmBtC,KAAnB,GAA2B,YAAW;AACpC,SAAI,KAAKiwB,QAAL,KAAkB,KAAtB,EAA6B;AAC3B,UAAIG,OAAO,IAAX;AACA,WAAKH,QAAL,GAAgB,IAAhB;AACA,WAAKvb,OAAL,GAAe,EAAf;;AAEA,UAAI,KAAK2b,UAAL,KAAoB,qBAAxB,EAA+C;AAC7C,WAAIM,aAAa,GAAjB;AACA;AACA,YAAKC,UAAL,GAAkB,KAAKttB,OAAL,CAAautB,qBAAb,CAAmCF,UAAnC,EAA+C,CAA/C,EAAkD,CAAlD,CAAlB;AACA,YAAKC,UAAL,CAAgBzH,OAAhB,CAAwB,KAAK7lB,OAAL,CAAaiY,WAArC;AACA,YAAKqV,UAAL,CAAgBE,cAAhB,GAAiC,YAAY;AAC3CzC,gBAAQ0C,QAAR,CAAiB,YAAW;AAAEX,cAAKY,KAAL;AAAc,SAA5C;AACD,QAFD;AAGD,OARD,MAQO,IAAI,KAAKX,UAAL,KAAoB,QAAxB,EAAkC,KAAlC,CAAuC;;AAAvC,WAEF,MAAM,IAAI/a,KAAJ,CAAU,wBAAwB,KAAK+a,UAAvC,CAAN;AACN;AACF,KAlBD;;AAoBA;AACAjtB,aAASd,SAAT,CAAmB0C,IAAnB,GAA0B,YAAW;AACnC,SAAI,KAAKirB,QAAL,KAAkB,IAAtB,EAA4B;AAC1B,WAAKA,QAAL,GAAgB,KAAhB;AACA,WAAKW,UAAL,CAAgBxH,UAAhB;AACD;AACF,KALD;;AAOA;;AAEA;AACA;AACAhmB,aAASd,SAAT,CAAmB0uB,KAAnB,GAA2B,YAAW;AACpC,SAAI3gB,QAAQ,KAAKqE,OAAL,CAAauc,KAAb,EAAZ;;AAEA,YAAM5gB,SAASA,MAAM0e,aAAN,IAAuB,KAAKzrB,OAAL,CAAausB,WAAnD,EAAgE;AAC9Dxf,YAAMyf,QAAN;AACAzf,cAAQ,KAAKqE,OAAL,CAAauc,KAAb,EAAR;AACD;;AAED;AACA,SAAG5gB,KAAH,EAAU,KAAKqE,OAAL,CAAa1E,OAAb,CAAqBK,KAArB;AACX,KAVD;;AAYA;AACAjN,aAASd,SAAT,CAAmBiuB,YAAnB,GAAkC,UAAS3B,IAAT,EAAeD,QAAf,EAAyB;AACzD,YAAO,IAAID,KAAJ,CAAU,IAAV,EAAgBC,QAAhB,EAA0BC,IAA1B,CAAP;AACD,KAFD;;AAIA;AACAxrB,aAASd,SAAT,CAAmBqtB,YAAnB,GAAkC,UAAStf,KAAT,EAAgB;AAChD,UAAKqE,OAAL,CAAaxE,MAAb,CAAoB,KAAKghB,YAAL,CAAkB7gB,MAAM0e,aAAxB,CAApB,EAA4D,CAA5D,EAA+D1e,KAA/D;AACD,KAFD;;AAIA;AACAjN,aAASd,SAAT,CAAmB6sB,YAAnB,GAAkC,UAAS9e,KAAT,EAAgB;AAChD,SAAI8gB,MAAM,KAAKzc,OAAL,CAAa5D,OAAb,CAAqBT,KAArB,CAAV;AACA,SAAI8gB,QAAQ,CAAC,CAAb,EAAgB,KAAKzc,OAAL,CAAaxE,MAAb,CAAoBihB,GAApB,EAAyB,CAAzB;AACjB,KAHD;;AAKA;AACA/tB,aAASd,SAAT,CAAmBgtB,SAAnB,GAA+B,UAASjf,KAAT,EAAgB;AAC9C,YAAO,KAAKqE,OAAL,CAAa5D,OAAb,CAAqBT,KAArB,MAAgC,CAAC,CAAxC;AACA,KAFD;;AAIA;AACAjN,aAASd,SAAT,CAAmB4uB,YAAnB,GAAkC,UAASvC,QAAT,EAAmB;AACnD;AACA,SAAIzgB,MAAM,CAAV;AAAA,SACIC,OAAO,KAAKuG,OAAL,CAAa7G,MADxB;AAAA,SAEIujB,GAFJ;AAGA,YAAOljB,MAAMC,IAAb,EAAmB;AACjBijB,YAAM5nB,KAAK4E,KAAL,CAAW,CAACF,MAAMC,IAAP,IAAe,CAA1B,CAAN;AACA,UAAI,KAAKuG,OAAL,CAAa0c,GAAb,EAAkBrC,aAAlB,GAAkCJ,QAAtC,EACEzgB,MAAMkjB,MAAM,CAAZ,CADF,KAEKjjB,OAAOijB,GAAP;AACN;AACD,YAAOljB,GAAP;AACD,KAZD;;AAcA;AACA9K,aAASd,SAAT,CAAmBkuB,QAAnB,GAA8B,UAASa,OAAT,EAAkB;AAC9C,YAAOA,UAAU,KAAK/tB,OAAL,CAAausB,WAA9B;AACD,KAFD;;AAIA;AACAzsB,aAASd,SAAT,CAAmBgvB,QAAnB,GAA8B,UAASC,OAAT,EAAkB;AAC9C,YAAOA,UAAU,KAAKjuB,OAAL,CAAausB,WAA9B;AACD,KAFD;AAGA;AAA4B,IA1OA,EA0OC9uB,IA1OD,CA0OMR,OA1ON,EA0OeI,oBAAoB,EAApB,CA1Of,CAAD;;AA4O5B;AAAO,GAniSG;AAoiSV;AACA,OAAO,UAASH,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;AACA,OAAI8tB,UAAU7tB,OAAOD,OAAP,GAAiB,EAA/B;;AAEA;AACA;AACA;AACA;;AAEA,OAAIixB,gBAAJ;AACA,OAAIC,kBAAJ;;AAEA,YAASC,gBAAT,GAA4B;AACxB,UAAM,IAAIpc,KAAJ,CAAU,iCAAV,CAAN;AACH;AACD,YAASqc,mBAAT,GAAgC;AAC5B,UAAM,IAAIrc,KAAJ,CAAU,mCAAV,CAAN;AACH;AACA,gBAAY;AACT,QAAI;AACA,SAAI,OAAO5C,UAAP,KAAsB,UAA1B,EAAsC;AAClC8e,yBAAmB9e,UAAnB;AACH,MAFD,MAEO;AACH8e,yBAAmBE,gBAAnB;AACH;AACJ,KAND,CAME,OAAOxf,CAAP,EAAU;AACRsf,wBAAmBE,gBAAnB;AACH;AACD,QAAI;AACA,SAAI,OAAO3Z,YAAP,KAAwB,UAA5B,EAAwC;AACpC0Z,2BAAqB1Z,YAArB;AACH,MAFD,MAEO;AACH0Z,2BAAqBE,mBAArB;AACH;AACJ,KAND,CAME,OAAOzf,CAAP,EAAU;AACRuf,0BAAqBE,mBAArB;AACH;AACJ,IAnBA,GAAD;AAoBA,YAASC,UAAT,CAAoBC,GAApB,EAAyB;AACrB,QAAIL,qBAAqB9e,UAAzB,EAAqC;AACjC;AACA,YAAOA,WAAWmf,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD;AACA,QAAI,CAACL,qBAAqBE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgE9e,UAApE,EAAgF;AAC5E8e,wBAAmB9e,UAAnB;AACA,YAAOA,WAAWmf,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD,QAAI;AACA;AACA,YAAOL,iBAAiBK,GAAjB,EAAsB,CAAtB,CAAP;AACH,KAHD,CAGE,OAAM3f,CAAN,EAAQ;AACN,SAAI;AACA;AACA,aAAOsf,iBAAiBzwB,IAAjB,CAAsB,IAAtB,EAA4B8wB,GAA5B,EAAiC,CAAjC,CAAP;AACH,MAHD,CAGE,OAAM3f,CAAN,EAAQ;AACN;AACA,aAAOsf,iBAAiBzwB,IAAjB,CAAsB,IAAtB,EAA4B8wB,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;AACD,YAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,QAAIN,uBAAuB1Z,YAA3B,EAAyC;AACrC;AACA,YAAOA,aAAaga,MAAb,CAAP;AACH;AACD;AACA,QAAI,CAACN,uBAAuBE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuE1Z,YAA3E,EAAyF;AACrF0Z,0BAAqB1Z,YAArB;AACA,YAAOA,aAAaga,MAAb,CAAP;AACH;AACD,QAAI;AACA;AACA,YAAON,mBAAmBM,MAAnB,CAAP;AACH,KAHD,CAGE,OAAO7f,CAAP,EAAS;AACP,SAAI;AACA;AACA,aAAOuf,mBAAmB1wB,IAAnB,CAAwB,IAAxB,EAA8BgxB,MAA9B,CAAP;AACH,MAHD,CAGE,OAAO7f,CAAP,EAAS;AACP;AACA;AACA,aAAOuf,mBAAmB1wB,IAAnB,CAAwB,IAAxB,EAA8BgxB,MAA9B,CAAP;AACH;AACJ;AAIJ;AACD,OAAIC,QAAQ,EAAZ;AACA,OAAIC,WAAW,KAAf;AACA,OAAIC,YAAJ;AACA,OAAIC,aAAa,CAAC,CAAlB;;AAEA,YAASC,eAAT,GAA2B;AACvB,QAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;AACDD,eAAW,KAAX;AACA,QAAIC,aAAarkB,MAAjB,EAAyB;AACrBmkB,aAAQE,aAAanR,MAAb,CAAoBiR,KAApB,CAAR;AACH,KAFD,MAEO;AACHG,kBAAa,CAAC,CAAd;AACH;AACD,QAAIH,MAAMnkB,MAAV,EAAkB;AACdwkB;AACH;AACJ;;AAED,YAASA,UAAT,GAAsB;AAClB,QAAIJ,QAAJ,EAAc;AACV;AACH;AACD,QAAIna,UAAU8Z,WAAWQ,eAAX,CAAd;AACAH,eAAW,IAAX;;AAEA,QAAI9c,MAAM6c,MAAMnkB,MAAhB;AACA,WAAMsH,GAAN,EAAW;AACP+c,oBAAeF,KAAf;AACAA,aAAQ,EAAR;AACA,YAAO,EAAEG,UAAF,GAAehd,GAAtB,EAA2B;AACvB,UAAI+c,YAAJ,EAAkB;AACdA,oBAAaC,UAAb,EAAyBG,GAAzB;AACH;AACJ;AACDH,kBAAa,CAAC,CAAd;AACAhd,WAAM6c,MAAMnkB,MAAZ;AACH;AACDqkB,mBAAe,IAAf;AACAD,eAAW,KAAX;AACAH,oBAAgBha,OAAhB;AACH;;AAEDuW,WAAQ0C,QAAR,GAAmB,UAAUc,GAAV,EAAe;AAC9B,QAAIliB,OAAO,IAAIiB,KAAJ,CAAUtI,UAAUuF,MAAV,GAAmB,CAA7B,CAAX;AACA,QAAIvF,UAAUuF,MAAV,GAAmB,CAAvB,EAA0B;AACtB,UAAK,IAAIhC,IAAI,CAAb,EAAgBA,IAAIvD,UAAUuF,MAA9B,EAAsChC,GAAtC,EAA2C;AACvC8D,WAAK9D,IAAI,CAAT,IAAcvD,UAAUuD,CAAV,CAAd;AACH;AACJ;AACDmmB,UAAMjmB,IAAN,CAAW,IAAIwmB,IAAJ,CAASV,GAAT,EAAcliB,IAAd,CAAX;AACA,QAAIqiB,MAAMnkB,MAAN,KAAiB,CAAjB,IAAsB,CAACokB,QAA3B,EAAqC;AACjCL,gBAAWS,UAAX;AACH;AACJ,IAXD;;AAaA;AACA,YAASE,IAAT,CAAcV,GAAd,EAAmB1D,KAAnB,EAA0B;AACtB,SAAK0D,GAAL,GAAWA,GAAX;AACA,SAAK1D,KAAL,GAAaA,KAAb;AACH;AACDoE,QAAKjwB,SAAL,CAAegwB,GAAf,GAAqB,YAAY;AAC7B,SAAKT,GAAL,CAASlc,KAAT,CAAe,IAAf,EAAqB,KAAKwY,KAA1B;AACH,IAFD;AAGAE,WAAQjL,KAAR,GAAgB,SAAhB;AACAiL,WAAQmE,OAAR,GAAkB,IAAlB;AACAnE,WAAQoE,GAAR,GAAc,EAAd;AACApE,WAAQqE,IAAR,GAAe,EAAf;AACArE,WAAQsE,OAAR,GAAkB,EAAlB,CAhKgC,CAgKV;AACtBtE,WAAQuE,QAAR,GAAmB,EAAnB;;AAEA,YAASC,IAAT,GAAgB,CAAE;;AAElBxE,WAAQxuB,EAAR,GAAagzB,IAAb;AACAxE,WAAQzY,WAAR,GAAsBid,IAAtB;AACAxE,WAAQpY,IAAR,GAAe4c,IAAf;AACAxE,WAAQ1kB,GAAR,GAAckpB,IAAd;AACAxE,WAAQjY,cAAR,GAAyByc,IAAzB;AACAxE,WAAQlb,kBAAR,GAA6B0f,IAA7B;AACAxE,WAAQ7jB,IAAR,GAAeqoB,IAAf;AACAxE,WAAQyE,eAAR,GAA0BD,IAA1B;AACAxE,WAAQ0E,mBAAR,GAA8BF,IAA9B;;AAEAxE,WAAQjZ,SAAR,GAAoB,UAAUxF,IAAV,EAAgB;AAAE,WAAO,EAAP;AAAW,IAAjD;;AAEAye,WAAQ2E,OAAR,GAAkB,UAAUpjB,IAAV,EAAgB;AAC9B,UAAM,IAAI0F,KAAJ,CAAU,kCAAV,CAAN;AACH,IAFD;;AAIA+Y,WAAQ4E,GAAR,GAAc,YAAY;AAAE,WAAO,GAAP;AAAY,IAAxC;AACA5E,WAAQ6E,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,UAAM,IAAI7d,KAAJ,CAAU,gCAAV,CAAN;AACH,IAFD;AAGA+Y,WAAQ+E,KAAR,GAAgB,YAAW;AAAE,WAAO,CAAP;AAAW,IAAxC;;AAGD;AAAO,GAjuSG;AAkuSV;AACA,OAAO,UAAS5yB,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEA,OAAIkB,eAAgB,YAAY;AAAE,aAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,UAAK,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;AAAE,UAAIE,OAAOF,MAAMC,GAAN,CAAX,CAAuBC,KAAKC,YAAL,GAAoB,IAApB,CAA0B,IAAID,KAAKE,KAAT,EAAgBF,KAAKG,QAAL,GAAgB,IAAhB;AAAuB,MAACC,OAAOR,gBAAP,CAAwBC,MAAxB,EAAgCC,KAAhC;AAAyC,KAAC,OAAO,UAAUO,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,SAAID,UAAJ,EAAgBV,iBAAiBS,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBX,iBAAiBS,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,KAAhN;AAAmN,IAAza,EAAnB;;AAEA,OAAII,kBAAkB,SAAlBA,eAAkB,CAAUC,QAAV,EAAoBL,WAApB,EAAiC;AAAE,QAAI,EAAEK,oBAAoBL,WAAtB,CAAJ,EAAwC;AAAE,WAAM,IAAIM,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE,IAAhK;;AAEA,OAAIY,WAAY,YAAY;AAC1B,aAASA,QAAT,CAAkBgwB,IAAlB,EAAwBzE,IAAxB,EAA8B/uB,EAA9B,EAAkC;AAChC0C,qBAAgB,IAAhB,EAAsBc,QAAtB;;AAEA,UAAKgwB,IAAL,GAAYA,IAAZ;AACA,UAAKxzB,EAAL,GAAUA,EAAV;AACA,UAAKsE,KAAL,GAAa5E,MAAM4E,KAAnB,CALgC,CAKN;;AAE1B,UAAKgc,OAAL,GAAe,CAAC,CAAD,CAAf;AACA,UAAK3F,KAAL,GAAa,CAAb;;AAEA,UAAKnK,KAAL,GAAaue,OAAOA,IAAP,GAAc,YAAY,CAAE,CAAzC;;AAEA,SAAI,KAAK/uB,EAAT,EAAa;AACX,WAAKG,KAAL;AACD;AACF;;AAEDyB,iBAAa4B,QAAb,EAAuB;AACrBiwB,aAAQ;AACNtxB,aAAO,SAASsxB,MAAT,CAAgBphB,CAAhB,EAAmB;AACxB;AACA,YAAK7B,KAAL,CAAW6B,CAAX;AACA;AACA,YAAKsI,KAAL;AACD;AANK,MADa;AASrBxV,WAAM;AACJhD,aAAO,SAASgD,IAAT,GAAgB;AACrB,YAAKnF,EAAL,GAAU,KAAV;AACA,YAAK4f,QAAL,CAAcyP,KAAd;AACD;AAJG,MATe;AAerBlvB,YAAO;AACLgC,aAAO,SAAShC,KAAT,GAAiB;AACtB,YAAKH,EAAL,GAAU,IAAV;AACA,YAAK4f,QAAL,GAAgB,KAAKtb,KAAL,CAAWssB,cAAX,CAA0B,KAAK6C,MAAL,CAAYpvB,IAAZ,CAAiB,IAAjB,CAA1B,EAAkD,KAAKC,KAAL,CAAWb,OAAX,CAAmBusB,WAArE,EAAkFT,MAAlF,CAAyF,KAAKiE,IAAL,GAAY,IAArG,EAA2G9D,SAA3G,CAAqH,EAAEE,OAAO,GAAT,EAAcD,MAAM,CAApB,EAArH,CAAhB;AACD;AAJI,MAfc;AAqBrBpP,SAAI;AACFpe,aAAO,SAASoe,EAAT,CAAYmT,OAAZ,EAAqB;AAC1B,WAAI,KAAK1zB,EAAT,EAAa;AACX,YAAIktB,QAAQwG,UAAU,KAAKF,IAA3B;AACA,aAAKA,IAAL,GAAYE,OAAZ;AACA,aAAKpvB,KAAL,CAAW4rB,WAAX,CAAuB,KAAK5rB,KAAL,CAAWb,OAAX,CAAmBusB,WAA1C,EAAuD,CAAC,KAAKpQ,QAAN,CAAvD,EAAwEsN,KAAxE;AACD,QAJD,MAIO;AACL,aAAKsG,IAAL,GAAYE,OAAZ;AACD;AACF;AATC;AArBiB,KAAvB;;AAkCA,WAAOlwB,QAAP;AACD,IArDc,EAAf;;AAuDA7C,UAAOD,OAAP,GAAiB8C,QAAjB;;AAED;AAAO,GApySG;AAqySV,UA/0SgB;AAAhB;AAg1SC,CA11SD;AA21SA;AACA,gC;;;;;;;;AC51SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;ACrBA;;IAAY9D,K;;;;;;IAENoG,S,GACJ,qBAAa;AAAA;;AACX,OAAK5F,SAAL,GAAiB,IAAIR,MAAMoG,SAAV,CAAoB,YAApB,EAAiC;AACjD,YAAQ,CAAC,IAAD,EAAM,GAAN,CADyC;AAEjD,YAAQ,QAFyC;AAGjD,YAAQ,CAHyC;AAIjD,eAAW;AAJsC,GAAjC,CAAjB;AAOD,C;;kBAKYA,S;;;;;;;;;;;;;;AChBf;;IAAYpG,K;;;;;;IAGNmG,K,GACJ,iBAAc;AAAA;;AACZ,OAAK/F,KAAL,GAAa,IAAIJ,MAAMmG,KAAV,CAAgB,QAAhB,EAAyB;AACtC,YAAQ,CAAC,GAAD,EAAK,GAAL,CAD8B;AAEtC,YAAQ,QAF8B;AAGtC,eAAW,EAH2B;AAItC,gBAAY;AAJ0B,GAAzB,CAAb;AAMD,C;;kBAIYA,K;;;;;;;;;;;;;;;;ACff;;IAAYnG,K;;;;;;IAGN6F,M;AACJ,oBAAa;AAAA;;AACX,SAAKxF,MAAL,GAAc,IAAIL,MAAM8F,UAAV,CAAqB,SAArB,CAAd;AACD;;;;2BAEK;AACJ,UAAMmuB,QAAQ,IAAIC,KAAJ,CAAU,6BAAV,CAAd;AACAD,YAAMvzB,IAAN;AACD;;;;;;kBAGYmF,M;;;;;;;;;;;;;;ACdf;;IAAYsuB,I;;;;AAEZ,IAAMC,SAAS,SAATA,MAAS,GAAM;AACrB,MAAMC,UAAU;AACd,cAAU,EAAC,UAAS,EAAC,WAAU,GAAX,EAAe,SAAQ,IAAvB,EAA4B,SAAQ,IAApC,EAAV,EADI;AAEd,YAAQ,EAAC,UAAS,EAAC,WAAU,GAAX,EAAe,SAAQ,GAAvB,EAA2B,SAAQ,CAAnC,EAAV;AAFM,GAAhB;AAIE,MAAMC,MAAMH,KAAKC,MAAL,CAAYC,OAAZ,CAAZ;AAED,CAPD;;kBASeD,M;;;;;;;;;;;;ACXd,WAAStzB,IAAT,EAAeC,OAAf,EAAwB;AACxB,KAAI,gCAAOE,MAAP,OAAkB,QAAlB,IAA8B,QAAOA,OAAOD,OAAd,MAA0B,QAA5D,EAAsE;AACrEC,SAAOD,OAAP,GAAiBD,SAAjB;AACA,EAFD,MAEO;AACND,OAAKqzB,IAAL,GAAYpzB,SAAZ;AACA;AACD,CANA,aAMO,YAAW;AAClB;;AAEA,KAAIwzB,MAAMC,OAAOC,YAAjB;AACA,KAAIC,MAAM,CAACzqB,KAAKqD,EAAN,GAAW,CAArB;AACA,KAAIqnB,gBAAgB,KAAK,CAAzB;AACA,KAAIC,cAAc,IAAI,CAAtB;AACA,KAAInnB,MAAMxD,KAAKwD,GAAf;AACA,KAAIQ,MAAMhE,KAAKgE,GAAf;AACA,KAAIkK,MAAMlO,KAAKkO,GAAf;AACA,KAAI0c,UAAU,QAAd;;AAEA,KAAIV,OAAO,EAAX;AACA,KAAI7vB,eAAezC,OAAOyC,YAAP,IAAuBzC,OAAO0C,kBAAjD;;AAEA4vB,MAAKW,UAAL,GAAkB,IAAI,CAAtB;AACAX,MAAKY,GAAL,GAAW,IAAI,CAAf;;AAEAZ,MAAKa,aAAL,GAAqB,UAASC,UAAT,EAAqB;AACzCd,OAAKW,UAAL,GAAkBG,aAAa,CAA/B;AACAd,OAAKY,GAAL,GAAWE,aAAa,CAAxB;AACA,EAHD;AAIAd,MAAKa,aAAL,CAAmBE,sBAAnB;;AAEA;;AAEA;AACA;AACAf,MAAKgB,KAAL,GAAa,UAASC,MAAT,EAAiB;AAC7B,MAAIC,YAAY,IAAIC,SAAJ,CAAcF,MAAd,EAAsBjB,KAAKoB,cAA3B,CAAhB;AACA,MAAIC,QAAQC,iBAAiBJ,UAAUK,cAAV,EAAjB,CAAZ;AACAL,YAAUM,QAAV,CAAmBH,KAAnB;AACA,SAAOI,YAAYJ,KAAZ,CAAP;AACA,EALD;;AAOA;AACA;AACArB,MAAKC,MAAL,GAAc,UAASC,OAAT,EAAkBwB,MAAlB,EAA0BC,UAA1B,EAAsC;AACnD,MAAI7B,QAAQ,EAAZ;AACA,MAAI8B,SAAS,EAAb;AACAA,SAAOC,MAAP,GAAgB/B,KAAhB;;AAEA,MAAIgC,SAAS,EAAb;;AAEA;AACAC,aAAW7B,OAAX,EAAoB,UAAS8B,CAAT,EAAY9lB,IAAZ,EAAkB;AACrC0lB,UAAO1lB,IAAP,IAAe,YAAW;AACzB,QAAI,OAAO4jB,MAAM5jB,IAAN,CAAP,KAAuB,WAA3B,EAAwC;AACvC4jB,WAAM5jB,IAAN,EAAYigB,WAAZ,GAA0B,GAA1B;AACA2D,WAAM5jB,IAAN,EAAY3P,IAAZ;AACA;AACD,IALD;AAMAu1B,UAAOzpB,IAAP,CAAY6D,IAAZ;AACA,GARD;;AAUA,MAAI9O,SAAS,CAAb;AAAA,MACC2N,QAAQ+mB,OAAO3nB,MADhB;;AAGA,WAASwS,IAAT,GAAgB;AACf,OAAImV,OAAO3nB,MAAP,IAAiB,CAArB,EAAwB;AACvBunB,cAAUA,OAAOO,MAAP,CAAV;AACA;AACA;AACD,OAAI/lB,OAAO4lB,OAAOvE,KAAP,EAAX;AACAuC,SAAM5jB,IAAN,IAAc8jB,KAAKgB,KAAL,CAAWd,QAAQhkB,IAAR,CAAX,CAAd;AACA9O;AACAu0B,iBAAcA,WAAWzlB,IAAX,EAAiB9O,MAAjB,EAAyB2N,KAAzB,CAAd;;AAEArN,UAAOsR,UAAP,CAAkB2N,IAAlB,EAAwB,EAAxB;AACA;AACDA;;AAEA,SAAOiV,MAAP;AACA,EApCD;;AAsCA;AACA;AACA5B,MAAKkC,eAAL,GAAuB,UAAShC,OAAT,EAAkB;AACxC,MAAIJ,QAAQ,EAAZ;AACA,MAAI8B,SAAS,EAAb;AACAA,SAAOC,MAAP,GAAgB/B,KAAhB;AACAiC,aAAW7B,OAAX,EAAoB,UAASe,MAAT,EAAiB/kB,IAAjB,EAAuB;AAC1C4jB,SAAM5jB,IAAN,IAAc8jB,KAAKgB,KAAL,CAAWC,MAAX,CAAd;AACAW,UAAO1lB,IAAP,IAAe,YAAW;AACzB,QAAI,OAAO4jB,MAAM5jB,IAAN,CAAP,KAAuB,WAA3B,EAAwC;AACvC4jB,WAAM5jB,IAAN,EAAYigB,WAAZ,GAA0B,GAA1B;AACA2D,WAAM5jB,IAAN,EAAY3P,IAAZ;AACA;AACD,IALD;AAMA,GARD;AASA,SAAOq1B,MAAP;AACA,EAdD;;AAgBA;AACA5B,MAAKmC,WAAL,GAAmB,UAASlB,MAAT,EAAiBl0B,OAAjB,EAA0B;AAC5C,MAAIm0B,YAAY,IAAIC,SAAJ,CAAcF,MAAd,EAAsBjB,KAAKoB,cAA3B,CAAhB;AACA,MAAIC,QAAQC,iBAAiBJ,UAAUK,cAAV,EAAjB,CAAZ;AACAL,YAAUM,QAAV,CAAmBH,KAAnB;AACA,SAAOA,KAAP;AACA,EALD;;AAOA,KAAI,OAAOlxB,YAAP,KAAwB,WAA5B,EAAyC;AACxC;AACA;AACA6vB,OAAKoC,IAAL,GAAY,UAASC,YAAT,EAAuBpB,MAAvB,EAA+Bl0B,OAA/B,EAAwCkwB,UAAxC,EAAoDqF,aAApD,EAAmE;AAC9E,OAAIxP,OAAOuP,aAAalF,qBAAb,CAAmCF,UAAnC,EAA+C,CAA/C,EAAkD,CAAlD,CAAX;AACA,OAAIsF,MAAM,IAAIpB,SAAJ,CAAcF,MAAd,EAAsBl0B,WAAWizB,KAAKoB,cAAtC,CAAV;AACAtO,QAAKsK,cAAL,GAAsB,UAASoF,EAAT,EAAa;AAClC,QAAInB,QAAQmB,GAAGC,YAAH,CAAgBC,cAAhB,CAA+B,CAA/B,CAAZ;AACAH,QAAIf,QAAJ,CAAaH,KAAb;AACA,QAAI,CAACiB,aAAD,IAAkBC,IAAII,QAA1B,EAAoC;AACnC;AACA;AACA3jB,gBAAW,YAAW;AACrB8T,WAAK4C,UAAL;AACA,MAFD,EAEG,EAFH;AAGA;AACD,IAVD;AAWA,UAAO5C,IAAP;AACA,GAfD;;AAiBA;AACA;AACAkN,OAAK4C,WAAL,GAAmB,UAASP,YAAT,EAAuBpB,MAAvB,EAA+Bl0B,OAA/B,EAAwC;AAC1D,OAAIm0B,YAAY,IAAIC,SAAJ,CAAcF,MAAd,EAAsBl0B,WAAWizB,KAAKoB,cAAtC,CAAhB;AACA,OAAIyB,SAASR,aAAaS,YAAb,CAA0BrC,WAA1B,EAAuCS,UAAUK,cAAV,EAAvC,EAAmEvB,KAAKW,UAAxE,CAAb;AACA,OAAIU,QAAQwB,OAAOH,cAAP,CAAsB,CAAtB,CAAZ;AACAxB,aAAUM,QAAV,CAAmBH,KAAnB;AACA,UAAOwB,MAAP;AACA,GAND;;AAQA;AACA;AACA7C,OAAK+C,IAAL,GAAY,UAAS7C,OAAT,EAAkBnzB,OAAlB,EAA2Bi2B,UAA3B,EAAuC;AAClD;AACAA,gBAAaA,cAAc,IAA3B;AACA,OAAIpB,SAAS,EAAb;;AAEA,OAAIhyB,UAAU,IAAIO,YAAJ,EAAd;AACA,OAAI8yB,SAASrzB,QAAQszB,UAAR,EAAb;AACAD,UAAOxN,OAAP,CAAe7lB,QAAQiY,WAAvB;;AAEA+Z,UAAOvxB,QAAP,GAAkBT,OAAlB;AACAgyB,UAAOuB,OAAP,GAAiBF,MAAjB;;AAEAlB,cAAW7B,OAAX,EAAoB,UAASe,MAAT,EAAiB/kB,IAAjB,EAAuB;AAC1C0lB,WAAO1lB,IAAP,IAAe,YAAW;AACzB,SAAI4W,OAAOkN,KAAKoC,IAAL,CAAUxyB,OAAV,EAAmBqxB,MAAnB,EAA2Bl0B,OAA3B,EAAoCi2B,UAApC,CAAX;AACAlQ,UAAK2C,OAAL,CAAawN,MAAb;AACA,KAHD;AAIA,IALD;;AAOArB,UAAOwB,MAAP,GAAgB,YAAW;AAC1BxzB,YAAQyzB,KAAR;AACA,IAFD;;AAIAzB,UAAO0B,KAAP,GAAe,UAASrC,MAAT,EAAiB;AAC/B,QAAInO,OAAOkN,KAAKoC,IAAL,CAAUxyB,OAAV,EAAmBqxB,MAAnB,EAA2Bl0B,OAA3B,EAAoCi2B,UAApC,CAAX;AACAlQ,SAAK2C,OAAL,CAAawN,MAAb;AACA,IAHD;;AAKA,UAAOrB,MAAP;AACA,GA7BD;AA8BA,EA9DD,MA8DO;AACN5B,OAAK+C,IAAL,GAAY/C,KAAKC,MAAjB;AACA;;AAED;AACAD,MAAKuD,MAAL,GAAc,EAAd;;AAEA;AACAvD,MAAKwD,CAAL,GAAS,EAAT;;AAEA,KAAIC,QAAQzD,KAAKyD,KAAL,GAAa;AACxBC,cAAY,CADY;AAExBC,iBAAe,EAFS;AAGxBC,aAAW,EAHa;AAIxBC,aAAW,EAJa;AAKxBC,UAAQ;AALgB,EAAzB;;AAQA,UAASC,OAAT,CAAiB1oB,CAAjB,EAAoBC,CAApB,EAAuB;AACtB,SAAOD,EAAEooB,KAAF,GAAUnoB,EAAEmoB,KAAnB;AACA;;AAEDzD,MAAKgE,iBAAL,GAAyBA,iBAAzB;;AAEA,UAASA,iBAAT,CAA2B/C,MAA3B,EAAmCl0B,OAAnC,EAA4C;AAC3C;AACA,OAAK,IAAIoL,IAAI,CAAb,EAAgBA,IAAIpL,QAAQoN,MAA5B,EAAoChC,KAAK,CAAzC,EAA4C;AAC3C,OAAI8rB,IAAIl3B,QAAQoL,CAAR,CAAR;AACA,OAAI+rB,IAAIjD,OAAOgD,EAAE/nB,IAAT,KAAkB,EAA1B;;AAEA;AACA6lB,cAAWkC,EAAEhD,MAAb,EAAqB,UAASkD,GAAT,EAAcjoB,IAAd,EAAoB;AACxC,QAAI,OAAOgoB,EAAEhoB,IAAF,CAAP,KAAmB,WAAvB,EAAoC;AACnCgoB,OAAEhoB,IAAF,IAAUioB,IAAIC,CAAd;AACA;AACD,IAJD;;AAMAnD,UAAOgD,EAAE/nB,IAAT,IAAiBgoB,CAAjB;AACA;AACD;;AAED;AACA;AACAlE,MAAKmB,SAAL,GAAiBA,SAAjB;;AAEA,UAASA,SAAT,CAAmBF,MAAnB,EAA2Bl0B,OAA3B,EAAoC;AACnCk0B,WAASA,UAAU,EAAnB;AACAl0B,YAAUA,WAAWizB,KAAKoB,cAA1B;;AAEA,MAAI,OAAOH,MAAP,KAAkB,UAAtB,EAAkC;AACjCA,YAASA,QAAT;AACA,GAFD,MAEO;AACNA,YAASoD,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAetD,MAAf,CAAX,CAAT;AACA;AACD,OAAK0B,QAAL,GAAgB,KAAhB;;AAEA,OAAKze,KAAL,GAAa;AACZyc,eAAYM,OAAON,UAAP,IAAqBX,KAAKW;AAD1B,GAAb;;AAIA;AACA5zB,YAAUA,QAAQiV,KAAR,EAAV;AACAjV,UAAQ4mB,IAAR,CAAaoQ,OAAb;AACA,OAAKh3B,OAAL,GAAeA,OAAf;;AAEA;AACAi3B,oBAAkB/C,MAAlB,EAA0Bl0B,OAA1B;;AAEA;AACA,OAAK,IAAIoL,IAAI,CAAb,EAAgBA,IAAI,KAAKpL,OAAL,CAAaoN,MAAjC,EAAyChC,KAAK,CAA9C,EAAiD;AAChD,OAAI8rB,IAAI,KAAKl3B,OAAL,CAAaoL,CAAb,CAAR;AACA,QAAKpL,OAAL,CAAaoL,CAAb,EAAgBqsB,KAAhB,CAAsB,KAAKtgB,KAA3B,EAAkC+c,OAAOgD,EAAE/nB,IAAT,CAAlC;AACA;AACD;AACDilB,WAAUvyB,SAAV,GAAsB;AACrB;AACA4yB,YAAU,kBAASH,KAAT,EAAgB;AACzB,QAAK,IAAIlpB,IAAI,IAAI,CAAjB,EAAoBA,IAAIkpB,MAAMlnB,MAA9B,EAAsChC,KAAK,CAA3C,EAA8C;AAC7CkpB,UAAMlpB,CAAN,IAAW,CAAX;AACA;AACD,OAAI,KAAKwqB,QAAT,EAAmB;AAClB;AACA;;AAED,OAAI8B,IAAI,KAAKvgB,KAAb;AAAA,OACCwgB,IAAIrD,MAAMlnB,MAAN,GAAe,CADpB;AAEA,QAAK,IAAIhC,IAAI,CAAb,EAAgBA,IAAI,KAAKpL,OAAL,CAAaoN,MAAjC,EAAyChC,KAAK,CAA9C,EAAiD;AAChD,QAAI8rB,IAAI,KAAKl3B,OAAL,CAAaoL,CAAb,CAAR;AACA,QAAIiJ,IAAI6iB,EAAEtJ,OAAF,CAAU8J,CAAV,EAAapD,MAAM7L,QAAN,CAAe,CAAf,EAAkBkP,CAAlB,CAAb,IAAqC,CAA7C;AACAA,QAAI5uB,KAAKC,GAAL,CAAS2uB,CAAT,EAAYtjB,CAAZ,CAAJ;AACA;AACD,OAAIsjB,IAAIrD,MAAMlnB,MAAd,EAAsB;AACrB,SAAKwoB,QAAL,GAAgB,IAAhB;AACA;AACD,QAAK,IAAIxqB,IAAIusB,CAAb,EAAgBvsB,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtCkpB,UAAMlpB,CAAN,IAAW,CAAX;AACA;AACD,GAvBoB;AAwBrBopB,kBAAgB,0BAAW;AAC1B,OAAIoD,UAAU,CAAd;AACA,QAAK,IAAIxsB,IAAI,CAAb,EAAgBA,IAAI,KAAK+L,KAAL,CAAW0gB,SAAX,CAAqBzqB,MAAzC,EAAiDhC,KAAK,CAAtD,EAAyD;AACxDwsB,eAAW,KAAKzgB,KAAL,CAAW0gB,SAAX,CAAqBzsB,CAArB,EAAwBusB,CAAnC;AACA;AACD,OAAIC,YAAY,CAAhB,EAAmB;AAClBA,cAAU,IAAI,KAAKzgB,KAAL,CAAWyc,UAAzB;AACA;AACD,UAAOgE,OAAP;AACA;AAjCoB,EAAtB;;AAoCA;AACA3E,MAAKuD,MAAL,CAAYsB,SAAZ,GAAwB;AACvB3oB,QAAM,WADiB;AAEvB+kB,UAAQ;AACP;AACA6D,UAAO,EAAE/S,GAAE,EAAJ,EAAQgT,GAAE,IAAV,EAAgBX,GAAE,GAAlB,EAFA;;AAIPY,QAAK,EAAEjT,GAAE,EAAJ,EAAQgT,GAAE,IAAV,EAAgBX,GAAE,EAAlB,EAJE;AAKPa,QAAK,EAAElT,GAAE,EAAJ,EAAQgT,GAAE,IAAV,EAAgBX,GAAE,IAAlB,EALE;;AAOPc,UAAY,EAAEnT,GAAE,CAAC,CAAL,EAAQgT,GAAE,CAAV,EAAaX,GAAE,CAAf,EAPL;AAQPe,eAAY,EAAEpT,GAAE,CAAC,CAAL,EAAQgT,GAAE,CAAV,EAAaX,GAAE,CAAf,EARL;;AAUPgB,gBAAc,EAAErT,GAAE,CAAJ,EAAOgT,GAAG,GAAV,EAAeX,GAAG,CAAlB,EAVP;;AAYPiB,iBAAc,EAAEtT,GAAE,CAAC,EAAL,EAASgT,GAAE,EAAX,EAAeX,GAAE,CAAjB,EAZP;AAaPkB,gBAAc,EAAEvT,GAAI,CAAN,EAASgT,GAAE,CAAX,EAAeX,GAAE;AAC/B;AADc,IAbP,EAFe;AAkBvBX,SAAOA,MAAMC,UAlBU;AAmBvBc,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrB,OAAIqB,KAAKd,EAAE9D,UAAX;;AAEA8D,KAAEe,WAAF,GAAgBtB,CAAhB;;AAEAO,KAAEgB,UAAF,GAAevB,EAAEY,KAAF,GAAUvE,GAAV,GAAgBgF,EAA/B;AACAd,KAAEiB,aAAF,GAAkBxB,EAAEe,GAAF,GAAQ1E,GAAR,GAAcgF,EAAhC;AACAd,KAAEkB,aAAF,GAAkBzB,EAAEc,GAAF,GAAQzE,GAAR,GAAcgF,EAAhC;;AAEAd,KAAEkB,aAAF,GAAkB7vB,KAAKC,GAAL,CAAS0uB,EAAEkB,aAAX,EAA0BlB,EAAEgB,UAA5B,CAAlB;AACAhB,KAAEiB,aAAF,GAAkB5vB,KAAKkB,GAAL,CAASytB,EAAEiB,aAAX,EAA0BjB,EAAEgB,UAA5B,CAAlB;;AAEAhB,KAAEmB,UAAF,GAAe,MAAM9rB,IAAIoqB,EAAEgB,KAAN,EAAa,GAAb,IAAoB,IAApB,GAA2BK,EAAhD;AACAd,KAAEoB,eAAF,GAAoB/rB,IAAIoqB,EAAEiB,UAAN,EAAkB,GAAlB,KAA0BI,KAAK,IAA/B,CAApB;;AAEAd,KAAEnJ,UAAF,GAAe,CAAf;AACAmJ,KAAEqB,WAAF,GAAgB5P,QAAhB;AACA,OAAIgO,EAAEkB,WAAF,GAAgB,CAApB,EAAuB;AACtBX,MAAEqB,WAAF,GAAgB5B,EAAEkB,WAAF,GAAgBG,EAAhC;AACA;;AAEDd,KAAEsB,eAAF,GAAoB,CAApB;AACAtB,KAAEuB,gBAAF,GAAqB9B,EAAEoB,WAAF,GAAgBC,EAArC;AACA,OAAIrB,EAAEmB,YAAF,IAAkB,CAAtB,EAAyB;AACxBZ,MAAEuB,gBAAF,GAAqB9P,QAArB;AACA;AACDuO,KAAEwB,cAAF,GAAmB,IAAI/B,EAAEmB,YAAF,GAAiB,IAAxC;AACA,GA9CsB;AA+CvB1K,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,OAAI6E,QAAQ,CAACzB,EAAEgB,UAAf;AAAA,OACC1vB,MAAM,CAAC0uB,EAAEkB,aADV;AAAA,OAEC3uB,MAAM,CAACytB,EAAEiB,aAFV;AAAA,OAGCrU,QAAQ,CAACoT,EAAEmB,UAHZ;AAAA,OAICO,aAAa,CAAC1B,EAAEoB,eAJjB;;AAMA,OAAIvK,aAAamJ,EAAEnJ,UAAnB;AAAA,OACCwK,cAAcrB,EAAEqB,WADjB;;AAGA,OAAIM,UAAU3B,EAAEsB,eAAhB;AAAA,OACCM,WAAW5B,EAAEuB,gBADd;AAAA,OAECM,SAAS7B,EAAEwB,cAFZ;;AAIA,QAAK,IAAI9tB,IAAI,CAAb,EAAgBA,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtCkZ,aAAS8U,UAAT;AACAD,aAAS7U,KAAT;AACA6U,YAAQA,QAAQnwB,GAAR,GAAcA,GAAd,GAAoBmwB,QAAQlvB,GAAR,GAAcA,GAAd,GAAoBkvB,KAAhD;;AAEA,QAAI5K,aAAawK,WAAjB,EAA8B;AAC7B,UAAKtB,KAAL,CAAWC,CAAX,EAAcA,EAAEe,WAAhB;AACA,YAAOrtB,IAAI,KAAKwiB,OAAL,CAAa8J,CAAb,EAAgBpD,MAAM7L,QAAN,CAAerd,CAAf,CAAhB,CAAJ,GAAyC,CAAhD;AACA;AACDmjB;;AAEA,QAAI8K,UAAUC,QAAd,EAAwB;AACvBH,cAASI,MAAT;AACAF,eAAU,CAAV;AACAC,gBAAWnQ,QAAX;AACA;AACDkQ;;AAEA/E,UAAMlpB,CAAN,KAAY+tB,KAAZ;AACA;;AAEDzB,KAAEnJ,UAAF,GAAeA,UAAf;AACAmJ,KAAEsB,eAAF,GAAoBK,OAApB;AACA3B,KAAEuB,gBAAF,GAAqBK,QAArB;;AAEA5B,KAAEgB,UAAF,GAAeS,KAAf;AACAzB,KAAEmB,UAAF,GAAevU,KAAf;;AAEA,UAAOgQ,MAAMlnB,MAAb;AACA;AA1FsB,EAAxB;;AA6FA;AACA6lB,MAAKuD,MAAL,CAAYgD,OAAZ,GAAsB;AACrBrqB,QAAM,SADe;AAErB+kB,UAAQ;AACP;AACAuF,UAAY,EAACzU,GAAG,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EAFL;AAGPqC,eAAY,EAAC1U,GAAE,CAAC,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EAHL;;AAKPS,cAAgB,EAAC9S,GAAI,IAAL,EAAWgT,GAAE,EAAb,EAAiBX,GAAE,CAAnB,EALT;AAMPsC,mBAAgB,EAAC3U,GAAG,CAAC,IAAL,EAAWgT,GAAG,CAAd,EAAiBX,GAAE;AACnC;AADgB,IANT,EAFa;AAWrBX,SAAOA,MAAME,aAXQ;AAYrBa,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrB,OAAIqB,KAAKd,EAAE9D,UAAX;AACA8D,KAAEkC,YAAF,GAAiB,CAAjB;AACAlC,KAAEmC,YAAF,GAAiB1C,EAAEsC,KAAnB;AACA/B,KAAEoC,iBAAF,GAAsB3C,EAAEW,SAAF,GAActE,GAAd,GAAoBgF,EAA1C;;AAEAd,KAAEqC,sBAAF,GAA2B,MAAMhtB,IAAIoqB,EAAEwC,cAAN,EAAsB,GAAtB,IAA6B,GAA7B,GAAmCnB,EAApE;AACAd,KAAEsC,iBAAF,GAAsB7C,EAAEuC,UAAF,GAAelB,EAArC;AACA,GApBoB;AAqBrB5K,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,OAAI2F,QAAQ,CAACvC,EAAEkC,YAAf;AAAA,OACCM,QAAQ,CAACxC,EAAEmC,YADZ;AAAA,OAECV,QAAQ,CAACzB,EAAEoC,iBAFZ;AAAA,OAGCxV,QAAQ,CAACoT,EAAEqC,sBAHZ;AAAA,OAICI,aAAa,CAACzC,EAAEsC,iBAJjB;;AAMA,OAAKE,SAAS,CAAV,IAAiBC,cAAc,CAAnC,EAAuC;AACtC,WAAO7F,MAAMlnB,MAAb;AACA;;AAED,QAAK,IAAIhC,IAAI,CAAb,EAAgBA,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtC6uB,aAASd,KAAT;AACA,QAAIc,QAAQzG,GAAZ,EAAiB;AAChByG,cAASzG,GAAT;AACA;AACDc,UAAMlpB,CAAN,KAAYkpB,MAAMlpB,CAAN,IAAWmB,IAAI0tB,KAAJ,CAAX,GAAwBC,KAApC;;AAEAf,aAAS7U,KAAT;AACA4V,aAASC,UAAT;AACAD,YAAQE,OAAOF,KAAP,CAAR;AACA;;AAEDxC,KAAEkC,YAAF,GAAiBK,KAAjB;AACAvC,KAAEmC,YAAF,GAAiBK,KAAjB;AACAxC,KAAEoC,iBAAF,GAAsBX,KAAtB;AACA,UAAO7E,MAAMlnB,MAAb;AACA;AAhDoB,EAAtB;;AAmDA;AACA6lB,MAAKuD,MAAL,CAAYK,SAAZ,GAAwB;AACvB1nB,QAAM,WADiB;AAEvB+kB,UAAQ;AACP;AACA;AACAmG,SAAM,EAACC,GAAGrH,KAAKwD,CAAT,EAAYY,GAAE,QAAd,EAHC;;AAKPkD,MAAG,EAACvV,GAAG,CAAJ,EAAOgT,GAAG,CAAV,EAAaX,GAAG,CAAhB,EALI;AAMPmD,MAAG,EAACxV,GAAG,CAAJ,EAAOgT,GAAG,CAAV,EAAaX,GAAG,CAAhB,EANI;;AAQPoD,WAAQ,EAACzV,GAAG,CAAC,CAAL,EAAQgT,GAAG,CAAX,EAAcX,GAAG,CAAjB,EARD;AASPqD,WAAQ,EAAC1V,GAAG,CAAC,CAAL,EAAQgT,GAAG,CAAX,EAAcX,GAAG;AACzB;AADQ,IATD,EAFe;AAcvBX,SAAOA,MAAMG,SAdU;AAevBY,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrBO,KAAEiD,cAAF,GAAmB,CAAnB;;AAEA,OAAI,OAAOxD,EAAEkD,IAAT,KAAkB,QAAtB,EAAgC;AAC/B3C,MAAEkD,SAAF,GAAc3H,KAAKwD,CAAL,CAAOU,EAAEkD,IAAT,CAAd;AACA,IAFD,MAEO;AACN3C,MAAEkD,SAAF,GAAczD,EAAEkD,IAAhB;AACA;AACD,OAAI,QAAO3C,EAAEkD,SAAT,MAAuB,QAA3B,EAAqC;AACpClD,MAAEkD,SAAF,GAAclD,EAAEkD,SAAF,CAAYp0B,MAAZ,EAAd;AACA;AACDq0B,UAAO,OAAOnD,EAAEkD,SAAT,KAAuB,UAA9B,EAA0C,8BAA1C;;AAEAlD,KAAEoD,UAAF,GAAe3D,EAAEoD,CAAjB;AACA7C,KAAEqD,eAAF,GAAoB5D,EAAEsD,MAAtB;AACA/C,KAAEsD,UAAF,GAAe7D,EAAEqD,CAAjB;AACA9C,KAAEuD,eAAF,GAAoB9D,EAAEuD,MAAtB;AACA,GAhCsB;AAiCvB9M,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,UAAOoD,EAAEkD,SAAF,CAAYlD,CAAZ,EAAepD,KAAf,CAAP;AACA;AAnCsB,EAAxB;;AAsCA;AACA,KAAI4G,mBAAmB,KAAK,EAA5B;AACAjI,MAAKuD,MAAL,CAAY2E,MAAZ,GAAqB;AACpBhsB,QAAM,QADc;AAEpB+kB,UAAQ;AACP;AACAqG,MAAG,EAACvV,GAAE,GAAH,EAAQgT,GAAE,GAAV,EAAeX,GAAG,CAAlB,EAFI;AAGPmD,MAAG,EAACxV,GAAE,GAAH,EAAQgT,GAAE,GAAV,EAAeX,GAAG,CAAlB,EAHI;AAIPiD,MAAG,EAACtV,GAAE,GAAH,EAAQgT,GAAE,GAAV,EAAeX,GAAG;AACrB;AADG,IAJI,EAFY;AASpBX,SAAOA,MAAMG,SATO;AAUpBY,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrBO,KAAE0D,OAAF,GAAYjE,EAAEoD,CAAd;AACA7C,KAAE2D,OAAF,GAAYlE,EAAEqD,CAAd;AACA9C,KAAE4D,OAAF,GAAYnE,EAAEmD,CAAd;;AAEA5C,KAAE6D,YAAF,GAAiBhH,iBAAiB2G,gBAAjB,CAAjB;AACAxD,KAAE8D,UAAF,GAAe,CAAf;AACA,OAAIhB,IAAI9C,EAAE6D,YAAV;AACA,QAAK,IAAInwB,IAAI,CAAb,EAAgBA,IAAIovB,EAAEptB,MAAtB,EAA8BhC,GAA9B,EAAmC;AAClCovB,MAAEpvB,CAAF,IAAOrC,KAAKoE,MAAL,KAAgB,CAAhB,GAAoB,CAA3B;AACA;AACD,GArBmB;AAsBpBygB,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,OAAImH,KAAKP,gBAAT;AAAA,OACCQ,KAAKD,KAAK,CADX;;AAGA,OAAIlB,IAAI,CAAC7C,EAAE0D,OAAX;AAAA,OACCZ,IAAI,CAAC9C,EAAE2D,OADR;AAAA,OAECf,IAAI,CAAC5C,EAAE4D,OAFR;AAGA,OAAIK,IAAIpB,IAAIC,CAAJ,GAAQF,CAAhB;AACA,OAAIvmB,IAAI2jB,EAAE8D,UAAV;;AAEA,OAAI1F,SAAS4B,EAAE6D,YAAf;AACA,QAAK,IAAInwB,IAAI,CAAb,EAAgBA,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtC;AACA,QAAIiJ,IAAKmf,MAAMc,MAAMlpB,CAAN,CAAP,GAAmB,CAA3B;AACAiJ,QAAIA,IAAIonB,EAAJ,GAASA,EAAT,GAAcpnB,CAAlB;;AAEA;AACA,QAAIunB,IAAM7nB,IAAIM,CAAL,GAAUonB,EAAX,GAAiBC,EAAzB;AACA5F,WAAO/hB,CAAP,IACC,CAAC+hB,OAAQ8F,IAAI,CAAJ,GAAQH,EAAT,GAAeC,EAAtB,IAA4BnB,CAA5B,GACAzE,OAAQ8F,IAAI,CAAJ,GAAQH,EAAT,GAAeC,EAAtB,IAA4BlB,CAD5B,GAEA1E,OAAQ8F,IAAI,CAAJ,GAAQH,EAAT,GAAeC,EAAtB,IAA4BpB,CAF7B,IAEkCqB,CAHnC;;AAKArH,UAAMlpB,CAAN,IAAW0qB,OAAO/hB,CAAP,CAAX;AACAA,QAAKA,IAAI,CAAL,GAAU2nB,EAAd;AACA;;AAEDhE,KAAE8D,UAAF,GAAeznB,CAAf;AACA,UAAOugB,MAAMlnB,MAAb;AACA;;AAGF;AAtDqB,EAArB,CAuDA6lB,KAAKuD,MAAL,CAAYqF,MAAZ,GAAqB;AACpB1sB,QAAM,QADc;AAEpB+kB,UAAQ;AACP;AACA4H,OAAa,EAAC9W,GAAG,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EAFN;AAGP0E,YAAa,EAAC/W,GAAE,CAAC,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EAHN;AAIP2E,gBAAa,EAAChX,GAAG,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EAJN;AAKP4E,OAAa,EAACjX,GAAG,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EALN;AAMP6E,YAAa,EAAClX,GAAE,CAAC,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE;AAC3B;AADa,IANN,EAFY;AAWpBX,SAAOA,MAAMI,SAAN,GAAkB,CAXL;AAYpBW,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrBO,KAAEyE,aAAF,GAAmBhF,EAAE8E,EAAF,GAAOtI,OAAR,IAAqBwD,EAAE2E,EAAF,GAAO,IAAInI,OAAlD;;AAEA+D,KAAE0E,SAAF,GAAcjF,EAAE2E,EAAF,GAAO,IAAInI,OAAzB;AACA+D,KAAEoE,EAAF,GAAO/uB,IAAIoqB,EAAE2E,EAAN,EAAU,GAAV,IAAiB,EAAxB;AACApE,KAAEqE,OAAF,GAAY,MAAM5E,EAAE4E,OAAF,GAAY,GAAZ,GAAkBrE,EAAE9D,UAAtC;AACA8D,KAAE2E,KAAF,GAAU,CAAV;AACA3E,KAAE4E,UAAF,GAAe,CAAf;;AAEA5E,KAAE6E,SAAF,GAAc,OAAO,MAAMxvB,IAAIoqB,EAAE6E,WAAN,EAAmB,CAAnB,IAAwB,EAArC,KAA4C,OAAO7E,EAAE2E,EAArD,CAAd;AACApE,KAAE6E,SAAF,GAAc,MAAMxzB,KAAKC,GAAL,CAAS0uB,EAAE6E,SAAX,EAAsB,GAAtB,CAApB;;AAEA7E,KAAEuE,EAAF,GAAOlvB,IAAIoqB,EAAE8E,EAAN,EAAU,GAAV,IAAiB,EAAxB;AACAvE,KAAE8E,KAAF,GAAU,CAAV;AACA9E,KAAEwE,OAAF,GAAY,MAAM/E,EAAE+E,OAAF,GAAY,GAAZ,GAAkBxE,EAAE9D,UAAtC;AACA,GA3BmB;AA4BpB6I,WAAS,iBAAS/E,CAAT,EAAY;AACpB,UAAOA,EAAEyE,aAAT;AACA,GA9BmB;AA+BpBvO,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,OAAI,CAAC,KAAKmI,OAAL,CAAa/E,CAAb,CAAL,EAAsB;AACrB,WAAOpD,MAAMlnB,MAAb;AACA;;AAED,OAAIsvB,KAAK,CAAChF,EAAEoE,EAAZ;AACA,OAAIa,QAAQ,CAACjF,EAAE2E,KAAf;AACA,OAAIO,aAAa,CAAClF,EAAE4E,UAApB;AACA,OAAIO,UAAU,CAACnF,EAAEqE,OAAjB;AACA,OAAIe,YAAY,CAACpF,EAAE6E,SAAnB;AACA,OAAIQ,YAAY,CAACrF,EAAE0E,SAAnB;;AAEA,OAAIY,KAAK,CAACtF,EAAEuE,EAAZ;AACA,OAAIgB,QAAQ,CAACvF,EAAE8E,KAAf;AACA,OAAIU,UAAU,CAACxF,EAAEwE,OAAjB;;AAEA,QAAK,IAAI9wB,IAAI,CAAb,EAAgBA,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtC,QAAK4xB,KAAKrJ,OAAN,IAAmBqJ,KAAK,CAACrJ,OAA7B,EAAuC;AACtCqJ,WAAME,OAAN;AACAF,UAAKA,KAAKrJ,OAAL,GAAeA,OAAf,GAAyBqJ,KAAK,GAAL,GAAW,GAAX,GAAiBA,EAA/C;AACA;;AAED,QAAIG,SAASR,KAAb;;AAEAD,UAAMG,OAAN;AACAH,SAAKA,KAAK,CAAL,GAASA,KAAK,CAAd,GAAkBA,KAAK,GAAL,GAAW,GAAX,GAAiBA,EAAxC;;AAEA,QAAIU,SAAS9I,MAAMlpB,CAAN,CAAb;AACA,QAAI2xB,SAAJ,EAAe;AACdH,mBAAc,CAACQ,SAAST,KAAV,IAAmBD,EAAjC;AACAE,mBAAcE,SAAd;AACA,KAHD,MAGO;AACNH,aAAQS,MAAR;AACAR,kBAAa,CAAb;AACA;AACDD,aAASC,UAAT;;AAEAK,aAASN,QAAQQ,MAAjB;AACAF,aAAS,MAAMD,EAAf;;AAEA1I,UAAMlpB,CAAN,IAAW6xB,KAAX;AACA;;AAEDvF,KAAE2E,KAAF,GAAUM,KAAV;AACAjF,KAAE4E,UAAF,GAAeM,UAAf;AACAlF,KAAEoE,EAAF,GAAOY,EAAP;AACAhF,KAAEuE,EAAF,GAAOe,EAAP;AACAtF,KAAE8E,KAAF,GAAUS,KAAV;;AAEA,UAAO3I,MAAMlnB,MAAb;AACA;AAjFmB,EAArB;;AAoFA;AACA,KAAIiwB,mBAAmB,KAAK,EAA5B;AACApK,MAAKuD,MAAL,CAAY8G,MAAZ,GAAqB;AACpBnuB,QAAM,QADc;AAEpB+kB,UAAQ;AACP;AACAqJ,WAAQ,EAACvY,GAAE,CAAC,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE,CAAd,EAFD;AAGPmG,UAAQ,EAACxY,GAAE,CAAC,CAAJ,EAAOgT,GAAE,CAAT,EAAYX,GAAE;AACtB;AADQ,IAHD,EAFY;AAQpBX,SAAOA,MAAMI,SAAN,GAAkB,CARL;AASpBW,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrBO,KAAE+F,YAAF,GAAiBlJ,iBAAiB8I,gBAAjB,CAAjB;AACA3F,KAAEgG,SAAF,GAAc,CAAd;AACAhG,KAAEiG,YAAF,GAAiB5wB,IAAIoqB,EAAEoG,MAAN,EAAc,GAAd,KAAsBF,mBAAmB,CAAzC,CAAjB;AACA3F,KAAEkG,iBAAF,GAAsB7wB,IAAIoqB,EAAEqG,KAAN,EAAa,GAAb,IAAoB,IAApB,GAA2B9F,EAAE9D,UAAnD;AACA,GAdmB;AAepB6I,WAAS,iBAAS/E,CAAT,EAAY;AACpB,UAAQzgB,IAAIygB,EAAEkG,iBAAN,IAA2BjK,OAA5B,IACL1c,IAAIygB,EAAEiG,YAAN,IAAsBhK,OADxB;AAEA,GAlBmB;AAmBpB/F,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,OAAI,CAAC,KAAKmI,OAAL,CAAa/E,CAAb,CAAL,EAAsB;AACrB,WAAOpD,MAAMlnB,MAAb;AACA;;AAED,OAAIquB,KAAK4B,gBAAT;AAAA,OACC3B,KAAKD,KAAK,CADX;;AAGA,OAAI3F,SAAS4B,EAAE+F,YAAf;AAAA,OACCI,MAAMnG,EAAEgG,SAAF,GAAc,CADrB;AAAA,OAEChsB,SAAS,CAACgmB,EAAEiG,YAFb;AAAA,OAGCG,cAAc,CAACpG,EAAEkG,iBAHlB;;AAKA,QAAK,IAAIxyB,IAAI,CAAb,EAAgBA,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtCsG,cAAUosB,WAAV;AACA;AACA,QAAIpsB,SAAS,CAAb,EAAgB;AACfA,cAAS,CAACA,MAAV;AACAosB,mBAAc,CAACA,WAAf;AACA;AACD,QAAIpsB,SAASgqB,EAAb,EAAiB;AAChBhqB,cAASgqB,EAAT;AACAoC,mBAAc,CAAd;AACA;;AAEDhI,WAAO+H,GAAP,IAAcvJ,MAAMlpB,CAAN,CAAd;AACA,QAAI3K,IAAKo9B,OAAOnsB,SAAS,CAAhB,IAAqB+pB,EAAtB,GAA4BC,EAApC;AACApH,UAAMlpB,CAAN,KAAY0qB,OAAOr1B,CAAP,CAAZ;;AAEAo9B,UAAQA,MAAM,CAAP,GAAYnC,EAAb,GAAmB,CAAzB;AACA;;AAEDhE,KAAEgG,SAAF,GAAcG,GAAd;AACAnG,KAAEiG,YAAF,GAAiBjsB,MAAjB;AACA,UAAO4iB,MAAMlnB,MAAb;AACA;AAtDmB,EAArB;;AAyDA;AACA;AACA;AACA;AACA6lB,MAAKuD,MAAL,CAAYO,MAAZ,GAAqB;AACpB5nB,QAAM,QADc;AAEpB+kB,UAAQ;AACP;AACA6J,WAAS,EAAE/Y,GAAG,CAAL,EAAQgT,GAAG,CAAX,EAAcX,GAAG,GAAjB,EAFF;AAGP2G,WAAS,EAAEhZ,GAAG,KAAL,EAAYgT,GAAG,CAAf,EAAkBX,GAAG,IAArB,EAHF;AAIP4G,YAAS,EAAEjZ,GAAG,CAAL,EAAQgT,GAAG,CAAX,EAAcX,GAAG,GAAjB,EAJF;AAKP6G,UAAS,EAAElZ,GAAG,CAAL,EAAQgT,GAAG,CAAX,EAAcX,GAAG,GAAjB,EALF;AAMP8G,UAAS,EAAEnZ,GAAG,KAAL,EAAYgT,GAAG,CAAf,EAAkBX,GAAG;AAC9B;AADS,IANF,EAFY;AAWpBX,SAAOA,MAAMK,MAXO;AAYpBU,SAAO,eAASC,CAAT,EAAYP,CAAZ,EAAe;AACrB,OAAIqB,KAAKd,EAAE9D,UAAX;AACA,OAAIwK,IAAIjH,EAAE4G,MAAV;AACA,OAAIM,KAAKD,KAAK,IAAIjH,EAAE+G,KAAX,CAAT;AACAxG,KAAEG,SAAF,GAAc;AACb;AACA;AACCyG,OAAG,CADJ;AAECC,OAAGH,CAFJ;AAGCzG,OAAIR,EAAE6G,MAAF,GAAWxF,EAAZ,GAAkB;AAHtB,IAFa,EAMV;AACH;AACC8F,OAAGD,EADJ;AAECE,OAAGH,CAFJ;AAGCzG,OAAIR,EAAE8G,OAAF,GAAYzF,EAAb,GAAmB;AAHvB,IAPa,EAWV;AACH;AACC8F,OAAGF,CADJ;AAECG,OAAG,CAFJ;AAGC5G,OAAIR,EAAEgH,KAAF,GAAU3F,EAAX,GAAiB,CAHrB,CAIE;AAJF,IAZa,CAAd;AAkBA;AACA,QAAK,IAAIptB,IAAI,CAAb,EAAgBA,IAAIssB,EAAEG,SAAF,CAAYzqB,MAAhC,EAAwChC,KAAK,CAA7C,EAAgD;AAC/C,QAAIqG,IAAIimB,EAAEG,SAAF,CAAYzsB,CAAZ,CAAR;AACAqG,MAAEglB,CAAF,GAAM,CAAChlB,EAAE8sB,CAAF,GAAM9sB,EAAE6sB,CAAT,IAAc7sB,EAAEkmB,CAAtB;AACA;AACD,GAvCmB;AAwCpB/J,WAAS,iBAAS8J,CAAT,EAAYpD,KAAZ,EAAmB;AAC3B,OAAIlpB,IAAI,CAAR;AACA,UAAQssB,EAAEG,SAAF,CAAYzqB,MAAZ,GAAqB,CAAtB,IAA6BhC,IAAIkpB,MAAMlnB,MAA9C,EAAuD;AACtD,QAAImxB,IAAI7G,EAAEG,SAAF,CAAY,CAAZ,CAAR;AACA,QAAI2G,MAAMD,EAAED,CAAZ;AAAA,QACCG,OAAOF,EAAE9H,CADV;;AAGA,QAAIkB,IAAI5uB,KAAKC,GAAL,CAASsrB,MAAMlnB,MAAN,GAAehC,CAAxB,EAA2BmzB,EAAE5G,CAA7B,IAAkC,CAA1C;AACA,QAAIjtB,MAAOU,IAAIusB,CAAL,GAAU,CAApB;AACA,WAAOvsB,IAAIV,GAAX,EAAgBU,KAAK,CAArB,EAAwB;AACvBkpB,WAAMlpB,CAAN,KAAYozB,GAAZ;AACAA,YAAOC,IAAP;AACAD,WAAME,MAAMF,GAAN,EAAW,CAAX,EAAc,EAAd,CAAN;AACA;AACDD,MAAED,CAAF,GAAME,GAAN;AACAD,MAAE5G,CAAF,IAAOA,CAAP;AACA,QAAI4G,EAAE5G,CAAF,IAAO,CAAX,EAAc;AACbD,OAAEG,SAAF,CAAYrH,KAAZ;AACA;AACD;AACD,UAAOplB,CAAP;AACA;AA7DmB,EAArB;;AAgEA;;AAEA6nB,MAAKoB,cAAL,GAAsB,CACrBpB,KAAKuD,MAAL,CAAYsB,SADS,EAErB7E,KAAKuD,MAAL,CAAYgD,OAFS,EAGrBvG,KAAKuD,MAAL,CAAYK,SAHS,EAIrB5D,KAAKuD,MAAL,CAAYqF,MAJS,EAKrB5I,KAAKuD,MAAL,CAAY8G,MALS,EAMrBrK,KAAKuD,MAAL,CAAYO,MANS,CAAtB;AAQA9D,MAAKoB,cAAL,CAAoBzN,IAApB,CAAyBoQ,OAAzB;;AAEA/D,MAAK0L,WAAL,GAAmBA,WAAnB;;AAEA,UAASA,WAAT,GAAuB;AACtB,SAAO3J,WAAW/B,KAAKuD,MAAhB,EAAwB,YAAW;AACzC,UAAO,EAAP;AACA,GAFM,CAAP;AAGA;;AAEDvD,MAAK2L,kBAAL,GAA0BC,iBAA1B;;AAEA,UAASA,iBAAT,CAA2B3K,MAA3B,EAAmC;AAClC,OAAK,IAAI/kB,IAAT,IAAiB+kB,MAAjB,EAAyB;AACxB,OAAI4K,YAAY5K,OAAO/kB,IAAP,CAAZ,EAA0B/B,MAA1B,IAAoC,CAAxC,EAA2C;AAC1C,WAAO8mB,OAAO/kB,IAAP,CAAP;AACA;AACD;AACD;;AAED8jB,MAAK8L,MAAL,GAAc;AACbC,SAAO,iBAAW;AACjB,UAAOL,aAAP;AACA,GAHY;AAIbM,QAAM,gBAAW;AAChB,OAAIx+B,IAAIk+B,aAAR;AACAl+B,KAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAApB;AACAz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,EAAW,GAAX,CAAjB;AACAz+B,KAAEs2B,MAAF,CAASmH,KAAT,GAAiBgB,MAAM,GAAN,EAAW,GAAX,CAAjB;AACA,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEq3B,SAAF,CAAYS,WAAZ,GAA0B2G,MAAM,IAAN,EAAY,GAAZ,CAA1B;AACAz+B,MAAEq3B,SAAF,CAAYQ,YAAZ,GAA2B4G,MAAM,CAAN,EAAS,CAAT,CAA3B;AACA;AACDL,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GAhBY;AAiBb0+B,SAAO,iBAAW;AACjB,OAAI1+B,IAAIk+B,aAAR;AACAl+B,KAAEo2B,SAAF,CAAYwD,IAAZ,GAAmB+E,QAAQ,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,CAAR,CAAnB;;AAEA,OAAIF,UAAU,IAAd,EAAoB;AACnBz+B,MAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAApB;AACAz+B,MAAEq3B,SAAF,CAAYG,GAAZ,GAAkBiH,MAAM,GAAN,CAAlB;AACAz+B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,GAAN,EAAW,CAAC,GAAZ,CAApB;AACA,IAJD,MAIO;AACNz+B,MAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,IAAN,EAAY,GAAZ,CAApB;AACAz+B,MAAEq3B,SAAF,CAAYG,GAAZ,GAAkBx3B,EAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAAtC;AACA,QAAIz+B,EAAEq3B,SAAF,CAAYG,GAAZ,GAAkB,GAAtB,EAA2B;AAC1Bx3B,OAAEq3B,SAAF,CAAYG,GAAZ,GAAkB,GAAlB;AACA;AACDx3B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,GAAN,EAAW,CAAC,CAAZ,CAApB;AACA;;AAED,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEo2B,SAAF,CAAY0D,CAAZ,GAAgB2E,MAAM,GAAN,CAAhB;AACAz+B,MAAEo2B,SAAF,CAAY4D,MAAZ,GAAqByE,MAAM,GAAN,CAArB;AACA,IAHD,MAGO;AACNz+B,MAAEo2B,SAAF,CAAY0D,CAAZ,GAAgB2E,MAAM,GAAN,EAAW,GAAX,CAAhB;AACAz+B,MAAEo2B,SAAF,CAAY4D,MAAZ,GAAqByE,MAAM,GAAN,CAArB;AACA;;AAEDz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,EAAW,GAAX,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,CAAjB;AACA,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEs2B,MAAF,CAASmH,KAAT,GAAiBgB,MAAM,GAAN,CAAjB;AACA;AACD,OAAIA,UAAU,IAAd,EAAoB;AACnBz+B,MAAE68B,MAAF,CAASC,MAAT,GAAkB2B,MAAM,GAAN,CAAlB;AACAz+B,MAAE68B,MAAF,CAASE,KAAT,GAAiB0B,MAAM,GAAN,CAAjB;AACA;AACD,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEo7B,MAAF,CAASI,EAAT,GAAciD,MAAM,GAAN,CAAd;AACA;AACDL,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GAxDY;AAyDb4+B,aAAW,qBAAW;AACrB,OAAI5+B,IAAIk+B,aAAR;AACAl+B,KAAEo2B,SAAF,CAAYwD,IAAZ,GAAmB,OAAnB;AACA,OAAI6E,UAAU,GAAd,EAAmB;AAClBz+B,MAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,EAAX,CAApB;AACAz+B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,GAAN,EAAW,CAAC,GAAZ,CAApB;AACA,IAHD,MAGO;AACNz+B,MAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,IAAN,EAAY,GAAZ,CAApB;AACAz+B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,CAAC,GAAP,EAAY,CAAC,GAAb,CAApB;AACA;;AAED,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB,CAApB;AACA;AACD,OAAI+G,UAAU,GAAd,EAAmB;AAClBz+B,MAAEq3B,SAAF,CAAYO,WAAZ,GAA0B6G,MAAM,GAAN,EAAW,GAAX,CAA1B;AACA;;AAEDz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,EAAW,GAAX,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,CAAjB;AACAz+B,KAAEs2B,MAAF,CAASmH,KAAT,GAAiBgB,MAAM,GAAN,EAAW,GAAX,CAAjB;;AAEA,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAE68B,MAAF,CAASC,MAAT,GAAkB2B,MAAM,GAAN,EAAW,CAAC,GAAZ,CAAlB;AACAz+B,MAAE68B,MAAF,CAASE,KAAT,GAAiB0B,MAAM,CAAC,GAAP,CAAjB;AACA;;AAED,OAAIA,UAAU,IAAd,EAAoB;AACnBz+B,MAAEq3B,SAAF,CAAYS,WAAZ,GAA0B2G,MAAM,GAAN,EAAW,GAAX,CAA1B;AACAz+B,MAAEq3B,SAAF,CAAYQ,YAAZ,GAA2B4G,MAAM,EAAN,EAAU,CAAC,EAAX,CAA3B;AACA;AACDL,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GA1FY;AA2Fb6+B,WAAS,mBAAW;AACnB,OAAI7+B,IAAIk+B,aAAR;AACA,OAAIO,UAAU,GAAd,EAAmB;AAClBz+B,MAAEo2B,SAAF,CAAYwD,IAAZ,GAAmB,KAAnB;AACA,IAFD,MAEO;AACN55B,MAAEo2B,SAAF,CAAY0D,CAAZ,GAAgB2E,MAAM,GAAN,CAAhB;AACA;;AAEDz+B,KAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAApB;AACA,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,GAAN,EAAW,GAAX,CAApB;AACAz+B,MAAEq3B,SAAF,CAAYO,WAAZ,GAA0B6G,MAAM,GAAN,EAAW,GAAX,CAA1B;AACA,IAHD,MAGO;AACNz+B,MAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,GAAN,EAAW,IAAX,CAApB;AACA,QAAIA,UAAU,GAAd,EAAmB;AAClBz+B,OAAE+4B,OAAF,CAAUC,KAAV,GAAkByF,MAAM,GAAN,EAAW,GAAX,CAAlB;AACAz+B,OAAE+4B,OAAF,CAAU1B,SAAV,GAAsBoH,MAAM,EAAN,EAAU,EAAV,CAAtB;AACA;AACD;;AAEDz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,EAAW,GAAX,CAAjB;;AAEAL,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GApHY;AAqHb8+B,OAAK,eAAW;AACf,OAAI9+B,IAAIk+B,aAAR;AACAl+B,KAAEo2B,SAAF,CAAYwD,IAAZ,GAAmB+E,QAAQ,CAAC,QAAD,EAAW,KAAX,EAAkB,OAAlB,CAAR,CAAnB;AACA3+B,KAAEo2B,SAAF,CAAY0D,CAAZ,GAAgB2E,MAAM,GAAN,CAAhB;AACAz+B,KAAEo2B,SAAF,CAAY4D,MAAZ,GAAqByE,MAAM,CAAN,EAAS,CAAC,GAAV,CAArB;;AAEAz+B,KAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAApB;AACAz+B,KAAEq3B,SAAF,CAAYK,KAAZ,GAAoB,CAAC+G,MAAM,GAAN,EAAW,GAAX,CAArB;;AAEAz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,EAAW,GAAX,CAAjB;;AAEA,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEo7B,MAAF,CAASI,EAAT,GAAciD,MAAM,GAAN,CAAd;AACA;;AAEDL,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GAvIY;AAwIb++B,QAAM,gBAAW;AAChB,OAAI/+B,IAAIk+B,aAAR;AACAl+B,KAAEo2B,SAAF,CAAYwD,IAAZ,GAAmB,QAAnB;AACA55B,KAAEo2B,SAAF,CAAY0D,CAAZ,GAAgB2E,MAAM,GAAN,CAAhB;;AAEAz+B,KAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAApB;AACAz+B,KAAEq3B,SAAF,CAAYK,KAAZ,GAAoB+G,MAAM,GAAN,EAAW,GAAX,CAApB;;AAEAz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,EAAW,GAAX,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,EAAW,GAAX,CAAjB;;AAEA,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEo7B,MAAF,CAASI,EAAT,GAAciD,MAAM,GAAN,CAAd;AACA;AACD,OAAIA,UAAU,GAAd,EAAmB;AAClBz+B,MAAEo7B,MAAF,CAASC,EAAT,GAAcoD,MAAM,CAAC,GAAP,EAAY,CAAZ,CAAd;AACA;;AAEDL,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GA5JY;AA6JbsE,UAAQ,kBAAW;AAClB,OAAItE,IAAIk+B,aAAR;AACAl+B,KAAEo2B,SAAF,CAAYwD,IAAZ,GAAmB+E,QAAQ,CAAC,QAAD,EAAW,KAAX,CAAR,CAAnB;AACA3+B,KAAEo2B,SAAF,CAAY0D,CAAZ,GAAgB2E,MAAM,GAAN,CAAhB;;AAEAz+B,KAAEq3B,SAAF,CAAYC,KAAZ,GAAoBmH,MAAM,GAAN,EAAW,GAAX,CAApB;;AAEAz+B,KAAEs2B,MAAF,CAASkH,OAAT,GAAmBiB,MAAM,GAAN,EAAW,GAAX,CAAnB;AACAz+B,KAAEs2B,MAAF,CAASoH,KAAT,GAAiBe,MAAM,GAAN,CAAjB;;AAEAz+B,KAAEo7B,MAAF,CAASI,EAAT,GAAc,GAAd;AACA4C,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA,GA1KY;AA2Kbg/B,SAAO,iBAAW;AACjB,OAAIh/B,IAAIk+B,aAAR;AACA3J,cAAWv0B,CAAX,EAAc,UAASi/B,GAAT,EAAcC,UAAd,EAA0B;AACvC,QAAI50B,OAAOkoB,KAAKuD,MAAL,CAAYmJ,UAAZ,EAAwBzL,MAAnC;AACAc,eAAWjqB,IAAX,EAAiB,UAASqsB,GAAT,EAAcjoB,IAAd,EAAoB;AACpC,SAAIioB,IAAIkD,CAAR,EAAW;AACV,UAAIra,SAAS6e,YAAY1H,IAAIkD,CAAhB,CAAb;AACAoF,UAAIvwB,IAAJ,IAAY8Q,OAAQA,OAAO7S,MAAP,GAAgBrE,KAAKoE,MAAL,EAAjB,GAAkC,CAAzC,CAAZ;AACA,MAHD,MAGO;AACNuyB,UAAIvwB,IAAJ,IAAYpG,KAAKoE,MAAL,MAAiBiqB,IAAIY,CAAJ,GAAQZ,IAAIpS,CAA7B,IAAkCoS,IAAIpS,CAAlD;AACA;AACD,KAPD;AAQA,IAVD;AAWAvkB,KAAEs2B,MAAF,CAASgH,MAAT,GAAkB,GAAlB;AACAt9B,KAAEo7B,MAAF,GAAW,EAAX,CAdiB,CAcF;AACfgD,qBAAkBp+B,CAAlB;AACA,UAAOA,CAAP;AACA;AA5LY,EAAd;;AA+LA;;AAEA;AACAwyB,MAAKwD,CAAL,CAAOmJ,MAAP,GAAgBC,aAAa,yBAAb,CAAhB;AACA;AACA5M,MAAKwD,CAAL,CAAOqJ,IAAP,GAAcD,aAAa,2BAAb,CAAd;AACA;AACA5M,MAAKwD,CAAL,CAAOsJ,GAAP,GAAaF,aAAa,iDAAb,CAAb;AACA;AACA5M,MAAKwD,CAAL,CAAOuJ,QAAP,GAAkBH,aAAa,wDAAb,CAAlB;AACA;AACA5M,MAAKwD,CAAL,CAAOwJ,MAAP,GAAgBJ,aAAa,mEAAb,CAAhB;AACA;AACA5M,MAAKwD,CAAL,CAAOyJ,KAAP,GAAeL,aAAa,yEAAb,CAAf;;AAEA;AACA,KAAIM,cAAc,CAAlB;AACAlN,MAAKwD,CAAL,CAAO2J,KAAP,GAAeP,aAAa,iFAAb,CAAf;;AAEA;AACA5M,MAAKwD,CAAL,CAAO4J,MAAP,GAAgB;AACf75B,UAAQ,kBAAW;AAClB,OAAIi1B,KAAK,KAAK,EAAd;AACA,OAAIC,KAAKD,KAAK,CAAd;;AAEA,OAAI3F,SAASvB,iBAAiBkH,EAAjB,CAAb;AACA,QAAK,IAAIrwB,IAAI,CAAb,EAAgBA,IAAI0qB,OAAO1oB,MAA3B,EAAmChC,GAAnC,EAAwC;AACvC0qB,WAAO1qB,CAAP,IAAYrC,KAAKoE,MAAL,KAAgB,CAAhB,GAAoB,CAAhC;AACA;;AAED,OAAImzB,OAAO,CAAX;AACA,UAAO,UAAS5I,CAAT,EAAYpD,KAAZ,EAAmB;AACzB,QAAId,MAAMzqB,KAAKqD,EAAL,GAAU,CAApB;AACA,QAAImuB,IAAI,CAAC7C,EAAEoD,UAAX;AAAA,QACCL,SAAS,CAAC/C,EAAEqD,eADb;AAAA,QAECP,IAAI,CAAC9C,EAAEsD,UAFR;AAAA,QAGCN,SAAS,CAAChD,EAAEuD,eAHb;AAIA,QAAIsF,MAAMzK,MAAV;;AAEA,SAAK,IAAI1qB,IAAI,CAAb,EAAgBA,IAAIkpB,MAAMlnB,MAA1B,EAAkChC,GAAlC,EAAuC;AACtC,SAAIstB,aAAapE,MAAMlpB,CAAN,CAAjB;AACA,SAAIiJ,IAAKmf,MAAMkF,UAAP,GAAqB,CAA7B;AACA6B,UAAKE,MAAL;AACAD,UAAKE,MAAL;AACAH,SAAIA,IAAI,CAAJ,GAAQ,CAAR,GAAYA,IAAI,CAAJ,GAAQ,CAAR,GAAYA,CAA5B;AACAC,SAAIA,IAAI,CAAJ,GAAQ,CAAR,GAAYA,IAAI,CAAJ,GAAQ,CAAR,GAAYA,CAA5B;;AAEA,SAAIoB,IAAM0E,OAAOjsB,CAAR,GAAaonB,EAAd,GAAoBC,EAA5B;AACA,SAAI0B,SAAS,CACZmD,IAAK3E,IAAI,CAAJ,GAAQH,EAAT,GAAeC,EAAnB,IAAyB,CAAzB,GACA6E,IAAK3E,IAAI,CAAJ,GAAQH,EAAT,GAAeC,EAAnB,IAAyBnB,CADzB,GAEAgG,IAAK3E,IAAI,CAAJ,GAAQH,EAAT,GAAeC,EAAnB,IAAyBlB,CAHb,KAGmB,IAAID,CAAJ,GAAQC,CAH3B,CAAb;;AAKA+F,SAAID,IAAJ,IAAYlD,MAAZ;AACA9I,WAAMlpB,CAAN,IAAWm1B,IAAID,IAAJ,CAAX;AACAA,YAAQA,OAAO,CAAR,GAAa5E,EAApB;AACA;;AAEDhE,MAAEoD,UAAF,GAAeP,CAAf;AACA7C,MAAEsD,UAAF,GAAeR,CAAf;AACA,WAAOlG,MAAMlnB,MAAb;AACA,IA9BD;AA+BA;AA1Cc,EAAhB;;AA6CA;AACA,UAASyyB,YAAT,CAAsB5Z,IAAtB,EAA4B;AAC3B,SAAO,IAAIua,QAAJ,CAAa,GAAb,EAAkB,OAAlB,EAA2B,KACjC,0BADiC,GAEjC,eAFiC,GAGjC,kCAHiC,GAIjC,oDAJiC,GAKjC,oDALiC,GAMjC,IANiC,GAOjC,0CAPiC,GAQjC,+BARiC,GASjC,yBATiC,GAUjC,qCAViC,GAWjC,8BAXiC,GAYjC,qCAZiC,GAajC,qCAbiC,GAcjCva,IAdiC,GAejC,uBAfiC,GAgBjC,KAhBiC,GAiBjC,IAjBiC,GAkBjC,6BAlBiC,GAmBjC,qBAnBiC,GAoBjC,qBApBiC,GAqBjC,wBArBiC,GAsBjC,EAtBM,CAAP;AAuBA;;AAED;;AAEA;AACAgN,MAAKwN,UAAL,GAAkBA,UAAlB;;AAEA,UAASA,UAAT,CAAoBh0B,IAApB,EAA0B;AACzB,MAAI,OAAOwc,YAAP,KAAwB,WAA5B,EAAyC;AACxC4R,UAAOpuB,gBAAgBwc,YAAvB,EAAqC,8BAArC;AACA;;AAED,MAAIyX,aAAahN,cAAcD,aAAd,IAA+B,CAAhD;AACA,MAAIkN,WAAW1N,KAAKW,UAAL,GAAkB8M,UAAjC;;AAEA,MAAIxU,SAAS0U,gBAAgB,IAAI,EAAJ,GAASn0B,KAAKW,MAAL,GAAc,CAAvC,CAAb;AACA,MAAI3M,IAAI,CAAR;;AAEA;AACA,WAAS69B,CAAT,CAAW/8B,KAAX,EAAkB;AACjB,QAAK,IAAI6J,IAAI,CAAb,EAAgBA,IAAI7J,MAAM6L,MAA1B,EAAkChC,KAAK,CAAvC,EAA0C;AACzC8gB,WAAOzrB,CAAP,IAAYc,MAAMs/B,UAAN,CAAiBz1B,CAAjB,CAAZ;AACA3K;AACA;AACD;;AAED;AACA,WAAS29B,CAAT,CAAW78B,KAAX,EAAkBu/B,MAAlB,EAA0B;AACzB,OAAIA,UAAU,CAAd,EAAiB;AAChB;AACA;AACD5U,UAAOzrB,CAAP,IAAYc,QAAQ,IAApB;AACAd;AACA29B,KAAE78B,SAAS,CAAX,EAAcu/B,SAAS,CAAvB;AACA;AACD;AACAxC,IAAE,MAAF,EAAWF,EAAE,KAAK3xB,KAAKW,MAAL,GAAc,CAArB,EAAwB,CAAxB;;AAEXkxB,IAAE,UAAF,EAAeF,EAAE,EAAF,EAAM,CAAN,EAAUA,EAAE,CAAF,EAAK,CAAL;AACzBA,IAAE1K,WAAF,EAAe,CAAf,EAAmB0K,EAAEnL,KAAKW,UAAP,EAAmB,CAAnB;AACnBwK,IAAEuC,QAAF,EAAY,CAAZ,EAAgBvC,EAAEsC,UAAF,EAAc,CAAd,EAAkBtC,EAAE3K,aAAF,EAAiB,CAAjB;;AAElC6K,IAAE,MAAF,EAAWF,EAAE3xB,KAAKW,MAAL,GAAc,CAAhB,EAAmB,CAAnB;AACX2zB,YAAU7U,OAAOzD,QAAP,CAAgBhoB,CAAhB,CAAV,EAA8BgM,IAA9B;AACA;;AAEA,SAAOyf,MAAP;AACA;;AAED;AACA+G,MAAKyB,WAAL,GAAmBA,WAAnB;;AAEA,UAASA,WAAT,CAAqBjoB,IAArB,EAA2B;AAC1B,MAAIu0B,OAAOP,WAAWh0B,IAAX,CAAX;AACA,SAAO,IAAIumB,KAAJ,CAAU,2BAA2BiO,QAAQD,IAAR,CAArC,CAAP;AACA;;AAED/N,MAAKiO,cAAL,GAAsB,UAASnO,KAAT,EAAgB;AACrC8H,SAAO9H,iBAAiBC,KAAxB,EAA+B,+BAA/B;AACAj0B,WAASsjB,QAAT,CAAkB8e,IAAlB,GAAyBpO,MAAMqO,GAA/B;AACA,EAHD;;AAKA;AACAnO,MAAKoO,IAAL,GAAY,EAAZ;;AAEA;AACApO,MAAKoO,IAAL,CAAUN,SAAV,GAAsBA,SAAtB;;AAEA,UAASA,SAAT,CAAmBO,IAAnB,EAAyBC,MAAzB,EAAiC;AAChC1G,SAAOyG,KAAKl0B,MAAL,GAAc,CAAd,IAAmBm0B,OAAOn0B,MAAjC,EACC,wDADD;;AAGA,MAAIo0B,IAAI,CAAR;AACA,OAAK,IAAIp2B,IAAI,CAAb,EAAgBA,IAAIm2B,OAAOn0B,MAA3B,EAAmChC,GAAnC,EAAwC;AACvC,OAAI/L,IAAI,CAACkiC,OAAOn2B,CAAP,CAAT;AACA,OAAIkD,IAAKjP,IAAI,MAAL,GAAe,CAAvB;AACAiP,OAAIA,IAAI,CAAC,MAAL,GAAc,CAAC,MAAf,GAAwB,SAASA,CAAT,GAAa,MAAb,GAAsBA,CAAlD;AACAA,QAAKA,IAAI,CAAJ,GAAQ,OAAR,GAAkB,CAAvB;AACAgzB,QAAKE,CAAL,IAAUlzB,IAAI,IAAd;AACAkzB;AACAF,QAAKE,CAAL,IAAUlzB,KAAK,CAAf;AACAkzB;AACA;AACD;;AAED;AACAvO,MAAKoO,IAAL,CAAUJ,OAAV,GAAoBA,OAApB;;AAEA,UAASA,OAAT,CAAiBx0B,IAAjB,EAAuB;AACtB,MAAIg1B,QAAQ,MAAZ;AACA,MAAIC,SAAS,EAAb;AACA,OAAK,IAAIniC,QAAQ,CAAjB,EAAoBA,QAAQkN,KAAKW,MAAjC,EAAyC7N,SAASkiC,KAAlD,EAAyD;AACxD,OAAI/2B,MAAM3B,KAAKC,GAAL,CAASzJ,QAAQkiC,KAAjB,EAAwBh1B,KAAKW,MAA7B,CAAV;AACAs0B,aAAUpO,OAAOC,YAAP,CAAoBre,KAApB,CAA0B,IAA1B,EAAgCzI,KAAKgc,QAAL,CAAclpB,KAAd,EAAqBmL,GAArB,CAAhC,CAAV;AACA;AACD,SAAOi3B,KAAKD,MAAL,CAAP;AACA;;AAED;AACA,UAAS1N,oBAAT,GAAgC;AAC/B,MAAI,OAAO5wB,YAAP,KAAwB,WAA5B,EAAyC;AACxC,UAAQ,IAAIA,YAAJ,EAAD,CAAqB2wB,UAA5B;AACA;AACD,SAAO,KAAP;AACA;;AAED;AACA,UAAS8G,MAAT,CAAgB+G,SAAhB,EAA2BC,OAA3B,EAAoC;AACnC,MAAI,CAACD,SAAL,EAAgB;AACf,SAAM,IAAI/sB,KAAJ,CAAUgtB,OAAV,CAAN;AACA;AACD;;AAED,UAASnD,KAAT,CAAer/B,CAAf,EAAkB2J,GAAlB,EAAuBiB,GAAvB,EAA4B;AAC3B5K,MAAI,CAACA,CAAL;AACA2J,QAAM,CAACA,GAAP;AACAiB,QAAM,CAACA,GAAP;AACA,MAAI5K,IAAI2J,GAAR,EAAa;AACZ,UAAO,CAACA,GAAR;AACA;AACD,MAAI3J,IAAI4K,GAAR,EAAa;AACZ,UAAO,CAACA,GAAR;AACA;AACD,SAAO,CAAC5K,CAAR;AACA;;AAED,UAAS+6B,MAAT,CAAgB/6B,CAAhB,EAAmB;AAClBA,MAAI,CAACA,CAAL;AACA,MAAIA,IAAI,CAAC,GAAT,EAAc;AACb,UAAO,CAAC,GAAR;AACA;AACD,MAAIA,IAAI,CAAC,GAAT,EAAc;AACb,UAAO,CAAC,GAAR;AACA;AACD,SAAO,CAACA,CAAR;AACA;;AAED,UAAS21B,UAAT,CAAoBn0B,GAApB,EAAyBihC,EAAzB,EAA6B;AAC5B,MAAI91B,IAAI,EAAR;AACA,OAAK,IAAImD,IAAT,IAAiBtO,GAAjB,EAAsB;AACrB,OAAIA,IAAIkhC,cAAJ,CAAmB5yB,IAAnB,CAAJ,EAA8B;AAC7BnD,MAAEmD,IAAF,IAAU2yB,GAAGjhC,IAAIsO,IAAJ,CAAH,EAAcA,IAAd,CAAV;AACA;AACD;AACD,SAAOnD,CAAP;AACA;;AAED;AACA,UAASkzB,KAAT,CAAezzB,KAAf,EAAsBiG,MAAtB,EAA8B;AAC7B,MAAIpD,IAAIvF,KAAKoE,MAAL,EAAR;AACA,MAAI1B,UAAUxF,SAAd,EACCqI,KAAK7C,KAAL;AACD,MAAIiG,WAAWzL,SAAf,EACCqI,KAAKoD,MAAL;AACD,SAAOpD,CAAP;AACA;;AAED,UAAS8wB,OAAT,CAAiB4C,IAAjB,EAAuB;AACtB,SAAOA,KAAMA,KAAK50B,MAAL,GAAcrE,KAAKoE,MAAL,EAAf,GAAgC,CAArC,CAAP;AACA;;AAED,UAAS2xB,WAAT,CAAqBj+B,GAArB,EAA0B;AACzB,MAAImL,IAAI,EAAR;AACA,OAAK,IAAImD,IAAT,IAAiBtO,GAAjB,EAAsB;AACrBmL,KAAEV,IAAF,CAAO6D,IAAP;AACA;AACD,SAAOnD,CAAP;AACA;;AAEDinB,MAAKgP,iBAAL,GAAyB1N,gBAAzB;;AAEA,UAASA,gBAAT,CAA0BoD,CAA1B,EAA6B;AAC5B,MAAI,OAAO1O,YAAP,KAAwB,WAA5B,EAAyC;AACxC,OAAIjd,IAAI,IAAImE,KAAJ,CAAUwnB,CAAV,CAAR;AACA,QAAK,IAAIvsB,IAAI,CAAb,EAAgBA,IAAIY,EAAEoB,MAAtB,EAA8BhC,GAA9B,EAAmC;AAClCY,MAAEZ,CAAF,IAAO,GAAP;AACA;AACD;AACD,SAAO,IAAI6d,YAAJ,CAAiB0O,CAAjB,CAAP;AACA;;AAED,UAASiJ,eAAT,CAAyBjJ,CAAzB,EAA4B;AAC3B,MAAI,OAAO5P,UAAP,KAAsB,WAA1B,EAAuC;AACtC,OAAI/b,IAAI,IAAImE,KAAJ,CAAUwnB,CAAV,CAAR;AACA,QAAK,IAAIvsB,IAAI,CAAb,EAAgBA,IAAIY,EAAEoB,MAAtB,EAA8BhC,GAA9B,EAAmC;AAClCY,MAAEZ,CAAF,IAAO,IAAI,CAAX;AACA;AACD;AACD,SAAO,IAAI2c,UAAJ,CAAe4P,CAAf,CAAP;AACA;;AAED,QAAO1E,IAAP;AACA,CAntCA,CAAD,C","file":"./lib/js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f99c6869c1ceb4088756","import * as Nexus from './NexusUI';\n\nimport Sequencer from './sequencer';\nimport Piano from './piano';\nimport Button from './button';\nimport Sounds from './sounds';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n\n    const board = new Sequencer();\n    const piano = new Piano();\n    const button = new Button();\n\n\n    button.button.on('change',function(v) {\n      board.sequencer.start();\n      button.play();\n   });\n\n\n    board.sequencer.on('step',function(v) {\n    console.log(v);\n  });\n\n\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/js/main.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NexusUI\"] = factory();\n\telse\n\t\troot[\"NexusUI\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar NexusUI = __webpack_require__(1);\n\tvar Nexus = new NexusUI();\n\t\n\tif (window) {\n\t  window.Nexus = Nexus;\n\t}\n\t\n\tmodule.exports = Nexus;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar Interfaces = _interopRequire(__webpack_require__(2));\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar Rack = _interopRequire(__webpack_require__(38));\n\t\n\tvar Tune = _interopRequire(__webpack_require__(40));\n\t\n\tvar Transform = _interopRequireWildcard(__webpack_require__(39));\n\t\n\tvar Counter = __webpack_require__(28);\n\tvar Radio = __webpack_require__(41);\n\tvar Drunk = __webpack_require__(27);\n\tvar Sequence = __webpack_require__(26);\n\tvar Matrix = __webpack_require__(25);\n\t\n\tvar WAAClock = _interopRequire(__webpack_require__(42));\n\t\n\tvar Interval = _interopRequire(__webpack_require__(45));\n\t\n\t/**\n\tNexusUI => created as Nexus\n\t*/\n\t\n\tvar NexusUI = (function () {\n\t  function NexusUI(context) {\n\t    _classCallCheck(this, NexusUI);\n\t\n\t    for (var key in Interfaces) {\n\t      this[key] = Interfaces[key];\n\t    }\n\t\n\t    for (var _key in math) {\n\t      this[_key] = math[_key];\n\t    }\n\t\n\t    var Core = {\n\t      Rack: Rack\n\t    };\n\t\n\t    var Models = {\n\t      Counter: Counter,\n\t      Radio: Radio,\n\t      Drunk: Drunk,\n\t      Sequence: Sequence,\n\t      Matrix: Matrix\n\t    };\n\t\n\t    for (var _key2 in Models) {\n\t      this[_key2] = Models[_key2];\n\t    }\n\t\n\t    for (var _key3 in Core) {\n\t      this[_key3] = Core[_key3];\n\t    }\n\t\n\t    var DefaultContext = window.AudioContext || window.webkitAudioContext;\n\t    this._context = context || new DefaultContext();\n\t\n\t    this.tune = new Tune();\n\t    this.note = this.tune.note.bind(this.tune);\n\t\n\t    this.clock = new WAAClock(this._context);\n\t    this.clock.start();\n\t    this.Interval = Interval;\n\t\n\t    this.colors = {\n\t      accent: \"#2bb\",\n\t      fill: \"#eee\",\n\t      light: \"#fff\",\n\t      dark: \"#333\",\n\t      mediumLight: \"#ccc\",\n\t      mediumDark: \"#666\"\n\t    };\n\t\n\t    this.transform = Transform;\n\t    this.add = Transform.add;\n\t  }\n\t\n\t  _createClass(NexusUI, {\n\t    context: {\n\t      get: function () {\n\t        return this._context;\n\t      },\n\t      set: function (ctx) {\n\t        this.clock.stop();\n\t        this._context = ctx;\n\t        this.clock = new WAAClock(this.context);\n\t        this.clock.start();\n\t      }\n\t    }\n\t  });\n\t\n\t  return NexusUI;\n\t})();\n\t\n\tmodule.exports = NexusUI;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = {\n\t  Position: __webpack_require__(3),\n\t  Slider: __webpack_require__(14),\n\t  Toggle: __webpack_require__(15),\n\t  //  Range: require('./range'),\n\t  //  Waveform: require('./waveform'),\n\t  Button: __webpack_require__(16),\n\t  TextButton: __webpack_require__(18),\n\t  RadioButton: __webpack_require__(19),\n\t  Number: __webpack_require__(20),\n\t  Select: __webpack_require__(21),\n\t  Dial: __webpack_require__(22),\n\t  Piano: __webpack_require__(23),\n\t  Sequencer: __webpack_require__(24),\n\t  Pan2D: __webpack_require__(29),\n\t  Tilt: __webpack_require__(30),\n\t  Multislider: __webpack_require__(31),\n\t  Pan: __webpack_require__(33),\n\t  Envelope: __webpack_require__(34),\n\t  Spectrogram: __webpack_require__(35),\n\t  Meter: __webpack_require__(36),\n\t  Oscilloscope: __webpack_require__(37)\n\t};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\t\n\tvar Interaction = _interopRequireWildcard(__webpack_require__(12));\n\t\n\t/**\n\t* Position\n\t*\n\t* @description Two-dimensional touch slider.\n\t*\n\t* @demo <span nexus-ui=\"position\"></span>\n\t*\n\t* @example\n\t* var position = new Nexus.Position('#target')\n\t*\n\t* @example\n\t* var position = new Nexus.Position('#target',{\n\t*   'size': [200,200],\n\t*   'mode': 'absolute',  // \"absolute\" or \"relative\"\n\t*   'x': 0.5,  // initial x value\n\t*   'minX': 0,\n\t*   'maxX': 1,\n\t*   'stepX': 0,\n\t*   'y': 0.5,  // initial y value\n\t*   'minY': 0,\n\t*   'maxY': 1,\n\t*   'stepY': 0\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data is an object with x and y properties containing the x and y values of the interface.\n\t*\n\t* @outputexample\n\t* position.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Position = (function (_Interface) {\n\t  function Position() {\n\t    _classCallCheck(this, Position);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [200, 200],\n\t      mode: \"absolute\",\n\t      minX: 0,\n\t      maxX: 1,\n\t      stepX: 0,\n\t      x: 0.5,\n\t      minY: 0,\n\t      maxY: 1,\n\t      stepY: 0,\n\t      y: 0.5\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Position.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._x = new Step(this.settings.minX, this.settings.maxX, this.settings.stepX, this.settings.x);\n\t    this._y = new Step(this.settings.minY, this.settings.maxY, this.settings.stepY, this.settings.y);\n\t\n\t    this.position = {\n\t      x: new Interaction.Handle(this.settings.mode, \"horizontal\", [0, this.width], [this.height, 0]),\n\t      y: new Interaction.Handle(this.settings.mode, \"vertical\", [0, this.width], [this.height, 0])\n\t    };\n\t    this.position.x.value = this._x.normalized;\n\t    this.position.y.value = this._y.normalized;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Position, _Interface);\n\t\n\t  _createClass(Position, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.knob = svg.create(\"circle\");\n\t        this.element.appendChild(this.knob);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        this.position.x.resize([0, this.width], [this.height, 0]);\n\t        this.position.y.resize([0, this.width], [this.height, 0]);\n\t\n\t        this._minDimension = Math.min(this.width, this.height);\n\t\n\t        this.knobRadius = {\n\t          off: ~ ~(this._minDimension / 100) * 5 + 5 };\n\t        this.knobRadius.on = this.knobRadius.off * 2;\n\t\n\t        this.knob.setAttribute(\"cx\", this.width / 2);\n\t        this.knob.setAttribute(\"cy\", this.height / 2);\n\t        this.knob.setAttribute(\"r\", this.knobRadius.off);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.element.style.backgroundColor = this.colors.fill;\n\t        this.knob.setAttribute(\"fill\", this.colors.accent);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (this.clicked) {\n\t          //  this.knobRadius = 30;\n\t          this.knob.setAttribute(\"r\", this.knobRadius.on);\n\t        } else {\n\t          //  this.knobRadius = 15;\n\t          this.knob.setAttribute(\"r\", this.knobRadius.off);\n\t        }\n\t\n\t        this.knobCoordinates = {\n\t          x: this._x.normalized * this.width,\n\t          y: this.height - this._y.normalized * this.height\n\t        };\n\t\n\t        this.knob.setAttribute(\"cx\", this.knobCoordinates.x);\n\t        this.knob.setAttribute(\"cy\", this.knobCoordinates.y);\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.position.x.anchor = this.mouse;\n\t        this.position.y.anchor = this.mouse;\n\t        this.move();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.clicked) {\n\t          this.position.x.update(this.mouse);\n\t          this.position.y.update(this.mouse);\n\t          this._x.updateNormal(this.position.x.value);\n\t          this._y.updateNormal(this.position.y.value);\n\t          this.emit(\"change\", {\n\t            x: this._x.value,\n\t            y: this._y.value\n\t          });\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        this.render();\n\t      }\n\t    },\n\t    x: {\n\t\n\t      /**\n\t      * The interface's x value. When set, it will automatically adjust to fit min/max/step settings of the interface.\n\t      * @type {object}\n\t      * @example position.x = 0.5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._x.value;\n\t      },\n\t      set: function (value) {\n\t        this._x.update(value);\n\t        this.emit(\"change\", {\n\t          x: this._x.value,\n\t          y: this._y.value\n\t        });\n\t        this.render();\n\t      }\n\t    },\n\t    y: {\n\t\n\t      /**\n\t      * The interface's y values. When set, it will automatically adjust to fit min/max/step settings of the interface.\n\t      * @type {object}\n\t      * @example position.x = 0.5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._y.value;\n\t      },\n\t      set: function (value) {\n\t        this._y.update(value);\n\t        this.emit(\"change\", {\n\t          x: this._x.value,\n\t          y: this._y.value\n\t        });\n\t        this.render();\n\t      }\n\t    },\n\t    normalized: {\n\t      get: function () {\n\t        return {\n\t          x: this._x.normalized,\n\t          y: this._y.normalized\n\t        };\n\t      }\n\t    },\n\t    minX: {\n\t\n\t      /**\n\t      * The lower limit of value on the x axis\n\t      * @type {object}\n\t      */\n\t\n\t      get: function () {\n\t        return this._x.min;\n\t      },\n\t      set: function (v) {\n\t        this._x.min = v;\n\t        this.render();\n\t      }\n\t    },\n\t    minY: {\n\t\n\t      /**\n\t      * The lower limit of value on the y axis\n\t      * @type {object}\n\t      */\n\t\n\t      get: function () {\n\t        return this._y.min;\n\t      },\n\t      set: function (v) {\n\t        this._y.min = v;\n\t        this.render();\n\t      }\n\t    },\n\t    maxX: {\n\t\n\t      /**\n\t      * The upper limit of value on the x axis\n\t      * @type {object}\n\t      */\n\t\n\t      get: function () {\n\t        return this._x.max;\n\t      },\n\t      set: function (v) {\n\t        this._x.max = v;\n\t        this.render();\n\t      }\n\t    },\n\t    maxY: {\n\t\n\t      /**\n\t      * The upper limit of value on the y axis\n\t      * @type {object}\n\t      */\n\t\n\t      get: function () {\n\t        return this._y.max;\n\t      },\n\t      set: function (v) {\n\t        this._y.max = v;\n\t        this.render();\n\t      }\n\t    },\n\t    stepX: {\n\t\n\t      /**\n\t      * The incremental step of values on the x axis\n\t      * @type {object}\n\t      */\n\t\n\t      get: function () {\n\t        return this._x.step;\n\t      },\n\t      set: function (v) {\n\t        this._x.step = v;\n\t        this.render();\n\t      }\n\t    },\n\t    stepY: {\n\t\n\t      /**\n\t      * The incremental step of values on the y axis\n\t      * @type {object}\n\t      */\n\t\n\t      get: function () {\n\t        return this._y.step;\n\t      },\n\t      set: function (v) {\n\t        this._y.step = v;\n\t        this.render();\n\t      }\n\t    },\n\t    mode: {\n\t\n\t      /**\n\t      Absolute mode (position's value jumps to mouse click position) or relative mode (mouse drag changes value relative to its current position). Default: \"absolute\".\n\t      @type {string}\n\t      @example position.mode = \"relative\";\n\t      */\n\t\n\t      get: function () {\n\t        return this.position.x.mode;\n\t      },\n\t      set: function (v) {\n\t        this.position.x.mode = v;\n\t        this.position.y.mode = v;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Position;\n\t})(Interface);\n\t\n\tmodule.exports = Position;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar math = __webpack_require__(5);\n\t\n\tmodule.exports = {\n\t\n\t  create: function (type) {\n\t    return document.createElementNS(\"http://www.w3.org/2000/svg\", type);\n\t  },\n\t\n\t  arc: function (x, y, radius, startAngle, endAngle) {\n\t\n\t    var start = math.toCartesian(radius, endAngle);\n\t    var end = math.toCartesian(radius, startAngle);\n\t\n\t    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n\t\n\t    var d = [\"M\", start.x + x, start.y + y, \"A\", radius, radius, 0, largeArcFlag, 0, end.x + x, end.y + y].join(\" \");\n\t\n\t    return d;\n\t  },\n\t\n\t  radialGradient: function (defs, numberOfStops) {\n\t\n\t    var id = \"gradient\" + math.ri(100000000000);\n\t    var stops = [];\n\t\n\t    var gradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"radialGradient\");\n\t    gradient.setAttribute(\"id\", id);\n\t    gradient.setAttribute(\"cx\", \"50%\");\n\t    gradient.setAttribute(\"cy\", \"50%\");\n\t    gradient.setAttribute(\"r\", \"50%\");\n\t\n\t    defs.appendChild(gradient);\n\t\n\t    for (var i = 0; i < numberOfStops; i++) {\n\t      var _stop = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n\t      _stop.setAttribute(\"id\", \"stop\" + i);\n\t      //stop.setAttribute('offset', '70%');\n\t      //stop.setAttribute('stop-color', 'White');\n\t      gradient.appendChild(_stop);\n\t      stops.push(_stop);\n\t    }\n\t\n\t    return {\n\t      id: id,\n\t      stops: stops,\n\t      element: gradient\n\t    };\n\t  }\n\t\n\t};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Limit a number to within a minimum and maximum\n\t * @param  {number} value Input value\n\t * @param  {number} min   Lower limit\n\t * @param  {number} max   Upper limit\n\t * @return {number}       The input value constrained within the lower and upper limits\n\t * @example\n\t * Nexus.clip(11,0,10)   // returns 10\n\t * Nexus.clip(-1,0,10)   // returns 0\n\t * Nexus.clip(5,0,10)    // returns 5\n\t */\n\t\n\texports.clip = function (value, min, max) {\n\t  return Math.min(Math.max(value, min), max);\n\t};\n\t\n\texports.normalize = function (value, min, max) {\n\t  return (value - min) / (max - min);\n\t};\n\t\n\t/**\n\t * Scale a value from one range to another range.\n\t * @param  {number} inNum  Input value\n\t * @param  {number} inMin  Input range minimum\n\t * @param  {number} inMax  Input range maximum\n\t * @param  {number} outMin Output range minimum\n\t * @param  {number} outMax Output range maximum\n\t * @return {number}        The input value scaled to its new range\n\t * @example\n\t * Nexus.scale(0.5,0,1,0,10)   // returns 5\n\t * Nexus.scale(0.9,0,1,1,0)    // returns 0.1\n\t */\n\texports.scale = function (inNum, inMin, inMax, outMin, outMax) {\n\t  if (inMin === inMax) {\n\t    return outMin;\n\t  }\n\t  return (inNum - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\n\t};\n\t\n\texports.toPolar = function (x, y) {\n\t  var r = Math.sqrt(x * x + y * y);\n\t\n\t  var theta = Math.atan2(y, x);\n\t  if (theta < 0) {\n\t    theta = theta + 2 * Math.PI;\n\t  }\n\t  return { radius: r, angle: theta };\n\t};\n\t\n\texports.toCartesian = function (radius, angle) {\n\t  var cos = Math.cos(angle);\n\t  var sin = Math.sin(angle);\n\t  return { x: radius * cos, y: radius * sin * -1 };\n\t};\n\t/*\n\texports.polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n\t  var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;\n\t\n\t  return {\n\t    x: centerX + (radius * Math.cos(angleInRadians)),\n\t    y: centerY + (radius * Math.sin(angleInRadians))\n\t  };\n\t}  */\n\t\n\texports.prune = function (data, scale) {\n\t  return parseFloat(data.toFixed(scale));\n\t};\n\t\n\texports.invert = function (inNum) {\n\t  return exports.scale(inNum, 1, 0, 0, 1);\n\t};\n\t\n\t/**\n\t * Convert a MIDi note number to a frequency value in equal temperament.\n\t * @param  {number} midi MIDI note value\n\t * @return {number}      Frequence value\n\t * @example\n\t * Nexus.mtof(60)  // returns the frequency number of Middle C\n\t */\n\texports.mtof = function (midi) {\n\t  return Math.pow(2, (midi - 69) / 12) * 440;\n\t};\n\t\n\t/**\n\t * Interpolate between two numbers\n\t * @param  {number} loc Interpolation index (0-1)\n\t * @param  {number} min Lower value\n\t * @param  {number} max Upper value\n\t * @return {number}     Interpolated value\n\t * @example\n\t * Nexus.interp(0.5,2,4)   // returns 3\n\t * Nexus.interp(0.1,0,10)     // returns 1\n\t */\n\texports.interp = function (loc, min, max) {\n\t  return loc * (max - min) + min;\n\t};\n\t\n\t/**\n\t * Return a random choice from a list of arguments\n\t * @return {various} One random argument\n\t * @example\n\t * Nexus.pick(1,2,3,4)   // returns 1, 2, 3, or 4\n\t * Nexus.pick(function1,function2)   // returns either function1 or function2\n\t */\n\texports.pick = function () {\n\t  return arguments[~ ~(Math.random() * arguments.length)];\n\t};\n\t\n\t/**\n\t * Returns an octave multiplier for frequency values\n\t * @param  {number} num Relative octave number (e.g. -1 for one octave down, 1 for one octave up)\n\t * @return {number}     Octave multiplier\n\t * @example\n\t * Nexus.octave(-1)  // returns 0.5\n\t * Nexus.octave(0)   // returns 1\n\t * Nexus.octave(1)   // returns 2\n\t * Nexus.octave(2)   // returns 4\n\t */\n\texports.octave = function (num) {\n\t  return Math.pow(2, num);\n\t};\n\t\n\t/**\n\t * Random integer generator. If no second argument is given, will return random integer from 0 to bound1.\n\t * @param  {number} bound1 Minimum random value\n\t * @param  {number} bound2 Maximum random value\n\t * @return {number}        Random integer between lower and upper boundary\n\t * @example\n\t * Nexus.ri(10)    // returns random int from 0 to 10\n\t * Nexus.ri(20,2000) // returns random int from 20 to 2000\n\t */\n\texports.ri = function (bound1, bound2) {\n\t  if (!bound2) {\n\t    bound2 = bound1;\n\t    bound1 = 0;\n\t  }\n\t  var low = Math.min(bound1, bound2);\n\t  var high = Math.max(bound1, bound2);\n\t  return Math.floor(Math.random() * (high - low) + low);\n\t};\n\t\n\t/**\n\t * Random float number generator. If no second argument is given, will return random float from 0 to bound1.\n\t * @param  {number} bound1 Minimum random value\n\t * @param  {number} bound2 Maximum random value\n\t * @return {number}        Random float between lower and upper boundary\n\t * @example\n\t * Nexus.rf(1)    // returns random float from 0 to 1\n\t * Nexus.rf(1,2) // returns random float from 1 to 2\n\t */\n\texports.rf = function (bound1, bound2) {\n\t  if (!bound2) {\n\t    bound2 = bound1;\n\t    bound1 = 0;\n\t  }\n\t  var low = Math.min(bound1, bound2);\n\t  var high = Math.max(bound1, bound2);\n\t  return Math.random() * (high - low) + low;\n\t};\n\t\n\texports.cycle = function (input, min, max) {\n\t  input++;\n\t  if (input >= max) {\n\t    input = min;\n\t  }\n\t  return input;\n\t};\n\t\n\t/**\n\t * Average an array of numbers\n\t * @param  {Array} data Array of numbers to average\n\t * @return {number}      Average of the input data\n\t * @example\n\t * Nexus.average([0,2,4,6,8,10])   // returns 5\n\t */\n\texports.average = function (data) {\n\t  var total = 0;\n\t  for (var i = 0; i < data.length; i++) {\n\t    total += data[i];\n\t  }\n\t  return total / data.length;\n\t};\n\t\n\t/**\n\t * Get the distance from one (x,y) point to another (x,y) point\n\t * @param  {number} x1 x of first point\n\t * @param  {number} y1 y of first point\n\t * @param  {number} x2 x of second point\n\t * @param  {number} y2 y of second poiny\n\t * @return {number}    Distance\n\t * @example\n\t * Nexus.distance(0,0,3,4)   // returns 5\n\t */\n\texports.distance = function (x1, y1, x2, y2) {\n\t  var a = x1 - x2;\n\t  var b = y1 - y2;\n\t  return Math.sqrt(a * a + b * b);\n\t};\n\t\n\texports.gainToDB = function (gain) {\n\t  return 20 * Math.log10(gain);\n\t};\n\t\n\t/**\n\t * Flip a coin, returning either 0 or 1 according to a probability\n\t * @param  {number} [odds=0.5] Likelihood of returning 1\n\t * @return {number}            1 or 0\n\t * @example\n\t * Nexus.coin(0.1)   // returns 1 (10% of the time) or 0 (90% of the time)\n\t */\n\texports.coin = function () {\n\t  var odds = arguments[0] === undefined ? 0.5 : arguments[0];\n\t\n\t  if (exports.rf(0, 1) < odds) {\n\t    return 1;\n\t  } else {\n\t    return 0;\n\t  }\n\t};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar dom = __webpack_require__(7);\n\tvar util = __webpack_require__(8);\n\tvar touch = __webpack_require__(9);\n\tvar EventEmitter = __webpack_require__(10);\n\t\n\t/**\n\tInterface\n\t*/\n\t\n\tvar Interface = (function (_EventEmitter) {\n\t  function Interface(args, options, defaults) {\n\t    _classCallCheck(this, Interface);\n\t\n\t    _get(Object.getPrototypeOf(Interface.prototype), \"constructor\", this).call(this);\n\t    this.type = this.constructor.name;\n\t    this.settings = this.parseSettings(args, options, defaults);\n\t    this.mouse = {};\n\t    this.wait = false;\n\t    this.colors = {};\n\t    var defaultColors = Nexus.colors; // jshint ignore:line\n\t    this.colors.accent = defaultColors.accent;\n\t    this.colors.fill = defaultColors.fill;\n\t    this.colors.light = defaultColors.light;\n\t    this.colors.dark = defaultColors.dark;\n\t    this.colors.mediumLight = defaultColors.mediumLight;\n\t    this.colors.mediumDark = defaultColors.mediumDark;\n\t  }\n\t\n\t  _inherits(Interface, _EventEmitter);\n\t\n\t  _createClass(Interface, {\n\t    parseSettings: {\n\t      value: function parseSettings(args, options, defaults) {\n\t\n\t        options.unshift(\"target\");\n\t        defaults.defaultSize = defaults.size.splice(0, 2);\n\t        defaults.size = false;\n\t\n\t        var settings = {\n\t          target: document.body,\n\t          colors: {}, // should inherit from a colors module,\n\t          snapWithParent: true,\n\t          event: function event() {},\n\t          component: false\n\t        };\n\t\n\t        for (var key in defaults) {\n\t          settings[key] = defaults[key];\n\t        }\n\t\n\t        for (var i = 0; i < args.length; i++) {\n\t          // grabs the next argument\n\t          var setting = args[i];\n\t          // if it's an object, it must be the settings object\n\t          if (util.isObject(setting)) {\n\t            for (var key in setting) {\n\t              settings[key] = setting[key];\n\t            }\n\t            // if it's a function, it must be the event setting\n\t          } else if (typeof setting === \"function\") {\n\t            settings.event = setting;\n\t            // otherwise, consider it one of the widget's custom options\n\t          } else if (options.length >= 1) {\n\t            // grab the first option -- i.e. 'target'\n\t            var key = options.splice(0, 1)[0];\n\t            settings[key] = setting;\n\t          }\n\t        }\n\t\n\t        /*  handle common settings  */\n\t\n\t        // target\n\t        this.parent = dom.parseElement(settings.target);\n\t\n\t        // nexus-ui attribute\n\t        if (this.parent && this.parent instanceof HTMLElement && !settings.component) {\n\t          if (!this.parent.hasAttribute(\"nexus-ui\")) {\n\t            this.parent.setAttribute(\"nexus-ui\", \"\");\n\t          }\n\t        }\n\t\n\t        // size\n\t        if (settings.size && Array.isArray(settings.size) && settings.snapWithParent) {\n\t          this.width = settings.size[0];\n\t          this.height = settings.size[1];\n\t          this.parent.style.width = this.width + \"px\";\n\t          this.parent.style.height = this.height + \"px\";\n\t        } else if (settings.snapWithParent) {\n\t          this.width = parseFloat(this.parent.style.width);\n\t          this.height = parseFloat(this.parent.style.height);\n\t\n\t          if (!this.width) {\n\t            this.width = parseFloat(this.parent.width);\n\t          }\n\t          if (!this.height) {\n\t            this.height = parseFloat(this.parent.height);\n\t          }\n\t\n\t          if (this.parent.style.width) {\n\t            if (this.parent.style.width.indexOf(\"%\") > 0) {\n\t              this.width = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue(\"width\").replace(\"px\", \"\"));\n\t            }\n\t          }\n\t          if (this.parent.width) {\n\t            if (this.parent.width.indexOf(\"%\") > 0) {\n\t              this.width = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue(\"width\").replace(\"px\", \"\"));\n\t            }\n\t          }\n\t\n\t          if (this.parent.style.height) {\n\t            if (this.parent.style.height.indexOf(\"%\") > 0) {\n\t              this.height = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue(\"height\").replace(\"px\", \"\"));\n\t            }\n\t          }\n\t          if (this.parent.height) {\n\t            if (this.parent.height.indexOf(\"%\") > 0) {\n\t              this.height = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue(\"height\").replace(\"px\", \"\"));\n\t            }\n\t          }\n\t\n\t          /*  if (this.parent.style.height.indexOf(\"%\")>0 || this.parent.height.indexOf(\"%\")>0) {\n\t              this.height = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue('height').replace('px',''));\n\t            } */\n\t\n\t          //    this.width = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue('width').replace('px',''));\n\t          //    this.height = parseFloat(window.getComputedStyle(this.parent, null).getPropertyValue('height').replace('px',''));\n\t          if (!this.width) {\n\t            this.width = settings.defaultSize[0];\n\t            this.parent.style.width = this.width + \"px\";\n\t          }\n\t          if (!this.height) {\n\t            this.height = settings.defaultSize[1];\n\t            this.parent.style.height = this.height + \"px\";\n\t          }\n\t        } else {\n\t          settings.size = settings.defaultSize;\n\t          this.width = settings.size[0];\n\t          this.height = settings.size[1];\n\t        }\n\t\n\t        // event\n\t        if (settings.event) {\n\t          this.event = this.on(\"change\", settings.event);\n\t        } else {\n\t          this.event = false;\n\t        }\n\t\n\t        return settings;\n\t      }\n\t    },\n\t    init: {\n\t      value: function init() {\n\t        this.buildFrame();\n\t        this.buildInterface();\n\t        this.sizeInterface();\n\t        this.attachListeners();\n\t        this.colorInterface();\n\t        this.finalTouches();\n\t      }\n\t    },\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = svg.create(\"svg\");\n\t        this.element.setAttribute(\"width\", this.width);\n\t        this.element.setAttribute(\"height\", this.height);\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {}\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {}\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {}\n\t    },\n\t    attachListeners: {\n\t      value: function attachListeners() {\n\t        var _this = this;\n\t\n\t        this.interactionTarget = this.interactionTarget || this.element;\n\t\n\t        // Setup interaction\n\t        if (touch.exists) {\n\t          this.interactionTarget.addEventListener(\"touchstart\", function (evt) {\n\t            return _this.preTouch(evt);\n\t          });\n\t          this.interactionTarget.addEventListener(\"touchmove\", function (evt) {\n\t            return _this.preTouchMove(evt);\n\t          });\n\t          this.interactionTarget.addEventListener(\"touchend\", function (evt) {\n\t            return _this.preTouchRelease(evt);\n\t          });\n\t        }\n\t        this.boundPreMove = function (evt) {\n\t          return _this.preMove(evt);\n\t        };\n\t        this.boundPreRelease = function (evt) {\n\t          return _this.preRelease(evt);\n\t        };\n\t        this.interactionTarget.addEventListener(\"mousedown\", function (evt) {\n\t          return _this.preClick(evt);\n\t        });\n\t      }\n\t    },\n\t    finalTouches: {\n\t      value: function finalTouches() {\n\t        this.element.style.cursor = \"pointer\";\n\t      }\n\t    },\n\t    preClick: {\n\t      value: function preClick(e) {\n\t        // 10000 getComputedStyle calls takes 100 ms.\n\t        // .:. one takes about .01ms\n\t        if (this.element instanceof HTMLElement) {\n\t          this.width = window.getComputedStyle(this.element, null).getPropertyValue(\"width\").replace(\"px\", \"\");\n\t        }\n\t        // 10000 getComputedStyle calls takes 40 ms.\n\t        // .:. one takes about .004ms\n\t        this.offset = dom.findPosition(this.element);\n\t        this.mouse = dom.locateMouse(e, this.offset);\n\t        this.clicked = true;\n\t        this.click();\n\t        this.moveEvent = document.addEventListener(\"mousemove\", this.boundPreMove);\n\t        this.releaseEvent = document.addEventListener(\"mouseup\", this.boundPreRelease);\n\t        e.preventDefault();\n\t        e.stopPropagation();\n\t      }\n\t    },\n\t    preMove: {\n\t      value: function preMove(e) {\n\t        var _this = this;\n\t\n\t        if (!this.wait) {\n\t          this.mouse = dom.locateMouse(e, this.offset);\n\t          this.move();\n\t          this.wait = true;\n\t          setTimeout(function () {\n\t            _this.wait = false;\n\t          }, 25);\n\t        }\n\t        e.preventDefault();\n\t        e.stopPropagation();\n\t      }\n\t    },\n\t    preRelease: {\n\t      value: function preRelease(e) {\n\t        this.mouse = dom.locateMouse(e, this.offset);\n\t        this.clicked = false;\n\t        this.release();\n\t        document.removeEventListener(\"mousemove\", this.boundPreMove);\n\t        document.removeEventListener(\"mouseup\", this.boundPreRelease);\n\t        e.preventDefault();\n\t        e.stopPropagation();\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {}\n\t    },\n\t    move: {\n\t      value: function move() {}\n\t    },\n\t    release: {\n\t      value: function release() {}\n\t    },\n\t    preTouch: {\n\t\n\t      /* touch */\n\t\n\t      value: function preTouch(e) {\n\t        if (this.element instanceof HTMLElement) {\n\t          this.width = window.getComputedStyle(this.element, null).getPropertyValue(\"width\").replace(\"px\", \"\");\n\t        }\n\t        this.offset = dom.findPosition(this.element);\n\t        this.mouse = dom.locateTouch(e, this.offset);\n\t        this.clicked = true;\n\t        this.touch(e);\n\t        e.preventDefault();\n\t        e.stopPropagation();\n\t      }\n\t    },\n\t    preTouchMove: {\n\t      value: function preTouchMove(e) {\n\t        if (this.clicked) {\n\t          this.mouse = dom.locateTouch(e, this.offset);\n\t          this.touchMove();\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        }\n\t      }\n\t    },\n\t    preTouchRelease: {\n\t      value: function preTouchRelease(e) {\n\t        this.mouse = dom.locateTouch(e, this.offset);\n\t        this.clicked = false;\n\t        this.touchRelease();\n\t        e.preventDefault();\n\t        e.stopPropagation();\n\t      }\n\t    },\n\t    touch: {\n\t      value: function touch() {\n\t        this.click();\n\t      }\n\t    },\n\t    touchMove: {\n\t      value: function touchMove() {\n\t        this.move();\n\t      }\n\t    },\n\t    touchRelease: {\n\t      value: function touchRelease() {\n\t        this.release();\n\t      }\n\t    },\n\t    resize: {\n\t\n\t      /**\n\t      * Resize the interface\n\t      * @param width {number} New width in pixels\n\t      * @param height {number} New height in pixels\n\t      *\n\t      * @example\n\t      * button.resize(100,100);\n\t      */\n\t\n\t      value: function resize(width, height) {\n\t        this.width = width;\n\t        this.height = height;\n\t        this.parent.style.width = this.width + \"px\";\n\t        this.parent.style.height = this.height + \"px\";\n\t        this.element.setAttribute(\"width\", this.width);\n\t        this.element.setAttribute(\"height\", this.height);\n\t        this.sizeInterface();\n\t      }\n\t    },\n\t    empty: {\n\t      value: function empty() {\n\t        while (this.element.lastChild) {\n\t          this.element.removeChild(this.element.lastChild);\n\t        }\n\t      }\n\t    },\n\t    destroy: {\n\t\n\t      /**\n\t      * Remove the interface from the page and cancel its event listener(s).\n\t      *\n\t      * @example\n\t      * button.destroy());\n\t      */\n\t\n\t      value: function destroy() {\n\t        this.empty();\n\t        this.parent.removeChild(this.element);\n\t        this.removeAllListeners();\n\t        if (this.instrument) {\n\t          delete this.instrument[this.id];\n\t        }\n\t        this.customDestroy();\n\t      }\n\t    },\n\t    customDestroy: {\n\t      value: function customDestroy() {}\n\t    },\n\t    colorize: {\n\t      value: function colorize(type, color) {\n\t        this.colors[type] = color;\n\t        this.colorInterface();\n\t      }\n\t    }\n\t  });\n\t\n\t  return Interface;\n\t})(EventEmitter);\n\t\n\tmodule.exports = Interface;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.findPosition = function (el) {\n\t  var viewportOffset = el.getBoundingClientRect();\n\t  var top = viewportOffset.top + window.scrollY;\n\t  var left = viewportOffset.left + window.scrollX;\n\t  return { top: top, left: left };\n\t};\n\t\n\texports.parseElement = function (parent) {\n\t  if (typeof parent === \"string\") {\n\t    parent = document.getElementById(parent.replace(\"#\", \"\"));\n\t  }\n\t\n\t  if (parent instanceof HTMLElement || parent instanceof SVGElement) {\n\t    return parent;\n\t  } else {\n\t    return \"No valid parent argument\";\n\t  }\n\t};\n\t\n\texports.locateMouse = function (e, offset) {\n\t  return {\n\t    x: e.pageX - offset.left,\n\t    y: e.pageY - offset.top\n\t  };\n\t};\n\t\n\texports.locateTouch = function (e, offset) {\n\t  return {\n\t    x: e.targetTouches.length ? e.targetTouches[0].pageX - offset.left : false,\n\t    y: e.targetTouches.length ? e.targetTouches[0].pageY - offset.top : false\n\t  };\n\t};\n\t\n\texports.SmartCanvas = function (parent) {\n\t  var _this = this;\n\t\n\t  this.element = document.createElement(\"canvas\");\n\t  this.context = this.element.getContext(\"2d\");\n\t  parent.appendChild(this.element);\n\t\n\t  this.resize = function (w, h) {\n\t    _this.element.width = w * 2;\n\t    _this.element.height = h * 2;\n\t    _this.element.style.width = w + \"px\";\n\t    _this.element.style.height = h + \"px\";\n\t  };\n\t};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.isObject = function (obj) {\n\t  if (typeof obj === \"object\" && !Array.isArray(obj) && obj !== null && obj instanceof SVGElement === false && obj instanceof HTMLElement === false) {\n\t    return true;\n\t  } else {\n\t    return false;\n\t  }\n\t};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.exists = \"ontouchstart\" in document.documentElement;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function(n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n))\n\t    throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function(type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error ||\n\t        (isObject(this._events.error) && !this._events.error.length)) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler))\n\t    return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++)\n\t      listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function(type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener)\n\t    this.emit('newListener', type,\n\t              isFunction(listener.listener) ?\n\t              listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;\n\t  else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);\n\t  else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' +\n\t                    'leak detected. %d listeners added. ' +\n\t                    'Use emitter.setMaxListeners() to increase limit.',\n\t                    this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function(type, listener) {\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function(type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type])\n\t    return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener ||\n\t      (isFunction(list.listener) && list.listener === listener)) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener ||\n\t          (list[i].listener && list[i].listener === listener)) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0)\n\t      return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function(type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events)\n\t    return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0)\n\t      this._events = {};\n\t    else if (this._events[type])\n\t      delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length)\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function(type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type])\n\t    ret = [];\n\t  else if (isFunction(this._events[type]))\n\t    ret = [this._events[type]];\n\t  else\n\t    ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function(type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener))\n\t      return 1;\n\t    else if (evlistener)\n\t      return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function(emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = __webpack_require__(5);\n\t\n\t/**\n\t  Creates a steppable value with minimum, maximum, and step size. This is used in many interfaces to constrict their values to certain ranges.\n\t  @param {number} [min=0] minimum\n\t  @param {number} [max=1] maximum\n\t  @param {number} [step=0]\n\t  @param {number} [value=0] initial value\n\t  @returns {Object} Step\n\t*/\n\t\n\tvar Step = (function () {\n\t  function Step() {\n\t    var min = arguments[0] === undefined ? 0 : arguments[0];\n\t    var max = arguments[1] === undefined ? 1 : arguments[1];\n\t    var step = arguments[2] === undefined ? 0 : arguments[2];\n\t    var value = arguments[3] === undefined ? 0 : arguments[3];\n\t\n\t    _classCallCheck(this, Step);\n\t\n\t    //Object.assign(this,{min,max,step});\n\t    //Cannot use Object.assign because not supported in Safari.\n\t    //I would expect for Babel to take care of this but it is not.\n\t    this.min = min;\n\t    this.max = max;\n\t    this.step = step;\n\t    this.value = value;\n\t    this.changed = false;\n\t    this.oldValue = false;\n\t    this.update(this.value);\n\t  }\n\t\n\t  _createClass(Step, {\n\t    update: {\n\t\n\t      /**\n\t        Update with a new value. The value will be auto-adjusted to fit the min/max/step.\n\t        @param {number} value\n\t      */\n\t\n\t      value: function update(value) {\n\t        if (this.step) {\n\t          // this.value = math.clip(Math.round(value / (this.step)) * this.step, this.min,this.max);\n\t          this.value = math.clip(Math.round((value - this.min) / this.step) * this.step + this.min, this.min, this.max);\n\t        } else {\n\t          this.value = math.clip(value, this.min, this.max);\n\t        }\n\t        if (this.oldValue !== this.value) {\n\t          this.oldValue = this.value;\n\t          this.changed = true;\n\t        } else {\n\t          this.changed = false;\n\t        }\n\t        return this.value;\n\t      }\n\t    },\n\t    updateNormal: {\n\t\n\t      /**\n\t        Update with a normalized value 0-1.\n\t        @param {number} value\n\t      */\n\t\n\t      value: function updateNormal(value) {\n\t        this.value = math.scale(value, 0, 1, this.min, this.max);\n\t        return this.update(this.value);\n\t      }\n\t    },\n\t    normalized: {\n\t\n\t      /**\n\t        Get a normalized version of this.value . Not settable.\n\t      */\n\t\n\t      get: function () {\n\t        return math.normalize(this.value, this.min, this.max);\n\t      }\n\t    }\n\t  });\n\t\n\t  return Step;\n\t})();\n\t\n\tmodule.exports = Step;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\"use strict\";\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar ToggleModel = _interopRequire(__webpack_require__(13));\n\t\n\t/*\n\thow to use :\n\t\n\tdial.interaction = new Handle('radial','relative',this.width,this.height);\n\t// dial.interaction.mode = 'relative'\n\t// dial.interaction.direction = 'radial'\n\t\n\ton click:\n\tdial.interaction.anchor = this.mouse;\n\t\n\ton move:\n\tdial.interaction.update(this.mouse);\n\t\n\tconsole.log( dial.interaction.value ); should be a normalized value.\n\t\n\t*/\n\t\n\t/*\n\t  absolute/relative are property: mode\n\t  radial/vertical/horizontal/2d are property: direction\n\t\n\t  plan :\n\t\n\t  if relative --\n\t  NO on click, get value offset between current value and click value.\n\t  NO on move, use click value - offset\n\t  INSTEAD\n\t  use delta -- bc vertical motion on dial is impossible otherwise\n\t  also allow to set sensitivity\n\t\n\t*/\n\t\n\tvar Handle = exports.Handle = (function () {\n\t  function Handle() {\n\t    var mode = arguments[0] === undefined ? \"absolute\" : arguments[0];\n\t    var direction = arguments[1] === undefined ? \"vertical\" : arguments[1];\n\t    var xbound = arguments[2] === undefined ? [0, 100] : arguments[2];\n\t    var ybound = arguments[3] === undefined ? [0, 100] : arguments[3];\n\t\n\t    _classCallCheck(this, Handle);\n\t\n\t    this.mode = mode;\n\t    this.direction = direction;\n\t    this.previous = 0;\n\t    this.value = 0;\n\t    this.sensitivity = 1;\n\t    this.resize(xbound, ybound);\n\t  }\n\t\n\t  _createClass(Handle, {\n\t    resize: {\n\t      value: function resize(xbound, ybound) {\n\t        this.boundary = {\n\t          min: {\n\t            x: xbound[0],\n\t            y: ybound[0]\n\t          },\n\t          max: {\n\t            x: xbound[1],\n\t            y: ybound[1]\n\t          },\n\t          center: {\n\t            x: (xbound[1] - xbound[0]) / 2 + xbound[0],\n\t            y: (ybound[1] - ybound[0]) / 2 + ybound[0]\n\t          }\n\t        };\n\t      }\n\t    },\n\t    anchor: {\n\t      set: function (mouse) {\n\t        this._anchor = this.convertPositionToValue(mouse);\n\t      },\n\t      get: function () {\n\t        return this._anchor;\n\t      }\n\t    },\n\t    update: {\n\t      value: function update(mouse) {\n\t        if (this.mode === \"relative\") {\n\t          var increment = this.convertPositionToValue(mouse) - this.anchor;\n\t          if (Math.abs(increment) > 0.5) {\n\t            increment = 0;\n\t          }\n\t          this.anchor = mouse;\n\t          this.value = this.value + increment * this.sensitivity;\n\t        } else {\n\t          this.value = this.convertPositionToValue(mouse);\n\t        }\n\t        this.value = math.clip(this.value, 0, 1);\n\t      }\n\t    },\n\t    convertPositionToValue: {\n\t      value: function convertPositionToValue(current) {\n\t        switch (this.direction) {\n\t          case \"radial\":\n\t            var position = math.toPolar(current.x - this.boundary.center.x, current.y - this.boundary.center.y);\n\t            position = position.angle / (Math.PI * 2);\n\t            position = (position - 0.25 + 1) % 1;\n\t            return position;\n\t          case \"vertical\":\n\t            return math.scale(current.y, this.boundary.min.y, this.boundary.max.y, 0, 1);\n\t          case \"horizontal\":\n\t            return math.scale(current.x, this.boundary.min.x, this.boundary.max.x, 0, 1);\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return Handle;\n\t})();\n\t\n\tvar Button = exports.Button = (function () {\n\t  function Button() {\n\t    var mode = arguments[0] === undefined ? \"button\" : arguments[0];\n\t\n\t    _classCallCheck(this, Button);\n\t\n\t    this.mode = mode;\n\t    this.state = new ToggleModel();\n\t    this.paintbrush = false;\n\t  }\n\t\n\t  _createClass(Button, {\n\t    click: {\n\t      value: function click() {\n\t        switch (this.mode) {\n\t          case \"impulse\":\n\t            this.state.on();\n\t            if (this.timeout) {\n\t              clearTimeout(this.timeout);\n\t            }\n\t            this.timeout = setTimeout(this.state.off.bind(this), 30);\n\t            this.emit(\"change\", this.state);\n\t            break;\n\t          case \"button\":\n\t            this.turnOn();\n\t            this.emit(\"change\", this.state);\n\t            break;\n\t          case \"aftertouch\":\n\t            this.position = {\n\t              x: math.clip(this.mouse.x / this.width, 0, 1),\n\t              y: math.clip(1 - this.mouse.y / this.height, 0, 1)\n\t            };\n\t            this.turnOn();\n\t            this.emit(\"change\", {\n\t              state: this.state,\n\t              x: this.position.x,\n\t              y: this.position.y });\n\t            break;\n\t          case \"toggle\":\n\t            this.flip();\n\t            this.emit(\"change\", this.state);\n\t            break;\n\t        }\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.mode === \"aftertouch\") {\n\t          this.position = {\n\t            x: math.clip(this.mouse.x / this.width, 0, 1),\n\t            y: math.clip(1 - this.mouse.y / this.height, 0, 1)\n\t          };\n\t          this.emit(\"change\", {\n\t            state: this.state,\n\t            x: this.position.x,\n\t            y: this.position.y });\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        switch (this.mode) {\n\t          case \"button\":\n\t            this.turnOff();\n\t            this.emit(\"change\", this.state);\n\t            break;\n\t          case \"aftertouch\":\n\t            this.turnOff();\n\t            this.position = {\n\t              x: this.mouse.x / this.width,\n\t              y: 1 - this.mouse.y / this.height\n\t            };\n\t            this.emit(\"change\", {\n\t              state: this.state,\n\t              x: this.position.x,\n\t              y: this.position.y });\n\t            break;\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return Button;\n\t})();\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar Toggle = (function () {\n\t  function Toggle(state) {\n\t    _classCallCheck(this, Toggle);\n\t\n\t    this.state = state || false;\n\t  }\n\t\n\t  _createClass(Toggle, {\n\t    flip: {\n\t      value: function flip(state) {\n\t        if (state || state === false) {\n\t          this.state = state;\n\t        } else {\n\t          this.state = !this.state;\n\t        }\n\t      }\n\t    },\n\t    on: {\n\t      value: function on() {\n\t        this.state = true;\n\t      }\n\t    },\n\t    off: {\n\t      value: function off() {\n\t        this.state = false;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Toggle;\n\t})();\n\t\n\tmodule.exports = Toggle;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\t\n\tvar Interaction = _interopRequireWildcard(__webpack_require__(12));\n\t\n\t/**\n\t* Slider\n\t*\n\t* @description Horizontal or vertical slider with settable interaction modes.\n\t*\n\t* @demo <span nexus-ui=\"slider\" step=0.2></span>\n\t*\n\t* @example\n\t* var slider = new Nexus.Slider('#target')\n\t*\n\t* @example\n\t* var slider = new Nexus.Slider('#target',{\n\t*     'size': [120,20],\n\t*     'mode': 'relative',  // 'relative' or 'absolute'\n\t*     'min': 0,\n\t*     'max': 1,\n\t*     'step': 0,\n\t*     'value': 0\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires when the interface's value changes. <br>\n\t* Event data: <i>number</i> The number value of the interface.\n\t*\n\t* @outputexample\n\t* slider.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Slider = (function (_Interface) {\n\t  function Slider() {\n\t    _classCallCheck(this, Slider);\n\t\n\t    var options = [\"min\", \"max\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [120, 20],\n\t      mode: \"relative\", // 'relative' or 'absolute'\n\t      min: 0,\n\t      max: 1,\n\t      step: 0,\n\t      value: 0\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Slider.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.orientation = \"vertical\"; // This will change automatically to 'horizontal'if the interface is wider than it is tall.\n\t\n\t    this._value = new Step(this.settings.min, this.settings.max, this.settings.step, this.settings.value);\n\t\n\t    this.position = new Interaction.Handle(this.settings.mode, this.orientation, [0, this.width], [this.height, 0]);\n\t    this.position.value = this._value.normalized;\n\t\n\t    this.init();\n\t\n\t    this.position.direction = this.orientation;\n\t\n\t    this.emit(\"change\", this.value);\n\t  }\n\t\n\t  _inherits(Slider, _Interface);\n\t\n\t  _createClass(Slider, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.bar = svg.create(\"rect\");\n\t        this.fillbar = svg.create(\"rect\");\n\t        this.knob = svg.create(\"circle\");\n\t\n\t        this.element.appendChild(this.bar);\n\t        this.element.appendChild(this.fillbar);\n\t        this.element.appendChild(this.knob);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        if (this.width < this.height) {\n\t          this.orientation = \"vertical\";\n\t        } else {\n\t          this.orientation = \"horizontal\";\n\t        }\n\t\n\t        if (this.position) {\n\t          this.position.resize([0, this.width], [this.height, 0]);\n\t        }\n\t\n\t        var x = undefined,\n\t            y = undefined,\n\t            w = undefined,\n\t            h = undefined,\n\t            barOffset = undefined,\n\t            cornerRadius = undefined;\n\t        this.knobData = {\n\t          level: 0,\n\t          r: 0\n\t        };\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.thickness = this.width / 2;\n\t          x = this.width / 2;\n\t          y = 0;\n\t          w = this.thickness;\n\t          h = this.height;\n\t          this.knobData.r = this.thickness * 0.8;\n\t          this.knobData.level = h - this.knobData.r - this.normalized * (h - this.knobData.r * 2);\n\t          barOffset = \"translate(\" + this.thickness * -1 / 2 + \",0)\";\n\t          cornerRadius = w / 2;\n\t        } else {\n\t          this.thickness = this.height / 2;\n\t          x = 0;\n\t          y = this.height / 2;\n\t          w = this.width;\n\t          h = this.thickness;\n\t          this.knobData.r = this.thickness * 0.8;\n\t          this.knobData.level = this.normalized * (w - this.knobData.r * 2) + this.knobData.r;\n\t          barOffset = \"translate(0,\" + this.thickness * -1 / 2 + \")\";\n\t          cornerRadius = h / 2;\n\t        }\n\t\n\t        this.bar.setAttribute(\"x\", x);\n\t        this.bar.setAttribute(\"y\", y);\n\t        this.bar.setAttribute(\"transform\", barOffset);\n\t        this.bar.setAttribute(\"rx\", cornerRadius); // corner radius\n\t        this.bar.setAttribute(\"ry\", cornerRadius);\n\t        this.bar.setAttribute(\"width\", w);\n\t        this.bar.setAttribute(\"height\", h);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.fillbar.setAttribute(\"x\", x);\n\t          this.fillbar.setAttribute(\"y\", this.knobData.level);\n\t          this.fillbar.setAttribute(\"width\", w);\n\t          this.fillbar.setAttribute(\"height\", h - this.knobData.level);\n\t        } else {\n\t          this.fillbar.setAttribute(\"x\", 0);\n\t          this.fillbar.setAttribute(\"y\", y);\n\t          this.fillbar.setAttribute(\"width\", this.knobData.level);\n\t          this.fillbar.setAttribute(\"height\", h);\n\t        }\n\t        this.fillbar.setAttribute(\"transform\", barOffset);\n\t        this.fillbar.setAttribute(\"rx\", cornerRadius);\n\t        this.fillbar.setAttribute(\"ry\", cornerRadius);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.knob.setAttribute(\"cx\", x);\n\t          this.knob.setAttribute(\"cy\", this.knobData.level);\n\t        } else {\n\t          this.knob.setAttribute(\"cx\", this.knobData.level);\n\t          this.knob.setAttribute(\"cy\", y);\n\t        }\n\t        this.knob.setAttribute(\"r\", this.knobData.r);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.bar.setAttribute(\"fill\", this.colors.fill);\n\t        this.fillbar.setAttribute(\"fill\", this.colors.accent);\n\t        this.knob.setAttribute(\"fill\", this.colors.accent);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.clicked) {\n\t          this.knobData.r = this.thickness * 0.75;\n\t        }\n\t        this.knob.setAttribute(\"r\", this.knobData.r);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.knobData.level = this.knobData.r + this._value.normalized * (this.height - this.knobData.r * 2);\n\t          this.knob.setAttribute(\"cy\", this.height - this.knobData.level);\n\t          this.fillbar.setAttribute(\"y\", this.height - this.knobData.level);\n\t          this.fillbar.setAttribute(\"height\", this.knobData.level);\n\t        } else {\n\t          this.knobData.level = this._value.normalized * (this.width - this.knobData.r * 2) + this.knobData.r;\n\t          this.knob.setAttribute(\"cx\", this.knobData.level);\n\t          this.fillbar.setAttribute(\"x\", 0);\n\t          this.fillbar.setAttribute(\"width\", this.knobData.level);\n\t        }\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.knobData.r = this.thickness * 0.9;\n\t        this.position.anchor = this.mouse;\n\t        this.move();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.clicked) {\n\t          this.position.update(this.mouse);\n\t          this._value.updateNormal(this.position.value);\n\t          this.emit(\"change\", this._value.value);\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        this.render();\n\t      }\n\t    },\n\t    normalized: {\n\t      get: function () {\n\t        return this._value.normalized;\n\t      }\n\t    },\n\t    value: {\n\t\n\t      /**\n\t      The slider's current value. If set manually, will update the interface and trigger the output event.\n\t      @type {number}\n\t      @example slider.value = 10;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.value;\n\t      },\n\t      set: function (v) {\n\t        this._value.update(v);\n\t        this.position.value = this._value.normalized;\n\t        this.emit(\"change\", this._value.value);\n\t        this.render();\n\t      }\n\t    },\n\t    min: {\n\t\n\t      /**\n\t      Lower limit of the sliders's output range\n\t      @type {number}\n\t      @example slider.min = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.min;\n\t      },\n\t      set: function (v) {\n\t        this._value.min = v;\n\t      }\n\t    },\n\t    max: {\n\t\n\t      /**\n\t      Upper limit of the slider's output range\n\t      @type {number}\n\t      @example slider.max = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.max;\n\t      },\n\t      set: function (v) {\n\t        this._value.max = v;\n\t      }\n\t    },\n\t    step: {\n\t\n\t      /**\n\t      The increment that the slider's value changes by.\n\t      @type {number}\n\t      @example slider.step = 5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.step;\n\t      },\n\t      set: function (v) {\n\t        this._value.step = v;\n\t      }\n\t    },\n\t    mode: {\n\t\n\t      /**\n\t      Absolute mode (slider's value jumps to mouse click position) or relative mode (mouse drag changes value relative to its current position). Default: \"relative\".\n\t      @type {string}\n\t      @example slider.mode = \"relative\";\n\t      */\n\t\n\t      get: function () {\n\t        return this.position.mode;\n\t      },\n\t      set: function (v) {\n\t        this.position.mode = v;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Slider;\n\t})(Interface);\n\t\n\tmodule.exports = Slider;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar ToggleModel = __webpack_require__(13);\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\t* Toggle\n\t*\n\t* @description Binary switch\n\t*\n\t* @demo <span nexus-ui=\"toggle\"></span>\n\t*\n\t* @example\n\t* var toggle = new Nexus.Toggle('#target')\n\t*\n\t* @example\n\t* var toggle = new Nexus.Toggle('#target',{\n\t*     'size': [40,20],\n\t*     'state': false\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* Parameter: The boolean state of the interface.\n\t*\n\t* @outputexample\n\t* toggle.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Toggle = (function (_Interface) {\n\t  function Toggle() {\n\t    _classCallCheck(this, Toggle);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [40, 20],\n\t      target: false,\n\t      state: false\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Toggle.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._state = new ToggleModel(this.settings.state);\n\t\n\t    this.init();\n\t  }\n\t\n\t  _inherits(Toggle, _Interface);\n\t\n\t  _createClass(Toggle, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.bar = svg.create(\"rect\");\n\t        this.knob = svg.create(\"circle\");\n\t        this.element.appendChild(this.bar);\n\t        this.element.appendChild(this.knob);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        if (this.height < this.width / 2) {\n\t          this.knobSize = this.height / 2;\n\t        } else {\n\t          this.knobSize = this.width / 4;\n\t        }\n\t\n\t        this.bar.setAttribute(\"x\", this.width / 2 - this.knobSize * 1.5);\n\t        this.bar.setAttribute(\"y\", this.height / 2 - this.knobSize / 2);\n\t        this.bar.setAttribute(\"rx\", this.knobSize / 2);\n\t        this.bar.setAttribute(\"ry\", this.knobSize / 2);\n\t        this.bar.setAttribute(\"width\", this.knobSize * 3);\n\t        this.bar.setAttribute(\"height\", this.knobSize);\n\t\n\t        this.knob.setAttribute(\"cx\", this.width / 2 - this.knobSize);\n\t        this.knob.setAttribute(\"cy\", this.height / 2);\n\t        this.knob.setAttribute(\"r\", this.knobSize);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.knob.setAttribute(\"fill\", this.colors.accent);\n\t        this.render();\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.state) {\n\t          this.knob.setAttribute(\"cx\", this.width / 2 - this.knobSize);\n\t          this.bar.setAttribute(\"fill\", this.colors.fill);\n\t        } else {\n\t          this.knob.setAttribute(\"cx\", this.width / 2 + this.knobSize);\n\t          this.bar.setAttribute(\"fill\", this.colors.accent);\n\t        }\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.flip();\n\t        this.render();\n\t        this.emit(\"change\", this.state);\n\t      }\n\t    },\n\t    state: {\n\t\n\t      /**\n\t      Whether the toggle is currently on or off. Setting this property will update the toggle interface and trigger the output event.\n\t      @type {boolean}\n\t      @example toggle.state = false;\n\t      */\n\t\n\t      get: function () {\n\t        return this._state.state;\n\t      },\n\t      set: function (value) {\n\t        this._state.flip(value);\n\t        this.emit(\"change\", this.state);\n\t        this.render();\n\t      }\n\t    },\n\t    flip: {\n\t\n\t      /**\n\t      * Switch the toggle state to its opposite state\n\t      * @example\n\t      * toggle.flip();\n\t      */\n\t\n\t      value: function flip() {\n\t        this._state.flip();\n\t        this.render();\n\t      }\n\t    }\n\t  });\n\t\n\t  return Toggle;\n\t})(Interface);\n\t\n\tmodule.exports = Toggle;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar ButtonTemplate = __webpack_require__(17);\n\t\n\t/**\n\t* Button\n\t*\n\t* @description Circular button with optional aftertouch.\n\t*\n\t* @demo <span nexus-ui=\"button\"></span>\n\t*\n\t* @example\n\t* var button = new Nexus.Button('#target')\n\t*\n\t* @example\n\t* var button = new Nexus.Button('#target',{\n\t*   'size': [80,80],\n\t*   'mode': 'aftertouch',\n\t*   'state': false\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* In <b>button mode</b>, <b>toggle mode</b>, and <b>impulse mode</b>, the output data is a boolean describing the state of the button.<br>\n\t* In <b>aftertouch mode</b>, the output data is an object containing x (0-1) and y (0-1) positions of aftertouch.\n\t*\n\t* @outputexample\n\t* button.on('change',function(v) {\n\t*   // v is the value of the button\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\tvar Button = (function (_ButtonTemplate) {\n\t  function Button() {\n\t    _classCallCheck(this, Button);\n\t\n\t    var options = [\"mode\"];\n\t\n\t    var defaults = {\n\t      size: [80, 80],\n\t      mode: \"aftertouch\", // button, aftertouch, impulse, toggle\n\t      state: false\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Button.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    /**\n\t    Interaction mode\n\t    @type {string}\n\t    @example button.mode = 'toggle';\n\t    */\n\t    this.mode = this.settings.mode;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Button, _ButtonTemplate);\n\t\n\t  _createClass(Button, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t        this.pad = svg.create(\"circle\");\n\t        this.element.appendChild(this.pad);\n\t\n\t        this.interactionTarget = this.pad;\n\t\n\t        // only used if in 'aftertouch' mode\n\t        this.defs = svg.create(\"defs\");\n\t        this.element.appendChild(this.defs);\n\t\n\t        this.gradient = svg.radialGradient(this.defs, 2);\n\t\n\t        this.gradient.stops[0].setAttribute(\"offset\", \"30%\");\n\t\n\t        this.gradient.stops[1].setAttribute(\"offset\", \"100%\");\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        this.pad.setAttribute(\"cx\", this.width / 2);\n\t        this.pad.setAttribute(\"cy\", this.height / 2);\n\t        this.pad.setAttribute(\"r\", Math.min(this.width, this.height) / 2 - this.width / 40);\n\t        this.pad.setAttribute(\"stroke-width\", this.width / 20);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t\n\t        this.gradient.stops[0].setAttribute(\"stop-color\", this.colors.accent);\n\t        this.gradient.stops[1].setAttribute(\"stop-color\", this.colors.fill);\n\t        this.render();\n\t      }\n\t    },\n\t    render: {\n\t\n\t      /*\n\t      * Update the visual interface using its current state\n\t      *\n\t      * @example\n\t      * button.render();\n\t      */\n\t\n\t      value: function render() {\n\t        if (!this.state) {\n\t          this.pad.setAttribute(\"fill\", this.colors.fill);\n\t          this.pad.setAttribute(\"stroke\", this.colors.mediumLight);\n\t        } else {\n\t          if (this.mode === \"aftertouch\") {\n\t            this.pad.setAttribute(\"stroke\", \"url(#\" + this.gradient.id + \")\");\n\t            this.gradient.element.setAttribute(\"cx\", this.position.x * 100 + \"%\");\n\t            this.gradient.element.setAttribute(\"cy\", (1 - this.position.y) * 100 + \"%\");\n\t          } else {\n\t            this.pad.setAttribute(\"stroke\", this.colors.accent);\n\t          }\n\t          this.pad.setAttribute(\"fill\", this.colors.accent);\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return Button;\n\t})(ButtonTemplate);\n\t\n\tmodule.exports = Button;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar math = __webpack_require__(5);\n\tvar ToggleModel = __webpack_require__(13);\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\tButton Template\n\t*/\n\t\n\tvar ButtonTemplate = (function (_Interface) {\n\t  function ButtonTemplate(args, options, defaults) {\n\t    _classCallCheck(this, ButtonTemplate);\n\t\n\t    _get(Object.getPrototypeOf(ButtonTemplate.prototype), \"constructor\", this).call(this, args, options, defaults);\n\t\n\t    this.mode = this.settings.mode || \"button\";\n\t\n\t    this.position = {\n\t      x: 0,\n\t      y: 0\n\t    };\n\t\n\t    this._state = new ToggleModel(this.settings.state);\n\t  }\n\t\n\t  _inherits(ButtonTemplate, _Interface);\n\t\n\t  _createClass(ButtonTemplate, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t        this.pad = svg.create(\"circle\");\n\t        this.pad.setAttribute(\"fill\", \"#d18\");\n\t        this.pad.setAttribute(\"stroke\", \"#d18\");\n\t        this.pad.setAttribute(\"stroke-width\", 4);\n\t\n\t        this.element.appendChild(this.pad);\n\t\n\t        this.interactionTarget = this.pad;\n\t\n\t        this.sizeInterface();\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t        this.pad.setAttribute(\"cx\", this.width / 2);\n\t        this.pad.setAttribute(\"cy\", this.height / 2);\n\t        this.pad.setAttribute(\"r\", Math.min(this.width, this.height) / 2 - 2);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.state) {\n\t          this.pad.setAttribute(\"fill\", this.colors.fill);\n\t          this.pad.setAttribute(\"stroke\", this.colors.mediumLight);\n\t        } else {\n\t          this.pad.setAttribute(\"fill\", this.colors.accent);\n\t          this.pad.setAttribute(\"stroke\", this.colors.accent);\n\t        }\n\t      }\n\t    },\n\t    down: {\n\t      value: function down(paintbrush) {\n\t        switch (this.mode) {\n\t          case \"impulse\":\n\t            this.turnOn();\n\t            if (this.timeout) {\n\t              clearTimeout(this.timeout);\n\t            }\n\t            this.timeout = setTimeout(this.turnOff.bind(this), 30);\n\t            //    this.emit('change',this.state);\n\t            break;\n\t          case \"button\":\n\t            this.turnOn();\n\t            //    this.emit('change',this.state);\n\t            break;\n\t          case \"aftertouch\":\n\t            this.position = {\n\t              x: math.clip(this.mouse.x / this.width, 0, 1),\n\t              y: math.clip(1 - this.mouse.y / this.height, 0, 1)\n\t            };\n\t            this.turnOn();\n\t            //    this.emit('change',{\n\t            //      state: this.state,\n\t            //      x: this.position.x,\n\t            //      y: this.position.y,\n\t            //    });\n\t            break;\n\t          case \"toggle\":\n\t            this.flip(paintbrush);\n\t            //    this.emit('change',this.state);\n\t            break;\n\t        }\n\t      }\n\t    },\n\t    bend: {\n\t      value: function bend(mouse) {\n\t        if (this.mode === \"aftertouch\") {\n\t          this.mouse = mouse || this.mouse;\n\t          this.position = {\n\t            x: math.clip(this.mouse.x / this.width, 0, 1),\n\t            y: math.clip(1 - this.mouse.y / this.height, 0, 1)\n\t          };\n\t          this.emit(\"change\", {\n\t            state: this.state,\n\t            x: this.position.x,\n\t            y: this.position.y });\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    up: {\n\t      value: function up() {\n\t        switch (this.mode) {\n\t          case \"button\":\n\t            this.turnOff();\n\t            //  this.emit('change',this.state);\n\t            break;\n\t          case \"aftertouch\":\n\t            this.turnOff();\n\t            this.position = {\n\t              x: math.clip(this.mouse.x / this.width, 0, 1),\n\t              y: math.clip(1 - this.mouse.y / this.height, 0, 1)\n\t            };\n\t            //  this.emit('change',{\n\t            //    state: this.state,\n\t            //    x: this.position.x,\n\t            //    y: this.position.y,\n\t            //  });\n\t            break;\n\t        }\n\t      }\n\t    },\n\t    click: {\n\t\n\t      /* overwritable interaction handlers */\n\t\n\t      value: function click() {\n\t        this.down();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        this.bend();\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        this.up();\n\t      }\n\t    },\n\t    state: {\n\t\n\t      /**\n\t      Whether the button is on (pressed) or off (not pressed)\n\t      @type {boolean}\n\t      @example button.state = true;\n\t      */\n\t\n\t      get: function () {\n\t        return this._state.state;\n\t      },\n\t      set: function (value) {\n\t        this._state.flip(value);\n\t        if (this.mode === \"aftertouch\") {\n\t          this.emit(\"change\", {\n\t            state: this.state,\n\t            x: this.position.x,\n\t            y: this.position.y });\n\t        } else {\n\t          this.emit(\"change\", this.state);\n\t        }\n\t        this.render();\n\t      }\n\t    },\n\t    flip: {\n\t\n\t      /**\n\t      Change the button to its alternate state (off=>on, on=>off), or flip it to a specified state.\n\t      @param value {boolean} (Optional) State to flip to.\n\t      @example button.flip();\n\t      */\n\t\n\t      value: function flip(value) {\n\t        this._state.flip(value);\n\t        if (this.mode === \"aftertouch\") {\n\t          this.emit(\"change\", {\n\t            state: this.state,\n\t            x: this.position.x,\n\t            y: this.position.y });\n\t        } else {\n\t          this.emit(\"change\", this.state);\n\t        }\n\t        this.render();\n\t      }\n\t    },\n\t    turnOn: {\n\t\n\t      /**\n\t      Turn the button's state to true.\n\t      @example button.turnOn();\n\t      */\n\t\n\t      value: function turnOn(emitting) {\n\t        this._state.on();\n\t        if (emitting !== false) {\n\t          if (this.mode === \"aftertouch\") {\n\t            this.emit(\"change\", {\n\t              state: this.state,\n\t              x: this.position.x,\n\t              y: this.position.y });\n\t          } else {\n\t            this.emit(\"change\", this.state);\n\t          }\n\t        }\n\t        this.render();\n\t      }\n\t    },\n\t    turnOff: {\n\t\n\t      /**\n\t      Turn the button's state to false.\n\t      @example button.turnOff();\n\t      */\n\t\n\t      value: function turnOff(emitting) {\n\t        this._state.off();\n\t        if (emitting !== false) {\n\t          if (this.mode === \"aftertouch\") {\n\t            this.emit(\"change\", {\n\t              state: this.state,\n\t              x: this.position.x,\n\t              y: this.position.y });\n\t          } else {\n\t            this.emit(\"change\", this.state);\n\t          }\n\t        }\n\t        this.render();\n\t      }\n\t    }\n\t  });\n\t\n\t  return ButtonTemplate;\n\t})(Interface);\n\t\n\tmodule.exports = ButtonTemplate;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar ButtonTemplate = __webpack_require__(17);\n\t\n\t/**\n\t* TextButton\n\t*\n\t* @description Text button\n\t*\n\t* @demo <span nexus-ui=\"textButton\"></span>\n\t*\n\t* @example\n\t* var textbutton = new Nexus.TextButton('#target')\n\t*\n\t* @example\n\t* var textbutton = new Nexus.TextButton('#target',{\n\t*     'size': [150,50],\n\t*     'state': false,\n\t*     'text': 'Play',\n\t*     'alternate': false\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data is a <i>string</i> of the text on the button at the moment it was clicked.\n\t*\n\t* @outputexample\n\t* textbutton.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\tvar TextButton = (function (_ButtonTemplate) {\n\t  function TextButton() {\n\t    _classCallCheck(this, TextButton);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [150, 50],\n\t      state: false,\n\t      text: \"Play\",\n\t      alternate: false\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(TextButton.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._text = this.settings.text;\n\t    this._alternateText = this.settings.alternate;\n\t\n\t    this.init();\n\t    this.render();\n\t\n\t    this.state = this.settings.state;\n\t  }\n\t\n\t  _inherits(TextButton, _ButtonTemplate);\n\t\n\t  _createClass(TextButton, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t\n\t        this.element = document.createElement(\"div\");\n\t        this.parent.appendChild(this.element);\n\t\n\t        this.textElement = document.createElement(\"div\");\n\t        this.textElement.innerHTML = this._text;\n\t        this.element.appendChild(this.textElement);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {}\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.element.style.color = this.colors.dark;\n\t        this.render();\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t        var textsize = this.height / 3;\n\t        var textsize2 = this.width / (this._text.length + 2);\n\t        textsize = Math.min(textsize, textsize2);\n\t        if (this.alternateText) {\n\t          var textsize3 = this.width / (this.alternateText.length + 2);\n\t          textsize = Math.min(textsize, textsize3);\n\t        }\n\t        var styles = \"width: \" + this.width + \"px;\";\n\t        styles += \"height: \" + this.height + \"px;\";\n\t        styles += \"padding: \" + (this.height - textsize) / 2 + \"px 0px;\";\n\t        styles += \"box-sizing: border-box;\";\n\t        styles += \"text-align: center;\";\n\t        styles += \"font-family: inherit;\";\n\t        styles += \"font-weight: 700;\";\n\t        styles += \"opacity: 1;\";\n\t        styles += \"font-size:\" + textsize + \"px;\";\n\t        this.textElement.style.cssText = styles;\n\t        this.render();\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.state) {\n\t          this.element.style.backgroundColor = this.colors.fill;\n\t          this.textElement.style.color = this.colors.dark;\n\t          this.textElement.innerHTML = this._text;\n\t        } else {\n\t          this.element.style.backgroundColor = this.colors.accent;\n\t          this.textElement.style.color = this.colors.fill;\n\t          if (this.alternateText) {\n\t            this.textElement.innerHTML = this._alternateText;\n\t          } else {\n\t            this.textElement.innerHTML = this._text;\n\t          }\n\t        }\n\t      }\n\t    },\n\t    alternateText: {\n\t\n\t      /**\n\t      The text to display when the button is in its \"on\" state. If set, this puts the button in \"toggle\" mode.\n\t      @type {String}\n\t      */\n\t\n\t      get: function () {\n\t        return this._alternateText;\n\t      },\n\t      set: function (text) {\n\t        if (text) {\n\t          this.mode = \"toggle\";\n\t        } else {\n\t          this.mode = \"button\";\n\t        }\n\t        this._alternateText = text;\n\t        this.render();\n\t      }\n\t    },\n\t    text: {\n\t\n\t      /**\n\t      The text to display. (If .alternateText exists, then this .text will only be displayed when the button is in its \"off\" state.)\n\t      @type {String}\n\t      */\n\t\n\t      get: function () {\n\t        return this._text;\n\t      },\n\t      set: function (text) {\n\t        this._text = text;\n\t        this.sizeInterface();\n\t        this.render();\n\t      }\n\t    }\n\t  });\n\t\n\t  return TextButton;\n\t})(ButtonTemplate);\n\t\n\tmodule.exports = TextButton;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\t//let svg = require('../util/svg');\n\tvar Interface = __webpack_require__(6);\n\tvar Button = __webpack_require__(16);\n\t\n\t/**\n\t* RadioButton\n\t*\n\t* @description An array of buttons. By default, selecting one button will deselect all other buttons, but this can be customized using the API below.\n\t*\n\t* @demo <div nexus-ui=\"RadioButton\"></div>\n\t*\n\t* @example\n\t* var radiobutton = new Nexus.RadioButton('#target')\n\t*\n\t* @example\n\t* var radiobutton = new Nexus.RadioButton('#target',{\n\t*   'size': [120,25],\n\t*   'numberOfButtons': 4,\n\t*   'active': -1\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data an <i>integer</i>, the index of the button that is currently on. If no button is selected, the value will be -1.\n\t*\n\t* @outputexample\n\t* radiobutton.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\tvar RadioButton = (function (_Interface) {\n\t  function RadioButton() {\n\t    _classCallCheck(this, RadioButton);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [120, 25],\n\t      numberOfButtons: 4,\n\t      active: -1\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(RadioButton.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.buttons = [];\n\t    this._numberOfButtons = this.settings.numberOfButtons;\n\t    this.active = this.settings.active;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(RadioButton, _Interface);\n\t\n\t  _createClass(RadioButton, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = document.createElement(\"div\");\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        for (var i = 0; i < this._numberOfButtons; i++) {\n\t          var container = document.createElement(\"span\");\n\t\n\t          var button = new Button(container, {\n\t            mode: \"toggle\",\n\t            component: true }, this.update.bind(this, i));\n\t\n\t          this.buttons.push(button);\n\t          this.element.appendChild(container);\n\t        }\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        var buttonWidth = this.width / this._numberOfButtons;\n\t        var buttonHeight = this.height;\n\t\n\t        for (var i = 0; i < this._numberOfButtons; i++) {\n\t          this.buttons[i].resize(buttonWidth, buttonHeight);\n\t        }\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        for (var i = 0; i < this._numberOfButtons; i++) {\n\t          this.buttons[i].colors = this.colors;\n\t          this.buttons[i].render();\n\t        }\n\t      }\n\t    },\n\t    update: {\n\t      value: function update(index) {\n\t        if (this.buttons[index].state) {\n\t          this.select(index);\n\t        } else {\n\t          this.deselect();\n\t        }\n\t        //  this.render();\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        for (var i = 0; i < this.buttons.length; i++) {\n\t          if (i === this.active) {\n\t            this.buttons[i].turnOn(false);\n\t          } else {\n\t            this.buttons[i].turnOff(false);\n\t          }\n\t        }\n\t      }\n\t    },\n\t    select: {\n\t\n\t      /**\n\t      Select one button and deselect all other buttons.\n\t      @param index {number} The index of the button to select\n\t      */\n\t\n\t      value: function select(index) {\n\t        if (index >= 0 && index < this.buttons.length) {\n\t          this.active = index;\n\t          this.emit(\"change\", this.active);\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    deselect: {\n\t\n\t      /**\n\t      Deselect all buttons.\n\t      */\n\t\n\t      value: function deselect() {\n\t        this.active = -1;\n\t        this.emit(\"change\", this.active);\n\t        this.render();\n\t      }\n\t    },\n\t    numberOfButtons: {\n\t      get: function () {\n\t        return this._numberOfButtons;\n\t      },\n\t\n\t      /**\n\t       * Update how many buttons are in the interface\n\t       * @param  {number} buttons How many buttons are in the interface\n\t       */\n\t      set: function (buttons) {\n\t        this._numberOfButtons = buttons;\n\t        for (var i = 0; i < this.buttons.length; i++) {\n\t          this.buttons[i].destroy();\n\t        }\n\t        this.buttons = [];\n\t        //  for (let i=0;i<this.buttons.length;i++) {\n\t        //    this.buttons[i].destroy();\n\t        //  }\n\t        this.empty();\n\t        this.buildInterface();\n\t      }\n\t    }\n\t  });\n\t\n\t  return RadioButton;\n\t})(Interface);\n\t\n\tmodule.exports = RadioButton;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\tvar math = __webpack_require__(5);\n\t\n\t/**\n\t* Number\n\t*\n\t* @description Number interface which is controllable by dragging or typing.\n\t*\n\t* @demo <span nexus-ui=\"number\"></span>\n\t*\n\t* @example\n\t* var number = new Nexus.Number('#target')\n\t*\n\t* @example\n\t* var number = new Nexus.Number('#target',{\n\t*   'size': [60,30],\n\t*   'value': 0,\n\t*   'min': 0,\n\t*   'max': 20000,\n\t*   'step': 1\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data is the number value of the interface.\n\t*\n\t* @outputexample\n\t* number.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Number = (function (_Interface) {\n\t  function Number() {\n\t    _classCallCheck(this, Number);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [60, 30],\n\t      value: 0,\n\t      min: 0,\n\t      max: 20000,\n\t      step: 1\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Number.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._value = new Step(this.settings.min, this.settings.max, this.settings.step, this.settings.value);\n\t\n\t    /*\n\t    Default: 2. How many decimal places to clip the number's visual rendering to. This does not affect number's actual value output -- for that, set the step property to .01, .1, or 1.\n\t    @type {number}\n\t    @example number.decimalPlaces = 2;\n\t    */\n\t    this.decimalPlaces = 2;\n\t    this.actual = 0;\n\t\n\t    this.max = this._value.max;\n\t\n\t    this.min = this._value.min;\n\t\n\t    this.step = this._value.step;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Number, _Interface);\n\t\n\t  _createClass(Number, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = document.createElement(\"input\");\n\t        this.element.type = \"text\";\n\t\n\t        this.element.addEventListener(\"blur\", (function () {\n\t          this.element.style.backgroundColor = this.colors.fill;\n\t          this.element.style.color = this.colors.dark;\n\t          if (this.element.value !== this.value) {\n\t            this.value = parseFloat(this.element.value);\n\t            this.render();\n\t          }\n\t        }).bind(this));\n\t\n\t        this.element.addEventListener(\"keydown\", (function (e) {\n\t          if (e.which < 48 || e.which > 57) {\n\t            if (e.which !== 189 && e.which !== 190 && e.which !== 8) {\n\t              e.preventDefault();\n\t            }\n\t          }\n\t          if (e.which === 13) {\n\t            this.element.blur();\n\t            this.value = this.element.value;\n\t            this.emit(\"change\", this.value);\n\t            this.render();\n\t          }\n\t        }).bind(this));\n\t\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        this._minDimension = Math.min(this.width, this.height);\n\t\n\t        var styles = \"width: \" + this.width + \"px;\";\n\t        styles += \"height: \" + this.height + \"px;\";\n\t        styles += \"background-color: #e7e7e7;\";\n\t        styles += \"color: #333;\";\n\t        styles += \"font-family: arial;\";\n\t        styles += \"font-weight: 500;\";\n\t        styles += \"font-size:\" + this._minDimension / 2 + \"px;\";\n\t        //  styles += 'highlight: #d18;';\n\t        styles += \"border: none;\";\n\t        styles += \"outline: none;\";\n\t        styles += \"padding: \" + this._minDimension / 4 + \"px \" + this._minDimension / 4 + \"px;\";\n\t        styles += \"box-sizing: border-box;\";\n\t        styles += \"userSelect: text;\";\n\t        styles += \"mozUserSelect: text;\";\n\t        styles += \"webkitUserSelect: text;\";\n\t        this.element.style.cssText += styles;\n\t\n\t        // to add eventually\n\t        // var css = '#'+this.elementID+'::selection{ background-color: transparent }';\n\t\n\t        this.element.value = this.value;\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.element.style.backgroundColor = this.colors.fill;\n\t        this.element.style.color = this.colors.dark;\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t\n\t        this.element.value = math.prune(this.value, this.decimalPlaces);\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.hasMoved = false;\n\t        this.element.readOnly = true;\n\t        this.actual = this.value;\n\t        this.initial = { y: this.mouse.y };\n\t        this.changeFactor = math.invert(this.mouse.x / this.width);\n\t        console.log(this.changeFactor);\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        this.hasMoved = true;\n\t        if (this.clicked) {\n\t\n\t          var newvalue = this.actual - (this.mouse.y - this.initial.y) * (math.clip(this.max - this.min, 0, 1000) / 200) * Math.pow(this.changeFactor, 2);\n\t          this.value = newvalue;\n\t\n\t          this.render();\n\t          if (this._value.changed) {\n\t            this.emit(\"change\", this.value);\n\t          }\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        if (!this.hasMoved) {\n\t          this.element.readOnly = false;\n\t          this.element.focus();\n\t          this.element.setSelectionRange(0, this.element.value.length);\n\t          this.element.style.backgroundColor = this.colors.accent;\n\t          this.element.style.color = this.colors.light;\n\t        } else {\n\t          document.body.focus();\n\t        }\n\t      }\n\t    },\n\t    link: {\n\t\n\t      /**\n\t      Connect this number interface to a dial or slider\n\t      @param {Interface} element Element to connect to.\n\t      @example number.link(slider)\n\t      */\n\t\n\t      value: function link(destination) {\n\t        var _this = this;\n\t\n\t        this.min = destination.min;\n\t        this.max = destination.max;\n\t        this.step = destination.step;\n\t        destination.on(\"change\", function (v) {\n\t          _this.passiveUpdate(v);\n\t        });\n\t        this.on(\"change\", function (v) {\n\t          destination.value = v;\n\t        });\n\t        this.value = destination.value;\n\t        /*  return {\n\t            listener1: listener1,\n\t            listener2: listener2,\n\t            destroy: () => {\n\t              listener1.remove() (or similar)\n\t              listener2.remove() (or similar)\n\t            }\n\t          } */\n\t      }\n\t    },\n\t    passiveUpdate: {\n\t      value: function passiveUpdate(v) {\n\t        this._value.update(v);\n\t        this.render();\n\t      }\n\t    },\n\t    value: {\n\t\n\t      /**\n\t      The interface's current value. If set manually, will update the interface and trigger the output event.\n\t      @type {number}\n\t      @example number.value = 10;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.value;\n\t      },\n\t      set: function (v) {\n\t        this._value.update(v);\n\t        this.emit(\"change\", this.value);\n\t        this.render();\n\t      }\n\t    },\n\t    min: {\n\t\n\t      /**\n\t      Lower limit of the number's output range\n\t      @type {number}\n\t      @example number.min = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.min;\n\t      },\n\t      set: function (v) {\n\t        this._value.min = v;\n\t      }\n\t    },\n\t    max: {\n\t\n\t      /**\n\t      Upper limit of the number's output range\n\t      @type {number}\n\t      @example number.max = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.max;\n\t      },\n\t      set: function (v) {\n\t        this._value.max = v;\n\t      }\n\t    },\n\t    step: {\n\t\n\t      /**\n\t      The increment that the number's value changes by.\n\t      @type {number}\n\t      @example number.step = 5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.step;\n\t      },\n\t      set: function (v) {\n\t        this._value.step = v;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Number;\n\t})(Interface);\n\t\n\tmodule.exports = Number;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\t* Select\n\t*\n\t* @description Dropdown menu\n\t*\n\t* @demo <span nexus-ui=\"select\"></span>\n\t*\n\t* @example\n\t* var select = new Nexus.Select('#target')\n\t*\n\t* @example\n\t* var select = new Nexus.Select('#target',{\n\t*   'size': [100,30],\n\t*   'options': ['default','options']\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data is an object containing the text value of the selected option, as well as the numeric index of the selection.\n\t*\n\t* @outputexample\n\t* select.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Select = (function (_Interface) {\n\t  function Select() {\n\t    _classCallCheck(this, Select);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [100, 30],\n\t      options: [\"default\", \"options\"]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Select.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._selectedIndex = -1;\n\t    this._value = false;\n\t\n\t    this._options = this.settings.options;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Select, _Interface);\n\t\n\t  _createClass(Select, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = document.createElement(\"select\");\n\t        this.element.style.fontSize = this.height / 2 + \"px\";\n\t        this.element.style.outline = \"none\";\n\t        this.element.style.highlight = \"none\";\n\t        this.element.style.width = this.width + \"px\";\n\t        this.element.style.height = this.height + \"px\";\n\t\n\t        this.boundRender = this.render.bind(this);\n\t\n\t        this.element.addEventListener(\"change\", this.boundRender);\n\t\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    attachListeners: {\n\t      value: function attachListeners() {}\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.defineOptions();\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.element.style.backgroundColor = this.colors.fill;\n\t        this.element.style.color = this.colors.dark;\n\t        this.element.style.border = \"solid 0px \" + this.colors.mediumLight;\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t\n\t        this._value = this.element.options[this.element.selectedIndex].text;\n\t        this._selectedIndex = this.element.selectedIndex;\n\t        this.emit(\"change\", {\n\t          value: this._value,\n\t          index: this._selectedIndex\n\t        });\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {}\n\t    },\n\t    move: {\n\t      value: function move() {}\n\t    },\n\t    release: {\n\t      value: function release() {}\n\t    },\n\t    defineOptions: {\n\t\n\t      /**\n\t       * Update the list of options. This removes all existing options and creates a new list of options.\n\t       * @param  {array} options New array of options\n\t       */\n\t\n\t      value: function defineOptions(options) {\n\t        if (options) {\n\t          this._options = options;\n\t        }\n\t\n\t        for (var i = 0; i < this.element.options.length; i++) {\n\t          this.element.remove(i);\n\t        }\n\t\n\t        for (var i = 0; i < this._options.length; i++) {\n\t          this.element.options.add(new Option(this._options[i], i));\n\t        }\n\t      }\n\t    },\n\t    value: {\n\t\n\t      /**\n\t      The text of the option that is currently selected. If set, will update the interface and trigger the output event.\n\t      @type {String}\n\t      @example select.value = \"sawtooth\";\n\t      */\n\t\n\t      get: function () {\n\t        return this._value;\n\t      },\n\t      set: function (v) {\n\t        this._value = v;\n\t        for (var i = 0; i < this.element.options.length; i++) {\n\t          if (v === this.element.options[i].text) {\n\t            this.selectedIndex = i;\n\t            break;\n\t          }\n\t        }\n\t      }\n\t    },\n\t    selectedIndex: {\n\t\n\t      /**\n\t      The numeric index of the option that is currently selected. If set, will update the interface and trigger the output event.\n\t      @type {number}\n\t      @example select.selectedIndex = 2;\n\t      */\n\t\n\t      get: function () {\n\t        return this._selectedIndex;\n\t      },\n\t      set: function (v) {\n\t        this._selectedIndex = v;\n\t        this.element.selectedIndex = v;\n\t        this.render();\n\t      }\n\t    },\n\t    customDestroy: {\n\t      value: function customDestroy() {\n\t        this.element.removeEventListener(\"change\", this.boundRender);\n\t      }\n\t    }\n\t  });\n\t\n\t  return Select;\n\t})(Interface);\n\t\n\tmodule.exports = Select;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar math = __webpack_require__(5);\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\t\n\tvar Interaction = _interopRequireWildcard(__webpack_require__(12));\n\t\n\t/**\n\t* Dial\n\t*\n\t*\n\t* @description Dial with radial or linear interaction.\n\t*\n\t* @demo <span nexus-ui=\"dial\"></span>\n\t*\n\t* @example\n\t* var dial = new Nexus.Dial('#target')\n\t*\n\t* @example\n\t* var dial = new Nexus.Dial('#target',{\n\t*   'size': [75,75],\n\t*   'interaction': 'radial', // \"radial\", \"vertical\", or \"horizontal\"\n\t*   'mode': 'relative', // \"absolute\" or \"relative\"\n\t*   'min': 0,\n\t*   'max': 1,\n\t*   'step': 0,\n\t*   'value': 0\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data is the number value of the interface.\n\t*\n\t* @outputexample\n\t* dial.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t* @tutorial\n\t* Dial\n\t* ygGMxq\n\t*\n\t*/\n\t\n\tvar Dial = (function (_Interface) {\n\t  function Dial() {\n\t    _classCallCheck(this, Dial);\n\t\n\t    var options = [\"min\", \"max\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [75, 75],\n\t      interaction: \"radial\", // radial, vertical, horizontal\n\t      mode: \"relative\", // absolute, relative\n\t      min: 0,\n\t      max: 1,\n\t      step: 0,\n\t      value: 0\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Dial.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.interaction = this.settings.interaction;\n\t\n\t    this._value = new Step(this.settings.min, this.settings.max, this.settings.step, this.settings.value);\n\t\n\t    this.position = new Interaction.Handle(this.settings.mode, this.interaction, [0, this.width], [this.height, 0]);\n\t\n\t    this.init();\n\t\n\t    this.value = this._value.value;\n\t\n\t    this.position.value = this._value.normalized;\n\t\n\t    this.previousAngle = false;\n\t\n\t    this.emit(\"change\", this.value);\n\t  }\n\t\n\t  _inherits(Dial, _Interface);\n\t\n\t  _createClass(Dial, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.background = svg.create(\"circle\");\n\t        this.screw = svg.create(\"circle\");\n\t        this.handle = svg.create(\"path\");\n\t        this.handle2 = svg.create(\"path\");\n\t        this.handleFill = svg.create(\"path\");\n\t        this.handle2Fill = svg.create(\"path\");\n\t        this.handleLine = svg.create(\"path\");\n\t\n\t        this.element.appendChild(this.background);\n\t        this.element.appendChild(this.handle);\n\t        this.element.appendChild(this.handle2);\n\t        this.element.appendChild(this.handleFill);\n\t        this.element.appendChild(this.handle2Fill);\n\t        this.element.appendChild(this.handleLine);\n\t        this.element.appendChild(this.screw);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        this.position.resize([0, this.width], [this.height, 0]);\n\t\n\t        var center = {\n\t          x: this.width / 2,\n\t          y: this.height / 2\n\t        };\n\t\n\t        var diameter = Math.min(this.width, this.height);\n\t\n\t        this.background.setAttribute(\"cx\", center.x);\n\t        this.background.setAttribute(\"cy\", center.y);\n\t        this.background.setAttribute(\"r\", diameter / 2 - diameter / 40);\n\t\n\t        this.screw.setAttribute(\"cx\", center.x);\n\t        this.screw.setAttribute(\"cy\", center.y);\n\t        this.screw.setAttribute(\"r\", diameter / 12);\n\t\n\t        var value = this.value;\n\t\n\t        var handlePoints = {\n\t          start: Math.PI * 1.5,\n\t          end: math.clip(math.scale(value, 0, 0.5, Math.PI * 1.5, Math.PI * 0.5), Math.PI * 0.5, Math.PI * 1.5)\n\t        };\n\t        var handle2Points = {\n\t          start: Math.PI * 2.5,\n\t          end: math.clip(math.scale(value, 0.5, 1, Math.PI * 2.5, Math.PI * 1.5), Math.PI * 1.5, Math.PI * 2.5)\n\t        };\n\t\n\t        var handlePath = svg.arc(center.x, center.y, diameter / 2 - diameter / 40, handlePoints.start, handlePoints.end);\n\t        var handle2Path = svg.arc(center.x, center.y, diameter / 2 - diameter / 40, handle2Points.start, handle2Points.end);\n\t\n\t        this.handle.setAttribute(\"d\", handlePath);\n\t        this.handle.setAttribute(\"stroke-width\", diameter / 20);\n\t        this.handle.setAttribute(\"fill\", \"none\");\n\t\n\t        this.handle2.setAttribute(\"d\", handle2Path);\n\t        this.handle2.setAttribute(\"stroke-width\", diameter / 20);\n\t        this.handle2.setAttribute(\"fill\", \"none\");\n\t\n\t        handlePath += \" L \" + center.x + \" \" + center.y;\n\t\n\t        this.handleFill.setAttribute(\"d\", handlePath);\n\t        this.handleFill.setAttribute(\"fill-opacity\", \"0.3\");\n\t\n\t        handle2Path += \" L \" + center.x + \" \" + center.y;\n\t\n\t        this.handle2Fill.setAttribute(\"d\", handle2Path);\n\t        this.handle2Fill.setAttribute(\"fill-opacity\", \"0.3\");\n\t\n\t        var arcEndingA = undefined;\n\t        if (value < 0.5) {\n\t          arcEndingA = handlePoints.end;\n\t        } else {\n\t          arcEndingA = handle2Points.end;\n\t        }\n\t\n\t        var arcEndingX = center.x + Math.cos(arcEndingA) * (diameter / 2);\n\t        var arcEndingY = center.y + Math.sin(arcEndingA) * (diameter / 2) * -1;\n\t\n\t        this.handleLine.setAttribute(\"d\", \"M \" + center.x + \" \" + center.y + \" L \" + arcEndingX + \" \" + arcEndingY);\n\t        this.handleLine.setAttribute(\"stroke-width\", diameter / 20);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.background.setAttribute(\"fill\", this.colors.fill);\n\t        this.screw.setAttribute(\"fill\", this.colors.accent);\n\t        this.handle.setAttribute(\"stroke\", this.colors.accent);\n\t        this.handle2.setAttribute(\"stroke\", this.colors.accent);\n\t        this.handleFill.setAttribute(\"fill\", this.colors.accent);\n\t        this.handle2Fill.setAttribute(\"fill\", this.colors.accent);\n\t        this.handleLine.setAttribute(\"stroke\", this.colors.accent);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        var value = this._value.normalized;\n\t\n\t        var center = {\n\t          x: this.width / 2,\n\t          y: this.height / 2\n\t        };\n\t\n\t        var diameter = Math.min(this.width, this.height);\n\t\n\t        var handlePoints = {\n\t          start: Math.PI * 1.5,\n\t          end: math.clip(math.scale(value, 0, 0.5, Math.PI * 1.5, Math.PI * 0.5), Math.PI * 0.5, Math.PI * 1.5)\n\t        };\n\t        var handle2Points = {\n\t          start: Math.PI * 2.5,\n\t          end: math.clip(math.scale(value, 0.5, 1, Math.PI * 2.5, Math.PI * 1.5), Math.PI * 1.5, Math.PI * 2.5)\n\t        };\n\t\n\t        var handlePath = svg.arc(center.x, center.y, diameter / 2 - diameter / 40, handlePoints.start, handlePoints.end);\n\t        var handle2Path = svg.arc(center.x, center.y, diameter / 2 - diameter / 40, handle2Points.start, handle2Points.end);\n\t\n\t        this.handle.setAttribute(\"d\", handlePath);\n\t        this.handle2.setAttribute(\"d\", handle2Path);\n\t\n\t        handlePath += \" L \" + center.x + \" \" + center.y;\n\t\n\t        this.handleFill.setAttribute(\"d\", handlePath);\n\t\n\t        handle2Path += \" L \" + center.x + \" \" + center.y;\n\t\n\t        this.handle2Fill.setAttribute(\"d\", handle2Path);\n\t\n\t        var arcEndingA = undefined;\n\t        if (value <= 0.5) {\n\t          arcEndingA = handlePoints.end;\n\t        } else {\n\t          arcEndingA = handle2Points.end;\n\t        }\n\t\n\t        var arcEndingX = center.x + Math.cos(arcEndingA) * (diameter / 2);\n\t        var arcEndingY = center.y + Math.sin(arcEndingA) * (diameter / 2) * -1;\n\t\n\t        this.handleLine.setAttribute(\"d\", \"M \" + center.x + \" \" + center.y + \" L \" + arcEndingX + \" \" + arcEndingY);\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        if (this.mode === \"relative\") {\n\t          this.previousAngle = false;\n\t        }\n\t        this.position.anchor = this.mouse;\n\t        this.position.value = this._value.normalized;\n\t        this.move();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.clicked) {\n\t\n\t          this.position.update(this.mouse);\n\t\n\t          var angle = this.position.value * Math.PI * 2;\n\t\n\t          if (angle < 0) {\n\t            angle += Math.PI * 2;\n\t          }\n\t\n\t          if (this.mode === \"relative\") {\n\t            if (this.previousAngle !== false && Math.abs(this.previousAngle - angle) > 2) {\n\t              if (this.previousAngle > 3) {\n\t                angle = Math.PI * 2;\n\t              } else {\n\t                angle = 0;\n\t              }\n\t            }\n\t          } /* else {\n\t            if (this.previousAngle !== false && Math.abs(this.previousAngle - angle) > 2) {\n\t              if (this.previousAngle > 3) {\n\t                angle = Math.PI*2;\n\t              } else {\n\t                angle = 0;\n\t              }\n\t            }\n\t            } */\n\t          this.previousAngle = angle;\n\t\n\t          var realValue = angle / (Math.PI * 2);\n\t\n\t          this.value = this._value.updateNormal(realValue);\n\t\n\t          if (this.mode === \"relative\") {\n\t            this.position.value = realValue;\n\t          }\n\t\n\t          this.emit(\"change\", this._value.value);\n\t\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {}\n\t    },\n\t    value: {\n\t\n\t      /*\n\t      Dial's value. When set, it will automatically be adjust to fit min/max/step settings of the interface.\n\t      @type {number}\n\t      @example dial.value = 10;\n\t       get value() {\n\t        return this._value.value;\n\t      }\n\t       set value(value) {\n\t        this._value.update(value);\n\t        this.emit('change',this.value);\n\t        this.render();\n\t      }\n\t      */\n\t\n\t      /**\n\t      Dial's value. When set, it will automatically be adjust to fit min/max/step settings of the interface.\n\t      @type {number}\n\t      @example dial.value = 10;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.value;\n\t      },\n\t      set: function (v) {\n\t        this._value.update(v);\n\t        this.position.value = this._value.normalized;\n\t        this.emit(\"change\", this._value.value);\n\t        this.render();\n\t      }\n\t    },\n\t    min: {\n\t\n\t      /**\n\t      Lower limit of the dial's output range\n\t      @type {number}\n\t      @example dial.min = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.min;\n\t      },\n\t      set: function (v) {\n\t        this._value.min = v;\n\t      }\n\t    },\n\t    max: {\n\t\n\t      /**\n\t      Upper limit of the dial's output range\n\t      @type {number}\n\t      @example dial.max = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.max;\n\t      },\n\t      set: function (v) {\n\t        this._value.max = v;\n\t      }\n\t    },\n\t    step: {\n\t\n\t      /**\n\t      The increment that the dial's value changes by.\n\t      @type {number}\n\t      @example dial.step = 5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.step;\n\t      },\n\t      set: function (v) {\n\t        this._value.step = v;\n\t      }\n\t    },\n\t    mode: {\n\t\n\t      /**\n\t      Absolute mode (dial's value jumps to mouse click position) or relative mode (mouse drag changes value relative to its current position). Default: \"relative\".\n\t      @type {string}\n\t      @example dial.mode = \"relative\";\n\t      */\n\t\n\t      get: function () {\n\t        return this.position.mode;\n\t      },\n\t      set: function (v) {\n\t        this.position.mode = v;\n\t      }\n\t    },\n\t    normalized: {\n\t\n\t      /**\n\t      Normalized value of the dial.\n\t      @type {number}\n\t      @example dial.normalized = 0.5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.normalized;\n\t      },\n\t      set: function (v) {\n\t        this._value.updateNormal(v);\n\t        this.emit(\"change\", this.value);\n\t      }\n\t    }\n\t  });\n\t\n\t  return Dial;\n\t})(Interface);\n\t\n\tmodule.exports = Dial;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar Interface = __webpack_require__(6);\n\tvar ButtonTemplate = __webpack_require__(17);\n\tvar touch = __webpack_require__(9);\n\t\n\tvar PianoKey = (function (_ButtonTemplate) {\n\t  function PianoKey() {\n\t    _classCallCheck(this, PianoKey);\n\t\n\t    var options = [\"value\", \"note\", \"color\"];\n\t\n\t    var defaults = {\n\t      size: [80, 80],\n\t      target: false,\n\t      mode: \"button\",\n\t      value: 0\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(PianoKey.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.note = this.settings.note;\n\t    this.color = this.settings.color;\n\t\n\t    this.colors = {\n\t      w: \"#fff\",\n\t      b: \"#666\" };\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(PianoKey, _ButtonTemplate);\n\t\n\t  _createClass(PianoKey, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = svg.create(\"svg\");\n\t        this.element.setAttribute(\"width\", this.width);\n\t        this.element.setAttribute(\"height\", this.height);\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t        var _this = this;\n\t\n\t        this.pad = svg.create(\"rect\");\n\t\n\t        this.element.appendChild(this.pad);\n\t\n\t        this.interactionTarget = this.pad;\n\t\n\t        /* events */\n\t\n\t        if (!touch.exists) {\n\t\n\t          this.click = function () {\n\t            //  console.log('click');\n\t            _this.piano.interacting = true;\n\t            _this.piano.paintbrush = !_this.state;\n\t            _this.down(_this.piano.paintbrush);\n\t          };\n\t\n\t          this.pad.addEventListener(\"mouseover\", function () {\n\t            if (_this.piano.interacting) {\n\t              //    console.log('mouseover');\n\t              _this.down(_this.piano.paintbrush);\n\t            }\n\t          });\n\t\n\t          this.move = function () {\n\t            if (_this.piano.interacting) {\n\t              //  console.log('move');\n\t              _this.bend();\n\t            }\n\t          };\n\t\n\t          this.release = function () {\n\t            _this.piano.interacting = false;\n\t            //  console.log('release');\n\t            //  this.up();\n\t          };\n\t          this.pad.addEventListener(\"mouseup\", function () {\n\t            if (_this.piano.interacting) {\n\t              //  console.log('mouseup');\n\t              _this.up();\n\t            }\n\t          });\n\t          this.pad.addEventListener(\"mouseout\", function () {\n\t            if (_this.piano.interacting) {\n\t              //  console.log('mouseout');\n\t              _this.up();\n\t            }\n\t          });\n\t        }\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        //let radius = Math.min(this.width,this.height) / 5;\n\t        var radius = 0;\n\t\n\t        this.pad.setAttribute(\"x\", 0.5);\n\t        this.pad.setAttribute(\"y\", 0.5);\n\t        if (this.width > 2) {\n\t          this.pad.setAttribute(\"width\", this.width - 1);\n\t        } else {\n\t          this.pad.setAttribute(\"width\", this.width);\n\t        }\n\t        if (this.height > 2) {\n\t          this.pad.setAttribute(\"height\", this.height);\n\t        } else {\n\t          this.pad.setAttribute(\"height\", this.height);\n\t        }\n\t        this.pad.setAttribute(\"rx\", radius);\n\t        this.pad.setAttribute(\"ry\", radius);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.state) {\n\t          this.pad.setAttribute(\"fill\", this.colors[this.color]);\n\t        } else {\n\t          this.pad.setAttribute(\"fill\", this.colors.accent);\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return PianoKey;\n\t})(ButtonTemplate);\n\t\n\t/**\n\t* Piano\n\t*\n\t* @description Piano keyboard interface\n\t*\n\t* @demo <div nexus-ui=\"piano\"></div>\n\t*\n\t* @example\n\t* var piano = new Nexus.Piano('#target')\n\t*\n\t* @example\n\t* var piano = new Nexus.Piano('#target',{\n\t*     'size': [500,125],\n\t*     'mode': 'button',  // 'button', 'toggle', or 'impulse'\n\t*     'lowNote': 24,\n\t*     'highNote': 60\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time a new key is pressed or released <br>\n\t* The event data is an object containing <i>note</i> and <i>state</i> properties.\n\t*\n\t* @outputexample\n\t* piano.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\tvar Piano = (function (_Interface) {\n\t  function Piano() {\n\t    _classCallCheck(this, Piano);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [500, 125],\n\t      lowNote: 24,\n\t      highNote: 60,\n\t      mode: \"button\"\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Piano.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.keyPattern = [\"w\", \"b\", \"w\", \"b\", \"w\", \"w\", \"b\", \"w\", \"b\", \"w\", \"b\", \"w\"];\n\t\n\t    this.paintbrush = false;\n\t\n\t    this.mode = this.settings.mode;\n\t\n\t    this.range = {\n\t      low: this.settings.lowNote,\n\t      high: this.settings.highNote\n\t    };\n\t\n\t    this.range.size = this.range.high - this.range.low;\n\t\n\t    this.keys = [];\n\t\n\t    this.toggleTo = false;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Piano, _Interface);\n\t\n\t  _createClass(Piano, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = document.createElement(\"div\");\n\t        this.element.style.position = \"relative\";\n\t        this.element.style.borderRadius = \"0px\";\n\t        this.element.style.display = \"block\";\n\t        this.element.style.width = \"100%\";\n\t        this.element.style.height = \"100%\";\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.keys = [];\n\t\n\t        for (var i = 0; i < this.range.high - this.range.low; i++) {\n\t\n\t          var container = document.createElement(\"span\");\n\t          var scaleIndex = (i + this.range.low) % this.keyPattern.length;\n\t\n\t          var key = new PianoKey(container, {\n\t            component: true,\n\t            note: i + this.range.low,\n\t            color: this.keyPattern[scaleIndex],\n\t            mode: this.mode\n\t          }, this.keyChange.bind(this, i + this.range.low));\n\t\n\t          key.piano = this;\n\t\n\t          if (touch.exists) {\n\t            key.pad.index = i;\n\t            key.preClick = key.preMove = key.preRelease = function () {};\n\t            key.click = key.move = key.release = function () {};\n\t            key.preTouch = key.preTouchMove = key.preTouchRelease = function () {};\n\t            key.touch = key.touchMove = key.touchRelease = function () {};\n\t          }\n\t\n\t          this.keys.push(key);\n\t          this.element.appendChild(container);\n\t        }\n\t        if (touch.exists) {\n\t          this.addTouchListeners();\n\t        }\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        var keyX = 0;\n\t\n\t        var keyPositions = [];\n\t\n\t        for (var i = 0; i < this.range.high - this.range.low; i++) {\n\t\n\t          keyPositions.push(keyX);\n\t\n\t          var scaleIndex = (i + this.range.low) % this.keyPattern.length;\n\t          var nextScaleIndex = (i + 1 + this.range.low) % this.keyPattern.length;\n\t          if (i + 1 + this.range.low >= this.range.high) {\n\t            keyX += 1;\n\t          } else if (this.keyPattern[scaleIndex] === \"w\" && this.keyPattern[nextScaleIndex] === \"w\") {\n\t            keyX += 1;\n\t          } else {\n\t            keyX += 0.5;\n\t          }\n\t        }\n\t        var keysWide = keyX;\n\t\n\t        //  let padding = this.width / 120;\n\t        var padding = 1;\n\t        var buttonWidth = (this.width - padding * 2) / keysWide;\n\t        var buttonHeight = (this.height - padding * 2) / 2;\n\t\n\t        for (var i = 0; i < this.keys.length; i++) {\n\t\n\t          var container = this.keys[i].parent;\n\t          container.style.position = \"absolute\";\n\t          container.style.left = keyPositions[i] * buttonWidth + padding + \"px\";\n\t          if (this.keys[i].color === \"w\") {\n\t            container.style.top = padding + \"px\";\n\t            this.keys[i].resize(buttonWidth, buttonHeight * 2);\n\t          } else {\n\t            container.style.zIndex = 1;\n\t            container.style.top = padding + \"px\";\n\t            this.keys[i].resize(buttonWidth, buttonHeight * 1.1);\n\t          }\n\t        }\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t\n\t        // Piano keys don't actually have a stroke border\n\t        // They have space between them, which shows the Piano bg color\n\t        this.element.style.backgroundColor = this.colors.mediumLight;\n\t\n\t        for (var i = 0; i < this.keys.length; i++) {\n\t          this.keys[i].colors = {\n\t            w: this.colors.light,\n\t            b: this.colors.dark,\n\t            accent: this.colors.accent,\n\t            border: this.colors.mediumLight\n\t          };\n\t          this.keys[i].colorInterface();\n\t          this.keys[i].render();\n\t        }\n\t      }\n\t    },\n\t    keyChange: {\n\t      value: function keyChange(note, on) {\n\t        // emit data for any key turning on/off\n\t        // \"note\" is the note value\n\t        // \"on\" is a boolean whether it is on or off\n\t        // in aftertouch mode, \"on: is an object with state/x/y properties\n\t        var data = {\n\t          note: note\n\t        };\n\t        if (typeof on === \"object\") {\n\t          data.state = on.state;\n\t          //  data.x = on.x\n\t          //  data.y = on.y\n\t        } else {\n\t          data.state = on;\n\t        }\n\t        this.emit(\"change\", data);\n\t      }\n\t    },\n\t    render: {\n\t\n\t      /* drag(note,on) {\n\t        this.emit('change',{\n\t          note: note,\n\t          state: on\n\t        });\n\t      } */\n\t\n\t      value: function render() {}\n\t    },\n\t    addTouchListeners: {\n\t      value: function addTouchListeners() {\n\t        var _this = this;\n\t\n\t        this.preClick = this.preMove = this.preRelease = function () {};\n\t        this.click = this.move = this.release = function () {};\n\t        this.preTouch = this.preTouchMove = this.preTouchRelease = function () {};\n\t        this.touch = this.touchMove = this.touchRelease = function () {};\n\t\n\t        this.currentElement = false;\n\t\n\t        this.element.addEventListener(\"touchstart\", function (e) {\n\t          console.log(\"touchstart\");\n\t          var element = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n\t          var key = _this.keys[element.index];\n\t          _this.paintbrush = !key.state;\n\t          key.down(_this.paintbrush);\n\t          _this.currentElement = element.index;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t\n\t        this.element.addEventListener(\"touchmove\", function (e) {\n\t          var element = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n\t          var key = _this.keys[element.index];\n\t          if (element.index !== _this.currentElement) {\n\t            if (_this.currentElement) {\n\t              var pastKey = _this.keys[_this.currentElement];\n\t              pastKey.up();\n\t            }\n\t            key.down(_this.paintbrush);\n\t          } else {\n\t            key.bend();\n\t          }\n\t          _this.currentElement = element.index;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t\n\t        this.element.addEventListener(\"touchend\", function (e) {\n\t          // no touches to calculate because none remaining\n\t          var key = _this.keys[_this.currentElement];\n\t          key.up();\n\t          _this.interacting = false;\n\t          _this.currentElement = false;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t      }\n\t    },\n\t    setRange: {\n\t\n\t      /**\n\t      Define the pitch range (lowest and highest note) of the piano keyboard.\n\t      @param low {number} MIDI note value of the lowest note on the keyboard\n\t      @param high {number} MIDI note value of the highest note on the keyboard\n\t      */\n\t\n\t      value: function setRange(low, high) {\n\t        this.range.low = low;\n\t        this.range.high = high;\n\t        this.empty();\n\t        this.buildInterface();\n\t      }\n\t    },\n\t    toggleKey: {\n\t\n\t      /**\n\t      Turn a key on or off using its MIDI note value;\n\t      @param note {number} MIDI note value of the key to change\n\t      @param on {boolean} Whether the note should turn on or off\n\t      */\n\t\n\t      value: function toggleKey(note, on) {\n\t        this.keys[note - this.range.low].flip(on);\n\t      }\n\t    },\n\t    toggleIndex: {\n\t\n\t      /**\n\t      Turn a key on or off using its key index on the piano interface.\n\t      @param index {number} Index of the key to change\n\t      @param on {boolean} Whether the note should turn on or off\n\t      */\n\t\n\t      value: function toggleIndex(index, on) {\n\t        this.keys[index].flip(on);\n\t      }\n\t    }\n\t  });\n\t\n\t  return Piano;\n\t})(Interface);\n\t\n\tmodule.exports = Piano;\n\t\n\t// loop through and render the keys?\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar dom = __webpack_require__(7);\n\tvar Interface = __webpack_require__(6);\n\tvar ButtonTemplate = __webpack_require__(17);\n\tvar MatrixModel = __webpack_require__(25);\n\tvar CounterModel = __webpack_require__(28);\n\tvar touch = __webpack_require__(9);\n\t\n\tvar MatrixCell = (function (_ButtonTemplate) {\n\t  function MatrixCell() {\n\t    _classCallCheck(this, MatrixCell);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [80, 80],\n\t      target: false,\n\t      mode: \"toggle\",\n\t      value: 0\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(MatrixCell.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.index = this.settings.index;\n\t    this.row = this.settings.row;\n\t    this.column = this.settings.column;\n\t\n\t    this.matrix = this.settings.matrix;\n\t\n\t    this.interacting = false;\n\t    this.paintbrush = false;\n\t\n\t    this.init();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(MatrixCell, _ButtonTemplate);\n\t\n\t  _createClass(MatrixCell, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = svg.create(\"svg\");\n\t        this.element.setAttribute(\"width\", this.width);\n\t        this.element.setAttribute(\"height\", this.height);\n\t        this.element.style.top = \"0px\";\n\t        this.element.style.left = \"0px\";\n\t        this.element.style.position = \"absolute\";\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t        var _this = this;\n\t\n\t        this.pad = svg.create(\"rect\");\n\t        this.element.appendChild(this.pad);\n\t\n\t        this.interactionTarget = this.pad;\n\t\n\t        /* events */\n\t\n\t        if (!touch.exists) {\n\t\n\t          this.click = function () {\n\t            _this.matrix.interacting = true;\n\t            _this.matrix.paintbrush = !_this.state;\n\t            _this.down(_this.matrix.paintbrush);\n\t          };\n\t          this.pad.addEventListener(\"mouseover\", function () {\n\t            if (_this.matrix.interacting) {\n\t              _this.down(_this.matrix.paintbrush);\n\t            }\n\t          });\n\t\n\t          this.move = function () {};\n\t          this.pad.addEventListener(\"mousemove\", function (e) {\n\t            if (_this.matrix.interacting) {\n\t              if (!_this.offset) {\n\t                _this.offset = dom.findPosition(_this.element);\n\t              }\n\t              _this.mouse = dom.locateMouse(e, _this.offset);\n\t              _this.bend();\n\t            }\n\t          });\n\t\n\t          this.release = function () {\n\t            _this.matrix.interacting = false;\n\t          };\n\t          this.pad.addEventListener(\"mouseup\", function () {\n\t            if (_this.matrix.interacting) {\n\t              _this.up();\n\t            }\n\t          });\n\t          this.pad.addEventListener(\"mouseout\", function () {\n\t            if (_this.matrix.interacting) {\n\t              _this.up();\n\t            }\n\t          });\n\t        }\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        this.pad.setAttribute(\"x\", 1);\n\t        this.pad.setAttribute(\"y\", 1);\n\t        if (this.width > 2) {\n\t          this.pad.setAttribute(\"width\", this.width - 2);\n\t        } else {\n\t          this.pad.setAttribute(\"width\", this.width);\n\t        }\n\t        if (this.height > 2) {\n\t          this.pad.setAttribute(\"height\", this.height - 2);\n\t        } else {\n\t          this.pad.setAttribute(\"height\", this.height);\n\t        }\n\t        //this.pad.setAttribute('height', this.height - 2);\n\t        this.pad.setAttribute(\"fill\", this.matrix.colors.fill);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.state) {\n\t          this.pad.setAttribute(\"fill\", this.matrix.colors.fill);\n\t        } else {\n\t          this.pad.setAttribute(\"fill\", this.matrix.colors.accent);\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return MatrixCell;\n\t})(ButtonTemplate);\n\t\n\t/**\n\t* Sequencer\n\t*\n\t* @description Grid of buttons with built-in step sequencer.\n\t*\n\t* @demo <div nexus-ui=\"sequencer\" style=\"width:400px;height:200px;\"></div>\n\t*\n\t* @example\n\t* var sequencer = new Nexus.Sequencer('#target')\n\t*\n\t* @example\n\t* var sequencer = new Nexus.Sequencer('#target',{\n\t*  'size': [400,200],\n\t*  'mode': 'toggle',\n\t*  'rows': 5,\n\t*  'columns': 10\n\t*})\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's matrix changes. <br>\n\t* The event data is an object containing <i>row</i> (number), <i>column</i> (number), and <i>state</i> (boolean) properties.\n\t*\n\t* @outputexample\n\t* sequencer.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t* @output\n\t* step\n\t* Fires any time the sequencer steps to the next column, in sequece mode. <br>\n\t* The event data is an <i>array</i> containing all values in the column, top first.\n\t*\n\t* @outputexample\n\t* sequencer.on('step',function(v) {\n\t*   console.log(v);\n\t* })\n\t*/\n\t\n\tvar Sequencer = (function (_Interface) {\n\t  function Sequencer() {\n\t    _classCallCheck(this, Sequencer);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [400, 200],\n\t      mode: \"toggle\",\n\t      rows: 5,\n\t      columns: 10\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Sequencer.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.active = -1;\n\t\n\t    this.mode = this.settings.mode;\n\t\n\t    /**\n\t     * The interval object which controls timing and sequence scheduling.\n\t     * @type {interval}\n\t     */\n\t    this.interval = new Nexus.Interval(200, function () {}, false); // jshint ignore:line\n\t\n\t    /**\n\t    A Matrix model containing methods for manipulating the sequencer's array of values. To learn how to manipulate the matrix, read about the matrix model.\n\t    @type {matrix}\n\t    */\n\t    this.matrix = new MatrixModel(this.settings.rows, this.settings.columns);\n\t    this.matrix.ui = this;\n\t\n\t    /**\n\t    A Counter model which the sequencer steps through. For example, you could use this model to step through the sequencer in reverse, randomly, or in a drunk walk.\n\t    @type {counter}\n\t    */\n\t    this.stepper = new CounterModel(0, this.columns);\n\t\n\t    this.init();\n\t  }\n\t\n\t  _inherits(Sequencer, _Interface);\n\t\n\t  _createClass(Sequencer, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = document.createElement(\"div\");\n\t        this.element.style.position = \"relative\";\n\t        this.element.style.display = \"block\";\n\t        this.element.style.width = \"100%\";\n\t        this.element.style.height = \"100%\";\n\t        this.parent.appendChild(this.element);\n\t        if (touch.exists) {\n\t          this.addTouchListeners();\n\t        }\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.cells = [];\n\t        for (var i = 0; i < this.matrix.length; i++) {\n\t\n\t          var _location = this.matrix.locate(i);\n\t          // returns {row,col}\n\t\n\t          var container = document.createElement(\"span\");\n\t          container.style.position = \"absolute\";\n\t\n\t          var cell = new MatrixCell(container, {\n\t            component: true,\n\t            index: i,\n\t            row: _location.row,\n\t            column: _location.column,\n\t            mode: this.mode,\n\t            matrix: this\n\t          }, this.keyChange.bind(this, i));\n\t\n\t          //  cell.matrix = this;\n\t          if (touch.exists) {\n\t            cell.pad.index = i;\n\t            cell.preClick = cell.preMove = cell.preRelease = function () {};\n\t            cell.click = cell.move = cell.release = function () {};\n\t            cell.preTouch = cell.preTouchMove = cell.preTouchRelease = function () {};\n\t            cell.touch = cell.touchMove = cell.touchRelease = function () {};\n\t          }\n\t\n\t          this.cells.push(cell);\n\t          this.element.appendChild(container);\n\t        }\n\t        this.sizeInterface();\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        var cellWidth = this.width / this.columns;\n\t        var cellHeight = this.height / this.rows;\n\t\n\t        for (var i = 0; i < this.cells.length; i++) {\n\t          var container = this.cells[i].parent;\n\t          container.style.left = this.cells[i].column * cellWidth + \"px\";\n\t          container.style.top = this.cells[i].row * cellHeight + \"px\";\n\t          this.cells[i].resize(cellWidth, cellHeight);\n\t        }\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        for (var i = 0; i < this.cells.length; i++) {\n\t          this.cells[i].render();\n\t        }\n\t      }\n\t    },\n\t    update: {\n\t      value: function update() {\n\t        var _this = this;\n\t\n\t        //  console.log(\"updating...\")\n\t        //on = on || false;\n\t        this.matrix.iterate(function (r, c, i) {\n\t          //  console.log(this.matrix.pattern[r][c], this.cells[i].state);\n\t          if (_this.matrix.pattern[r][c] !== _this.cells[i].state) {\n\t            if (_this.matrix.pattern[r][c] > 0) {\n\t              _this.cells[i].turnOn();\n\t            } else {\n\t              _this.cells[i].turnOff();\n\t            }\n\t          }\n\t        });\n\t      }\n\t    },\n\t    keyChange: {\n\t\n\t      // update => cell.turnOn => cell.emit => keyChange (seq.emit) => matrix.set.cell => update\n\t      //\n\t      // interaction => keyChange => matrix.set.cell => update => cell.turnOn\n\t      //                                             => emit\n\t      //\n\t      // set.cell => update => needs to emit.\n\t\n\t      value: function keyChange(note, on) {\n\t        // emit data for any key turning on/off\n\t        // i is the note index\n\t        // v is whether it is on or off\n\t        var cell = this.matrix.locate(note);\n\t        //  this.matrix.set.cell(cell.column,cell.row,on);\n\t        this.matrix.pattern[cell.row][cell.column] = on;\n\t        var data = {\n\t          row: cell.row,\n\t          column: cell.column,\n\t          state: on\n\t        };\n\t        this.emit(\"change\", data);\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        var _this = this;\n\t\n\t        if (this.stepper.value >= 0) {\n\t          this.matrix.iterate(function (r, c, i) {\n\t            if (c === _this.stepper.value) {\n\t              _this.cells[i].pad.setAttribute(\"stroke\", _this.colors.mediumLight);\n\t              _this.cells[i].pad.setAttribute(\"stroke-width\", \"1\");\n\t              _this.cells[i].pad.setAttribute(\"stroke-opacity\", \"1\");\n\t            } else {\n\t              _this.cells[i].pad.setAttribute(\"stroke\", \"none\");\n\t            }\n\t          });\n\t        }\n\t      }\n\t    },\n\t    start: {\n\t\n\t      /**\n\t       * Start sequencing\n\t       * @param  {number} ms Beat tempo in milliseconds\n\t       */\n\t\n\t      value: function start(ms) {\n\t        this.interval.event = this.next.bind(this);\n\t        if (ms) {\n\t          this.interval.ms(ms);\n\t        }\n\t        this.interval.start();\n\t      }\n\t    },\n\t    stop: {\n\t\n\t      /**\n\t      Stop sequencing\n\t      */\n\t\n\t      value: function stop() {\n\t        this.interval.stop();\n\t      }\n\t    },\n\t    next: {\n\t\n\t      /**\n\t      Manually jump to the next column and trigger the 'change' event. The \"next\" column is determined by your mode of sequencing.\n\t      */\n\t\n\t      value: function next() {\n\t        this.stepper.next();\n\t        this.emit(\"step\", this.matrix.column(this.stepper.value).reverse());\n\t        this.render();\n\t      }\n\t    },\n\t    addTouchListeners: {\n\t      value: function addTouchListeners() {\n\t        var _this = this;\n\t\n\t        this.preClick = this.preMove = this.preRelease = function () {};\n\t        this.click = this.move = this.release = function () {};\n\t        this.preTouch = this.preTouchMove = this.preTouchRelease = function () {};\n\t        this.touch = this.touchMove = this.touchRelease = function () {};\n\t\n\t        this.currentElement = false;\n\t\n\t        this.element.addEventListener(\"touchstart\", function (e) {\n\t          var element = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n\t          var cell = _this.cells[element.index];\n\t          _this.paintbrush = !cell.state;\n\t          cell.down(_this.paintbrush);\n\t          _this.currentElement = element.index;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t\n\t        this.element.addEventListener(\"touchmove\", function (e) {\n\t          var element = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n\t          var cell = _this.cells[element.index];\n\t          if (element.index !== _this.currentElement) {\n\t            if (_this.currentElement >= 0) {\n\t              var pastCell = _this.cells[_this.currentElement];\n\t              pastCell.up();\n\t            }\n\t            cell.down(_this.paintbrush);\n\t          } else {\n\t            cell.bend();\n\t          }\n\t          _this.currentElement = element.index;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t\n\t        this.element.addEventListener(\"touchend\", function (e) {\n\t          // no touches to calculate because none remaining\n\t          var cell = _this.cells[_this.currentElement];\n\t          cell.up();\n\t          _this.interacting = false;\n\t          _this.currentElement = false;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t      }\n\t    },\n\t    rows: {\n\t\n\t      /**\n\t      Number of rows in the sequencer\n\t      @type {number}\n\t      */\n\t\n\t      get: function () {\n\t        return this.matrix.rows;\n\t      },\n\t      set: function (v) {\n\t        this.matrix.rows = v;\n\t        this.empty();\n\t        this.buildInterface();\n\t        this.update();\n\t      }\n\t    },\n\t    columns: {\n\t\n\t      /**\n\t      Number of columns in the sequencer\n\t      @type {number}\n\t      */\n\t\n\t      get: function () {\n\t        return this.matrix.columns;\n\t      },\n\t      set: function (v) {\n\t        this.matrix.columns = v;\n\t        this.stepper.max = v;\n\t        this.empty();\n\t        this.buildInterface();\n\t        this.update();\n\t      }\n\t    }\n\t  });\n\t\n\t  return Sequencer;\n\t})(Interface);\n\t\n\tmodule.exports = Sequencer;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar Sequence = _interopRequire(__webpack_require__(26));\n\t\n\t// For the tutorial, looking at\n\t\n\t//Pattern section:\n\t// .create(), .rows, .columns,\n\t// .pattern, .length, .formatAsText(), .log(),\n\t// .locate(i), .indexOf(c,r)\n\t// row(), column() (returns contents of row or colum)\n\t\n\t//Control section:\n\t// toggle x3\n\t// set x4\n\t// rotate x3\n\t// populate x3\n\t// erase x3\n\t\n\t// should some version of this have a float value for each cell?\n\t// could be like a mirror .pattern that has values. by default, everything is 1, but could be set...\n\t// not a good way to do that on interface, but as a model it would be nice...\n\t// for .formatAsText(), could multiply by 100 and floor, so each cell is an int from 0 to 9\n\t\n\tvar Matrix = (function () {\n\t  function Matrix(rows, columns) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, Matrix);\n\t\n\t    // should also have ability to create using an existing matrix (2d array)\n\t    this.pattern = [];\n\t    this.create(rows, columns);\n\t\n\t    this.toggle = {\n\t      cell: function (column, row) {\n\t        _this.pattern[row][column] = !_this.pattern[row][column]; // math.invert(this.pattern[row][column]);\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t        return _this.pattern[row][column];\n\t      },\n\t      all: function () {\n\t        _this.iterate(function (r, c) {\n\t          _this.toggle.cell(c, r);\n\t        });\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      row: function (row) {\n\t        for (var i = 0; i < _this.columns; i++) {\n\t          _this.toggle.cell(i, row);\n\t        }\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      column: function (column) {\n\t        for (var i = 0; i < _this.rows; i++) {\n\t          _this.toggle.cell(column, i);\n\t        }\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      }\n\t    };\n\t\n\t    this.set = {\n\t      cell: function (column, row, value) {\n\t        _this.pattern[row][column] = value;\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      all: function (values) {\n\t        // set the whole matrix using a 2d array as input\n\t        // this should also resize the array?\n\t        _this.pattern = values;\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      row: function (row, values) {\n\t        // set a row using an array as input\n\t        _this.pattern[row] = values;\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      column: function (column, values) {\n\t        // set a column using an array as input\n\t        _this.pattern.forEach(function (row, i) {\n\t          _this.pattern[i][column] = values[i];\n\t        });\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      }\n\t    };\n\t\n\t    this.rotate = {\n\t      //should eventually do (amountX, amountY) here\n\t      // could just use a loop and this.rotate.row(i,amountX);\n\t      all: function (amount) {\n\t        if (!amount && amount !== 0) {\n\t          amount = 1;\n\t        }\n\t        amount %= _this.pattern[0].length;\n\t        if (amount < 0) {\n\t          amount = _this.pattern[0].length + amount;\n\t        }\n\t        for (var i = 0; i < _this.rows; i++) {\n\t          var cut = _this.pattern[i].splice(_this.pattern[i].length - amount, amount);\n\t          _this.pattern[i] = cut.concat(_this.pattern[i]);\n\t        }\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      row: function (row, amount) {\n\t        if (!amount && amount !== 0) {\n\t          amount = 1;\n\t        }\n\t        amount %= _this.pattern[0].length;\n\t        if (amount < 0) {\n\t          amount = _this.pattern[0].length + amount;\n\t        }\n\t        var cut = _this.pattern[row].splice(_this.pattern[row].length - amount, amount);\n\t        _this.pattern[row] = cut.concat(_this.pattern[row]);\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      column: function (column, amount) {\n\t        if (!amount && amount !== 0) {\n\t          amount = 1;\n\t        }\n\t        amount %= _this.pattern.length;\n\t        if (amount < 0) {\n\t          amount = _this.pattern.length + amount;\n\t        }\n\t        var proxy = [];\n\t        _this.pattern.forEach(function (row) {\n\t          proxy.push(row[column]);\n\t        });\n\t        var cut = proxy.splice(proxy.length - amount, amount);\n\t        proxy = cut.concat(proxy);\n\t        _this.pattern.forEach(function (row, i) {\n\t          row[column] = proxy[i];\n\t        });\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      }\n\t    };\n\t\n\t    // the idea behind populate is to be able to set a whole row or column to 0 or 1\n\t    // IF the value is a float, such as 0.7, then it would become a probability\n\t    // so populate(0.7) would give each cell a 70% chance of being 1\n\t    this.populate = {\n\t      all: function (odds) {\n\t        var oddsSequence = new Sequence(odds);\n\t        _this.iterate(function (r, c) {\n\t          _this.pattern[r][c] = math.coin(oddsSequence.next());\n\t        });\n\t        // This could be used so that each row has same odds pattern, even if row length is not divisibly by sequence length.\n\t        //,() => {\n\t        //  odds.pos = -1;\n\t        // }\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      row: function () {\n\t        var row = arguments[0] === undefined ? 0 : arguments[0];\n\t        var odds = arguments[1] === undefined ? 1 : arguments[1];\n\t\n\t        var oddsSequence = new Sequence(odds);\n\t        _this.pattern[row].forEach(function (cell, i) {\n\t          _this.pattern[row][i] = math.coin(oddsSequence.next());\n\t        });\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      },\n\t      column: function () {\n\t        var column = arguments[0] === undefined ? 0 : arguments[0];\n\t        var odds = arguments[1] === undefined ? 1 : arguments[1];\n\t\n\t        var oddsSequence = new Sequence(odds);\n\t        _this.pattern.forEach(function (row, i) {\n\t          _this.pattern[i][column] = math.coin(oddsSequence.next());\n\t        });\n\t        if (_this.ui) {\n\t          _this.ui.update();\n\t        }\n\t      }\n\t    };\n\t\n\t    // essentiall populate(0) so i'm not sure if this is necessary but is nice\n\t    this.erase = {\n\t      all: function () {\n\t        _this.set.all(0);\n\t      },\n\t      row: function (row) {\n\t        _this.set.row(row, 0);\n\t      },\n\t      column: function (column) {\n\t        _this.set.column(column, 0);\n\t      }\n\t    };\n\t\n\t    // end constructor\n\t  }\n\t\n\t  _createClass(Matrix, {\n\t    create: {\n\t      value: function create(rows, columns) {\n\t        var _this = this;\n\t\n\t        this.pattern = [];\n\t        for (var row = 0; row < rows; row++) {\n\t          var arr = new Array(columns);\n\t          this.pattern.push(arr);\n\t        }\n\t        this.iterate(function (r, c) {\n\t          _this.pattern[r][c] = false;\n\t        });\n\t      }\n\t    },\n\t    iterate: {\n\t      value: function iterate(f, f2) {\n\t        var i = 0;\n\t        for (var row = 0; row < this.rows; row++) {\n\t          if (f2) {\n\t            f2(row);\n\t          }\n\t          for (var column = 0; column < this.columns; column++) {\n\t            f(row, column, i);\n\t            i++;\n\t          }\n\t        }\n\t      }\n\t    },\n\t    formatAsText: {\n\t      value: function formatAsText() {\n\t        var _this = this;\n\t\n\t        var patternString = \"\";\n\t        this.iterate(function (r, c) {\n\t          patternString += (_this.pattern[r][c] ? 1 : 0) + \" \";\n\t        }, function () {\n\t          patternString += \"\\n\";\n\t        });\n\t        return patternString;\n\t      }\n\t    },\n\t    log: {\n\t      value: function log() {\n\t        console.log(this.formatAsText());\n\t      }\n\t    },\n\t    update: {\n\t      value: function update(pattern) {\n\t        this.pattern = pattern || this.pattern;\n\t      }\n\t    },\n\t    length: {\n\t      get: function () {\n\t        return this.rows * this.columns;\n\t      }\n\t    },\n\t    locate: {\n\t      value: function locate(index) {\n\t        // returns row and column of cell by index\n\t        return {\n\t          row: ~ ~(index / this.columns),\n\t          column: index % this.columns\n\t        };\n\t      }\n\t    },\n\t    indexOf: {\n\t      value: function indexOf(row, column) {\n\t        return column + row * this.columns;\n\t        // returns index of cell by row and column\n\t      }\n\t    },\n\t    row: {\n\t      value: (function (_row) {\n\t        var _rowWrapper = function row(_x) {\n\t          return _row.apply(this, arguments);\n\t        };\n\t\n\t        _rowWrapper.toString = function () {\n\t          return _row.toString();\n\t        };\n\t\n\t        return _rowWrapper;\n\t      })(function (row) {\n\t        var data = [];\n\t        for (var i = 0; i < this.columns; i++) {\n\t          data.push(this.pattern[row] ? 1 : 0);\n\t        }\n\t        return data;\n\t      })\n\t    },\n\t    column: {\n\t      value: (function (_column) {\n\t        var _columnWrapper = function column(_x2) {\n\t          return _column.apply(this, arguments);\n\t        };\n\t\n\t        _columnWrapper.toString = function () {\n\t          return _column.toString();\n\t        };\n\t\n\t        return _columnWrapper;\n\t      })(function (column) {\n\t        var data = [];\n\t        for (var i = 0; i < this.rows; i++) {\n\t          data.push(this.pattern[i][column] ? 1 : 0);\n\t        }\n\t        return data;\n\t      })\n\t    },\n\t    rows: {\n\t      get: function () {\n\t        return this.pattern.length;\n\t      },\n\t      set: function (v) {\n\t        var _this = this;\n\t\n\t        var previous = this.pattern.slice(0);\n\t        this.create(v, this.columns);\n\t        this.iterate(function (r, c) {\n\t          if (previous[r] && previous[r][c]) {\n\t            _this.pattern[r][c] = previous[r][c];\n\t          }\n\t        });\n\t      }\n\t    },\n\t    columns: {\n\t      get: function () {\n\t        return this.pattern[0].length;\n\t      },\n\t      set: function (v) {\n\t        var _this = this;\n\t\n\t        var previous = this.pattern.slice(0);\n\t        this.create(this.rows, v);\n\t        this.iterate(function (r, c) {\n\t          if (previous[r] && previous[r][c]) {\n\t            _this.pattern[r][c] = previous[r][c];\n\t          }\n\t        });\n\t      }\n\t    }\n\t  });\n\t\n\t  return Matrix;\n\t})();\n\t\n\tmodule.exports = Matrix;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar Drunk = _interopRequire(__webpack_require__(27));\n\t\n\tvar Sequence = (function () {\n\t  function Sequence() {\n\t    var sequence = arguments[0] === undefined ? [0, 10, 20, 30] : arguments[0];\n\t    var mode = arguments[1] === undefined ? \"up\" : arguments[1];\n\t    var position = arguments[2] === undefined ? false : arguments[2];\n\t\n\t    _classCallCheck(this, Sequence);\n\t\n\t    this.values = sequence;\n\t    if (!Array.isArray(this.values)) {\n\t      this.values = [this.values];\n\t    }\n\t    this._mode = mode;\n\t    this.position = position;\n\t\n\t    this.drunkWalk = new Drunk(0, this.values.length - 1);\n\t\n\t    this.startValues = {\n\t      up: 0,\n\t      down: this.values.length - 1,\n\t      drunk: ~ ~(this.values.length / 2),\n\t      random: math.ri(this.values.length)\n\t    };\n\t\n\t    if (this.position !== false) {\n\t      this.next = this[this._mode];\n\t    } else {\n\t      this.next = this.first;\n\t    }\n\t  }\n\t\n\t  _createClass(Sequence, {\n\t    mode: {\n\t      get: function () {\n\t        return this._mode;\n\t      },\n\t      set: function (mode) {\n\t        if (!(mode === \"up\" || mode === \"down\" || mode === \"random\" || mode === \"drunk\")) {\n\t          console.error(\"The only modes currently allowed are: up, down, random, drunk\");\n\t          return;\n\t        }\n\t        this._mode = mode;\n\t        if (this.position) {\n\t          this.next = this[this._mode];\n\t        }\n\t      }\n\t    },\n\t    value: {\n\t      get: function () {\n\t        return this.values[this.position];\n\t      },\n\t      set: function (v) {\n\t        this.position = this.values.indexOf(v);\n\t      }\n\t    },\n\t    first: {\n\t      value: function first() {\n\t        if (this.position !== false) {\n\t          this.next = this[this._mode];\n\t          return this.next();\n\t        }\n\t        this.position = this.startValues[this._mode];\n\t        this.next = this[this._mode];\n\t        return this.value;\n\t      }\n\t    },\n\t    up: {\n\t      value: function up() {\n\t        this.position++;\n\t        this.position %= this.values.length;\n\t        return this.value;\n\t      }\n\t    },\n\t    down: {\n\t      value: function down() {\n\t        this.position--;\n\t        if (this.position < 0) {\n\t          this.position = (this.position + this.values.length) % this.values.length;\n\t        }\n\t        return this.value;\n\t      }\n\t    },\n\t    random: {\n\t      value: function random() {\n\t        this.position = math.ri(0, this.values.length);\n\t        return this.value;\n\t      }\n\t    },\n\t    drunk: {\n\t      value: function drunk() {\n\t        this.drunkWalk.max = this.values.length;\n\t        this.drunkWalk.value = this.position;\n\t        this.position = this.drunkWalk.next();\n\t        return this.value;\n\t      }\n\t\n\t      /* future methods\r\n\t      .group(start,stop) -- outputs a group of n items from the list, with wrapping\r\n\t      .loop(start,stop) -- confines sequencing to a subset of the values\r\n\t          (could even have a distinction between .originalValues and the array of values being used)\r\n\t      */\n\t\n\t    }\n\t  });\n\t\n\t  return Sequence;\n\t})();\n\t\n\tmodule.exports = Sequence;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar Drunk = (function () {\n\t    function Drunk() {\n\t        var min = arguments[0] === undefined ? 0 : arguments[0];\n\t        var max = arguments[1] === undefined ? 9 : arguments[1];\n\t        var value = arguments[2] === undefined ? 0 : arguments[2];\n\t        var increment = arguments[3] === undefined ? 1 : arguments[3];\n\t        var loop = arguments[4] === undefined ? false : arguments[4];\n\t\n\t        _classCallCheck(this, Drunk);\n\t\n\t        this.min = min;\n\t        this.max = max;\n\t        this.value = value;\n\t        this.increment = increment;\n\t        this.loop = loop;\n\t    }\n\t\n\t    _createClass(Drunk, {\n\t        next: {\n\t            value: function next() {\n\t                this.value += math.pick(-1 * this.increment, this.increment);\n\t                if (this.value > this.max) {\n\t                    if (this.loop) {\n\t                        this.value = this.min;\n\t                    } else {\n\t                        this.value = this.max - this.increment;\n\t                    }\n\t                }\n\t\n\t                if (this.value < this.min) {\n\t                    if (this.loop) {\n\t                        this.value = this.max;\n\t                    } else {\n\t                        this.value = this.min + this.increment;\n\t                    }\n\t                }\n\t                return this.value;\n\t            }\n\t        }\n\t    });\n\t\n\t    return Drunk;\n\t})();\n\t\n\tmodule.exports = Drunk;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar Drunk = _interopRequire(__webpack_require__(27));\n\t\n\tvar Counter = (function () {\n\t    function Counter() {\n\t        var min = arguments[0] === undefined ? 0 : arguments[0];\n\t        var max = arguments[1] === undefined ? 10 : arguments[1];\n\t        var mode = arguments[2] === undefined ? \"up\" : arguments[2];\n\t        var value = arguments[3] === undefined ? false : arguments[3];\n\t\n\t        _classCallCheck(this, Counter);\n\t\n\t        this.min = min;\n\t        this.max = max;\n\t        this.value = value;\n\t        this.mode = mode;\n\t        this.drunkWalk = new Drunk(this.min, this.max);\n\t        if (this.value !== false) {\n\t            this.next = this[this._mode];\n\t        } else {\n\t            this.next = this.first;\n\t        }\n\t    }\n\t\n\t    _createClass(Counter, {\n\t        mode: {\n\t            set: function (mode) {\n\t                if (!(mode === \"up\" || mode === \"down\" || mode === \"random\" || mode === \"drunk\")) {\n\t                    console.error(\"The only modes currently allowed are: up, down, random, drunk\");\n\t                    return;\n\t                }\n\t                this._mode = mode;\n\t                if (this.value) {\n\t                    this.next = this[this._mode];\n\t                }\n\t            },\n\t            get: function () {\n\t                return this._mode;\n\t            }\n\t        },\n\t        first: {\n\t            value: function first() {\n\t                if (this.value !== false) {\n\t                    this.next = this[this._mode];\n\t                    return this.next();\n\t                }\n\t                this.startValues = {\n\t                    up: this.min,\n\t                    down: this.max,\n\t                    drunk: ~ ~math.average(this.min, this.max),\n\t                    random: math.ri(this.min, this.max)\n\t                };\n\t                this.value = this.startValues[this._mode];\n\t                this.next = this[this._mode];\n\t                return this.value;\n\t            }\n\t        },\n\t        up: {\n\t            value: function up() {\n\t                this.value++;\n\t                if (this.value >= this.max) {\n\t                    this.value = this.min;\n\t                }\n\t                return this.value;\n\t            }\n\t        },\n\t        down: {\n\t            value: function down() {\n\t                this.value--;\n\t                if (this.value < this.min) {\n\t                    this.value = this.max;\n\t                }\n\t                return this.value;\n\t            }\n\t        },\n\t        random: {\n\t            value: function random() {\n\t                this.value = math.ri(this.min, this.max);\n\t                return this.value;\n\t            }\n\t        },\n\t        drunk: {\n\t            value: function drunk() {\n\t                this.drunkWalk.min = this.min;\n\t                this.drunkWalk.max = this.max;\n\t                this.drunkWalk.value = this.value;\n\t                this.value = this.drunkWalk.next();\n\t                return this.value;\n\t            }\n\t        }\n\t    });\n\t\n\t    return Counter;\n\t})();\n\t\n\tmodule.exports = Counter;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar math = __webpack_require__(5);\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\t\n\tvar Interaction = _interopRequireWildcard(__webpack_require__(12));\n\t\n\t/**\n\t* Pan2D\n\t*\n\t* @description Interface for moving a sound around an array of speakers. Speaker locations can be customized. The interface calculates the closeness of the sound source to each speaker and returns that distance as a numeric value.\n\t*\n\t* @demo <span nexus-ui=\"pan2D\"></span>\n\t*\n\t* @example\n\t* var pan2d = new Nexus.Pan2d('#target')\n\t*\n\t* @example\n\t* var pan2d = new Nexus.Pan2D('#target',{\n\t*   'size': [200,200],\n\t*   'range': 0.5,  // detection radius of each speaker\n\t*   'mode': 'absolute',   // 'absolute' or 'relative' sound movement\n\t*   'speakers': [  // the speaker [x,y] positions\n\t*       [0.5,0.2],\n\t*       [0.75,0.25],\n\t*       [0.8,0.5],\n\t*       [0.75,0.75],\n\t*       [0.5,0.8],\n\t*       [0.25,0.75]\n\t*       [0.2,0.5],\n\t*       [0.25,0.25]\n\t*   ]\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the \"source\" node's position changes. <br>\n\t* The event data is an array of the amplitudes (0-1), representing the level of each speaker (as calculated by its distance to the audio source).\n\t*\n\t* @outputexample\n\t* pan2d.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\tvar Pan2D = (function (_Interface) {\n\t  function Pan2D() {\n\t    _classCallCheck(this, Pan2D);\n\t\n\t    var options = [\"range\"];\n\t\n\t    var defaults = {\n\t      size: [200, 200],\n\t      range: 0.5,\n\t      mode: \"absolute\",\n\t      speakers: [[0.5, 0.2], [0.75, 0.25], [0.8, 0.5], [0.75, 0.75], [0.5, 0.8], [0.25, 0.75], [0.2, 0.5], [0.25, 0.25]]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Pan2D.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.value = {\n\t      x: new Step(0, 1, 0, 0.5),\n\t      y: new Step(0, 1, 0, 0.5)\n\t    };\n\t\n\t    /**\n\t    Absolute or relative mouse interaction. In \"absolute\" mode, the source node will jump to your mouse position on mouse click. In \"relative\" mode, it does not.\n\t    */\n\t    this.mode = this.settings.mode;\n\t\n\t    this.position = {\n\t      x: new Interaction.Handle(this.mode, \"horizontal\", [0, this.width], [this.height, 0]),\n\t      y: new Interaction.Handle(this.mode, \"vertical\", [0, this.width], [this.height, 0])\n\t    };\n\t    this.position.x.value = this.value.x.normalized;\n\t    this.position.y.value = this.value.y.normalized;\n\t\n\t    /**\n\t    An array of speaker locations. Update this with .moveSpeaker() or .moveAllSpeakers()\n\t    */\n\t    this.speakers = this.settings.speakers;\n\t\n\t    /**\n\t    Rewrite: The maximum distance from a speaker that the source node can be for it to be heard from that speaker. A low range (0.1) will result in speakers only playing when the sound is very close it. Default is 0.5 (half of the interface).\n\t    */\n\t    this.range = this.settings.range;\n\t\n\t    /**\n\t    The current levels for each speaker. This is calculated when a source node or speaker node is moved through interaction or programatically.\n\t    */\n\t    this.levels = [];\n\t\n\t    this.init();\n\t\n\t    this.calculateLevels();\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Pan2D, _Interface);\n\t\n\t  _createClass(Pan2D, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.knob = svg.create(\"circle\");\n\t\n\t        this.element.appendChild(this.knob);\n\t\n\t        // add speakers\n\t        this.speakerElements = [];\n\t\n\t        for (var i = 0; i < this.speakers.length; i++) {\n\t          var speakerElement = svg.create(\"circle\");\n\t\n\t          this.element.appendChild(speakerElement);\n\t\n\t          this.speakerElements.push(speakerElement);\n\t        }\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        this._minDimension = Math.min(this.width, this.height);\n\t\n\t        this.knobRadius = {\n\t          off: ~ ~(this._minDimension / 100) * 3 + 5 };\n\t        this.knobRadius.on = this.knobRadius.off * 2;\n\t\n\t        this.knob.setAttribute(\"cx\", this.width / 2);\n\t        this.knob.setAttribute(\"cy\", this.height / 2);\n\t        this.knob.setAttribute(\"r\", this.knobRadius.off);\n\t\n\t        for (var i = 0; i < this.speakers.length; i++) {\n\t          var speakerElement = this.speakerElements[i];\n\t          var speaker = this.speakers[i];\n\t          speakerElement.setAttribute(\"cx\", speaker[0] * this.width);\n\t          speakerElement.setAttribute(\"cy\", speaker[1] * this.height);\n\t          speakerElement.setAttribute(\"r\", this._minDimension / 20 + 5);\n\t          speakerElement.setAttribute(\"fill-opacity\", \"0\");\n\t        }\n\t\n\t        this.position.x.resize([0, this.width], [this.height, 0]);\n\t        this.position.y.resize([0, this.width], [this.height, 0]);\n\t\n\t        // next, need to\n\t        // resize positions\n\t        // calculate speaker distances\n\t        this.calculateLevels();\n\t        this.render();\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t\n\t        this.element.style.backgroundColor = this.colors.fill;\n\t        this.knob.setAttribute(\"fill\", this.colors.mediumLight);\n\t\n\t        for (var i = 0; i < this.speakers.length; i++) {\n\t          var speakerElement = this.speakerElements[i];\n\t          speakerElement.setAttribute(\"fill\", this.colors.accent);\n\t          speakerElement.setAttribute(\"stroke\", this.colors.accent);\n\t        }\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        this.knobCoordinates = {\n\t          x: this.value.x.normalized * this.width,\n\t          y: this.height - this.value.y.normalized * this.height\n\t        };\n\t\n\t        this.knob.setAttribute(\"cx\", this.knobCoordinates.x);\n\t        this.knob.setAttribute(\"cy\", this.knobCoordinates.y);\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.position.x.anchor = this.mouse;\n\t        this.position.y.anchor = this.mouse;\n\t        this.move();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.clicked) {\n\t          this.position.x.update(this.mouse);\n\t          this.position.y.update(this.mouse);\n\t          // position.x and position.y are normalized\n\t          // so are the levels\n\t          // likely don't need this.value at all -- only used for drawing\n\t          // not going to be a 'step' or 'min' and 'max' in this one.\n\t          this.calculateLevels();\n\t          this.emit(\"change\", this.levels);\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        this.render();\n\t      }\n\t    },\n\t    normalized: {\n\t      get: function () {\n\t        return {\n\t          x: this.value.x.normalized,\n\t          y: this.value.y.normalized\n\t        };\n\t      }\n\t    },\n\t    calculateLevels: {\n\t      value: function calculateLevels() {\n\t        var _this = this;\n\t\n\t        this.value.x.updateNormal(this.position.x.value);\n\t        this.value.y.updateNormal(this.position.y.value);\n\t        this.levels = [];\n\t        this.speakers.forEach(function (s, i) {\n\t          var distance = math.distance(s[0] * _this.width, s[1] * _this.height, _this.position.x.value * _this.width, (1 - _this.position.y.value) * _this.height);\n\t          var level = math.clip(1 - distance / (_this.range * _this.width), 0, 1);\n\t          _this.levels.push(level);\n\t          _this.speakerElements[i].setAttribute(\"fill-opacity\", level);\n\t        });\n\t      }\n\t    },\n\t    moveSource: {\n\t\n\t      /**\n\t      Move the audio source node and trigger the output event.\n\t      @param x {number} New x location, normalized 0-1\n\t      @param y {number} New y location, normalized 0-1\n\t      */\n\t\n\t      value: function moveSource(x, y) {\n\t        var location = {\n\t          x: x * this.width,\n\t          y: y * this.height\n\t        };\n\t        this.position.x.update(location);\n\t        this.position.y.update(location);\n\t        this.calculateLevels();\n\t        this.emit(\"change\", this.levels);\n\t        this.render();\n\t      }\n\t    },\n\t    moveSpeaker: {\n\t\n\t      /**\n\t      Move a speaker node and trigger the output event.\n\t      @param index {number} Index of the speaker to move\n\t      @param x {number} New x location, normalized 0-1\n\t      @param y {number} New y location, normalized 0-1\n\t      */\n\t\n\t      value: function moveSpeaker(index, x, y) {\n\t\n\t        this.speakers[index] = [x, y];\n\t        this.speakerElements[index].setAttribute(\"cx\", x * this.width);\n\t        this.speakerElements[index].setAttribute(\"cy\", y * this.height);\n\t        this.calculateLevels();\n\t        this.emit(\"change\", this.levels);\n\t        this.render();\n\t      }\n\t\n\t      /**\n\t      Set all speaker locations\n\t      @param locations {Array} Array of speaker locations. Each item in the array should be an array of normalized x and y coordinates.\n\t       setSpeakers(locations) {\n\t       }\n\t      */\n\t\n\t    }\n\t  });\n\t\n\t  return Pan2D;\n\t})(Interface);\n\t\n\tmodule.exports = Pan2D;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = __webpack_require__(5);\n\tvar svg = __webpack_require__(4);\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\t* Tilt\n\t*\n\t* @description Device tilt sensor with 2 or 3 axes (depending on your device and browser).\n\t*\n\t* @demo <span nexus-ui='tilt'></span>\n\t*\n\t* @example\n\t* var tilt = new Nexus.Tilt('#target')\n\t*\n\t* @output\n\t* change\n\t* Fires at a regular interval, as long as this interface is active (see the interface's <i>.active</i> property)<br>\n\t* The event data is an <i>object</i> containing x (number) and y (number) properties which represent the current tilt state of the device.\n\t*\n\t* @outputexample\n\t* tilt.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Tilt = (function (_Interface) {\n\t  function Tilt() {\n\t    _classCallCheck(this, Tilt);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [80, 80]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Tilt.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._active = true;\n\t\n\t    this.init();\n\t\n\t    // add event listener for device orientation\n\t\n\t    this.boundUpdate = this.update.bind(this);\n\t    //\tthis.boundMozTilt = this.mozTilt.bind(this)\n\t\n\t    if (window.DeviceOrientationEvent) {\n\t      this.orientationListener = window.addEventListener(\"deviceorientation\", this.boundUpdate, false);\n\t    } else {\n\t      this._active = false;\n\t      this.colorInterface();\n\t    }\n\t\n\t    /*else if (window.OrientationEvent) {\n\t    //\t  \twindow.addEventListener('MozOrientation', this.boundMozTilt, false);\n\t    } else {\n\t    console.log('Not supported on your device or browser.');\n\t    } */\n\t  }\n\t\n\t  _inherits(Tilt, _Interface);\n\t\n\t  _createClass(Tilt, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.title = svg.create(\"text\");\n\t        this.circleX = svg.create(\"circle\");\n\t        this.circleY = svg.create(\"circle\");\n\t        this.circleZ = svg.create(\"circle\");\n\t\n\t        this.barX = svg.create(\"path\");\n\t        this.barY = svg.create(\"path\");\n\t        this.barZ = svg.create(\"path\");\n\t\n\t        this.barX2 = svg.create(\"path\");\n\t        this.barY2 = svg.create(\"path\");\n\t        this.barZ2 = svg.create(\"path\");\n\t\n\t        this.barX.setAttribute(\"opacity\", \"0.8\");\n\t        this.barY.setAttribute(\"opacity\", \"0.8\");\n\t        this.barZ.setAttribute(\"opacity\", \"0.8\");\n\t        this.barX2.setAttribute(\"opacity\", \"0.8\");\n\t        this.barY2.setAttribute(\"opacity\", \"0.8\");\n\t        this.barZ2.setAttribute(\"opacity\", \"0.8\");\n\t\n\t        this.circleX.setAttribute(\"cx\", this.width * 3 / 12);\n\t        this.circleX.setAttribute(\"cy\", this.height * 3 / 4);\n\t        this.circleX.setAttribute(\"r\", this.height / 10);\n\t        this.circleX.setAttribute(\"opacity\", \"0.4\");\n\t\n\t        this.circleY.setAttribute(\"cx\", this.width * 6 / 12);\n\t        this.circleY.setAttribute(\"cy\", this.height * 3 / 4);\n\t        this.circleY.setAttribute(\"r\", this.height / 10);\n\t        this.circleY.setAttribute(\"opacity\", \"0.4\");\n\t\n\t        this.circleZ.setAttribute(\"cx\", this.width * 9 / 12);\n\t        this.circleZ.setAttribute(\"cy\", this.height * 3 / 4);\n\t        this.circleZ.setAttribute(\"r\", this.height / 10);\n\t        this.circleZ.setAttribute(\"opacity\", \"0.4\");\n\t\n\t        this.barX.setAttribute(\"stroke-width\", Math.round(this.height / 30));\n\t        this.barY.setAttribute(\"stroke-width\", Math.round(this.height / 30));\n\t        this.barZ.setAttribute(\"stroke-width\", Math.round(this.height / 30));\n\t\n\t        this.barX.setAttribute(\"fill\", \"none\");\n\t        this.barY.setAttribute(\"fill\", \"none\");\n\t        this.barZ.setAttribute(\"fill\", \"none\");\n\t\n\t        this.barX2.setAttribute(\"stroke-width\", Math.round(this.height / 30));\n\t        this.barY2.setAttribute(\"stroke-width\", Math.round(this.height / 30));\n\t        this.barZ2.setAttribute(\"stroke-width\", Math.round(this.height / 30));\n\t\n\t        this.barX2.setAttribute(\"fill\", \"none\");\n\t        this.barY2.setAttribute(\"fill\", \"none\");\n\t        this.barZ2.setAttribute(\"fill\", \"none\");\n\t\n\t        this.title.setAttribute(\"x\", this.width / 2);\n\t        this.title.setAttribute(\"y\", this.height / 3 + 7);\n\t        this.title.setAttribute(\"font-size\", \"15px\");\n\t        this.title.setAttribute(\"font-weight\", \"bold\");\n\t        this.title.setAttribute(\"letter-spacing\", \"2px\");\n\t        this.title.setAttribute(\"opacity\", \"0.7\");\n\t        this.title.setAttribute(\"text-anchor\", \"middle\");\n\t        this.title.textContent = \"TILT\";\n\t\n\t        this.element.appendChild(this.circleX);\n\t        this.element.appendChild(this.circleY);\n\t        this.element.appendChild(this.circleZ);\n\t\n\t        this.element.appendChild(this.barX);\n\t        this.element.appendChild(this.barY);\n\t        this.element.appendChild(this.barZ);\n\t\n\t        this.element.appendChild(this.barX2);\n\t        this.element.appendChild(this.barY2);\n\t        this.element.appendChild(this.barZ2);\n\t\n\t        this.element.appendChild(this.title);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t\n\t        if (this._active) {\n\t          this.element.style.backgroundColor = this.colors.accent;\n\t          this.circleX.setAttribute(\"fill\", this.colors.light);\n\t          this.circleY.setAttribute(\"fill\", this.colors.light);\n\t          this.circleZ.setAttribute(\"fill\", this.colors.light);\n\t          this.circleX.setAttribute(\"stroke\", this.colors.light);\n\t          this.circleY.setAttribute(\"stroke\", this.colors.light);\n\t          this.circleZ.setAttribute(\"stroke\", this.colors.light);\n\t          this.barX.setAttribute(\"stroke\", this.colors.light);\n\t          this.barY.setAttribute(\"stroke\", this.colors.light);\n\t          this.barZ.setAttribute(\"stroke\", this.colors.light);\n\t          this.barX2.setAttribute(\"stroke\", this.colors.light);\n\t          this.barY2.setAttribute(\"stroke\", this.colors.light);\n\t          this.barZ2.setAttribute(\"stroke\", this.colors.light);\n\t          this.title.setAttribute(\"fill\", this.colors.light);\n\t        } else {\n\t          this.element.style.backgroundColor = this.colors.fill;\n\t          this.circleX.setAttribute(\"fill\", this.colors.mediumLight);\n\t          this.circleY.setAttribute(\"fill\", this.colors.mediumLight);\n\t          this.circleZ.setAttribute(\"fill\", this.colors.mediumLight);\n\t          this.circleX.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.circleY.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.circleZ.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.barX.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.barY.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.barZ.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.barX2.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.barY2.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.barZ2.setAttribute(\"stroke\", this.colors.mediumLight);\n\t          this.title.setAttribute(\"fill\", this.colors.mediumLight);\n\t        }\n\t      }\n\t    },\n\t    update: {\n\t      value: function update(v) {\n\t        if (this._active) {\n\t\n\t          var y = v.beta;\n\t          var x = v.gamma;\n\t          var z = v.alpha;\n\t\n\t          // take the original -90 to 90 scale and normalize it 0-1\n\t          x = math.scale(x, -90, 90, 0, 1);\n\t          y = math.scale(y, -90, 90, 0, 1);\n\t          z = math.scale(z, 0, 360, 0, 1);\n\t\n\t          var handlePoints = {\n\t            start: Math.PI * 1.5,\n\t            end: math.clip(math.scale(x, 0, 0.5, Math.PI * 1.5, Math.PI * 0.5), Math.PI * 0.5, Math.PI * 1.5)\n\t          };\n\t          var handle2Points = {\n\t            start: Math.PI * 2.5,\n\t            end: math.clip(math.scale(x, 0.5, 1, Math.PI * 2.5, Math.PI * 1.5), Math.PI * 1.5, Math.PI * 2.5)\n\t          };\n\t\n\t          var handlePath = svg.arc(this.circleX.cx.baseVal.value, this.circleX.cy.baseVal.value, this.circleX.r.baseVal.value, handlePoints.start, handlePoints.end);\n\t          var handle2Path = svg.arc(this.circleX.cx.baseVal.value, this.circleX.cy.baseVal.value, this.circleX.r.baseVal.value, handle2Points.start, handle2Points.end);\n\t\n\t          this.barX.setAttribute(\"d\", handlePath);\n\t          this.barX2.setAttribute(\"d\", handle2Path);\n\t\n\t          handlePoints = {\n\t            start: Math.PI * 1.5,\n\t            end: math.clip(math.scale(y, 0, 0.5, Math.PI * 1.5, Math.PI * 0.5), Math.PI * 0.5, Math.PI * 1.5)\n\t          };\n\t          handle2Points = {\n\t            start: Math.PI * 2.5,\n\t            end: math.clip(math.scale(y, 0.5, 1, Math.PI * 2.5, Math.PI * 1.5), Math.PI * 1.5, Math.PI * 2.5)\n\t          };\n\t\n\t          handlePath = svg.arc(this.circleY.cx.baseVal.value, this.circleY.cy.baseVal.value, this.circleY.r.baseVal.value, handlePoints.start, handlePoints.end);\n\t          handle2Path = svg.arc(this.circleY.cx.baseVal.value, this.circleY.cy.baseVal.value, this.circleY.r.baseVal.value, handle2Points.start, handle2Points.end);\n\t\n\t          this.barY.setAttribute(\"d\", handlePath);\n\t          this.barY2.setAttribute(\"d\", handle2Path);\n\t\n\t          handlePoints = {\n\t            start: Math.PI * 1.5,\n\t            end: math.clip(math.scale(z, 0, 0.5, Math.PI * 1.5, Math.PI * 0.5), Math.PI * 0.5, Math.PI * 1.5)\n\t          };\n\t          handle2Points = {\n\t            start: Math.PI * 2.5,\n\t            end: math.clip(math.scale(z, 0.5, 1, Math.PI * 2.5, Math.PI * 1.5), Math.PI * 1.5, Math.PI * 2.5)\n\t          };\n\t\n\t          handlePath = svg.arc(this.circleZ.cx.baseVal.value, this.circleZ.cy.baseVal.value, this.circleZ.r.baseVal.value, handlePoints.start, handlePoints.end);\n\t          handle2Path = svg.arc(this.circleZ.cx.baseVal.value, this.circleZ.cy.baseVal.value, this.circleZ.r.baseVal.value, handle2Points.start, handle2Points.end);\n\t\n\t          this.barZ.setAttribute(\"d\", handlePath);\n\t          this.barZ2.setAttribute(\"d\", handle2Path);\n\t\n\t          /*\n\t           let pointsX = {\n\t            start: 0,\n\t            end: math.scale( x, 0, 1, 0, Math.PI*2 )\n\t          };\n\t          //  console.log(this.circleX.cx.baseVal.value);\n\t           let pathX = svg.arc(this.circleX.cx.baseVal.value, this.circleX.cy.baseVal.value, this.circleX.r.baseVal.value*2, pointsX.start, pointsX.end);\n\t           this.barX.setAttribute('d',pathX); */\n\t\n\t          //this.textH.textContent = math.prune(x,2);\n\t          //this.textV.textContent = math.prune(y,2);\n\t          //\n\t          //  this.circleX.setAttribute('opacity',x);\n\t          //  this.circleY.setAttribute('opacity',y);\n\t          //  this.circleZ.setAttribute('opacity',z);\n\t\n\t          this.emit(\"change\", {\n\t            x: x,\n\t            y: y,\n\t            z: z\n\t          });\n\t        }\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        if (window.DeviceOrientationEvent) {\n\t          this.active = !this.active;\n\t        }\n\t      }\n\t    },\n\t    active: {\n\t\n\t      /**\n\t      Whether the interface is on (emitting values) or off (paused & not emitting values). Setting this property will update it.\n\t      @type {boolean}\n\t      */\n\t\n\t      get: function () {\n\t        return this._active;\n\t      },\n\t      set: function (on) {\n\t        this._active = on;\n\t        this.colorInterface();\n\t      }\n\t    },\n\t    customDestroy: {\n\t      value: function customDestroy() {\n\t        window.removeEventListener(\"deviceorientation\", this.boundUpdate, false);\n\t      }\n\t    }\n\t  });\n\t\n\t  return Tilt;\n\t})(Interface);\n\t\n\tmodule.exports = Tilt;\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar dom = __webpack_require__(7);\n\tvar math = __webpack_require__(5);\n\tvar Interface = __webpack_require__(6);\n\tvar SliderTemplate = __webpack_require__(32);\n\tvar touch = __webpack_require__(9);\n\t\n\tvar SingleSlider = (function (_SliderTemplate) {\n\t  function SingleSlider() {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, SingleSlider);\n\t\n\t    var options = [\"scale\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [120, 20],\n\t      orientation: \"vertical\",\n\t      mode: \"absolute\",\n\t      scale: [0, 1],\n\t      step: 0,\n\t      value: 0,\n\t      hasKnob: true\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(SingleSlider.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    /* events */\n\t\n\t    if (!touch.exists) {\n\t\n\t      this.click = function () {\n\t        _this.multislider.interacting = true;\n\t        _this.multislider.interpolation = {\n\t          index: _this.index,\n\t          value: _this.value\n\t        };\n\t        _this.down();\n\t        _this.multislider.values[_this.index] = _this.value;\n\t      };\n\t      this.element.addEventListener(\"mouseover\", function (e) {\n\t        if (_this.multislider.interacting) {\n\t          if (!_this.offset) {\n\t            _this.offset = dom.findPosition(_this.element);\n\t          }\n\t          _this.mouse = dom.locateMouse(e, _this.offset);\n\t          _this.down();\n\t          _this.multislider.values[_this.index] = _this.value;\n\t          if (_this.multislider.interpolation) {\n\t            var distance = Math.abs(_this.multislider.interpolation.index - _this.index);\n\t            if (distance > 1) {\n\t              var low = Math.min(_this.multislider.interpolation.index, _this.index);\n\t              var high = Math.max(_this.multislider.interpolation.index, _this.index);\n\t              var lowValue = _this.multislider.sliders[low].value;\n\t              var highValue = _this.multislider.sliders[high].value;\n\t              for (var i = low; i < high; i++) {\n\t                _this.multislider.sliders[i].value = math.interp((i - low) / distance, lowValue, highValue);\n\t              }\n\t            }\n\t          }\n\t\n\t          _this.multislider.interpolation = {\n\t            index: _this.index,\n\t            value: _this.value\n\t          };\n\t        }\n\t      });\n\t\n\t      this.move = function () {};\n\t      this.element.addEventListener(\"mousemove\", function (e) {\n\t        if (_this.multislider.interacting) {\n\t          if (!_this.offset) {\n\t            _this.offset = dom.findPosition(_this.element);\n\t          }\n\t          _this.mouse = dom.locateMouse(e, _this.offset);\n\t          _this.slide();\n\t          _this.multislider.values[_this.index] = _this.value;\n\t        }\n\t      });\n\t\n\t      this.release = function () {\n\t        _this.multislider.interacting = false;\n\t        _this.multislider.interpolation = false;\n\t      };\n\t      this.element.addEventListener(\"mouseup\", function () {\n\t        if (_this.multislider.interacting) {\n\t          _this.up();\n\t          _this.multislider.interpolation = false;\n\t          _this.multislider.values[_this.index] = _this.value;\n\t        }\n\t      });\n\t      this.element.addEventListener(\"mouseout\", function () {\n\t        if (_this.multislider.interacting) {\n\t          _this.up();\n\t          _this.multislider.values[_this.index] = _this.value;\n\t        }\n\t      });\n\t    }\n\t\n\t    this.customStyle();\n\t  }\n\t\n\t  _inherits(SingleSlider, _SliderTemplate);\n\t\n\t  _createClass(SingleSlider, {\n\t    customStyle: {\n\t      value: function customStyle() {\n\t\n\t        /* style changes */\n\t\n\t        this.bar.setAttribute(\"x\", 0);\n\t        this.bar.setAttribute(\"transform\", \"translate(0,0)\");\n\t        this.bar.setAttribute(\"rx\", 0); // corner radius\n\t        this.bar.setAttribute(\"ry\", 0);\n\t        this.bar.setAttribute(\"width\", this.width);\n\t        this.bar.setAttribute(\"height\", this.height);\n\t\n\t        this.fillbar.setAttribute(\"x\", 0);\n\t        this.fillbar.setAttribute(\"transform\", \"translate(0,0)\");\n\t        this.fillbar.setAttribute(\"rx\", 0); // corner radius\n\t        this.fillbar.setAttribute(\"ry\", 0);\n\t        this.fillbar.setAttribute(\"width\", this.width);\n\t        this.fillbar.setAttribute(\"height\", this.height);\n\t      }\n\t    }\n\t  });\n\t\n\t  return SingleSlider;\n\t})(SliderTemplate);\n\t\n\t/**\n\t* Multislider\n\t*\n\t* @description Multislider\n\t*\n\t* @demo <span nexus-ui=\"multislider\"></span>\n\t*\n\t* @example\n\t* var multislider = new Nexus.Multislider('#target')\n\t*\n\t* @example\n\t* var multislider = new Nexus.Multislider('#target',{\n\t*  'size': [200,100],\n\t*  'numberOfSliders': 5,\n\t*  'min': 0,\n\t*  'max': 1,\n\t*  'step': 0,\n\t*  'values': [0.7,0.7,0.7,0.7,0.7]\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data an object containing <i>index</i> and <i>value</i> properties\n\t*\n\t* @outputexample\n\t* multislider.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\t/*\n\tProperties\n\t.values\n\t\n\t*/\n\t\n\tvar Multislider = (function (_Interface) {\n\t  function Multislider() {\n\t    _classCallCheck(this, Multislider);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [200, 100],\n\t      numberOfSliders: 5,\n\t      min: 0,\n\t      max: 1,\n\t      step: 0,\n\t      values: [0.7, 0.7, 0.7, 0.7, 0.7]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Multislider.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this._numberOfSliders = this.settings.numberOfSliders;\n\t    this.values = this.settings.values;\n\t\n\t    this.sliders = [];\n\t\n\t    this.interacting = false;\n\t\n\t    this.init();\n\t  }\n\t\n\t  _inherits(Multislider, _Interface);\n\t\n\t  _createClass(Multislider, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.element = document.createElement(\"div\");\n\t        this.parent.appendChild(this.element);\n\t      }\n\t    },\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        var min = this.settings.min;\n\t        var max = this.settings.max;\n\t        var step = this.settings.step;\n\t\n\t        if (this.sliders.length) {\n\t          min = this.sliders[0].min;\n\t          max = this.sliders[0].max;\n\t          step = this.sliders[0].step;\n\t        }\n\t\n\t        this.sliders = [];\n\t\n\t        for (var i = 0; i < this._numberOfSliders; i++) {\n\t          var container = document.createElement(\"span\");\n\t\n\t          var slider = new SingleSlider(container, {\n\t            scale: [min, max],\n\t            step: step,\n\t            mode: \"absolute\",\n\t            orientation: \"vertical\",\n\t            value: this.values[i],\n\t            hasKnob: false,\n\t            component: true }, this.update.bind(this, i));\n\t          slider.multislider = this;\n\t\n\t          slider.index = i;\n\t          if (touch.exists) {\n\t            slider.bar.index = i;\n\t            slider.fillbar.index = i;\n\t            slider.preClick = slider.preMove = slider.preRelease = function () {};\n\t            slider.click = slider.move = slider.release = function () {};\n\t            slider.preTouch = slider.preTouchMove = slider.preTouchRelease = function () {};\n\t            slider.touch = slider.touchMove = slider.touchRelease = function () {};\n\t          }\n\t\n\t          this.sliders.push(slider);\n\t          this.element.appendChild(container);\n\t        }\n\t        if (touch.exists) {\n\t          this.addTouchListeners();\n\t        }\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        for (var i = 0; i < this.sliders.length; i++) {\n\t          this.sliders[i].colors = this.colors;\n\t          this.sliders[i].colorInterface();\n\t        }\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        var sliderWidth = this.width / this.sliders.length;\n\t        var sliderHeight = this.height;\n\t\n\t        for (var i = 0; i < this.sliders.length; i++) {\n\t          this.sliders[i].resize(sliderWidth, sliderHeight);\n\t          this.sliders[i].customStyle();\n\t        }\n\t      }\n\t    },\n\t    update: {\n\t      value: function update(index, value) {\n\t        this.emit(\"change\", {\n\t          index: index,\n\t          value: value\n\t        });\n\t      }\n\t    },\n\t    addTouchListeners: {\n\t      value: function addTouchListeners() {\n\t        var _this = this;\n\t\n\t        this.preClick = this.preMove = this.preRelease = function () {};\n\t        this.click = this.move = this.release = function () {};\n\t        this.preTouch = this.preTouchMove = this.preTouchRelease = function () {};\n\t        this.touch = this.touchMove = this.touchRelease = function () {};\n\t\n\t        this.currentElement = false;\n\t\n\t        this.element.addEventListener(\"touchstart\", function (e) {\n\t          var element = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n\t          var slider = _this.sliders[element.index];\n\t          if (!slider.offset) {\n\t            slider.offset = dom.findPosition(slider.element);\n\t          }\n\t          slider.mouse = dom.locateMouse(e, slider.offset);\n\t          slider.down();\n\t          _this.currentElement = element.index;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t\n\t        this.element.addEventListener(\"touchmove\", function (e) {\n\t          var element = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n\t          var slider = _this.sliders[element.index];\n\t          if (!slider.offset) {\n\t            slider.offset = dom.findPosition(slider.element);\n\t          }\n\t          slider.mouse = dom.locateMouse(e, slider.offset);\n\t          if (element.index !== _this.currentElement) {\n\t            if (_this.currentElement >= 0) {\n\t              var pastslider = _this.sliders[_this.currentElement];\n\t              pastslider.up();\n\t            }\n\t            slider.down();\n\t          } else {\n\t            slider.slide();\n\t          }\n\t          _this.currentElement = element.index;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t\n\t        this.element.addEventListener(\"touchend\", function (e) {\n\t          // no touches to calculate because none remaining\n\t          var slider = _this.sliders[_this.currentElement];\n\t          slider.up();\n\t          _this.interacting = false;\n\t          _this.currentElement = false;\n\t          e.preventDefault();\n\t          e.stopPropagation();\n\t        });\n\t      }\n\t    },\n\t    numberOfSliders: {\n\t\n\t      /**\n\t      Get or set the number of sliders\n\t      @type {Number}\n\t      */\n\t\n\t      get: function () {\n\t        return this.sliders.length;\n\t      },\n\t      set: function (v) {\n\t        if (v === this.sliders.length) {\n\t          return;\n\t        }\n\t        this.sliders.forEach(function (slider) {\n\t          slider.destroy();\n\t        });\n\t        this.empty();\n\t        this._numberOfSliders = v;\n\t        this.buildInterface();\n\t      }\n\t    },\n\t    min: {\n\t\n\t      /**\n\t      Lower limit of the multislider's output range\n\t      @type {number}\n\t      @example multislider.min = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this.sliders[0].min;\n\t      },\n\t      set: function (v) {\n\t        this.sliders.forEach(function (slider) {\n\t          slider.min = v;\n\t        });\n\t      }\n\t    },\n\t    max: {\n\t\n\t      /**\n\t      Upper limit of the multislider's output range\n\t      @type {number}\n\t      @example multislider.max = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this.sliders[0].max;\n\t      },\n\t      set: function (v) {\n\t        this.sliders.forEach(function (slider) {\n\t          slider.max = v;\n\t        });\n\t      }\n\t    },\n\t    step: {\n\t\n\t      /**\n\t      The increment that the multislider's value changes by.\n\t      @type {number}\n\t      @example multislider.step = 5;\n\t      */\n\t\n\t      get: function () {\n\t        return this.sliders[0].step;\n\t      },\n\t      set: function (v) {\n\t        this.sliders.forEach(function (slider) {\n\t          slider.step = v;\n\t        });\n\t      }\n\t    },\n\t    setSlider: {\n\t\n\t      /**\n\t      Set the value of an individual slider\n\t      @param index {number} Slider index\n\t      @param value {number} New slider value\n\t      @example\n\t      // Set the first slider to value 0.5\n\t      multislider.setSlider(0,0.5)\n\t      */\n\t\n\t      value: function setSlider(index, value) {\n\t        this.sliders[index].value = value;\n\t        this.emit(\"change\", {\n\t          index: index,\n\t          value: value\n\t        });\n\t      }\n\t    },\n\t    setAllSliders: {\n\t\n\t      /**\n\t      Set the value of all sliders at once. If the size of the input array does not match the current number of sliders, the value array will repeat until all sliders have been set. I.e. an input array of length 1 will set all sliders to that value.\n\t      @param values {Array} All slider values\n\t      @example\n\t      multislider.setAllSliders([0.2,0.3,0.4,0.5,0.6])\n\t      */\n\t\n\t      value: function setAllSliders(values) {\n\t        var _this = this;\n\t\n\t        this.values = values;\n\t        this.sliders.forEach(function (slider, i) {\n\t          slider.value = values[i % values.length];\n\t          _this.emit(\"change\", {\n\t            index: i,\n\t            value: slider.value\n\t          });\n\t        });\n\t      }\n\t    }\n\t  });\n\t\n\t  return Multislider;\n\t})(Interface);\n\t\n\tmodule.exports = Multislider;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\t\n\tvar Interaction = _interopRequireWildcard(__webpack_require__(12));\n\t\n\tvar SliderTemplate = (function (_Interface) {\n\t  function SliderTemplate(args, options, defaults) {\n\t    _classCallCheck(this, SliderTemplate);\n\t\n\t    _get(Object.getPrototypeOf(SliderTemplate.prototype), \"constructor\", this).call(this, args, options, defaults);\n\t\n\t    this.orientation = this.settings.orientation;\n\t\n\t    //  this.mode = this.settings.mode;\n\t\n\t    this.hasKnob = this.settings.hasKnob;\n\t\n\t    // this.step should eventually be get/set\n\t    // updating it will update the _value step model\n\t    //  this.step = this.settings.step; // float\n\t\n\t    this._value = new Step(this.settings.scale[0], this.settings.scale[1], this.settings.step, this.settings.value);\n\t\n\t    this.init();\n\t\n\t    this.position = new Interaction.Handle(this.settings.mode, this.orientation, [0, this.width], [this.height, 0]);\n\t    this.position.value = this._value.normalized;\n\t\n\t    this.value = this._value.value;\n\t\n\t    this.emit(\"change\", this.value);\n\t  }\n\t\n\t  _inherits(SliderTemplate, _Interface);\n\t\n\t  _createClass(SliderTemplate, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.bar = svg.create(\"rect\");\n\t        this.fillbar = svg.create(\"rect\");\n\t        this.knob = svg.create(\"circle\");\n\t\n\t        this.element.appendChild(this.bar);\n\t        this.element.appendChild(this.fillbar);\n\t        this.element.appendChild(this.knob);\n\t\n\t        this.sizeInterface();\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        if (!this.settings.orientation) {\n\t          if (this.width < this.height) {\n\t            this.orientation = \"vertical\";\n\t          } else {\n\t            this.orientation = \"horizontal\";\n\t          }\n\t        }\n\t\n\t        var x = undefined,\n\t            y = undefined,\n\t            w = undefined,\n\t            h = undefined,\n\t            barOffset = undefined,\n\t            cornerRadius = undefined;\n\t        this.knobData = {\n\t          level: 0,\n\t          r: 0\n\t        };\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.thickness = this.width / 2;\n\t          x = this.width / 2;\n\t          y = 0;\n\t          w = this.thickness;\n\t          h = this.height;\n\t          this.knobData.r = this.thickness * 0.8;\n\t          this.knobData.level = h - this.normalized * h;\n\t          barOffset = \"translate(\" + this.thickness * -1 / 2 + \",0)\";\n\t          cornerRadius = w / 2;\n\t        } else {\n\t          this.thickness = this.height / 2;\n\t          x = 0;\n\t          y = this.height / 2;\n\t          w = this.width;\n\t          h = this.thickness;\n\t          this.knobData.r = this.thickness * 0.8;\n\t          this.knobData.level = this.normalized * w;\n\t          barOffset = \"translate(0,\" + this.thickness * -1 / 2 + \")\";\n\t          cornerRadius = h / 2;\n\t        }\n\t\n\t        this.bar.setAttribute(\"x\", x);\n\t        this.bar.setAttribute(\"y\", y);\n\t        this.bar.setAttribute(\"transform\", barOffset);\n\t        this.bar.setAttribute(\"rx\", cornerRadius); // corner radius\n\t        this.bar.setAttribute(\"ry\", cornerRadius);\n\t        this.bar.setAttribute(\"width\", w);\n\t        this.bar.setAttribute(\"height\", h);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.fillbar.setAttribute(\"x\", x);\n\t          this.fillbar.setAttribute(\"y\", this.knobData.level);\n\t          this.fillbar.setAttribute(\"width\", w);\n\t          this.fillbar.setAttribute(\"height\", h - this.knobData.level);\n\t        } else {\n\t          this.fillbar.setAttribute(\"x\", 0);\n\t          this.fillbar.setAttribute(\"y\", y);\n\t          this.fillbar.setAttribute(\"width\", this.knobData.level);\n\t          this.fillbar.setAttribute(\"height\", h);\n\t        }\n\t        this.fillbar.setAttribute(\"transform\", barOffset);\n\t        this.fillbar.setAttribute(\"rx\", cornerRadius);\n\t        this.fillbar.setAttribute(\"ry\", cornerRadius);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.knob.setAttribute(\"cx\", x);\n\t          this.knob.setAttribute(\"cy\", this.knobData.level);\n\t        } else {\n\t          this.knob.setAttribute(\"cx\", this.knobData.level);\n\t          this.knob.setAttribute(\"cy\", y);\n\t        }\n\t        this.knob.setAttribute(\"r\", this.knobData.r);\n\t\n\t        if (this.position) {\n\t          this.position.resize([0, this.width], [this.height, 0]);\n\t        }\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t\n\t        this.bar.setAttribute(\"fill\", this.colors.fill);\n\t        this.fillbar.setAttribute(\"fill\", this.colors.accent);\n\t        this.knob.setAttribute(\"fill\", this.colors.accent);\n\t        if (!this.hasKnob) {\n\t          this.knob.setAttribute(\"fill\", \"none\");\n\t        }\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.clicked) {\n\t          this.knobData.r = this.thickness * 0.75;\n\t        }\n\t        this.knob.setAttribute(\"r\", this.knobData.r);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.knobData.level = this._value.normalized * this.height;\n\t          this.knob.setAttribute(\"cy\", this.height - this.knobData.level);\n\t          this.fillbar.setAttribute(\"y\", this.height - this.knobData.level);\n\t          this.fillbar.setAttribute(\"height\", this.knobData.level);\n\t        } else {\n\t          this.knobData.level = this._value.normalized * this.width;\n\t          this.knob.setAttribute(\"cx\", this.knobData.level);\n\t          this.fillbar.setAttribute(\"x\", 0);\n\t          this.fillbar.setAttribute(\"width\", this.knobData.level);\n\t        }\n\t      }\n\t    },\n\t    down: {\n\t      value: function down() {\n\t        this.clicked = true;\n\t        this.knobData.r = this.thickness * 0.9;\n\t        this.position.anchor = this.mouse;\n\t        this.slide();\n\t      }\n\t    },\n\t    slide: {\n\t      value: function slide() {\n\t        if (this.clicked) {\n\t          this.position.update(this.mouse);\n\t          this.value = this._value.updateNormal(this.position.value);\n\t          this.emit(\"change\", this.value);\n\t        }\n\t      }\n\t    },\n\t    up: {\n\t      value: function up() {\n\t        this.clicked = false;\n\t        this.render();\n\t      }\n\t    },\n\t    normalized: {\n\t      get: function () {\n\t        return this._value.normalized;\n\t      }\n\t    },\n\t    value: {\n\t\n\t      /**\n\t      The slider's current value. If set manually, will update the interface and trigger the output event.\n\t      @type {number}\n\t      @example slider.value = 10;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.value;\n\t      },\n\t      set: function (v) {\n\t        this._value.update(v);\n\t        this.position.value = this._value.normalized;\n\t        this.render();\n\t      }\n\t    },\n\t    min: {\n\t\n\t      /**\n\t      Lower limit of the sliders's output range\n\t      @type {number}\n\t      @example slider.min = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.min;\n\t      },\n\t      set: function (v) {\n\t        this._value.min = v;\n\t      }\n\t    },\n\t    max: {\n\t\n\t      /**\n\t      Upper limit of the slider's output range\n\t      @type {number}\n\t      @example slider.max = 1000;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.max;\n\t      },\n\t      set: function (v) {\n\t        this._value.max = v;\n\t      }\n\t    },\n\t    step: {\n\t\n\t      /**\n\t      The increment that the slider's value changes by.\n\t      @type {number}\n\t      @example slider.step = 5;\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.step;\n\t      },\n\t      set: function (v) {\n\t        this._value.step = v;\n\t      }\n\t    },\n\t    mode: {\n\t\n\t      /**\n\t      Absolute mode (slider's value jumps to mouse click position) or relative mode (mouse drag changes value relative to its current position). Default: \"relative\".\n\t      @type {string}\n\t      @example slider.mode = \"relative\";\n\t      */\n\t\n\t      get: function () {\n\t        return this.position.mode;\n\t      },\n\t      set: function (v) {\n\t        this.position.mode = v;\n\t      }\n\t    }\n\t  });\n\t\n\t  return SliderTemplate;\n\t})(Interface);\n\t\n\tmodule.exports = SliderTemplate;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar svg = __webpack_require__(4);\n\tvar math = __webpack_require__(5);\n\tvar Interface = __webpack_require__(6);\n\tvar Step = __webpack_require__(11);\n\t\n\tvar Interaction = _interopRequireWildcard(__webpack_require__(12));\n\t\n\t/**\n\t* Pan\n\t*\n\t* @description Stereo crossfader.\n\t*\n\t* @demo <span nexus-ui=\"pan\"></span>\n\t*\n\t* @example\n\t* var pan = new Nexus.Pan('#target')\n\t*\n\t* @output\n\t* change\n\t* Fires any time the interface's value changes. <br>\n\t* The event data is an object containing the interface's <i>value</i> (-1 to 1), as well as <i>L</i> and <i>R</i> amplitude values (0-1) for left and right speakers, calculated by a square-root crossfade algorithm.\n\t*\n\t* @outputexample\n\t* pan.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*\n\t*/\n\t\n\tvar Pan = (function (_Interface) {\n\t  function Pan() {\n\t    _classCallCheck(this, Pan);\n\t\n\t    var options = [\"scale\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [120, 20],\n\t      orientation: \"horizontal\",\n\t      mode: \"relative\",\n\t      scale: [-1, 1],\n\t      step: 0,\n\t      value: 0,\n\t      hasKnob: true\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Pan.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.orientation = this.settings.orientation;\n\t\n\t    this.mode = this.settings.mode;\n\t\n\t    this.hasKnob = this.settings.hasKnob;\n\t\n\t    // this.step should eventually be get/set\n\t    // updating it will update the _value step model\n\t    this.step = this.settings.step; // float\n\t\n\t    this._value = new Step(this.settings.scale[0], this.settings.scale[1], this.settings.step, this.settings.value);\n\t\n\t    this.init();\n\t\n\t    this.position = new Interaction.Handle(this.mode, this.orientation, [0, this.width], [this.height, 0]);\n\t    this.position.value = this._value.normalized;\n\t\n\t    this.value = this._value.value;\n\t\n\t    this.emit(\"change\", this.value);\n\t  }\n\t\n\t  _inherits(Pan, _Interface);\n\t\n\t  _createClass(Pan, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t\n\t        this.bar = svg.create(\"rect\");\n\t        this.knob = svg.create(\"circle\");\n\t\n\t        this.element.appendChild(this.bar);\n\t        this.element.appendChild(this.knob);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        if (this.position) {\n\t          this.position.resize([0, this.width], [this.height, 0]);\n\t        }\n\t\n\t        if (this.width < this.height) {\n\t          this.orientation = \"vertical\";\n\t        } else {\n\t          this.orientation = \"horizontal\";\n\t        }\n\t\n\t        var x = undefined,\n\t            y = undefined,\n\t            w = undefined,\n\t            h = undefined,\n\t            barOffset = undefined,\n\t            cornerRadius = undefined;\n\t        this.knobData = {\n\t          level: 0,\n\t          r: 0\n\t        };\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.thickness = this.width / 2;\n\t          x = this.width / 2;\n\t          y = 0;\n\t          w = this.thickness;\n\t          h = this.height;\n\t          this.knobData.r = this.thickness * 0.8;\n\t          this.knobData.level = h - this.knobData.r - this.normalized * (h - this.knobData.r * 2);\n\t          barOffset = \"translate(\" + this.thickness * -1 / 2 + \",0)\";\n\t          cornerRadius = w / 2;\n\t        } else {\n\t          this.thickness = this.height / 2;\n\t          x = 0;\n\t          y = this.height / 2;\n\t          w = this.width;\n\t          h = this.thickness;\n\t          this.knobData.r = this.thickness * 0.8;\n\t          this.knobData.level = this.normalized * (w - this.knobData.r * 2) + this.knobData.r;\n\t          barOffset = \"translate(0,\" + this.thickness * -1 / 2 + \")\";\n\t          cornerRadius = h / 2;\n\t        }\n\t\n\t        this.bar.setAttribute(\"x\", x);\n\t        this.bar.setAttribute(\"y\", y);\n\t        this.bar.setAttribute(\"transform\", barOffset);\n\t        this.bar.setAttribute(\"rx\", cornerRadius); // corner radius\n\t        this.bar.setAttribute(\"ry\", cornerRadius);\n\t        this.bar.setAttribute(\"width\", w);\n\t        this.bar.setAttribute(\"height\", h);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.knob.setAttribute(\"cx\", x);\n\t          this.knob.setAttribute(\"cy\", this.knobData.level);\n\t        } else {\n\t          this.knob.setAttribute(\"cx\", this.knobData.level);\n\t          this.knob.setAttribute(\"cy\", y);\n\t        }\n\t        this.knob.setAttribute(\"r\", this.knobData.r);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t\n\t        this.bar.setAttribute(\"fill\", this.colors.fill);\n\t        this.knob.setAttribute(\"fill\", this.colors.accent);\n\t\n\t        if (!this.hasKnob) {\n\t          this.knob.setAttribute(\"fill\", \"transparent\");\n\t        }\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        if (!this.clicked) {\n\t          this.knobData.r = this.thickness * 0.75;\n\t        }\n\t        this.knob.setAttribute(\"r\", this.knobData.r);\n\t\n\t        if (this.orientation === \"vertical\") {\n\t          this.knobData.level = this.knobData.r + this._value.normalized * (this.height - this.knobData.r * 2);\n\t          this.knob.setAttribute(\"cy\", this.height - this.knobData.level);\n\t        } else {\n\t          this.knobData.level = this._value.normalized * (this.width - this.knobData.r * 2) + this.knobData.r;\n\t          this.knob.setAttribute(\"cx\", this.knobData.level);\n\t        }\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.knobData.r = this.thickness * 0.9;\n\t        this.position.anchor = this.mouse;\n\t        this.move();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.clicked) {\n\t          this.position.update(this.mouse);\n\t\n\t          this.value = this._value.updateNormal(this.position.value);\n\t\n\t          this.emit(\"change\", {\n\t            value: this.value,\n\t            L: Math.pow(math.scale(this.value, -1, 1, 1, 0), 2),\n\t            R: Math.pow(math.scale(this.value, -1, 1, 0, 1), 2)\n\t          });\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t        this.render();\n\t      }\n\t    },\n\t    value: {\n\t\n\t      /**\n\t      The position of crossfader, from -1 (left) to 1 (right). Setting this value updates the interface and triggers the output event.\n\t      @type {number}\n\t      */\n\t\n\t      get: function () {\n\t        return this._value.value;\n\t      },\n\t      set: function (value) {\n\t        this._value.update(value);\n\t        this.position.value = this._value.normalized;\n\t        this.emit(\"change\", {\n\t          value: this.value,\n\t          L: Math.pow(math.scale(this.value, -1, 1, 1, 0), 2),\n\t          R: Math.pow(math.scale(this.value, -1, 1, 0, 1), 2)\n\t        });\n\t        this.render();\n\t      }\n\t    },\n\t    normalized: {\n\t      get: function () {\n\t        return this._value.normalized;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Pan;\n\t})(Interface);\n\t\n\tmodule.exports = Pan;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = __webpack_require__(5);\n\tvar svg = __webpack_require__(4);\n\tvar Interface = __webpack_require__(6);\n\t\n\tvar Point = function Point(point, envelope) {\n\t\n\t  this.x = point.x;\n\t  this.y = point.y;\n\t  this.envelope = envelope;\n\t\n\t  this.element = svg.create(\"circle\");\n\t  this.element.setAttribute(\"fill\", this.envelope.colors.accent);\n\t\n\t  this.envelope.element.appendChild(this.element);\n\t\n\t  this.resize = function () {\n\t    var r = ~ ~(Math.min(this.envelope.width, this.envelope.height) / 50) + 2;\n\t    this.element.setAttribute(\"r\", r);\n\t  };\n\t\n\t  this.move = function (x, y) {\n\t\n\t    this.x = x || x === 0 ? x : this.x;\n\t    this.y = y || y === 0 ? y : this.y;\n\t\n\t    if (this.envelope.nodes.indexOf(this) >= 0) {\n\t\n\t      var prevIndex = this.envelope.nodes.indexOf(this) - 1;\n\t      var nextIndex = this.envelope.nodes.indexOf(this) + 1;\n\t\n\t      var prevNode = this.envelope.nodes[prevIndex];\n\t      var nextNode = this.envelope.nodes[nextIndex];\n\t\n\t      var lowX = prevIndex >= 0 ? prevNode.x : 0;\n\t      var highX = nextIndex < this.envelope.nodes.length ? nextNode.x : 1;\n\t\n\t      if (this.x < lowX) {\n\t        this.x = lowX;\n\t      }\n\t      if (this.x > highX) {\n\t        this.x = highX;\n\t      }\n\t    }\n\t\n\t    this.location = this.getCoordinates();\n\t    this.element.setAttribute(\"cx\", this.location.x);\n\t    this.element.setAttribute(\"cy\", this.location.y);\n\t  };\n\t\n\t  this.getCoordinates = function () {\n\t    return {\n\t      x: this.x * this.envelope.width,\n\t      y: (1 - this.y) * this.envelope.height\n\t    };\n\t  };\n\t\n\t  this.move(this.x, this.y);\n\t  this.resize();\n\t\n\t  this.destroy = function () {\n\t    this.envelope.element.removeChild(this.element);\n\t  };\n\t};\n\t\n\t/**\n\t* Envelope\n\t*\n\t* @description Interactive linear ramp visualization.\n\t*\n\t* @demo <span nexus-ui=\"envelope\"></span>\n\t*\n\t* @example\n\t* var envelope = new Nexus.Envelope('#target')\n\t*\n\t* @example\n\t* var envelope = new Nexus.Envelope('#target',{\n\t*   'size': [300,150],\n\t*   'points': [\n\t*     {\n\t*       x: 0.1,\n\t*       y: 0.4\n\t*     },\n\t*     {\n\t*       x: 0.35,\n\t*       y: 0.6\n\t*     },\n\t*     {\n\t*       x: 0.65,\n\t*       y: 0.2\n\t*     },\n\t*     {\n\t*       x: 0.9,\n\t*       y: 0.4\n\t*     },\n\t*   ]\n\t* })\n\t*\n\t* @output\n\t* change\n\t* Fires any time a node is moved. <br>\n\t* The event data is an array of point locations. Each item in the array is an object containing <i>x</i> and <i>y</i> properties describing the location of a point on the envelope.\n\t*\n\t* @outputexample\n\t* envelope.on('change',function(v) {\n\t*   console.log(v);\n\t* })\n\t*\n\t*/\n\t\n\tvar Envelope = (function (_Interface) {\n\t  function Envelope() {\n\t    _classCallCheck(this, Envelope);\n\t\n\t    var options = [\"value\"];\n\t\n\t    var defaults = {\n\t      size: [300, 150],\n\t      points: [{\n\t        x: 0.1,\n\t        y: 0.4\n\t      }, {\n\t        x: 0.35,\n\t        y: 0.6\n\t      }, {\n\t        x: 0.65,\n\t        y: 0.2\n\t      }, {\n\t        x: 0.9,\n\t        y: 0.4\n\t      }]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Envelope.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.points = this.settings.points;\n\t\n\t    this.nodes = [];\n\t\n\t    this.selected = false;\n\t\n\t    this.init();\n\t  }\n\t\n\t  _inherits(Envelope, _Interface);\n\t\n\t  _createClass(Envelope, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t        var _this = this;\n\t\n\t        this.points.forEach(function (point) {\n\t          var node = new Point(point, _this);\n\t          _this.nodes.push(node);\n\t        });\n\t\n\t        this.sortPoints();\n\t\n\t        this.line = svg.create(\"polyline\");\n\t        this.line.setAttribute(\"stroke-width\", 2);\n\t        this.line.setAttribute(\"fill\", \"none\");\n\t\n\t        this.element.appendChild(this.line);\n\t\n\t        this.fill = svg.create(\"polyline\");\n\t        this.fill.setAttribute(\"fill-opacity\", \"0.2\");\n\t\n\t        this.element.appendChild(this.fill);\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t\n\t        for (var i = 0; i < this.nodes.length; i++) {\n\t          this.nodes[i].resize();\n\t          this.nodes[i].move();\n\t        }\n\t\n\t        this.render();\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        var _this = this;\n\t\n\t        this.element.style.backgroundColor = this.colors.fill;\n\t        this.line.setAttribute(\"stroke\", this.colors.accent);\n\t        this.fill.setAttribute(\"fill\", this.colors.accent);\n\t        this.nodes.forEach(function (node) {\n\t          node.element.setAttribute(\"fill\", _this.colors.accent);\n\t        });\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t        //  this.nodes[this.selected].move( this.points )\n\t        this.calculatePath();\n\t      }\n\t    },\n\t    calculatePoints: {\n\t      value: function calculatePoints() {\n\t        var _this = this;\n\t\n\t        this.points = [];\n\t        this.nodes.forEach(function (node) {\n\t          _this.points.push({ x: node.x, y: node.y });\n\t        });\n\t      }\n\t    },\n\t    calculatePath: {\n\t      value: function calculatePath() {\n\t\n\t        //stroke data\n\t        var data = \"0 \" + this.nodes[0].location.y + \", \";\n\t\n\t        // data should be re-ordered based on x location.\n\t        // whatever function adds a node should add it at the right index\n\t\n\t        this.nodes.forEach(function (node) {\n\t          //  let location = node.getCoordinates();\n\t          data += node.location.x + \" \" + node.location.y + \", \";\n\t        });\n\t\n\t        //  data += point.x*this.width+' '+ point.y*this.height+', ';\n\t        data += this.width + \" \" + this.nodes[this.nodes.length - 1].location.y;\n\t\n\t        this.line.setAttribute(\"points\", data);\n\t\n\t        // fill data\n\t        // add bottom corners\n\t\n\t        data += \", \" + this.width + \" \" + this.height + \", \";\n\t        data += \"0 \" + this.height;\n\t\n\t        this.fill.setAttribute(\"points\", data);\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        // find nearest node and set this.selected (index)\n\t        this.hasMoved = false;\n\t        this.selected = this.findNearestNode();\n\t\n\t        this.nodes[this.selected].move(this.mouse.x / this.width, 1 - this.mouse.y / this.height);\n\t        this.scaleNode(this.selected);\n\t\n\t        // must do this b/c new node may have been created\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t        this.render();\n\t      }\n\t    },\n\t    move: {\n\t      value: function move() {\n\t        if (this.clicked) {\n\t          this.mouse.x = math.clip(this.mouse.x, 0, this.width);\n\t          this.hasMoved = true;\n\t\n\t          this.nodes[this.selected].move(this.mouse.x / this.width, 1 - this.mouse.y / this.height);\n\t          this.scaleNode(this.selected);\n\t\n\t          this.calculatePoints();\n\t          this.emit(\"change\", this.points);\n\t          this.render();\n\t        }\n\t      }\n\t    },\n\t    release: {\n\t      value: function release() {\n\t\n\t        if (!this.hasMoved) {\n\t          this.nodes[this.selected].destroy();\n\t          this.nodes.splice(this.selected, 1);\n\t        }\n\t\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t        this.render();\n\t\n\t        // reset this.selected\n\t        this.selected = null;\n\t      }\n\t    },\n\t    findNearestNode: {\n\t      value: function findNearestNode() {\n\t        var nearestIndex = null;\n\t        // set this unreasonably high so that every distance will be lower than it.\n\t        var nearestDist = 10000;\n\t        var before = false;\n\t        var x = this.mouse.x / this.width;\n\t        var y = 1 - this.mouse.y / this.height;\n\t        var nodes = this.nodes;\n\t        for (var i = 0; i < nodes.length; i++) {\n\t\n\t          // calculate the distance from mouse to this node using pythagorean theorem\n\t          var distance = Math.sqrt(Math.pow(nodes[i].x - x, 2) + Math.pow(nodes[i].y - y, 2));\n\t\n\t          // if this distance is less than the previous shortest distance, use this index\n\t          if (distance < nearestDist) {\n\t            nearestDist = distance;\n\t            nearestIndex = i;\n\t            before = x > nodes[i].x;\n\t          }\n\t        }\n\t\n\t        // if not very close to any node, create a node\n\t        if (nearestDist > 0.07) {\n\t\n\t          nearestIndex = this.getIndexFromX(this.mouse.x / this.width);\n\t\n\t          this.nodes.splice(nearestIndex, 0, new Point({\n\t            x: this.mouse.x / this.width,\n\t            y: 1 - this.mouse.y / this.height\n\t          }, this));\n\t          this.hasMoved = true;\n\t        }\n\t\n\t        return nearestIndex;\n\t      }\n\t    },\n\t    getIndexFromX: {\n\t      value: function getIndexFromX(x) {\n\t        var _this = this;\n\t\n\t        var index = 0;\n\t        this.nodes.forEach(function (node, i) {\n\t          if (_this.nodes[i].x <= x) {\n\t            index = i + 1;\n\t          }\n\t        });\n\t        return index;\n\t      }\n\t    },\n\t    scaleNode: {\n\t      value: function scaleNode(i) {\n\t\n\t        var clippedX = math.clip(this.nodes[i].x, 0, 1);\n\t        var clippedY = math.clip(this.nodes[i].y, 0, 1);\n\t\n\t        this.nodes[i].move(clippedX, clippedY);\n\t      }\n\t    },\n\t    sortPoints: {\n\t\n\t      /**\n\t      Sort the this.points array from left-most point to right-most point. You should not regularly need to use this, however it may be useful if the points get unordered.\n\t      */\n\t\n\t      value: function sortPoints() {\n\t        this.nodes.sort(function (a, b) {\n\t          return a.x > b.x;\n\t        });\n\t      }\n\t    },\n\t    addPoint: {\n\t\n\t      /**\n\t      Add a breakpoint on the envelope.\n\t      @param x {number} x location of the point, normalized (0-1)\n\t      @param y {number} y location of the point, normalized (0-1)\n\t      */\n\t\n\t      value: function addPoint(x, y) {\n\t        var index = 0;\n\t\n\t        this.sortPoints();\n\t\n\t        for (var i = 0; i < this.nodes.length; i++) {\n\t          if (x < this.nodes[i].x) {\n\t            index = i;\n\t            break;\n\t          }\n\t        }\n\t\n\t        this.nodes.splice(index, 0, new Point({\n\t          x: x,\n\t          y: y\n\t        }, this));\n\t\n\t        this.scaleNode(index);\n\t\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t\n\t        this.render();\n\t      }\n\t    },\n\t    scan: {\n\t\n\t      /**\n\t      Find the level at a certain x location on the envelope.\n\t      @param x {number} The x location to find the level of, normalized 0-1\n\t      */\n\t\n\t      value: function scan(x) {\n\t        // find surrounding points\n\t        var nextIndex = this.getIndexFromX(x);\n\t        var priorIndex = nextIndex - 1;\n\t        if (priorIndex < 0) {\n\t          priorIndex = 0;\n\t        }\n\t        if (nextIndex >= this.nodes.length) {\n\t          nextIndex = this.nodes.length - 1;\n\t        }\n\t        var priorPoint = this.nodes[priorIndex];\n\t        var nextPoint = this.nodes[nextIndex];\n\t        var loc = math.scale(x, priorPoint.x, nextPoint.x, 0, 1);\n\t        var value = math.interp(loc, priorPoint.y, nextPoint.y);\n\t        this.emit(\"scan\", value);\n\t        return value;\n\t      }\n\t    },\n\t    movePoint: {\n\t\n\t      /**\n\t      Move a breakpoint on the envelope.\n\t      @param index {number} The index of the breakpoint to move\n\t      @param x {number} New x location, normalized 0-1\n\t      @param y {number} New y location, normalized 0-1\n\t      */\n\t\n\t      value: function movePoint(index, x, y) {\n\t        this.nodes[index].move(x, y);\n\t        this.scaleNode(index);\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t        this.render();\n\t      }\n\t    },\n\t    adjustPoint: {\n\t\n\t      /**\n\t      Move a breakpoint on the envelope by a certain amount.\n\t      @param index {number} The index of the breakpoint to move\n\t      @param xOffset {number} X displacement, normalized 0-1\n\t      @param yOffset {number} Y displacement, normalized 0-1\n\t      */\n\t\n\t      value: function adjustPoint(index, xOffset, yOffset) {\n\t        this.nodes[index].move(this.nodes[index].x + xOffset, this.nodes[index].y + yOffset);\n\t        this.scaleNode(index);\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t        this.render();\n\t      }\n\t    },\n\t    destroyPoint: {\n\t\n\t      /**\n\t      Remove a breakpoint from the envelope.\n\t      @param index {number} Index of the breakpoint to remove\n\t      */\n\t\n\t      value: function destroyPoint(index) {\n\t        this.nodes[index].destroy();\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t        this.render();\n\t      }\n\t    },\n\t    setPoints: {\n\t\n\t      /**\n\t      Remove all existing breakpoints and add an entirely new set of breakpoints.\n\t      @param allPoints {array} An array of objects with x/y properties (normalized 0-1). Each object in the array specifices the x/y location of a new breakpoint to be added.\n\t      */\n\t\n\t      value: function setPoints(allPoints) {\n\t        var _this = this;\n\t\n\t        this.nodes.forEach(function (point) {\n\t          point.destroy();\n\t        });\n\t        allPoints.forEach(function (point) {\n\t          _this.addPoint(point.x, point.y);\n\t        });\n\t        this.calculatePoints();\n\t        this.emit(\"change\", this.points);\n\t        this.render();\n\t      }\n\t    }\n\t  });\n\t\n\t  return Envelope;\n\t})(Interface);\n\t\n\tmodule.exports = Envelope;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar dom = __webpack_require__(7);\n\t//let math = require('../util/math');\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\t* Spectrogram\n\t*\n\t* @description Audio spectrum visualization\n\t*\n\t* @demo <span nexus-ui=\"spectrogram\"></span>\n\t*\n\t* @example\n\t* var spectrogram = new Nexus.Spectrogram('#target')\n\t*\n\t* @example\n\t* var spectrogram = new Nexus.Spectrogram('#target',{\n\t*   'size': [300,150]\n\t* })\n\t*\n\t* @output\n\t* &nbsp;\n\t* No events\n\t*\n\t*/\n\t\n\tvar Spectrogram = (function (_Interface) {\n\t  function Spectrogram() {\n\t    _classCallCheck(this, Spectrogram);\n\t\n\t    var options = [\"scale\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [300, 150]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Spectrogram.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.context = Nexus.context; // jshint ignore:line\n\t\n\t    this.analyser = this.context.createAnalyser();\n\t    this.analyser.fftSize = 2048;\n\t    this.bufferLength = this.analyser.frequencyBinCount;\n\t    this.dataArray = new Uint8Array(this.bufferLength);\n\t\n\t    this.active = true;\n\t\n\t    this.source = false;\n\t\n\t    this.init();\n\t  }\n\t\n\t  _inherits(Spectrogram, _Interface);\n\t\n\t  _createClass(Spectrogram, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.canvas = new dom.SmartCanvas(this.parent);\n\t        this.element = this.canvas.element;\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t        this.canvas.resize(this.width, this.height);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.canvas.element.style.backgroundColor = this.colors.fill;\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t\n\t        if (this.active) {\n\t          requestAnimationFrame(this.render.bind(this));\n\t        }\n\t\n\t        this.analyser.getByteFrequencyData(this.dataArray);\n\t\n\t        this.canvas.context.fillStyle = this.colors.fill;\n\t        this.canvas.context.fillRect(0, 0, this.canvas.element.width, this.canvas.element.height);\n\t\n\t        if (this.source && this.dataArray) {\n\t\n\t          //console.log(this.dataArray);\n\t\n\t          var barWidth = this.canvas.element.width / this.bufferLength;\n\t          var barHeight = undefined;\n\t          var x = 0;\n\t\n\t          var definition = this.canvas.element.width / 50;\n\t\n\t          for (var i = 0; i < this.bufferLength; i = i + definition) {\n\t            barHeight = Math.max.apply(null, this.dataArray.subarray(i, i + definition));\n\t            barHeight /= 255;\n\t            barHeight *= this.canvas.element.height;\n\t\n\t            this.canvas.context.fillStyle = this.colors.accent;\n\t            this.canvas.context.fillRect(x, this.canvas.element.height - barHeight, barWidth * definition, barHeight);\n\t\n\t            x += barWidth * definition;\n\t          }\n\t        }\n\t      }\n\t    },\n\t    connect: {\n\t\n\t      /**\n\t      Equivalent to \"patching in\" an audio node to visualize.\n\t      @param node {AudioNode} The audio node to visualize\n\t      */\n\t\n\t      value: function connect(node) {\n\t        if (this.source) {\n\t          this.disconnect();\n\t        }\n\t        this.source = node;\n\t        this.source.connect(this.analyser);\n\t        this.render();\n\t      }\n\t    },\n\t    disconnect: {\n\t\n\t      /**\n\t      Stop visualizing the source node and disconnect it.\n\t      */\n\t\n\t      value: function disconnect() {\n\t        this.source.disconnect(this.analyser);\n\t        this.source = null;\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.active = !this.active;\n\t        this.render();\n\t      }\n\t    },\n\t    customDestroy: {\n\t      value: function customDestroy() {\n\t        this.active = false;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Spectrogram;\n\t})(Interface);\n\t\n\tmodule.exports = Spectrogram;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar dom = __webpack_require__(7);\n\tvar math = __webpack_require__(5);\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\t* Meter\n\t*\n\t* @description Stereo decibel meter\n\t*\n\t* @demo <span nexus-ui=\"meter\"></span>\n\t*\n\t* @example\n\t* var meter = new Nexus.Meter('#target')\n\t*\n\t* @example\n\t* var meter = new Nexus.Meter('#target',{\n\t*   size: [75,75]\n\t* })\n\t*\n\t* @output\n\t* &nbsp;\n\t* No events\n\t*\n\t*/\n\t\n\tvar Meter = (function (_Interface) {\n\t  function Meter() {\n\t    _classCallCheck(this, Meter);\n\t\n\t    var options = [\"scale\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [30, 100]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Meter.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.context = Nexus.context; // jshint ignore:line\n\t\n\t    this.channels = 2;\n\t\n\t    this.splitter = this.context.createChannelSplitter(this.channels);\n\t\n\t    this.analysers = [];\n\t\n\t    for (var i = 0; i < this.channels; i++) {\n\t      var analyser = this.context.createAnalyser();\n\t      this.splitter.connect(analyser, i);\n\t      analyser.fftSize = 1024;\n\t      analyser.smoothingTimeConstant = 1;\n\t      this.analysers.push(analyser);\n\t    }\n\t    this.bufferLength = this.analysers[0].frequencyBinCount;\n\t    this.dataArray = new Float32Array(this.bufferLength);\n\t\n\t    /*\n\t        // add linear gradient\n\t        var grd = canvasCtx.createLinearGradient(0, 0, 0, canvas.height);\n\t        // light blue\n\t        grd.addColorStop(0, '#000');\n\t        grd.addColorStop(0.2, '#bbb');\n\t        grd.addColorStop(0.4, '#d18');\n\t        // dark blue\n\t        grd.addColorStop(1, '#d18');\n\t        canvasCtx.fillStyle = grd; */\n\t\n\t    this.active = true;\n\t\n\t    this.db = -Infinity;\n\t\n\t    this.init();\n\t\n\t    this.meterWidth = this.canvas.element.width / this.channels;\n\t\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Meter, _Interface);\n\t\n\t  _createClass(Meter, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.canvas = new dom.SmartCanvas(this.parent);\n\t        this.element = this.canvas.element;\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t        this.canvas.resize(this.width, this.height);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.canvas.element.style.backgroundColor = this.colors.fill;\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t\n\t        if (this.active) {\n\t          requestAnimationFrame(this.render.bind(this));\n\t        }\n\t\n\t        this.canvas.context.fillStyle = this.colors.fill;\n\t        this.canvas.context.fillRect(0, 0, this.canvas.element.width, this.canvas.element.height);\n\t\n\t        for (var i = 0; i < this.analysers.length; i++) {\n\t\n\t          if (this.source) {\n\t\n\t            this.analysers[i].getFloatTimeDomainData(this.dataArray);\n\t\n\t            var rms = 0;\n\t\n\t            for (var _i = 0; _i < this.dataArray.length; _i++) {\n\t              rms += this.dataArray[_i] * this.dataArray[_i];\n\t            }\n\t\n\t            rms = Math.sqrt(rms / this.dataArray.length);\n\t\n\t            this.db = 20 * Math.log10(rms);\n\t          } else if (this.db > -200 && this.db !== -Infinity) {\n\t            this.db -= 1;\n\t          } else {\n\t            this.db = -Infinity;\n\t          }\n\t\n\t          //console.log(db)\n\t\n\t          if (this.db > -70) {\n\t\n\t            var linear = math.normalize(this.db, -70, 5);\n\t            var exp = linear * linear;\n\t            var y = math.scale(exp, 0, 1, this.element.height, 0);\n\t\n\t            this.canvas.context.fillStyle = this.colors.accent;\n\t            this.canvas.context.fillRect(this.meterWidth * i, y, this.meterWidth, this.canvas.element.height - y);\n\t\n\t            //console.log(\"rendering...\")\n\t          }\n\t        }\n\t      }\n\t    },\n\t    connect: {\n\t\n\t      /**\n\t      Equivalent to \"patching in\" an audio node to visualize.\n\t      @param node {AudioNode} The audio node to visualize\n\t      @param channels {number} (optional) The number of channels in the source node to watch. If not specified, the interface will look for a .channelCount property on the input node. If it does not exist, the interface will default to 1 channel.\n\t      */\n\t\n\t      value: function connect(node, channels) {\n\t        if (this.source) {\n\t          this.disconnect();\n\t        }\n\t        //this.dummy.disconnect(this.splitter);\n\t\n\t        if (channels) {\n\t          this.channels = channels;\n\t        } else if (node.channelCount) {\n\t          this.channels = node.channelCount;\n\t        } else {\n\t          this.channels = 2;\n\t        }\n\t        this.meterWidth = this.canvas.element.width / this.channels;\n\t\n\t        this.source = node;\n\t        this.source.connect(this.splitter);\n\t\n\t        //  this.render();\n\t      }\n\t    },\n\t    disconnect: {\n\t\n\t      /**\n\t      Stop visualizing the source node and disconnect it.\n\t      */\n\t\n\t      value: function disconnect() {\n\t\n\t        this.source.disconnect(this.splitter);\n\t        this.source = false;\n\t        //  this.dummy.connect(this.splitter);\n\t        this.meterWidth = this.canvas.element.width / this.channels;\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.active = !this.active;\n\t        this.render();\n\t      }\n\t    },\n\t    customDestroy: {\n\t      value: function customDestroy() {\n\t        this.active = false;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Meter;\n\t})(Interface);\n\t\n\tmodule.exports = Meter;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar dom = __webpack_require__(7);\n\tvar Interface = __webpack_require__(6);\n\t\n\t/**\n\t* Oscilloscope\n\t*\n\t* @description Visualizes a waveform's stream of values.\n\t*\n\t* @demo <span nexus-ui=\"oscilloscope\"></span>\n\t*\n\t* @example\n\t* var oscilloscope = new Nexus.Oscilloscope('#target')\n\t*\n\t* @example\n\t* var oscilloscope = new Nexus.Oscilloscope('#target',{\n\t*   'size': [300,150]\n\t* })\n\t*\n\t* @output\n\t* &nbsp;\n\t* No events\n\t*\n\t*/\n\t\n\tvar Oscilloscope = (function (_Interface) {\n\t  function Oscilloscope() {\n\t    _classCallCheck(this, Oscilloscope);\n\t\n\t    var options = [\"scale\", \"value\"];\n\t\n\t    var defaults = {\n\t      size: [300, 150]\n\t    };\n\t\n\t    _get(Object.getPrototypeOf(Oscilloscope.prototype), \"constructor\", this).call(this, arguments, options, defaults);\n\t\n\t    this.context = Nexus.context; // jshint ignore:line\n\t\n\t    this.analyser = this.context.createAnalyser();\n\t    this.analyser.fftSize = 2048;\n\t    this.bufferLength = this.analyser.frequencyBinCount;\n\t    this.dataArray = new Uint8Array(this.bufferLength);\n\t    this.analyser.getByteTimeDomainData(this.dataArray);\n\t\n\t    this.active = true;\n\t\n\t    this.source = false;\n\t\n\t    this.init();\n\t\n\t    this.render();\n\t  }\n\t\n\t  _inherits(Oscilloscope, _Interface);\n\t\n\t  _createClass(Oscilloscope, {\n\t    buildFrame: {\n\t      value: function buildFrame() {\n\t        this.canvas = new dom.SmartCanvas(this.parent);\n\t        this.element = this.canvas.element;\n\t      }\n\t    },\n\t    sizeInterface: {\n\t      value: function sizeInterface() {\n\t        this.canvas.resize(this.width, this.height);\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        this.canvas.element.style.backgroundColor = this.colors.fill;\n\t      }\n\t    },\n\t    render: {\n\t      value: function render() {\n\t\n\t        if (this.active) {\n\t          requestAnimationFrame(this.render.bind(this));\n\t        }\n\t\n\t        this.analyser.getByteTimeDomainData(this.dataArray);\n\t\n\t        this.canvas.context.fillStyle = this.colors.fill;\n\t        this.canvas.context.fillRect(0, 0, this.canvas.element.width, this.canvas.element.height);\n\t\n\t        this.canvas.context.lineWidth = ~ ~(this.height / 100 + 2);\n\t        this.canvas.context.strokeStyle = this.colors.accent;\n\t\n\t        this.canvas.context.beginPath();\n\t\n\t        if (this.source) {\n\t\n\t          var sliceWidth = this.canvas.element.width * 1 / this.bufferLength;\n\t          var x = 0;\n\t\n\t          for (var i = 0; i < this.bufferLength; i++) {\n\t\n\t            var v = this.dataArray[i] / 128;\n\t            var y = v * this.canvas.element.height / 2;\n\t\n\t            if (i === 0) {\n\t              this.canvas.context.moveTo(x, y);\n\t            } else {\n\t              this.canvas.context.lineTo(x, y);\n\t            }\n\t\n\t            x += sliceWidth;\n\t          }\n\t        } else {\n\t          this.canvas.context.moveTo(0, this.canvas.element.height / 2);\n\t          this.canvas.context.lineTo(this.canvas.element.width, this.canvas.element.height / 2);\n\t        }\n\t\n\t        this.canvas.context.stroke();\n\t      }\n\t    },\n\t    connect: {\n\t\n\t      /**\n\t      Equivalent to \"patching in\" an audio node to visualize.\n\t      @param node {AudioNode} The audio node to visualize\n\t      */\n\t\n\t      value: function connect(node) {\n\t\n\t        if (this.source) {\n\t          this.disconnect();\n\t        }\n\t\n\t        this.source = node;\n\t        this.source.connect(this.analyser);\n\t\n\t        this.render();\n\t      }\n\t    },\n\t    disconnect: {\n\t\n\t      /**\n\t      Stop visualizing the source node and disconnect it.\n\t      */\n\t\n\t      value: function disconnect() {\n\t        if (this.source) {\n\t          this.source.disconnect(this.analyser);\n\t          this.source = null;\n\t        }\n\t      }\n\t    },\n\t    click: {\n\t      value: function click() {\n\t        this.active = !this.active;\n\t        this.render();\n\t      }\n\t    },\n\t    customDestroy: {\n\t      value: function customDestroy() {\n\t        this.active = false;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Oscilloscope;\n\t})(Interface);\n\t\n\tmodule.exports = Oscilloscope;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\t/*\n\tMain concept:\n\tsynth = new Nexus.Rack('elementID');\n\t\n\tTransform all elements inside the div\n\tsynth.elementID will hold the first slider interface\n\t\n\t2) In future, potentially writing a rack that is re-usable?\n\tCould also take JSON\n\t\n\tnew Nexus.Rack('#target',{\n\t  pre: () => {\n\t    create some divs here, or some audio code\n\t  },\n\t  interface: {\n\t    slider1: Nexus.add.slider({\n\t      top:10,\n\t      left:10,\n\t      width:50,\n\t      height:100,\n\t      min: 0,\n\t      max: 100,\n\t      step: 1\n\t    }),\n\t    wave1: Nexus.add.waveform({\n\t      file: './path/to/file.mp3',\n\t      width:500,\n\t      height:100,\n\t      mode: 'range'\n\t    })\n\t  },\n\t  init: () => {\n\t    // some audio init code goes here...\n\t  }\n\t});\n\t\n\t*/\n\t\n\tvar transform = _interopRequireWildcard(__webpack_require__(39));\n\t\n\tvar dom = _interopRequire(__webpack_require__(7));\n\t\n\tvar Rack = (function () {\n\t  function Rack(target, settings) {\n\t    _classCallCheck(this, Rack);\n\t\n\t    this.meta = {};\n\t    this.meta.target = target;\n\t    this.meta.parent = dom.parseElement(target); // should be a generic function for parsing a 'target' argument that checks for string/DOM/jQUERY\n\t    this.meta.colors = {};\n\t\n\t    if (settings) {\n\t      this.meta.attribute = settings.attribute || \"nexus-ui\";\n\t      this.meta.title = settings.name || false;\n\t      this.meta.open = settings.open || false;\n\t    } else {\n\t      this.meta.attribute = \"nexus-ui\";\n\t      this.meta.title = false;\n\t      this.meta.open = false;\n\t    }\n\t\n\t    var defaultColors = Nexus.colors; // jshint ignore:line\n\t    this.meta.colors.accent = defaultColors.accent;\n\t    this.meta.colors.fill = defaultColors.fill;\n\t    this.meta.colors.light = defaultColors.light;\n\t    this.meta.colors.dark = defaultColors.dark;\n\t    this.meta.colors.mediumLight = defaultColors.mediumLight;\n\t    this.meta.colors.mediumDark = defaultColors.mediumDark;\n\t    this.buildInterface();\n\t    this.colorInterface();\n\t  }\n\t\n\t  _createClass(Rack, {\n\t    buildInterface: {\n\t      value: function buildInterface() {\n\t        var _this = this;\n\t\n\t        this.meta.parent.style.boxSizing = \"border-box\";\n\t        this.meta.parent.style.userSelect = \"none\";\n\t        this.meta.parent.style.mozUserSelect = \"none\";\n\t        this.meta.parent.style.webkitUserSelect = \"none\";\n\t\n\t        this.meta.contents = document.createElement(\"div\");\n\t\n\t        while (this.meta.parent.childNodes.length > 0) {\n\t          this.meta.contents.appendChild(this.meta.parent.childNodes[0]);\n\t        }\n\t\n\t        this.meta.contents.style.padding = \"0px\";\n\t        this.meta.contents.style.boxSizing = \"border-box\";\n\t\n\t        if (this.meta.title) {\n\t          this.meta.titleBar = document.createElement(\"div\");\n\t          this.meta.titleBar.innerHTML = this.meta.title;\n\t          this.meta.titleBar.style.fontFamily = \"arial\";\n\t          this.meta.titleBar.style.position = \"relative\";\n\t          this.meta.titleBar.style.color = \"#888\";\n\t          this.meta.titleBar.style.padding = \"7px\";\n\t          this.meta.titleBar.style.fontSize = \"12px\";\n\t\n\t          this.meta.button = document.createElement(\"div\");\n\t          this.meta.button.style.position = \"absolute\";\n\t          this.meta.button.style.top = \"5px\";\n\t          this.meta.button.style.right = \"5px\";\n\t          this.meta.button.innerHTML = \"-\";\n\t          this.meta.button.style.padding = \"0px 5px 2px\";\n\t          this.meta.button.style.lineHeight = \"12px\";\n\t          this.meta.button.style.fontSize = \"15px\";\n\t\n\t          this.meta.button.style.cursor = \"pointer\";\n\t\n\t          this.meta.button.addEventListener(\"mouseover\", function () {\n\t            _this.meta.button.style.backgroundColor = _this.meta.colors.mediumDark;\n\t          });\n\t          this.meta.button.addEventListener(\"mouseleave\", function () {\n\t            _this.meta.button.style.backgroundColor = _this.meta.colors.mediumLight;\n\t          });\n\t          this.meta.button.addEventListener(\"click\", function () {\n\t            if (_this.meta.open) {\n\t              _this.hide();\n\t            } else {\n\t              _this.show();\n\t            }\n\t          });\n\t\n\t          this.meta.titleBar.appendChild(this.meta.button);\n\t\n\t          this.meta.parent.appendChild(this.meta.titleBar);\n\t        }\n\t        this.meta.parent.appendChild(this.meta.contents);\n\t\n\t        //  var width = this.meta.parent.style.width = getComputedStyle(this.meta.parent).getPropertyValue('width');\n\t        //    this.meta.parent.style.width = width;\n\t\n\t        var ui = transform.section(this.meta.target, this.meta.attribute);\n\t        for (var key in ui) {\n\t          this[key] = ui[key];\n\t        }\n\t      }\n\t    },\n\t    colorInterface: {\n\t      value: function colorInterface() {\n\t        if (this.meta.title) {\n\t          this.meta.button.style.backgroundColor = this.meta.colors.mediumLight;\n\t          this.meta.button.style.border = \"solid 0px \" + this.meta.colors.fill;\n\t          this.meta.parent.style.border = \"solid 1px \" + this.meta.colors.mediumLight;\n\t          this.meta.parent.style.backgroundColor = this.meta.colors.light;\n\t          this.meta.titleBar.style.backgroundColor = this.meta.colors.fill;\n\t        }\n\t      }\n\t    },\n\t    show: {\n\t      value: function show() {\n\t        this.meta.contents.style.display = \"block\";\n\t        this.meta.open = true;\n\t      }\n\t    },\n\t    hide: {\n\t      value: function hide() {\n\t        this.meta.contents.style.display = \"none\";\n\t        this.meta.open = false;\n\t      }\n\t    },\n\t    colorize: {\n\t      value: function colorize(type, color) {\n\t        for (var key in this) {\n\t          if (this[key].colorize) {\n\t            this[key].colorize(type, color);\n\t          }\n\t        }\n\t        this.meta.colors[type] = color;\n\t        this.colorInterface();\n\t      }\n\t    },\n\t    empty: {\n\t      value: function empty() {\n\t        for (var key in this) {\n\t          if (this[key].destroy) {\n\t            this[key].destroy();\n\t          }\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return Rack;\n\t})();\n\t\n\tmodule.exports = Rack;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\"use strict\";\n\t\n\tvar dom = _interopRequire(__webpack_require__(7));\n\t\n\tvar Interfaces = _interopRequire(__webpack_require__(2));\n\t\n\tvar createInterfaceID = function (widget, interfaceIDs) {\n\t  var type = widget.type;\n\t  if (interfaceIDs[type]) {\n\t    interfaceIDs[type]++;\n\t  } else {\n\t    interfaceIDs[type] = 1;\n\t  }\n\t  return type + interfaceIDs[type];\n\t};\n\t\n\tvar element = function (element, type, options) {\n\t  options = options || {};\n\t  for (var i = 0; i < element.attributes.length; i++) {\n\t    var att = element.attributes[i];\n\t    //  try {\n\t    //    options[att.nodeName] = eval(att.nodeValue);\n\t    //  } catch(e) {\n\t    options[att.nodeName] = att.nodeValue;\n\t    //  }\n\t  }\n\t  type = type[0].toUpperCase() + type.slice(1);\n\t  var widget = new Interfaces[type](element, options);\n\t  widget.id = element.id;\n\t  return widget;\n\t};\n\t\n\tvar section = function (parent, keyword) {\n\t\n\t  keyword = keyword || \"nexus-ui\";\n\t\n\t  var interfaceIDs = {};\n\t\n\t  var container = dom.parseElement(parent);\n\t\n\t  var ui = {};\n\t\n\t  var htmlElements = container.getElementsByTagName(\"*\");\n\t  var elements = [];\n\t  for (var i = 0; i < htmlElements.length; i++) {\n\t    elements.push(htmlElements[i]);\n\t  }\n\t  for (var i = 0; i < elements.length; i++) {\n\t    var type = elements[i].getAttribute(keyword);\n\t    if (type) {\n\t      var formattedType = false;\n\t      for (var key in Interfaces) {\n\t        if (type.toLowerCase() === key.toLowerCase()) {\n\t          formattedType = key;\n\t        }\n\t      }\n\t      console.log(formattedType);\n\t      var widget = element(elements[i], formattedType);\n\t      if (widget.id) {\n\t        ui[widget.id] = widget;\n\t      } else {\n\t        var id = createInterfaceID(widget, interfaceIDs);\n\t        ui[id] = widget;\n\t      }\n\t    }\n\t  }\n\t\n\t  return ui;\n\t};\n\t\n\tvar add = function (type, options) {\n\t  var target = document.createElement(\"div\");\n\t  var parent = document.body;\n\t  if (options) {\n\t    parent = options.parent;\n\t  } else {\n\t    options = {};\n\t  }\n\t  parent = dom.parseElement(parent);\n\t  parent.appendChild(target);\n\t  options.target = target;\n\t  if (options.size) {\n\t    target.style.width = options.size[0] + \"px\";\n\t    target.style.height = options.size[1] + \"px\";\n\t  }\n\t  return element(target, type, options);\n\t};\n\t\n\texports.element = element;\n\texports.section = section;\n\texports.add = add;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar math = _interopRequire(__webpack_require__(5));\n\t\n\tvar Tune = (function () {\n\t  function Tune() {\n\t    _classCallCheck(this, Tune);\n\t\n\t    // the scale as ratios\n\t    this.scale = [];\n\t\n\t    // i/o modes\n\t    this.mode = {\n\t      output: \"frequency\",\n\t      input: \"step\"\n\t    };\n\t\n\t    // ET major\n\t    this.etmajor = [261.62558, 293.664764, 329.627563, 349.228241, 391.995422, 440, 493.883301, 523.25116];\n\t\n\t    // Root frequency.\n\t    this.root = math.mtof(60); // * Math.pow(2,(60-69)/12);\n\t\n\t    // default is a major scale\n\t    this.createScale(0, 2, 4, 5, 7, 9, 11);\n\t  }\n\t\n\t  _createClass(Tune, {\n\t    note: {\n\t\n\t      /* Return data in the mode you are in (freq, ratio, or midi) */\n\t\n\t      value: function note(input, octave) {\n\t\n\t        var newvalue = undefined;\n\t\n\t        if (this.mode.output === \"frequency\") {\n\t          newvalue = this.frequency(input, octave);\n\t        } else if (this.mode.output === \"ratio\") {\n\t          newvalue = this.ratio(input, octave);\n\t        } else if (this.mode.output === \"MIDI\") {\n\t          newvalue = this.MIDI(input, octave);\n\t        } else {\n\t          newvalue = this.frequency(input, octave);\n\t        }\n\t\n\t        return newvalue;\n\t      }\n\t    },\n\t    frequency: {\n\t\n\t      /* Return freq data */\n\t\n\t      value: function frequency(stepIn, octaveIn) {\n\t\n\t        if (this.mode.input === \"midi\" || this.mode.input === \"MIDI\") {\n\t          this.stepIn += 60;\n\t        }\n\t\n\t        // what octave is our input\n\t        var octave = Math.floor(stepIn / this.scale.length);\n\t\n\t        if (octaveIn) {\n\t          octave += octaveIn;\n\t        }\n\t\n\t        // which scale degree (0 - scale length) is our input\n\t        var scaleDegree = stepIn % this.scale.length;\n\t\n\t        while (scaleDegree < 0) {\n\t          scaleDegree += this.scale.length;\n\t        }\n\t\n\t        var ratio = this.scale[scaleDegree];\n\t\n\t        var freq = this.root * ratio;\n\t\n\t        freq = freq * Math.pow(2, octave);\n\t\n\t        // truncate irrational numbers\n\t        freq = Math.floor(freq * 100000000000) / 100000000000;\n\t\n\t        return freq;\n\t      }\n\t    },\n\t    ratio: {\n\t\n\t      /* Force return ratio data */\n\t\n\t      value: function ratio(stepIn, octaveIn) {\n\t\n\t        if (this.mode.input === \"midi\" || this.mode.input === \"MIDI\") {\n\t          this.stepIn += 60;\n\t        }\n\t\n\t        // what octave is our input\n\t        var octave = Math.floor(stepIn / this.scale.length);\n\t\n\t        if (octaveIn) {\n\t          octave += octaveIn;\n\t        }\n\t\n\t        // which scale degree (0 - scale length) is our input\n\t        var scaleDegree = stepIn % this.scale.length;\n\t\n\t        // what ratio is our input to our key\n\t        var ratio = Math.pow(2, octave) * this.scale[scaleDegree];\n\t\n\t        ratio = Math.floor(ratio * 100000000000) / 100000000000;\n\t\n\t        return ratio;\n\t      }\n\t    },\n\t    MIDI: {\n\t\n\t      /* Force return adjusted MIDI data */\n\t\n\t      value: function MIDI(stepIn, octaveIn) {\n\t\n\t        var newvalue = this.frequency(stepIn, octaveIn);\n\t\n\t        var n = 69 + 12 * Math.log(newvalue / 440) / Math.log(2);\n\t\n\t        n = Math.floor(n * 1000000000) / 1000000000;\n\t\n\t        return n;\n\t      }\n\t    },\n\t    createScale: {\n\t      value: function createScale() {\n\t        var newScale = [];\n\t        for (var i = 0; i < arguments.length; i++) {\n\t          newScale.push(math.mtof(60 + arguments[i]));\n\t        }\n\t        this.loadScaleFromFrequencies(newScale);\n\t      }\n\t    },\n\t    createJIScale: {\n\t      value: function createJIScale() {\n\t        this.scale = [];\n\t        for (var i = 0; i < arguments.length; i++) {\n\t          this.scale.push(arguments[i]);\n\t        }\n\t      }\n\t    },\n\t    loadScaleFromFrequencies: {\n\t      value: function loadScaleFromFrequencies(freqs) {\n\t        this.scale = [];\n\t        for (var i = 0; i < freqs.length - 1; i++) {\n\t          this.scale.push(freqs[i] / freqs[0]);\n\t        }\n\t      }\n\t    },\n\t    loadScale: {\n\t\n\t      /* Load a new scale */\n\t\n\t      value: function loadScale(name) {\n\t\n\t        /* load the scale */\n\t        var freqs = this.scales[name].frequencies;\n\t        this.loadScaleFromFrequencies(freqs);\n\t      }\n\t    },\n\t    search: {\n\t\n\t      /* Search the names of tunings\n\t      \t Returns an array of names of tunings */\n\t\n\t      value: function search(letters) {\n\t        var possible = [];\n\t        for (var key in this.scales) {\n\t          if (key.toLowerCase().indexOf(letters.toLowerCase()) !== -1) {\n\t            possible.push(key);\n\t          }\n\t        }\n\t        return possible;\n\t      }\n\t    },\n\t    chord: {\n\t\n\t      /* Return a collection of notes as an array */\n\t\n\t      value: function chord(midis) {\n\t        var output = [];\n\t        for (var i = 0; i < midis.length; i++) {\n\t          output.push(this.note(midis[i]));\n\t        }\n\t        return output;\n\t      }\n\t    }\n\t  });\n\t\n\t  return Tune;\n\t})();\n\t\n\tmodule.exports = Tune;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\t//Disable jshint warning concerning trailing regular params\n\t/*jshint -W138 */\n\t\n\tvar Radio = (function () {\n\t    //if non-existent buttons are switched, they are ignored\n\t\n\t    function Radio() {\n\t        for (var _len = arguments.length, onVals = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t            onVals[_key - 1] = arguments[_key];\n\t        }\n\t\n\t        var length = arguments[0] === undefined ? 3 : arguments[0];\n\t\n\t        _classCallCheck(this, Radio);\n\t\n\t        //each optional 'onVals' argument switches on that value in the Radio if it exists\n\t        //In the example below, a 3-button radio is created, index 0 is switched on, index 1 is switched on then then attempted again producing an warning, and the final argument produces a warning because the index value does not exist.\n\t        //Example:\n\t        //`  radio = new Radio(3, 0, 1, 1, 3);\n\t        //…  [1,1,0]\n\t\n\t        if (length < 0) {\n\t            length = 1;\n\t        }\n\t\n\t        this.length = length;\n\t        this.onVals = onVals;\n\t        this.array = new Array(length).fill(0);\n\t\n\t        if (onVals.length > 0) {\n\t            this.on.apply(this, onVals);\n\t        }\n\t    }\n\t\n\t    _createClass(Radio, {\n\t        select: {\n\t            value: function select(value) {\n\t                this.array.fill(0);\n\t                this.array[value] = 1;\n\t                return this.array;\n\t            }\n\t        },\n\t        flip: {\n\t            value: function flip() {\n\t                for (var _len = arguments.length, values = Array(_len), _key = 0; _key < _len; _key++) {\n\t                    values[_key] = arguments[_key];\n\t                }\n\t\n\t                //flips the specified values. if no value is specified, flips all buttons\n\t                var a = this.array;\n\t                if (values.length > 0) {\n\t                    values.forEach(function (v) {\n\t                        if (v > a.length - 1) {\n\t                            console.warn(\"Warning: AnonRadio[\" + v + \"] does not exist\");\n\t                        } else {\n\t                            a[v] = a[v] ? 0 : 1;\n\t                        }\n\t                    });\n\t                } else {\n\t                    a.forEach(function (v, i, arr) {\n\t                        arr[i] = v ? 0 : 1;\n\t                    });\n\t                }\n\t                return a;\n\t            }\n\t        },\n\t        on: {\n\t            value: function on() {\n\t                for (var _len = arguments.length, values = Array(_len), _key = 0; _key < _len; _key++) {\n\t                    values[_key] = arguments[_key];\n\t                }\n\t\n\t                //switch on the specified values. if no value specified, flips on all buttons\n\t                var a = this.array;\n\t                if (values.length > 0) {\n\t                    values.forEach(function (v) {\n\t                        if (v > a.length - 1) {\n\t                            console.warn(\"Warning: AnonRadio[\" + v + \"] exceeds size of object\");\n\t                        } else {\n\t                            if (a[v] === 1) {\n\t                                console.warn(\"Warning: AnonRadio[\" + v + \"] was already on.\");\n\t                            }\n\t                            a[v] = 1;\n\t                        }\n\t                    });\n\t                } else {\n\t                    a.fill(1);\n\t                }\n\t                return a;\n\t            }\n\t        },\n\t        off: {\n\t            value: function off() {\n\t                for (var _len = arguments.length, values = Array(_len), _key = 0; _key < _len; _key++) {\n\t                    values[_key] = arguments[_key];\n\t                }\n\t\n\t                //switch off the specified values. if no value specified, flips off all buttons\n\t                var a = this.array;\n\t                if (values.length > 0) {\n\t                    values.forEach(function (v) {\n\t                        a[v] = 0;\n\t                    });\n\t                } else {\n\t                    a.fill(0);\n\t                }\n\t                return a;\n\t            }\n\t        }\n\t    });\n\t\n\t    return Radio;\n\t})();\n\t\n\tmodule.exports = Radio;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar WAAClock = __webpack_require__(43)\n\t\n\tmodule.exports = WAAClock\n\tif (typeof window !== 'undefined') window.WAAClock = WAAClock\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {var isBrowser = (typeof window !== 'undefined')\n\t\n\tvar CLOCK_DEFAULTS = {\n\t  toleranceLate: 0.10,\n\t  toleranceEarly: 0.001\n\t}\n\t\n\t// ==================== Event ==================== //\n\tvar Event = function(clock, deadline, func) {\n\t  this.clock = clock\n\t  this.func = func\n\t  this._cleared = false // Flag used to clear an event inside callback\n\t\n\t  this.toleranceLate = clock.toleranceLate\n\t  this.toleranceEarly = clock.toleranceEarly\n\t  this._latestTime = null\n\t  this._earliestTime = null\n\t  this.deadline = null\n\t  this.repeatTime = null\n\t\n\t  this.schedule(deadline)\n\t}\n\t\n\t// Unschedules the event\n\tEvent.prototype.clear = function() {\n\t  this.clock._removeEvent(this)\n\t  this._cleared = true\n\t  return this\n\t}\n\t\n\t// Sets the event to repeat every `time` seconds.\n\tEvent.prototype.repeat = function(time) {\n\t  if (time === 0)\n\t    throw new Error('delay cannot be 0')\n\t  this.repeatTime = time\n\t  if (!this.clock._hasEvent(this))\n\t    this.schedule(this.deadline + this.repeatTime)\n\t  return this\n\t}\n\t\n\t// Sets the time tolerance of the event.\n\t// The event will be executed in the interval `[deadline - early, deadline + late]`\n\t// If the clock fails to execute the event in time, the event will be dropped.\n\tEvent.prototype.tolerance = function(values) {\n\t  if (typeof values.late === 'number')\n\t    this.toleranceLate = values.late\n\t  if (typeof values.early === 'number')\n\t    this.toleranceEarly = values.early\n\t  this._refreshEarlyLateDates()\n\t  if (this.clock._hasEvent(this)) {\n\t    this.clock._removeEvent(this)\n\t    this.clock._insertEvent(this)\n\t  }\n\t  return this\n\t}\n\t\n\t// Returns true if the event is repeated, false otherwise\n\tEvent.prototype.isRepeated = function() { return this.repeatTime !== null }\n\t\n\t// Schedules the event to be ran before `deadline`.\n\t// If the time is within the event tolerance, we handle the event immediately.\n\t// If the event was already scheduled at a different time, it is rescheduled.\n\tEvent.prototype.schedule = function(deadline) {\n\t  this._cleared = false\n\t  this.deadline = deadline\n\t  this._refreshEarlyLateDates()\n\t\n\t  if (this.clock.context.currentTime >= this._earliestTime) {\n\t    this._execute()\n\t  \n\t  } else if (this.clock._hasEvent(this)) {\n\t    this.clock._removeEvent(this)\n\t    this.clock._insertEvent(this)\n\t  \n\t  } else this.clock._insertEvent(this)\n\t}\n\t\n\tEvent.prototype.timeStretch = function(tRef, ratio) {\n\t  if (this.isRepeated())\n\t    this.repeatTime = this.repeatTime * ratio\n\t\n\t  var deadline = tRef + ratio * (this.deadline - tRef)\n\t  // If the deadline is too close or past, and the event has a repeat,\n\t  // we calculate the next repeat possible in the stretched space.\n\t  if (this.isRepeated()) {\n\t    while (this.clock.context.currentTime >= deadline - this.toleranceEarly)\n\t      deadline += this.repeatTime\n\t  }\n\t  this.schedule(deadline)\n\t}\n\t\n\t// Executes the event\n\tEvent.prototype._execute = function() {\n\t  if (this.clock._started === false) return\n\t  this.clock._removeEvent(this)\n\t\n\t  if (this.clock.context.currentTime < this._latestTime)\n\t    this.func(this)\n\t  else {\n\t    if (this.onexpired) this.onexpired(this)\n\t    console.warn('event expired')\n\t  }\n\t  // In the case `schedule` is called inside `func`, we need to avoid\n\t  // overrwriting with yet another `schedule`.\n\t  if (!this.clock._hasEvent(this) && this.isRepeated() && !this._cleared)\n\t    this.schedule(this.deadline + this.repeatTime) \n\t}\n\t\n\t// Updates cached times\n\tEvent.prototype._refreshEarlyLateDates = function() {\n\t  this._latestTime = this.deadline + this.toleranceLate\n\t  this._earliestTime = this.deadline - this.toleranceEarly\n\t}\n\t\n\t// ==================== WAAClock ==================== //\n\tvar WAAClock = module.exports = function(context, opts) {\n\t  var self = this\n\t  opts = opts || {}\n\t  this.tickMethod = opts.tickMethod || 'ScriptProcessorNode'\n\t  this.toleranceEarly = opts.toleranceEarly || CLOCK_DEFAULTS.toleranceEarly\n\t  this.toleranceLate = opts.toleranceLate || CLOCK_DEFAULTS.toleranceLate\n\t  this.context = context\n\t  this._events = []\n\t  this._started = false\n\t}\n\t\n\t// ---------- Public API ---------- //\n\t// Schedules `func` to run after `delay` seconds.\n\tWAAClock.prototype.setTimeout = function(func, delay) {\n\t  return this._createEvent(func, this._absTime(delay))\n\t}\n\t\n\t// Schedules `func` to run before `deadline`.\n\tWAAClock.prototype.callbackAtTime = function(func, deadline) {\n\t  return this._createEvent(func, deadline)\n\t}\n\t\n\t// Stretches `deadline` and `repeat` of all scheduled `events` by `ratio`, keeping\n\t// their relative distance to `tRef`. In fact this is equivalent to changing the tempo.\n\tWAAClock.prototype.timeStretch = function(tRef, events, ratio) {\n\t  events.forEach(function(event) { event.timeStretch(tRef, ratio) })\n\t  return events\n\t}\n\t\n\t// Removes all scheduled events and starts the clock \n\tWAAClock.prototype.start = function() {\n\t  if (this._started === false) {\n\t    var self = this\n\t    this._started = true\n\t    this._events = []\n\t\n\t    if (this.tickMethod === 'ScriptProcessorNode') {\n\t      var bufferSize = 256\n\t      // We have to keep a reference to the node to avoid garbage collection\n\t      this._clockNode = this.context.createScriptProcessor(bufferSize, 1, 1)\n\t      this._clockNode.connect(this.context.destination)\n\t      this._clockNode.onaudioprocess = function () {\n\t        process.nextTick(function() { self._tick() })\n\t      }\n\t    } else if (this.tickMethod === 'manual') null // _tick is called manually\n\t\n\t    else throw new Error('invalid tickMethod ' + this.tickMethod)\n\t  }\n\t}\n\t\n\t// Stops the clock\n\tWAAClock.prototype.stop = function() {\n\t  if (this._started === true) {\n\t    this._started = false\n\t    this._clockNode.disconnect()\n\t  }  \n\t}\n\t\n\t// ---------- Private ---------- //\n\t\n\t// This function is ran periodically, and at each tick it executes\n\t// events for which `currentTime` is included in their tolerance interval.\n\tWAAClock.prototype._tick = function() {\n\t  var event = this._events.shift()\n\t\n\t  while(event && event._earliestTime <= this.context.currentTime) {\n\t    event._execute()\n\t    event = this._events.shift()\n\t  }\n\t\n\t  // Put back the last event\n\t  if(event) this._events.unshift(event)\n\t}\n\t\n\t// Creates an event and insert it to the list\n\tWAAClock.prototype._createEvent = function(func, deadline) {\n\t  return new Event(this, deadline, func)\n\t}\n\t\n\t// Inserts an event to the list\n\tWAAClock.prototype._insertEvent = function(event) {\n\t  this._events.splice(this._indexByTime(event._earliestTime), 0, event)\n\t}\n\t\n\t// Removes an event from the list\n\tWAAClock.prototype._removeEvent = function(event) {\n\t  var ind = this._events.indexOf(event)\n\t  if (ind !== -1) this._events.splice(ind, 1)\n\t}\n\t\n\t// Returns true if `event` is in queue, false otherwise\n\tWAAClock.prototype._hasEvent = function(event) {\n\t return this._events.indexOf(event) !== -1\n\t}\n\t\n\t// Returns the index of the first event whose deadline is >= to `deadline`\n\tWAAClock.prototype._indexByTime = function(deadline) {\n\t  // performs a binary search\n\t  var low = 0\n\t    , high = this._events.length\n\t    , mid\n\t  while (low < high) {\n\t    mid = Math.floor((low + high) / 2)\n\t    if (this._events[mid]._earliestTime < deadline)\n\t      low = mid + 1\n\t    else high = mid\n\t  }\n\t  return low\n\t}\n\t\n\t// Converts from relative time to absolute time\n\tWAAClock.prototype._absTime = function(relTime) {\n\t  return relTime + this.context.currentTime\n\t}\n\t\n\t// Converts from absolute time to relative time \n\tWAAClock.prototype._relTime = function(absTime) {\n\t  return absTime - this.context.currentTime\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(44)))\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar Interval = (function () {\n\t  function Interval(rate, func, on) {\n\t    _classCallCheck(this, Interval);\n\t\n\t    this.rate = rate;\n\t    this.on = on;\n\t    this.clock = Nexus.clock; // jshint ignore:line\n\t\n\t    this.pattern = [1];\n\t    this.index = 0;\n\t\n\t    this.event = func ? func : function () {};\n\t\n\t    if (this.on) {\n\t      this.start();\n\t    }\n\t  }\n\t\n\t  _createClass(Interval, {\n\t    _event: {\n\t      value: function _event(e) {\n\t        //  if (this.pattern[this.index%this.pattern.length]) {\n\t        this.event(e);\n\t        //  }\n\t        this.index++;\n\t      }\n\t    },\n\t    stop: {\n\t      value: function stop() {\n\t        this.on = false;\n\t        this.interval.clear();\n\t      }\n\t    },\n\t    start: {\n\t      value: function start() {\n\t        this.on = true;\n\t        this.interval = this.clock.callbackAtTime(this._event.bind(this), this.clock.context.currentTime).repeat(this.rate / 1000).tolerance({ early: 0.1, late: 1 });\n\t      }\n\t    },\n\t    ms: {\n\t      value: function ms(newrate) {\n\t        if (this.on) {\n\t          var ratio = newrate / this.rate;\n\t          this.rate = newrate;\n\t          this.clock.timeStretch(this.clock.context.currentTime, [this.interval], ratio);\n\t        } else {\n\t          this.rate = newrate;\n\t        }\n\t      }\n\t    }\n\t  });\n\t\n\t  return Interval;\n\t})();\n\t\n\tmodule.exports = Interval;\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=NexusUI.map\n\n\n// WEBPACK FOOTER //\n// ./lib/js/NexusUI.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 4\n// module chunks = 0","import * as Nexus from './NexusUI';\n\nclass Sequencer {\n  constructor(){\n    this.sequencer = new Nexus.Sequencer('#sequencer',{\n     'size': [1000,500],\n     'mode': 'toggle',\n     'rows': 8,\n     'columns': 16\n   });\n\n  }\n}\n\n\n\nexport default Sequencer;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/js/sequencer.js","import * as Nexus from './NexusUI';\n\n\nclass Piano {\n  constructor() {\n    this.piano = new Nexus.Piano('#piano',{\n    'size': [500,125],\n    'mode': 'button', \n    'lowNote': 24,\n    'highNote': 60\n    });\n  }\n}\n\n\nexport default Piano;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/js/piano.js","import * as Nexus from './NexusUI';\n\n\nclass Button {\n  constructor(){\n    this.button = new Nexus.TextButton('#button');\n  }\n\n  play(){\n    const audio = new Audio('./lib/media/bad_company.mp3');\n    audio.play();\n  }\n}\n\nexport default Button;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/js/button.js","import * as jsfx from './jsfx';\n\nconst Sounds = () => {\nconst library = {\n  \"select\": {\"Volume\":{\"Sustain\":0.1,\"Decay\":0.15,\"Punch\":0.55}},\n  \"long\": {\"Volume\":{\"Sustain\":0.1,\"Decay\":0.5,\"Punch\":1}}\n      };\n  const sfx = jsfx.Sounds(library);\n\n};\n\nexport default Sounds;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/js/sounds.js","(function(root, factory) {\n\tif (typeof module === \"object\" && typeof module.exports === \"object\") {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.jsfx = factory();\n\t}\n}(this, function() {\n\t'use strict';\n\n\tvar chr = String.fromCharCode;\n\tvar TAU = +Math.PI * 2;\n\tvar bitsPerSample = 16 | 0;\n\tvar numChannels = 1 | 0;\n\tvar sin = Math.sin;\n\tvar pow = Math.pow;\n\tvar abs = Math.abs;\n\tvar EPSILON = 0.000001;\n\n\tvar jsfx = {};\n\tvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\n\tjsfx.SampleRate = 0 | 0;\n\tjsfx.Sec = 0 | 0;\n\n\tjsfx.SetSampleRate = function(sampleRate) {\n\t\tjsfx.SampleRate = sampleRate | 0;\n\t\tjsfx.Sec = sampleRate | 0;\n\t};\n\tjsfx.SetSampleRate(getDefaultSampleRate());\n\n\t// MAIN API\n\n\t// Creates a new Audio object based on the params\n\t// params can be a params generating function or the actual parameters\n\tjsfx.Sound = function(params) {\n\t\tvar processor = new Processor(params, jsfx.DefaultModules);\n\t\tvar block = createFloatArray(processor.getSamplesLeft());\n\t\tprocessor.generate(block);\n\t\treturn CreateAudio(block);\n\t};\n\n\t// Same as Sounds, but avoids locking the browser for too long\n\t// in case you have a large amount of sounds to generate\n\tjsfx.Sounds = function(library, ondone, onprogress) {\n\t\tvar audio = {};\n\t\tvar player = {};\n\t\tplayer._audio = audio;\n\n\t\tvar toLoad = [];\n\n\t\t// create playing functions\n\t\tmap_object(library, function(_, name) {\n\t\t\tplayer[name] = function() {\n\t\t\t\tif (typeof audio[name] !== \"undefined\") {\n\t\t\t\t\taudio[name].currentTime = 0.0;\n\t\t\t\t\taudio[name].play();\n\t\t\t\t}\n\t\t\t};\n\t\t\ttoLoad.push(name);\n\t\t});\n\n\t\tvar loaded = 0,\n\t\t\ttotal = toLoad.length;\n\n\t\tfunction next() {\n\t\t\tif (toLoad.length == 0) {\n\t\t\t\tondone && ondone(sounds);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar name = toLoad.shift();\n\t\t\taudio[name] = jsfx.Sound(library[name]);\n\t\t\tloaded++;\n\t\t\tonprogress && onprogress(name, loaded, total);\n\n\t\t\twindow.setTimeout(next, 30);\n\t\t}\n\t\tnext();\n\n\t\treturn player;\n\t}\n\n\t// SoundsImmediate takes a named set of params, and generates multiple\n\t// sound objects at once.\n\tjsfx.SoundsImmediate = function(library) {\n\t\tvar audio = {};\n\t\tvar player = {};\n\t\tplayer._audio = audio;\n\t\tmap_object(library, function(params, name) {\n\t\t\taudio[name] = jsfx.Sound(params);\n\t\t\tplayer[name] = function() {\n\t\t\t\tif (typeof audio[name] !== \"undefined\") {\n\t\t\t\t\taudio[name].currentTime = 0.0;\n\t\t\t\t\taudio[name].play();\n\t\t\t\t}\n\t\t\t};\n\t\t})\n\t\treturn player;\n\t};\n\n\t// FloatBuffer creates a FloatArray filled with audio\n\tjsfx.FloatBuffer = function(params, modules) {\n\t\tvar processor = new Processor(params, jsfx.DefaultModules);\n\t\tvar block = createFloatArray(processor.getSamplesLeft());\n\t\tprocessor.generate(block);\n\t\treturn block;\n\t};\n\n\tif (typeof AudioContext !== \"undefined\") {\n\t\t// Node creates a new AudioContext ScriptProcessor that outputs the\n\t\t// sound. It will automatically disconnect, unless otherwise specified.\n\t\tjsfx.Node = function(audioContext, params, modules, bufferSize, stayConnected) {\n\t\t\tvar node = audioContext.createScriptProcessor(bufferSize, 0, 1);\n\t\t\tvar gen = new Processor(params, modules || jsfx.DefaultModules);\n\t\t\tnode.onaudioprocess = function(ev) {\n\t\t\t\tvar block = ev.outputBuffer.getChannelData(0);\n\t\t\t\tgen.generate(block);\n\t\t\t\tif (!stayConnected && gen.finished) {\n\t\t\t\t\t// we need to do an async disconnect, otherwise Chrome may\n\t\t\t\t\t// glitch\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tnode.disconnect();\n\t\t\t\t\t}, 30);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn node;\n\t\t}\n\n\t\t// AudioBuffer creates a buffer filled with the proper audio\n\t\t// This is useful, when you want to use AudioContext.BufferSource\n\t\tjsfx.AudioBuffer = function(audioContext, params, modules) {\n\t\t\tvar processor = new Processor(params, modules || jsfx.DefaultModules);\n\t\t\tvar buffer = audioContext.createBuffer(numChannels, processor.getSamplesLeft(), jsfx.SampleRate);\n\t\t\tvar block = buffer.getChannelData(0);\n\t\t\tprocessor.generate(block);\n\t\t\treturn buffer;\n\t\t};\n\n\t\t// Live creates an managed AudioContext for playing.\n\t\t// This is useful, when you want to use procedurally generated sounds.\n\t\tjsfx.Live = function(library, modules, BufferSize) {\n\t\t\t//TODO: add limit for number of notes played at the same time\n\t\t\tBufferSize = BufferSize || 2048;\n\t\t\tvar player = {};\n\n\t\t\tvar context = new AudioContext();\n\t\t\tvar volume = context.createGain();\n\t\t\tvolume.connect(context.destination);\n\n\t\t\tplayer._context = context;\n\t\t\tplayer._volume = volume;\n\n\t\t\tmap_object(library, function(params, name) {\n\t\t\t\tplayer[name] = function() {\n\t\t\t\t\tvar node = jsfx.Node(context, params, modules, BufferSize);\n\t\t\t\t\tnode.connect(volume);\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tplayer._close = function() {\n\t\t\t\tcontext.close();\n\t\t\t};\n\n\t\t\tplayer._play = function(params) {\n\t\t\t\tvar node = jsfx.Node(context, params, modules, BufferSize);\n\t\t\t\tnode.connect(volume);\n\t\t\t};\n\n\t\t\treturn player;\n\t\t}\n\t} else {\n\t\tjsfx.Live = jsfx.Sounds;\n\t}\n\n\t// SOUND GENERATION\n\tjsfx.Module = {};\n\n\t// generators\n\tjsfx.G = {};\n\n\tvar stage = jsfx.stage = {\n\t\tPhaseSpeed: 0,\n\t\tPhaseSpeedMod: 10,\n\t\tGenerator: 20,\n\t\tSampleMod: 30,\n\t\tVolume: 40\n\t};\n\n\tfunction byStage(a, b) {\n\t\treturn a.stage - b.stage;\n\t}\n\n\tjsfx.InitDefaultParams = InitDefaultParams;\n\n\tfunction InitDefaultParams(params, modules) {\n\t\t// setup modules\n\t\tfor (var i = 0; i < modules.length; i += 1) {\n\t\t\tvar M = modules[i];\n\t\t\tvar P = params[M.name] || {};\n\n\t\t\t// add missing parameters\n\t\t\tmap_object(M.params, function(def, name) {\n\t\t\t\tif (typeof P[name] === 'undefined') {\n\t\t\t\t\tP[name] = def.D;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tparams[M.name] = P;\n\t\t}\n\t}\n\n\t// Generates a stateful sound effect processor\n\t// params can be a function that creates a parameter set\n\tjsfx.Processor = Processor;\n\n\tfunction Processor(params, modules) {\n\t\tparams = params || {};\n\t\tmodules = modules || jsfx.DefaultModules;\n\n\t\tif (typeof params === 'function') {\n\t\t\tparams = params();\n\t\t} else {\n\t\t\tparams = JSON.parse(JSON.stringify(params))\n\t\t}\n\t\tthis.finished = false;\n\n\t\tthis.state = {\n\t\t\tSampleRate: params.SampleRate || jsfx.SampleRate\n\t\t};\n\n\t\t// sort modules\n\t\tmodules = modules.slice();\n\t\tmodules.sort(byStage)\n\t\tthis.modules = modules;\n\n\t\t// init missing params\n\t\tInitDefaultParams(params, modules);\n\n\t\t// setup modules\n\t\tfor (var i = 0; i < this.modules.length; i += 1) {\n\t\t\tvar M = this.modules[i];\n\t\t\tthis.modules[i].setup(this.state, params[M.name]);\n\t\t}\n\t}\n\tProcessor.prototype = {\n\t\t//TODO: see whether this can be converted to a module\n\t\tgenerate: function(block) {\n\t\t\tfor (var i = 0 | 0; i < block.length; i += 1) {\n\t\t\t\tblock[i] = 0;\n\t\t\t}\n\t\t\tif (this.finished) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $ = this.state,\n\t\t\t\tN = block.length | 0;\n\t\t\tfor (var i = 0; i < this.modules.length; i += 1) {\n\t\t\t\tvar M = this.modules[i];\n\t\t\t\tvar n = M.process($, block.subarray(0, N)) | 0;\n\t\t\t\tN = Math.min(N, n);\n\t\t\t}\n\t\t\tif (N < block.length) {\n\t\t\t\tthis.finished = true;\n\t\t\t}\n\t\t\tfor (var i = N; i < block.length; i++) {\n\t\t\t\tblock[i] = 0;\n\t\t\t}\n\t\t},\n\t\tgetSamplesLeft: function() {\n\t\t\tvar samples = 0;\n\t\t\tfor (var i = 0; i < this.state.envelopes.length; i += 1) {\n\t\t\t\tsamples += this.state.envelopes[i].N;\n\t\t\t}\n\t\t\tif (samples === 0) {\n\t\t\t\tsamples = 3 * this.state.SampleRate;\n\t\t\t}\n\t\t\treturn samples;\n\t\t}\n\t};\n\n\t// Frequency\n\tjsfx.Module.Frequency = {\n\t\tname: 'Frequency',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\tStart: { L:30, H:1800, D:440  },\n\n\t\t\tMin: { L:30, H:1800, D:30    },\n\t\t\tMax: { L:30, H:1800, D:1800  },\n\n\t\t\tSlide:      { L:-1, H:1, D:0 },\n\t\t\tDeltaSlide: { L:-1, H:1, D:0 },\n\n\t\t\tRepeatSpeed:  { L:0, H: 3.0, D: 0 },\n\n\t\t\tChangeAmount: { L:-12, H:12, D:0 },\n\t\t\tChangeSpeed : { L:  0, H:1,  D:0 }\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.PhaseSpeed,\n\t\tsetup: function($, P) {\n\t\t\tvar SR = $.SampleRate;\n\n\t\t\t$.phaseParams = P;\n\n\t\t\t$.phaseSpeed = P.Start * TAU / SR;\n\t\t\t$.phaseSpeedMax = P.Max * TAU / SR;\n\t\t\t$.phaseSpeedMin = P.Min * TAU / SR;\n\n\t\t\t$.phaseSpeedMin = Math.min($.phaseSpeedMin, $.phaseSpeed);\n\t\t\t$.phaseSpeedMax = Math.max($.phaseSpeedMax, $.phaseSpeed);\n\n\t\t\t$.phaseSlide = 1.0 + pow(P.Slide, 3.0) * 64.0 / SR;\n\t\t\t$.phaseDeltaSlide = pow(P.DeltaSlide, 3.0) / (SR * 1000);\n\n\t\t\t$.repeatTime = 0;\n\t\t\t$.repeatLimit = Infinity;\n\t\t\tif (P.RepeatSpeed > 0) {\n\t\t\t\t$.repeatLimit = P.RepeatSpeed * SR;\n\t\t\t}\n\n\t\t\t$.arpeggiatorTime = 0;\n\t\t\t$.arpeggiatorLimit = P.ChangeSpeed * SR;\n\t\t\tif (P.ChangeAmount == 0) {\n\t\t\t\t$.arpeggiatorLimit = Infinity;\n\t\t\t}\n\t\t\t$.arpeggiatorMod = 1 + P.ChangeAmount / 12.0;\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\tvar speed = +$.phaseSpeed,\n\t\t\t\tmin = +$.phaseSpeedMin,\n\t\t\t\tmax = +$.phaseSpeedMax,\n\t\t\t\tslide = +$.phaseSlide,\n\t\t\t\tdeltaSlide = +$.phaseDeltaSlide;\n\n\t\t\tvar repeatTime = $.repeatTime,\n\t\t\t\trepeatLimit = $.repeatLimit;\n\n\t\t\tvar arpTime = $.arpeggiatorTime,\n\t\t\t\tarpLimit = $.arpeggiatorLimit,\n\t\t\t\tarpMod = $.arpeggiatorMod;\n\n\t\t\tfor (var i = 0; i < block.length; i++) {\n\t\t\t\tslide += deltaSlide;\n\t\t\t\tspeed *= slide;\n\t\t\t\tspeed = speed < min ? min : speed > max ? max : speed;\n\n\t\t\t\tif (repeatTime > repeatLimit) {\n\t\t\t\t\tthis.setup($, $.phaseParams);\n\t\t\t\t\treturn i + this.process($, block.subarray(i)) - 1;\n\t\t\t\t}\n\t\t\t\trepeatTime++;\n\n\t\t\t\tif (arpTime > arpLimit) {\n\t\t\t\t\tspeed *= arpMod;\n\t\t\t\t\tarpTime = 0;\n\t\t\t\t\tarpLimit = Infinity;\n\t\t\t\t}\n\t\t\t\tarpTime++;\n\n\t\t\t\tblock[i] += speed;\n\t\t\t}\n\n\t\t\t$.repeatTime = repeatTime;\n\t\t\t$.arpeggiatorTime = arpTime;\n\t\t\t$.arpeggiatorLimit = arpLimit;\n\n\t\t\t$.phaseSpeed = speed;\n\t\t\t$.phaseSlide = slide;\n\n\t\t\treturn block.length;\n\t\t}\n\t};\n\n\t// Vibrato\n\tjsfx.Module.Vibrato = {\n\t\tname: 'Vibrato',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\tDepth:      {L: 0, H:1, D:0},\n\t\t\tDepthSlide: {L:-1, H:1, D:0},\n\n\t\t\tFrequency:      {L:  0.01, H:48, D:0},\n\t\t\tFrequencySlide: {L: -1.00, H: 1, D:0}\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.PhaseSpeedMod,\n\t\tsetup: function($, P) {\n\t\t\tvar SR = $.SampleRate;\n\t\t\t$.vibratoPhase = 0;\n\t\t\t$.vibratoDepth = P.Depth;\n\t\t\t$.vibratoPhaseSpeed = P.Frequency * TAU / SR;\n\n\t\t\t$.vibratoPhaseSpeedSlide = 1.0 + pow(P.FrequencySlide, 3.0) * 3.0 / SR;\n\t\t\t$.vibratoDepthSlide = P.DepthSlide / SR;\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\tvar phase = +$.vibratoPhase,\n\t\t\t\tdepth = +$.vibratoDepth,\n\t\t\t\tspeed = +$.vibratoPhaseSpeed,\n\t\t\t\tslide = +$.vibratoPhaseSpeedSlide,\n\t\t\t\tdepthSlide = +$.vibratoDepthSlide;\n\n\t\t\tif ((depth == 0) && (depthSlide <= 0)) {\n\t\t\t\treturn block.length;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < block.length; i++) {\n\t\t\t\tphase += speed;\n\t\t\t\tif (phase > TAU) {\n\t\t\t\t\tphase -= TAU\n\t\t\t\t};\n\t\t\t\tblock[i] += block[i] * sin(phase) * depth;\n\n\t\t\t\tspeed *= slide;\n\t\t\t\tdepth += depthSlide;\n\t\t\t\tdepth = clamp1(depth);\n\t\t\t}\n\n\t\t\t$.vibratoPhase = phase;\n\t\t\t$.vibratoDepth = depth;\n\t\t\t$.vibratoPhaseSpeed = speed;\n\t\t\treturn block.length;\n\t\t}\n\t};\n\n\t// Generator\n\tjsfx.Module.Generator = {\n\t\tname: 'Generator',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\t// C = choose\n\t\t\tFunc: {C: jsfx.G, D:'square'},\n\n\t\t\tA: {L: 0, H: 1, D: 0},\n\t\t\tB: {L: 0, H: 1, D: 0},\n\n\t\t\tASlide: {L: -1, H: 1, D: 0},\n\t\t\tBSlide: {L: -1, H: 1, D: 0}\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.Generator,\n\t\tsetup: function($, P) {\n\t\t\t$.generatorPhase = 0;\n\n\t\t\tif (typeof P.Func === 'string') {\n\t\t\t\t$.generator = jsfx.G[P.Func];\n\t\t\t} else {\n\t\t\t\t$.generator = P.Func;\n\t\t\t}\n\t\t\tif (typeof $.generator === 'object') {\n\t\t\t\t$.generator = $.generator.create();\n\t\t\t}\n\t\t\tassert(typeof $.generator === 'function', 'generator must be a function')\n\n\t\t\t$.generatorA = P.A;\n\t\t\t$.generatorASlide = P.ASlide;\n\t\t\t$.generatorB = P.B;\n\t\t\t$.generatorBSlide = P.BSlide;\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\treturn $.generator($, block);\n\t\t}\n\t};\n\n\t// Karplus Strong algorithm for string sound\n\tvar GuitarBufferSize = 1 << 16;\n\tjsfx.Module.Guitar = {\n\t\tname: 'Guitar',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\tA: {L:0.0, H:1.0, D: 1},\n\t\t\tB: {L:0.0, H:1.0, D: 1},\n\t\t\tC: {L:0.0, H:1.0, D: 1}\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.Generator,\n\t\tsetup: function($, P) {\n\t\t\t$.guitarA = P.A;\n\t\t\t$.guitarB = P.B;\n\t\t\t$.guitarC = P.C;\n\n\t\t\t$.guitarBuffer = createFloatArray(GuitarBufferSize);\n\t\t\t$.guitarHead = 0;\n\t\t\tvar B = $.guitarBuffer;\n\t\t\tfor (var i = 0; i < B.length; i++) {\n\t\t\t\tB[i] = Math.random() * 2 - 1;\n\t\t\t}\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\tvar BS = GuitarBufferSize,\n\t\t\t\tBM = BS - 1;\n\n\t\t\tvar A = +$.guitarA,\n\t\t\t\tB = +$.guitarB,\n\t\t\t\tC = +$.guitarC;\n\t\t\tvar T = A + B + C;\n\t\t\tvar h = $.guitarHead;\n\n\t\t\tvar buffer = $.guitarBuffer;\n\t\t\tfor (var i = 0; i < block.length; i++) {\n\t\t\t\t// buffer size\n\t\t\t\tvar n = (TAU / block[i]) | 0;\n\t\t\t\tn = n > BS ? BS : n;\n\n\t\t\t\t// tail\n\t\t\t\tvar t = ((h - n) + BS) & BM;\n\t\t\t\tbuffer[h] =\n\t\t\t\t\t(buffer[(t - 0 + BS) & BM] * A +\n\t\t\t\t\t\tbuffer[(t - 1 + BS) & BM] * B +\n\t\t\t\t\t\tbuffer[(t - 2 + BS) & BM] * C) / T;\n\n\t\t\t\tblock[i] = buffer[h];\n\t\t\t\th = (h + 1) & BM;\n\t\t\t}\n\n\t\t\t$.guitarHead = h;\n\t\t\treturn block.length;\n\t\t}\n\t}\n\n\t// Low/High-Pass Filter\n\tjsfx.Module.Filter = {\n\t\tname: 'Filter',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\tLP:          {L: 0, H:1, D:1},\n\t\t\tLPSlide:     {L:-1, H:1, D:0},\n\t\t\tLPResonance: {L: 0, H:1, D:0},\n\t\t\tHP:          {L: 0, H:1, D:0},\n\t\t\tHPSlide:     {L:-1, H:1, D:0}\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.SampleMod + 0,\n\t\tsetup: function($, P) {\n\t\t\t$.FilterEnabled = (P.HP > EPSILON) || (P.LP < 1 - EPSILON);\n\n\t\t\t$.LPEnabled = P.LP < 1 - EPSILON;\n\t\t\t$.LP = pow(P.LP, 3.0) / 10;\n\t\t\t$.LPSlide = 1.0 + P.LPSlide * 100 / $.SampleRate;\n\t\t\t$.LPPos = 0;\n\t\t\t$.LPPosSlide = 0;\n\n\t\t\t$.LPDamping = 5.0 / (1.0 + pow(P.LPResonance, 2) * 20) * (0.01 + P.LP);\n\t\t\t$.LPDamping = 1.0 - Math.min($.LPDamping, 0.8);\n\n\t\t\t$.HP = pow(P.HP, 2.0) / 10;\n\t\t\t$.HPPos = 0;\n\t\t\t$.HPSlide = 1.0 + P.HPSlide * 100 / $.SampleRate;\n\t\t},\n\t\tenabled: function($) {\n\t\t\treturn $.FilterEnabled;\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\tif (!this.enabled($)) {\n\t\t\t\treturn block.length;\n\t\t\t}\n\n\t\t\tvar lp = +$.LP;\n\t\t\tvar lpPos = +$.LPPos;\n\t\t\tvar lpPosSlide = +$.LPPosSlide;\n\t\t\tvar lpSlide = +$.LPSlide;\n\t\t\tvar lpDamping = +$.LPDamping;\n\t\t\tvar lpEnabled = +$.LPEnabled;\n\n\t\t\tvar hp = +$.HP;\n\t\t\tvar hpPos = +$.HPPos;\n\t\t\tvar hpSlide = +$.HPSlide;\n\n\t\t\tfor (var i = 0; i < block.length; i++) {\n\t\t\t\tif ((hp > EPSILON) || (hp < -EPSILON)) {\n\t\t\t\t\thp *= hpSlide;\n\t\t\t\t\thp = hp < EPSILON ? EPSILON : hp > 0.1 ? 0.1 : hp;\n\t\t\t\t}\n\n\t\t\t\tvar lpPos_ = lpPos;\n\n\t\t\t\tlp *= lpSlide;\n\t\t\t\tlp = lp < 0 ? lp = 0 : lp > 0.1 ? 0.1 : lp;\n\n\t\t\t\tvar sample = block[i];\n\t\t\t\tif (lpEnabled) {\n\t\t\t\t\tlpPosSlide += (sample - lpPos) * lp;\n\t\t\t\t\tlpPosSlide *= lpDamping;\n\t\t\t\t} else {\n\t\t\t\t\tlpPos = sample;\n\t\t\t\t\tlpPosSlide = 0;\n\t\t\t\t}\n\t\t\t\tlpPos += lpPosSlide;\n\n\t\t\t\thpPos += lpPos - lpPos_;\n\t\t\t\thpPos *= 1.0 - hp;\n\n\t\t\t\tblock[i] = hpPos;\n\t\t\t}\n\n\t\t\t$.LPPos = lpPos;\n\t\t\t$.LPPosSlide = lpPosSlide;\n\t\t\t$.LP = lp;\n\t\t\t$.HP = hp;\n\t\t\t$.HPPos = hpPos;\n\n\t\t\treturn block.length;\n\t\t}\n\t};\n\n\t// Phaser Effect\n\tvar PhaserBufferSize = 1 << 10;\n\tjsfx.Module.Phaser = {\n\t\tname: 'Phaser',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\tOffset: {L:-1, H:1, D:0},\n\t\t\tSweep:  {L:-1, H:1, D:0}\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.SampleMod + 1,\n\t\tsetup: function($, P) {\n\t\t\t$.phaserBuffer = createFloatArray(PhaserBufferSize);\n\t\t\t$.phaserPos = 0;\n\t\t\t$.phaserOffset = pow(P.Offset, 2.0) * (PhaserBufferSize - 4);\n\t\t\t$.phaserOffsetSlide = pow(P.Sweep, 3.0) * 4000 / $.SampleRate;\n\t\t},\n\t\tenabled: function($) {\n\t\t\treturn (abs($.phaserOffsetSlide) > EPSILON) ||\n\t\t\t\t(abs($.phaserOffset) > EPSILON);\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\tif (!this.enabled($)) {\n\t\t\t\treturn block.length;\n\t\t\t}\n\n\t\t\tvar BS = PhaserBufferSize,\n\t\t\t\tBM = BS - 1;\n\n\t\t\tvar buffer = $.phaserBuffer,\n\t\t\t\tpos = $.phaserPos | 0,\n\t\t\t\toffset = +$.phaserOffset,\n\t\t\t\toffsetSlide = +$.phaserOffsetSlide;\n\n\t\t\tfor (var i = 0; i < block.length; i++) {\n\t\t\t\toffset += offsetSlide;\n\t\t\t\t//TODO: check whether this is correct\n\t\t\t\tif (offset < 0) {\n\t\t\t\t\toffset = -offset;\n\t\t\t\t\toffsetSlide = -offsetSlide;\n\t\t\t\t}\n\t\t\t\tif (offset > BM) {\n\t\t\t\t\toffset = BM;\n\t\t\t\t\toffsetSlide = 0;\n\t\t\t\t}\n\n\t\t\t\tbuffer[pos] = block[i];\n\t\t\t\tvar p = (pos - (offset | 0) + BS) & BM;\n\t\t\t\tblock[i] += buffer[p];\n\n\t\t\t\tpos = ((pos + 1) & BM) | 0;\n\t\t\t}\n\n\t\t\t$.phaserPos = pos;\n\t\t\t$.phaserOffset = offset;\n\t\t\treturn block.length;\n\t\t}\n\t};\n\n\t// Volume dynamic control with Attack-Sustain-Decay\n\t//   ATTACK  | 0              - Volume + Punch\n\t//   SUSTAIN | Volume + Punch - Volume\n\t//   DECAY   | Volume         - 0\n\tjsfx.Module.Volume = {\n\t\tname: 'Volume',\n\t\tparams: {\n\t\t\t/* beautify preserve:start */\n\t\t\tMaster:  { L: 0, H: 1, D: 0.5 },\n\t\t\tAttack:  { L: 0.001, H: 1, D: 0.01 },\n\t\t\tSustain: { L: 0, H: 2, D: 0.3 },\n\t\t\tPunch:   { L: 0, H: 3, D: 1.0 },\n\t\t\tDecay:   { L: 0.001, H: 2, D: 1.0 }\n\t\t\t/* beautify preserve:end */\n\t\t},\n\t\tstage: stage.Volume,\n\t\tsetup: function($, P) {\n\t\t\tvar SR = $.SampleRate;\n\t\t\tvar V = P.Master;\n\t\t\tvar VP = V * (1 + P.Punch);\n\t\t\t$.envelopes = [\n\t\t\t\t// S = start volume, E = end volume, N = duration in samples\n\t\t\t\t{\n\t\t\t\t\tS: 0,\n\t\t\t\t\tE: V,\n\t\t\t\t\tN: (P.Attack * SR) | 0\n\t\t\t\t}, // Attack\n\t\t\t\t{\n\t\t\t\t\tS: VP,\n\t\t\t\t\tE: V,\n\t\t\t\t\tN: (P.Sustain * SR) | 0\n\t\t\t\t}, // Sustain\n\t\t\t\t{\n\t\t\t\t\tS: V,\n\t\t\t\t\tE: 0,\n\t\t\t\t\tN: (P.Decay * SR) | 0\n\t\t\t\t} // Decay\n\t\t\t];\n\t\t\t// G = volume gradient\n\t\t\tfor (var i = 0; i < $.envelopes.length; i += 1) {\n\t\t\t\tvar e = $.envelopes[i];\n\t\t\t\te.G = (e.E - e.S) / e.N;\n\t\t\t}\n\t\t},\n\t\tprocess: function($, block) {\n\t\t\tvar i = 0;\n\t\t\twhile (($.envelopes.length > 0) && (i < block.length)) {\n\t\t\t\tvar E = $.envelopes[0];\n\t\t\t\tvar vol = E.S,\n\t\t\t\t\tgrad = E.G;\n\n\t\t\t\tvar N = Math.min(block.length - i, E.N) | 0;\n\t\t\t\tvar end = (i + N) | 0;\n\t\t\t\tfor (; i < end; i += 1) {\n\t\t\t\t\tblock[i] *= vol;\n\t\t\t\t\tvol += grad;\n\t\t\t\t\tvol = clamp(vol, 0, 10);\n\t\t\t\t}\n\t\t\t\tE.S = vol;\n\t\t\t\tE.N -= N;\n\t\t\t\tif (E.N <= 0) {\n\t\t\t\t\t$.envelopes.shift();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn i;\n\t\t}\n\t};\n\n\t// PRESETS\n\n\tjsfx.DefaultModules = [\n\t\tjsfx.Module.Frequency,\n\t\tjsfx.Module.Vibrato,\n\t\tjsfx.Module.Generator,\n\t\tjsfx.Module.Filter,\n\t\tjsfx.Module.Phaser,\n\t\tjsfx.Module.Volume\n\t];\n\tjsfx.DefaultModules.sort(byStage);\n\n\tjsfx.EmptyParams = EmptyParams;\n\n\tfunction EmptyParams() {\n\t\treturn map_object(jsfx.Module, function() {\n\t\t\treturn {}\n\t\t});\n\t}\n\n\tjsfx._RemoveEmptyParams = RemoveEmptyParams;\n\n\tfunction RemoveEmptyParams(params) {\n\t\tfor (var name in params) {\n\t\t\tif (Object_keys(params[name]).length == 0) {\n\t\t\t\tdelete params[name];\n\t\t\t}\n\t\t}\n\t};\n\n\tjsfx.Preset = {\n\t\tReset: function() {\n\t\t\treturn EmptyParams();\n\t\t},\n\t\tCoin: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tp.Frequency.Start = runif(880, 660);\n\t\t\tp.Volume.Sustain = runif(0.1);\n\t\t\tp.Volume.Decay = runif(0.4, 0.1);\n\t\t\tp.Volume.Punch = runif(0.3, 0.3);\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Frequency.ChangeSpeed = runif(0.15, 0.1);\n\t\t\t\tp.Frequency.ChangeAmount = runif(8, 4);\n\t\t\t}\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tLaser: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tp.Generator.Func = rchoose(['square', 'saw', 'sine']);\n\n\t\t\tif (runif() < 0.33) {\n\t\t\t\tp.Frequency.Start = runif(880, 440);\n\t\t\t\tp.Frequency.Min = runif(0.1);\n\t\t\t\tp.Frequency.Slide = runif(0.3, -0.8);\n\t\t\t} else {\n\t\t\t\tp.Frequency.Start = runif(1200, 440);\n\t\t\t\tp.Frequency.Min = p.Frequency.Start - runif(880, 440);\n\t\t\t\tif (p.Frequency.Min < 110) {\n\t\t\t\t\tp.Frequency.Min = 110;\n\t\t\t\t}\n\t\t\t\tp.Frequency.Slide = runif(0.3, -1);\n\t\t\t}\n\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Generator.A = runif(0.5);\n\t\t\t\tp.Generator.ASlide = runif(0.2);\n\t\t\t} else {\n\t\t\t\tp.Generator.A = runif(0.5, 0.4);\n\t\t\t\tp.Generator.ASlide = runif(0.7);\n\t\t\t}\n\n\t\t\tp.Volume.Sustain = runif(0.2, 0.1);\n\t\t\tp.Volume.Decay = runif(0.4);\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Volume.Punch = runif(0.3);\n\t\t\t}\n\t\t\tif (runif() < 0.33) {\n\t\t\t\tp.Phaser.Offset = runif(0.2);\n\t\t\t\tp.Phaser.Sweep = runif(0.2);\n\t\t\t}\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Filter.HP = runif(0.3);\n\t\t\t}\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tExplosion: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tp.Generator.Func = 'noise';\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Frequency.Start = runif(440, 40);\n\t\t\t\tp.Frequency.Slide = runif(0.4, -0.1);\n\t\t\t} else {\n\t\t\t\tp.Frequency.Start = runif(1600, 220);\n\t\t\t\tp.Frequency.Slide = runif(-0.2, -0.2);\n\t\t\t}\n\n\t\t\tif (runif() < 0.2) {\n\t\t\t\tp.Frequency.Slide = 0;\n\t\t\t}\n\t\t\tif (runif() < 0.3) {\n\t\t\t\tp.Frequency.RepeatSpeed = runif(0.5, 0.3);\n\t\t\t}\n\n\t\t\tp.Volume.Sustain = runif(0.3, 0.1);\n\t\t\tp.Volume.Decay = runif(0.5);\n\t\t\tp.Volume.Punch = runif(0.6, 0.2);\n\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Phaser.Offset = runif(0.9, -0.3);\n\t\t\t\tp.Phaser.Sweep = runif(-0.3);\n\t\t\t}\n\n\t\t\tif (runif() < 0.33) {\n\t\t\t\tp.Frequency.ChangeSpeed = runif(0.3, 0.6);\n\t\t\t\tp.Frequency.ChangeAmount = runif(24, -12);\n\t\t\t}\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tPowerup: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Generator.Func = 'saw';\n\t\t\t} else {\n\t\t\t\tp.Generator.A = runif(0.6);\n\t\t\t}\n\n\t\t\tp.Frequency.Start = runif(220, 440);\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Frequency.Slide = runif(0.5, 0.2);\n\t\t\t\tp.Frequency.RepeatSpeed = runif(0.4, 0.4);\n\t\t\t} else {\n\t\t\t\tp.Frequency.Slide = runif(0.2, 0.05);\n\t\t\t\tif (runif() < 0.5) {\n\t\t\t\t\tp.Vibrato.Depth = runif(0.6, 0.1);\n\t\t\t\t\tp.Vibrato.Frequency = runif(30, 10);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.Volume.Sustain = runif(0.4);\n\t\t\tp.Volume.Decay = runif(0.4, 0.1);\n\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tHit: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tp.Generator.Func = rchoose(['square', 'saw', 'noise']);\n\t\t\tp.Generator.A = runif(0.6);\n\t\t\tp.Generator.ASlide = runif(1, -0.5);\n\n\t\t\tp.Frequency.Start = runif(880, 220);\n\t\t\tp.Frequency.Slide = -runif(0.4, 0.3);\n\n\t\t\tp.Volume.Sustain = runif(0.1);\n\t\t\tp.Volume.Decay = runif(0.2, 0.1);\n\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Filter.HP = runif(0.3);\n\t\t\t}\n\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tJump: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tp.Generator.Func = 'square';\n\t\t\tp.Generator.A = runif(0.6);\n\n\t\t\tp.Frequency.Start = runif(330, 330);\n\t\t\tp.Frequency.Slide = runif(0.4, 0.2);\n\n\t\t\tp.Volume.Sustain = runif(0.3, 0.1);\n\t\t\tp.Volume.Decay = runif(0.2, 0.1);\n\n\t\t\tif (runif() < 0.5) {\n\t\t\t\tp.Filter.HP = runif(0.3);\n\t\t\t}\n\t\t\tif (runif() < 0.3) {\n\t\t\t\tp.Filter.LP = runif(-0.6, 1);\n\t\t\t}\n\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tSelect: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tp.Generator.Func = rchoose(['square', 'saw']);\n\t\t\tp.Generator.A = runif(0.6);\n\n\t\t\tp.Frequency.Start = runif(660, 220);\n\n\t\t\tp.Volume.Sustain = runif(0.1, 0.1);\n\t\t\tp.Volume.Decay = runif(0.2);\n\n\t\t\tp.Filter.HP = 0.2;\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t},\n\t\tLucky: function() {\n\t\t\tvar p = EmptyParams();\n\t\t\tmap_object(p, function(out, moduleName) {\n\t\t\t\tvar defs = jsfx.Module[moduleName].params;\n\t\t\t\tmap_object(defs, function(def, name) {\n\t\t\t\t\tif (def.C) {\n\t\t\t\t\t\tvar values = Object_keys(def.C);\n\t\t\t\t\t\tout[name] = values[(values.length * Math.random()) | 0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tout[name] = Math.random() * (def.H - def.L) + def.L;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tp.Volume.Master = 0.4;\n\t\t\tp.Filter = {}; // disable filter, as it usually will clip everything\n\t\t\tRemoveEmptyParams(p);\n\t\t\treturn p;\n\t\t}\n\t};\n\n\t// GENERATORS\n\n\t// uniform noise\n\tjsfx.G.unoise = newGenerator(\"sample = Math.random();\");\n\t// sine wave\n\tjsfx.G.sine = newGenerator(\"sample = Math.sin(phase);\");\n\t// saw wave\n\tjsfx.G.saw = newGenerator(\"sample = 2*(phase/TAU - ((phase/TAU + 0.5)|0));\");\n\t// triangle wave\n\tjsfx.G.triangle = newGenerator(\"sample = Math.abs(4 * ((phase/TAU - 0.25)%1) - 2) - 1;\");\n\t// square wave\n\tjsfx.G.square = newGenerator(\"var s = Math.sin(phase); sample = s > A ? 1.0 : s < A ? -1.0 : A;\");\n\t// simple synth\n\tjsfx.G.synth = newGenerator(\"sample = Math.sin(phase) + .5*Math.sin(phase/2) + .3*Math.sin(phase/4);\");\n\n\t// STATEFUL\n\tvar __noiseLast = 0;\n\tjsfx.G.noise = newGenerator(\"if(phase % TAU < 4){__noiseLast = Math.random() * 2 - 1;} sample = __noiseLast;\");\n\n\t// Karplus-Strong string\n\tjsfx.G.string = {\n\t\tcreate: function() {\n\t\t\tvar BS = 1 << 16;\n\t\t\tvar BM = BS - 1;\n\n\t\t\tvar buffer = createFloatArray(BS);\n\t\t\tfor (var i = 0; i < buffer.length; i++) {\n\t\t\t\tbuffer[i] = Math.random() * 2 - 1;\n\t\t\t}\n\n\t\t\tvar head = 0;\n\t\t\treturn function($, block) {\n\t\t\t\tvar TAU = Math.PI * 2;\n\t\t\t\tvar A = +$.generatorA,\n\t\t\t\t\tASlide = +$.generatorASlide,\n\t\t\t\t\tB = +$.generatorB,\n\t\t\t\t\tBSlide = +$.generatorBSlide;\n\t\t\t\tvar buf = buffer;\n\n\t\t\t\tfor (var i = 0; i < block.length; i++) {\n\t\t\t\t\tvar phaseSpeed = block[i];\n\t\t\t\t\tvar n = (TAU / phaseSpeed) | 0;\n\t\t\t\t\tA += ASlide;\n\t\t\t\t\tB += BSlide;\n\t\t\t\t\tA = A < 0 ? 0 : A > 1 ? 1 : A;\n\t\t\t\t\tB = B < 0 ? 0 : B > 1 ? 1 : B;\n\n\t\t\t\t\tvar t = ((head - n) + BS) & BM;\n\t\t\t\t\tvar sample = (\n\t\t\t\t\t\tbuf[(t - 0 + BS) & BM] * 1 +\n\t\t\t\t\t\tbuf[(t - 1 + BS) & BM] * A +\n\t\t\t\t\t\tbuf[(t - 2 + BS) & BM] * B) / (1 + A + B);\n\n\t\t\t\t\tbuf[head] = sample;\n\t\t\t\t\tblock[i] = buf[head];\n\t\t\t\t\thead = (head + 1) & BM;\n\t\t\t\t}\n\n\t\t\t\t$.generatorA = A;\n\t\t\t\t$.generatorB = B;\n\t\t\t\treturn block.length;\n\t\t\t}\n\t\t}\n\t};\n\n\t// Generates samples using given frequency and generator\n\tfunction newGenerator(line) {\n\t\treturn new Function(\"$\", \"block\", \"\" +\n\t\t\t\"var TAU = Math.PI * 2;\\n\" +\n\t\t\t\"var sample;\\n\" +\n\t\t\t\"var phase = +$.generatorPhase,\\n\" +\n\t\t\t\"\tA = +$.generatorA, ASlide = +$.generatorASlide,\\n\" +\n\t\t\t\"\tB = +$.generatorB, BSlide = +$.generatorBSlide;\\n\" +\n\t\t\t\"\\n\" +\n\t\t\t\"for(var i = 0; i < block.length; i++){\\n\" +\n\t\t\t\"\tvar phaseSpeed = block[i];\\n\" +\n\t\t\t\"\tphase += phaseSpeed;\\n\" +\n\t\t\t\"\tif(phase > TAU){ phase -= TAU };\\n\" +\n\t\t\t\"\tA += ASlide; B += BSlide;\\n\" +\n\t\t\t\"   A = A < 0 ? 0 : A > 1 ? 1 : A;\\n\" +\n\t\t\t\"   B = B < 0 ? 0 : B > 1 ? 1 : B;\\n\" +\n\t\t\tline +\n\t\t\t\"\tblock[i] = sample;\\n\" +\n\t\t\t\"}\\n\" +\n\t\t\t\"\\n\" +\n\t\t\t\"$.generatorPhase = phase;\\n\" +\n\t\t\t\"$.generatorA = A;\\n\" +\n\t\t\t\"$.generatorB = B;\\n\" +\n\t\t\t\"return block.length;\\n\" +\n\t\t\t\"\");\n\t}\n\n\t// WAVE SUPPORT\n\n\t// Creates an Wave byte array from audio data [-1.0 .. 1.0]\n\tjsfx.CreateWave = CreateWave;\n\n\tfunction CreateWave(data) {\n\t\tif (typeof Float32Array !== \"undefined\") {\n\t\t\tassert(data instanceof Float32Array, 'data must be an Float32Array');\n\t\t}\n\n\t\tvar blockAlign = numChannels * bitsPerSample >> 3;\n\t\tvar byteRate = jsfx.SampleRate * blockAlign;\n\n\t\tvar output = createByteArray(8 + 36 + data.length * 2);\n\t\tvar p = 0;\n\n\t\t// emits string to output\n\t\tfunction S(value) {\n\t\t\tfor (var i = 0; i < value.length; i += 1) {\n\t\t\t\toutput[p] = value.charCodeAt(i);\n\t\t\t\tp++;\n\t\t\t}\n\t\t}\n\n\t\t// emits integer value to output\n\t\tfunction V(value, nBytes) {\n\t\t\tif (nBytes <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toutput[p] = value & 0xFF;\n\t\t\tp++;\n\t\t\tV(value >> 8, nBytes - 1);\n\t\t}\n\t\t/* beautify preserve:start */\n\t\tS('RIFF'); V(36 + data.length * 2, 4);\n\n\t\tS('WAVEfmt '); V(16, 4); V(1, 2);\n\t\tV(numChannels, 2); V(jsfx.SampleRate, 4);\n\t\tV(byteRate, 4); V(blockAlign, 2); V(bitsPerSample, 2);\n\n\t\tS('data'); V(data.length * 2, 4);\n\t\tCopyFToU8(output.subarray(p), data);\n\t\t/* beautify preserve:end */\n\n\t\treturn output;\n\t};\n\n\t// Creates an Audio element from audio data [-1.0 .. 1.0]\n\tjsfx.CreateAudio = CreateAudio;\n\n\tfunction CreateAudio(data) {\n\t\tvar wave = CreateWave(data);\n\t\treturn new Audio('data:audio/wav;base64,' + U8ToB64(wave));\n\t};\n\n\tjsfx.DownloadAsFile = function(audio) {\n\t\tassert(audio instanceof Audio, 'input must be an Audio object');\n\t\tdocument.location.href = audio.src;\n\t};\n\n\t// HELPERS\n\tjsfx.Util = {};\n\n\t// Copies array of Floats to a Uint8Array with 16bits per sample\n\tjsfx.Util.CopyFToU8 = CopyFToU8;\n\n\tfunction CopyFToU8(into, floats) {\n\t\tassert(into.length / 2 == floats.length,\n\t\t\t'the target buffer must be twice as large as the iinput');\n\n\t\tvar k = 0;\n\t\tfor (var i = 0; i < floats.length; i++) {\n\t\t\tvar v = +floats[i];\n\t\t\tvar a = (v * 0x7FFF) | 0;\n\t\t\ta = a < -0x8000 ? -0x8000 : 0x7FFF < a ? 0x7FFF : a;\n\t\t\ta += a < 0 ? 0x10000 : 0;\n\t\t\tinto[k] = a & 0xFF;\n\t\t\tk++;\n\t\t\tinto[k] = a >> 8;\n\t\t\tk++;\n\t\t}\n\t}\n\n\t// Encodes Uint8Array with base64\n\tjsfx.Util.U8ToB64 = U8ToB64;\n\n\tfunction U8ToB64(data) {\n\t\tvar CHUNK = 0x8000;\n\t\tvar result = '';\n\t\tfor (var start = 0; start < data.length; start += CHUNK) {\n\t\t\tvar end = Math.min(start + CHUNK, data.length);\n\t\t\tresult += String.fromCharCode.apply(null, data.subarray(start, end));\n\t\t}\n\t\treturn btoa(result);\n\t}\n\n\t// uses AudioContext sampleRate or 44100;\n\tfunction getDefaultSampleRate() {\n\t\tif (typeof AudioContext !== 'undefined') {\n\t\t\treturn (new AudioContext()).sampleRate;\n\t\t}\n\t\treturn 44100;\n\t}\n\n\t// for checking pre/post conditions\n\tfunction assert(condition, message) {\n\t\tif (!condition) {\n\t\t\tthrow new Error(message);\n\t\t}\n\t}\n\n\tfunction clamp(v, min, max) {\n\t\tv = +v;\n\t\tmin = +min;\n\t\tmax = +max;\n\t\tif (v < min) {\n\t\t\treturn +min;\n\t\t}\n\t\tif (v > max) {\n\t\t\treturn +max;\n\t\t}\n\t\treturn +v;\n\t}\n\n\tfunction clamp1(v) {\n\t\tv = +v;\n\t\tif (v < +0.0) {\n\t\t\treturn +0.0;\n\t\t}\n\t\tif (v > +1.0) {\n\t\t\treturn +1.0;\n\t\t}\n\t\treturn +v;\n\t}\n\n\tfunction map_object(obj, fn) {\n\t\tvar r = {};\n\t\tfor (var name in obj) {\n\t\t\tif (obj.hasOwnProperty(name)) {\n\t\t\t\tr[name] = fn(obj[name], name);\n\t\t\t}\n\t\t}\n\t\treturn r;\n\t}\n\n\t// uniform random\n\tfunction runif(scale, offset) {\n\t\tvar a = Math.random();\n\t\tif (scale !== undefined)\n\t\t\ta *= scale;\n\t\tif (offset !== undefined)\n\t\t\ta += offset;\n\t\treturn a;\n\t}\n\n\tfunction rchoose(gens) {\n\t\treturn gens[(gens.length * Math.random()) | 0];\n\t}\n\n\tfunction Object_keys(obj) {\n\t\tvar r = [];\n\t\tfor (var name in obj) {\n\t\t\tr.push(name);\n\t\t}\n\t\treturn r;\n\t}\n\n\tjsfx._createFloatArray = createFloatArray;\n\n\tfunction createFloatArray(N) {\n\t\tif (typeof Float32Array === \"undefined\") {\n\t\t\tvar r = new Array(N);\n\t\t\tfor (var i = 0; i < r.length; i++) {\n\t\t\t\tr[i] = 0.0;\n\t\t\t}\n\t\t}\n\t\treturn new Float32Array(N);\n\t}\n\n\tfunction createByteArray(N) {\n\t\tif (typeof Uint8Array === \"undefined\") {\n\t\t\tvar r = new Array(N);\n\t\t\tfor (var i = 0; i < r.length; i++) {\n\t\t\t\tr[i] = 0 | 0;\n\t\t\t}\n\t\t}\n\t\treturn new Uint8Array(N);\n\t}\n\n\treturn jsfx;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./lib/js/jsfx.js"],"sourceRoot":""}